<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:26:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8297539] Use PrimitiveConversions::cast for local uses of the int&lt;-&gt;float union conversion trick</title>
                <link>https://bugs.openjdk.org/browse/JDK-8297539</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8295351&quot; title=&quot;java/lang/Float/Binary16Conversion.java fails with &amp;quot;Unexpected result of converting&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8295351&quot;&gt;&lt;strike&gt;JDK-8295351&lt;/strike&gt;&lt;/a&gt; reemployed the basic union trick for converting  int&amp;lt;-&amp;gt;float in sharedRuntime.cpp. But we also have the the existing JavaValue type which is also a union and can be used for the same conversion trick. And then we also have the cast function in metaprogramming/primitiveConversions.hpp. There may be other cases too.&lt;br/&gt;
&lt;br/&gt;
It would be good if we could standardise on the use of this technique so that we don&amp;#39;t duplicate it in numerous places.&lt;br/&gt;
&lt;br/&gt;
Note this RFE is to fix the int&amp;lt;-&amp;gt;float union conversion tricks found in various bits of code to use PrimitiveConversions::cast() and not to change JavaValue. Changing JavaValue (if there&amp;#39;s a reason to do this) needs to be explored in another RFE.&lt;br/&gt;
This RFE moves in the direction of consolidation towards calling PrimitiveConversions::cast.</description>
                <environment></environment>
        <key id="5088218">JDK-8297539</key>
            <summary>Use PrimitiveConversions::cast for local uses of the int&lt;-&gt;float union conversion trick</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azafari">Afshin Zafari</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>cleanup</label>
                            <label>cpp</label>
                            <label>noreg-cleanup</label>
                    </labels>
                <created>Wed, 23 Nov 2022 16:08:37 -0800</created>
                <updated>Fri, 13 Jun 2025 03:21:27 -0700</updated>
                            <resolved>Fri, 31 Mar 2023 18:03:47 -0700</resolved>
                                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14571090" author="dukebot" created="Fri, 31 Mar 2023 18:03:46 -0700"  >Changeset: a19b28ab&lt;br/&gt;
Author:    Afshin Zafari &amp;lt;&lt;a href=&apos;mailto:Afshin.zafari@oracle.com&apos;&gt;Afshin.zafari@oracle.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: David Holmes &amp;lt;&lt;a href=&apos;mailto:dholmes@openjdk.org&apos;&gt;dholmes@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-01 01:02:05 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a19b28ab3ed2d2da4eb04ce9b187dda8a75ba16a&quot;&gt;https://git.openjdk.org/jdk/commit/a19b28ab3ed2d2da4eb04ce9b187dda8a75ba16a&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14569628" author="roboduke" created="Mon, 27 Mar 2023 06:24:05 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13136&quot;&gt;https://git.openjdk.org/jdk/pull/13136&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-22 10:59:18 +0000</comment>
                            <comment id="14568115" author="coleenp" created="Mon, 20 Mar 2023 08:04:17 -0700"  >I&amp;#39;ve limited the scope of this CR.  See linked CRs for related work.</comment>
                            <comment id="14567155" author="coleenp" created="Wed, 15 Mar 2023 09:16:09 -0700"  >So there are some float&amp;lt;-&amp;gt; int unions that can be converted using PrimitiveConversions::cast(().  This should be cleaned up with this RFE.&lt;br/&gt;
Removing JavaValue should not be done here.  JavaValue is used for return values from Java calls all over the JVM.</comment>
                            <comment id="14560371" author="kbarrett" created="Wed, 15 Feb 2023 05:54:10 -0800"  >JavaValue is not used for conversions.  It is an ordinary discriminated union, and shouldn&amp;#39;t be changed.&lt;br/&gt;
</comment>
                            <comment id="14556862" author="roboduke" created="Thu, 2 Feb 2023 02:26:56 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12384&quot;&gt;https://git.openjdk.org/jdk/pull/12384&lt;/a&gt;&lt;br/&gt;
Date: 2023-02-02 10:17:21 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5082531">JDK-8293117</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5022568">JDK-8247909</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5090785">JDK-8299688</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5065203">JDK-8279143</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zdff:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17417"><![CDATA[b17]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>