<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 17:05:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8303002] Reject packed structs from linker</title>
                <link>https://bugs.openjdk.org/browse/JDK-8303002</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>After investigation, the ABI specification for packed structs turned out to be too minimal/not robust enough to implement support on top of (without looking at what e.g. GCC generates and guessing the semantics from that).&lt;br/&gt;
&lt;br/&gt;
For now we have decided to just reject packed struct altogether.</description>
                <environment></environment>
        <key id="5094737">JDK-8303002</key>
            <summary>Reject packed structs from linker</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvernee">Jorn Vernee</assignee>
                                    <reporter username="jvernee">Jorn Vernee</reporter>
                        <labels>
                            <label>foreign-memaccess+abi</label>
                    </labels>
                <created>Tue, 21 Feb 2023 07:28:40 -0800</created>
                <updated>Mon, 24 Jul 2023 11:05:48 -0700</updated>
                            <resolved>Mon, 1 May 2023 06:03:07 -0700</resolved>
                                    <version>repo-panama</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14577846" author="dukebot" created="Mon, 1 May 2023 06:03:06 -0700"  >Changeset: 1de1a388&lt;br/&gt;
Author:    Jorn Vernee &amp;lt;&lt;a href=&apos;mailto:jvernee@openjdk.org&apos;&gt;jvernee@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-01 13:00:41 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/1de1a38859c696cd5f3f6efa51809bff9c127953&quot;&gt;https://git.openjdk.org/jdk/commit/1de1a38859c696cd5f3f6efa51809bff9c127953&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14569640" author="roboduke" created="Mon, 27 Mar 2023 06:56:14 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13164&quot;&gt;https://git.openjdk.org/jdk/pull/13164&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-23 18:11:18 +0000</comment>
                            <comment id="14569152" author="jvernee" created="Thu, 23 Mar 2023 11:07:56 -0700"  >The SysV ABI spec says that &amp;quot;If the size of an object is larger than four eightbytes, or it contains unaligned fields, it has class MEMORY&amp;quot;, but it is not clear from that how fields in nested structs should be handled.&lt;br/&gt;
&lt;br/&gt;
For instance, if we have these structs:&lt;br/&gt;
&lt;br/&gt;
#pragma pack(push, 1)&lt;br/&gt;
struct S1 {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;char f0;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int f1;&lt;br/&gt;
};&lt;br/&gt;
#pragma pack(pop)&lt;br/&gt;
&lt;br/&gt;
struct S3 {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;char f0;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;struct S1 f1;&lt;br/&gt;
};&lt;br/&gt;
&lt;br/&gt;
All fields in S3 are aligned (S1 has 1 byte alignment) but GCC passes this struct in memory any ways.&lt;br/&gt;
&lt;br/&gt;
Moreover, if 2 more char fields are added in S3 after f0, then the struct is passed in a register, even though the fields in S1 are not aligned.</comment>
                            <comment id="14565920" author="jvernee" created="Fri, 10 Mar 2023 09:26:34 -0800"  >Sysv: &lt;a href=&quot;https://refspecs.linuxbase.org/elf/x86_64-abi-0.99.pdf&quot;&gt;https://refspecs.linuxbase.org/elf/x86_64-abi-0.99.pdf&lt;/a&gt; (page 18 at the end)</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10400">
                    <name>CSR</name>
                                            <outwardlinks description="csr for">
                                        <issuelink>
            <issuekey id="5099118">JDK-8306631</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5096977">JDK-8304803</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30hcz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17412"><![CDATA[b21]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2492"><![CDATA[java.lang.foreign]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>