<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:01:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8308499] Test vmTestbase/nsk/jdi/MethodExitRequest/addClassExclusionFilter/filter001/TestDescription.java failed: VMDisconnectedException</title>
                <link>https://bugs.openjdk.org/browse/JDK-8308499</link>
                <project id="10100" key="JDK">JDK</project>
                    <description># ERROR: EventHandler&amp;gt; Exception occured in eventHandler thread: connection is closed&lt;br/&gt;
The following stacktrace is for failure analysis.&lt;br/&gt;
nsk.share.TestFailure: EventHandler&amp;gt; Exception occured in eventHandler thread: connection is closed&lt;br/&gt;
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:431)&lt;br/&gt;
	at nsk.share.Log.complain(Log.java:402)&lt;br/&gt;
	at nsk.share.jdi.EventHandler.complain(EventHandler.java:121)&lt;br/&gt;
	at nsk.share.jdi.EventHandler.run(EventHandler.java:204)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1583)&lt;br/&gt;
com.sun.jdi.VMDisconnectedException: connection is closed&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.TargetVM.send(TargetVM.java:293)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.VirtualMachineImpl.sendToTarget(VirtualMachineImpl.java:1172)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.PacketStream.send(PacketStream.java:79)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$ReferenceType$SignatureWithGeneric.enqueueCommand(JDWP.java:2678)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$ReferenceType$SignatureWithGeneric.process(JDWP.java:2664)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.ReferenceTypeImpl.genericSignature(ReferenceTypeImpl.java:213)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.ReferenceTypeImpl.signature(ReferenceTypeImpl.java:192)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.TypeImpl.name(TypeImpl.java:42)&lt;br/&gt;
	at nsk.jdi.MethodExitRequest.addClassExclusionFilter.filter001$1.eventReceived(filter001.java:113)&lt;br/&gt;
	at nsk.share.jdi.EventHandler.run(EventHandler.java:176)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1583)&lt;br/&gt;
EventHandler&amp;gt; waitForVMDisconnect: done</description>
                <environment></environment>
        <key id="5101414">JDK-8308499</key>
            <summary>Test vmTestbase/nsk/jdi/MethodExitRequest/addClassExclusionFilter/filter001/TestDescription.java failed: VMDisconnectedException</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cjplummer">Chris Plummer</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>hgupdate-sync</label>
                            <label>noreg-self</label>
                            <label>tier8</label>
                    </labels>
                <created>Mon, 22 May 2023 00:03:17 -0700</created>
                <updated>Wed, 12 Jul 2023 13:13:06 -0700</updated>
                            <resolved>Thu, 15 Jun 2023 12:12:54 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14590704" author="roboduke" created="Tue, 20 Jun 2023 11:29:53 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21/pull/41&quot;&gt;https://git.openjdk.org/jdk21/pull/41&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-20 18:25:02 +0000</comment>
                            <comment id="14589726" author="dukebot" created="Thu, 15 Jun 2023 12:12:53 -0700"  >Changeset: 79ff72a7&lt;br/&gt;
Author:    Chris Plummer &amp;lt;&lt;a href=&apos;mailto:cjplummer@openjdk.org&apos;&gt;cjplummer@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-15 19:11:12 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/79ff72a7762deb6010b57e5ac0ccede3d035ab4c&quot;&gt;https://git.openjdk.org/jdk/commit/79ff72a7762deb6010b57e5ac0ccede3d035ab4c&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14589411" author="roboduke" created="Wed, 14 Jun 2023 14:30:46 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14480&quot;&gt;https://git.openjdk.org/jdk/pull/14480&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-14 21:24:31 +0000</comment>
                            <comment id="14589407" author="cjplummer" created="Wed, 14 Jun 2023 14:02:48 -0700"  >The test says:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;* The test works as follows.&lt;br/&gt;
&amp;nbsp;* - The debugger&lt;br/&gt;
&amp;nbsp;*   - sets up two MethodExitRequests,&lt;br/&gt;
&amp;nbsp;*   - restricts the Requests using patterns &amp;#39;java*&amp;#39; and &amp;#39;sun*&amp;#39;,&lt;br/&gt;
&amp;nbsp;*     so that events will be filtered only from test classes,&lt;br/&gt;
&amp;nbsp;* ...&lt;br/&gt;
&lt;br/&gt;
However, filtering out just java* and sun* is not enough. There are a lot of jdk.internal.* entries in the log that I think were not intended, and as a result the log file exceeds test harness limit for the number of lines of output. Although exceeding the log output limit is not really a problem, the extra MethodExitEvents happening almost to the point of the debuggee exit is. When I filter out jdk.* classes also, the test passes and there appear to be only a few dozen MethodExitEvents that the test needs to deal with.&lt;br/&gt;
&lt;br/&gt;
I suspect since product builds run faster that the timing of the handling of the events is different, and some of these events do not get handled until after the debugge exits. Note the stack trace when the exception happens: &lt;br/&gt;
&lt;br/&gt;
com.sun.jdi.VMDisconnectedException: connection is closed&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.TargetVM.send(TargetVM.java:293)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.VirtualMachineImpl.sendToTarget(VirtualMachineImpl.java:1172)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.PacketStream.send(PacketStream.java:79)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$ReferenceType$SignatureWithGeneric.enqueueCommand(JDWP.java:2678)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$ReferenceType$SignatureWithGeneric.process(JDWP.java:2664)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.ReferenceTypeImpl.genericSignature(ReferenceTypeImpl.java:213)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.ReferenceTypeImpl.signature(ReferenceTypeImpl.java:192)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.TypeImpl.name(TypeImpl.java:42)&lt;br/&gt;
	at nsk.jdi.MethodExitRequest.addClassExclusionFilter.filter001$1.eventReceived(filter001.java:113)&lt;br/&gt;
	at nsk.share.jdi.EventHandler.run(EventHandler.java:176)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1583)&lt;br/&gt;
&lt;br/&gt;
The test got a MethodExitEvent and is executing the following:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;String str = ((MethodExitEvent)event).location().declaringType().name();&lt;br/&gt;
&lt;br/&gt;
By the time it does this, the connection is already closed because the debuggee has exited. The events were queued up waiting to be processed, and remain queued up even after the debuggee has exited. The test could defend against this, but the simpler fix seems to be to just make sure we don&amp;#39;t get all these extra events in the first place, since that is how the test was intended to run.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5103802">JDK-8310570</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5104652">JDK-8311325</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31lob:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17305"><![CDATA[b03]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="370"><![CDATA[debugger]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>