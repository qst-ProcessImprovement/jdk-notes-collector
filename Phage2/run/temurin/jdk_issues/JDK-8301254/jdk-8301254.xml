<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 16:14:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8301254] UNIX sun/font coding does not detect SuSE in openSUSE Leap distribution</title>
                <link>https://bugs.openjdk.org/browse/JDK-8301254</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8278549&quot; title=&quot;UNIX sun/font coding misses SUSE distro detection on recent distro SUSE 15&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8278549&quot;&gt;&lt;strike&gt;JDK-8278549&lt;/strike&gt;&lt;/a&gt; `UNIX sun/font coding misses SUSE distro detection on recent distro SUSE 15` &lt;br/&gt;
adds SuSE detection by checking SLES os name property in /etc/os-release file.&lt;br/&gt;
&lt;br/&gt;
opensuse/leap:15.4 docker defines os name property as &amp;quot;openSUSE Leap&amp;quot; in /etc/os-release file which is not recognized as SuSE.&lt;br/&gt;
&lt;br/&gt;
The issue is reproduced with Oracle jdk-19.0.2 with custom fontconfig.SuSE.properties file copied to jdk-19.0.2/lib directory.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Steps to reproduce.&lt;br/&gt;
&lt;br/&gt;
- Download Oracle jdk-19.0.2&lt;br/&gt;
- Copy the attached custom fontconfig.SuSE.properties file to jdk-19.0.2/lib directory.&lt;br/&gt;
-  Run the opensuse/leap:15.4 docker and install freetype and dejavu fonts (do not install fontconfig)&lt;br/&gt;
```&lt;br/&gt;
docker run --rm --security-opt seccomp=unconfined -it opensuse/leap:15.4 bash&lt;br/&gt;
zypper install -y dejavu-fonts&lt;br/&gt;
zypper install -y freetype2&lt;br/&gt;
```&lt;br/&gt;
- Run HelloImage java sample in the docker&lt;br/&gt;
```&lt;br/&gt;
import javax.imageio.ImageIO;&lt;br/&gt;
import java.awt.*;&lt;br/&gt;
import java.awt.image.BufferedImage;&lt;br/&gt;
import java.io.File;&lt;br/&gt;
&lt;br/&gt;
public class HelloImage {&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) throws Exception {&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BufferedImage buff = new BufferedImage(300, 200, BufferedImage.TYPE_INT_RGB);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Graphics2D g = buff.createGraphics();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.setColor(Color.WHITE);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.fillRect(0, 0, buff.getWidth(), buff.getHeight());&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.setColor(Color.BLUE);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.setFont(g.getFont().deriveFont(32f));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.drawString(&amp;quot;Hello, Image!&amp;quot;, 50, 50);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.dispose();&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File file = new File(&amp;quot;hello-image.png&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ImageIO.write(buff, &amp;quot;png&amp;quot;, file);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
```&lt;br/&gt;
```&lt;br/&gt;
./jdk-19.0.2/bin/javac HelloImage.java&lt;br/&gt;
./jdk-19.0.2/bin/java HelloImage&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.NullPointerException: Cannot load from short array because &amp;quot;sun.awt.FontConfiguration.head&amp;quot; is null&lt;br/&gt;
	at java.desktop/sun.awt.FontConfiguration.getVersion(FontConfiguration.java:1261)&lt;br/&gt;
	at java.desktop/sun.awt.FontConfiguration.readFontConfigFile(FontConfiguration.java:221)&lt;br/&gt;
	at java.desktop/sun.awt.FontConfiguration.init(FontConfiguration.java:105)&lt;br/&gt;
	at java.desktop/sun.awt.X11FontManager.createFontConfiguration(X11FontManager.java:706)&lt;br/&gt;
	at java.desktop/sun.font.SunFontManager$2.run(SunFontManager.java:352)&lt;br/&gt;
	at java.desktop/sun.font.SunFontManager$2.run(SunFontManager.java:309)&lt;br/&gt;
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)&lt;br/&gt;
	at java.desktop/sun.font.SunFontManager.&amp;lt;init&amp;gt;(SunFontManager.java:309)&lt;br/&gt;
	at java.desktop/sun.awt.FcFontManager.&amp;lt;init&amp;gt;(FcFontManager.java:35)&lt;br/&gt;
	at java.desktop/sun.awt.X11FontManager.&amp;lt;init&amp;gt;(X11FontManager.java:56)&lt;br/&gt;
	at java.desktop/sun.font.PlatformFontInfo.createFontManager(PlatformFontInfo.java:37)&lt;br/&gt;
	at java.desktop/sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:51)&lt;br/&gt;
	at java.desktop/java.awt.Font.getFont2D(Font.java:526)&lt;br/&gt;
	at java.desktop/java.awt.Font$FontAccessImpl.getFont2D(Font.java:265)&lt;br/&gt;
	at java.desktop/sun.font.FontUtilities.getFont2D(FontUtilities.java:151)&lt;br/&gt;
	at java.desktop/sun.java2d.SunGraphics2D.checkFontInfo(SunGraphics2D.java:671)&lt;br/&gt;
	at java.desktop/sun.java2d.SunGraphics2D.getFontInfo(SunGraphics2D.java:837)&lt;br/&gt;
	at java.desktop/sun.java2d.pipe.GlyphListPipe.drawString(GlyphListPipe.java:46)&lt;br/&gt;
	at java.desktop/sun.java2d.SunGraphics2D.drawString(SunGraphics2D.java:2931)&lt;br/&gt;
	at HelloImage.main(HelloImage.java:17)&lt;br/&gt;
```</description>
                <environment>&lt;p&gt;OS: openSUSE Leap 15.4&lt;br/&gt;
JDK: jdk-19.0.2&lt;/p&gt;</environment>
        <key id="5092658">JDK-8301254</key>
            <summary>UNIX sun/font coding does not detect SuSE in openSUSE Leap distribution</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alexsch">Alexandr Scherbatiy</assignee>
                                    <reporter username="alexsch">Alexandr Scherbatiy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jan 2023 08:29:03 -0800</created>
                <updated>Wed, 8 Mar 2023 23:32:50 -0800</updated>
                            <resolved>Sun, 5 Mar 2023 23:42:18 -0800</resolved>
                                    <version>19</version>
                                    <fixVersion>21</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14564594" author="dukebot" created="Sun, 5 Mar 2023 23:42:17 -0800"  >Changeset: 15c76e4c&lt;br/&gt;
Author:    Alexander Scherbatiy &amp;lt;&lt;a href=&apos;mailto:alexsch@openjdk.org&apos;&gt;alexsch@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-03-06 07:40:38 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/15c76e4c026112f79828d714a5e1c8f822866afa&quot;&gt;https://git.openjdk.org/jdk/commit/15c76e4c026112f79828d714a5e1c8f822866afa&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14555585" author="prr" created="Mon, 30 Jan 2023 12:50:31 -0800"  >We need to (where possible) get out of this game of having this info hard-coded.&lt;br/&gt;
I suggest that if a file called /etc/os-release exists we use the strings in there to&lt;br/&gt;
define the name of the fontconfig.properties &lt;br/&gt;
&lt;a href=&quot;https://man7.org/linux/man-pages/man5/os-release.5.html&quot;&gt;https://man7.org/linux/man-pages/man5/os-release.5.html&lt;/a&gt; offers some options&lt;br/&gt;
and I think the PREFERRED os name would be that specified by &amp;quot;ID&amp;quot; which is&lt;br/&gt;
&amp;quot;A lower-case string (no spaces or other characters outside of&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0&#8211;9, a&#8211;z, &amp;quot;.&amp;quot;, &amp;quot;_&amp;quot; and &amp;quot;-&amp;quot;) identifying the operating system&amp;quot;&lt;br/&gt;
If that doesn&amp;#39;t exist we&amp;#39;d have to fall back to &amp;quot;NAME&amp;quot; and apply some transformation&lt;br/&gt;
such as changing all chars outside that other set to &amp;quot;_&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
Similarly we&amp;#39;d probably want to use &amp;quot;VERSION_ID&amp;quot; if its set to find a version specific file.&lt;br/&gt;
&lt;br/&gt;
With that change, then any distro that supports /etc/os-release (all of them ??) and&lt;br/&gt;
puts something sensible in there, would work without needing JDK code changes.&lt;br/&gt;
If a distro doesn&amp;#39;t put something sensible in there, then encourage them to do so.&lt;br/&gt;
&lt;br/&gt;
Of course all this is un-needed if you are happy with what the standard libfontconfig produces.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14555072" author="roboduke" created="Fri, 27 Jan 2023 08:52:46 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12260&quot;&gt;https://git.openjdk.org/jdk/pull/12260&lt;/a&gt;&lt;br/&gt;
Date: 2023-01-27 16:46:22 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5064478">JDK-8278549</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="102435" name="fontconfig.SuSE.properties" size="1882" author="alexsch" created="Fri, 27 Jan 2023 08:31:35 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17019"><![CDATA[other]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i304j7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17339"><![CDATA[b13]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="197"><![CDATA[2d]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>