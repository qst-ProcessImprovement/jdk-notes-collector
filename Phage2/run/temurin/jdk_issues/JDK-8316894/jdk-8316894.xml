<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:26:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8316894] make test  TEST=&quot;jtreg:test/jdk/...&quot;  fails on AIX</title>
                <link>https://bugs.openjdk.org/browse/JDK-8316894</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Running  jtreg tests with  make test, for example&lt;br/&gt;
make test  TEST=&amp;quot;jtreg:test/jdk/java/util/prefs&amp;quot;  fails currently on AIX without setting the number of JOBS manually.&lt;br/&gt;
We get  this error message:&lt;br/&gt;
Error: Bad use of -concurrency&lt;br/&gt;
&lt;br/&gt;
Log of cmdargs  shows :&lt;br/&gt;
-vmoption:-Xmx768m&lt;br/&gt;
-agentvm&lt;br/&gt;
-verbose:fail,error,summary&lt;br/&gt;
-retain:fail,error&lt;br/&gt;
-concurrency:7.000000&lt;br/&gt;
....&lt;br/&gt;
&lt;br/&gt;
So currently a float is used for the concurrency value, seems this is not supported.&lt;br/&gt;
Seems the  number of test jobs auto calculation  &lt;a href=&quot;https://github.com/openjdk/jdk/blob/master/make/RunTests.gmk#L151&quot;&gt;https://github.com/openjdk/jdk/blob/master/make/RunTests.gmk#L151&lt;/a&gt;&lt;br/&gt;
is not doing so well on AIX.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5111025">JDK-8316894</key>
            <summary>make test  TEST=&quot;jtreg:test/jdk/...&quot;  fails on AIX</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbaesken">Matthias Baesken</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>build-infra</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Mon, 25 Sep 2023 06:07:44 -0700</created>
                <updated>Thu, 19 Oct 2023 23:49:45 -0700</updated>
                            <resolved>Thu, 28 Sep 2023 08:55:12 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14619203" author="mbaesken" created="Wed, 18 Oct 2023 06:43:59 -0700"  >jdk21u backport request&lt;br/&gt;
I would like to have the patch in jdk21u as well, because the issue is present there too. The backport is clean and low risk,</comment>
                            <comment id="14619186" author="roboduke" created="Wed, 18 Oct 2023 06:10:57 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/269&quot;&gt;https://git.openjdk.org/jdk21u/pull/269&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-18 13:00:17 +0000</comment>
                            <comment id="14614744" author="dukebot" created="Thu, 28 Sep 2023 08:55:11 -0700"  >Changeset: 29348b3c&lt;br/&gt;
Author:    Matthias Baesken &amp;lt;&lt;a href=&apos;mailto:mbaesken@openjdk.org&apos;&gt;mbaesken@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-09-28 15:53:03 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/29348b3cf65951e1aacd52c517b6b0d29449a78e&quot;&gt;https://git.openjdk.org/jdk/commit/29348b3cf65951e1aacd52c517b6b0d29449a78e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14614427" author="erikj" created="Wed, 27 Sep 2023 10:05:11 -0700"  >As the original author, the intention was definitely to get proper rounding rather than floor. Can we maybe spend a bit more time trying to come up with a solution that both works for everyone and does the right thing?</comment>
                            <comment id="14614284" author="roboduke" created="Wed, 27 Sep 2023 01:29:38 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15941&quot;&gt;https://git.openjdk.org/jdk/pull/15941&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-27 08:18:45 +0000</comment>
                            <comment id="14614255" author="ihse" created="Wed, 27 Sep 2023 00:34:22 -0700"  >Yes, go ahead! :)</comment>
                            <comment id="14614254" author="mbaesken" created="Wed, 27 Sep 2023 00:31:55 -0700"  >Hi [~ihse] thanks for looking into this - so if you think %d is okay too, I would prepare a PR doing just that - is that fine with you?</comment>
                            <comment id="14614250" author="ihse" created="Wed, 27 Sep 2023 00:24:05 -0700"  >But yeah, using %d seems to work as well. In theory, it can change the result somewhat since it does floor instead of round, so 7.9 would be printed as 7, instead of 8 (with %f). But I doubt that matters much; this is just a heuristic, and I don&amp;#39;t think the original author gave that edge case much thought.</comment>
                            <comment id="14614249" author="ihse" created="Wed, 27 Sep 2023 00:23:16 -0700"  >You must be using an ancient gawk. This is what I get:&lt;br/&gt;
&lt;br/&gt;
$ gawk &amp;#39;BEGIN {printf &amp;quot;%.0f\n&amp;quot;, 7}&amp;#39;&lt;br/&gt;
7&lt;br/&gt;
$ gawk --version | head -1&lt;br/&gt;
GNU Awk 5.2.2, API 3.2, (GNU MPFR 4.2.0-p12, GNU MP 6.2.1)&lt;br/&gt;
</comment>
                            <comment id="14614244" author="ihse" created="Wed, 27 Sep 2023 00:15:38 -0700"  >Ah, I misunderstood things. I looked to sloppy at the code, and thought we called the printf command. I did not realize it was part of an awk script.&lt;br/&gt;
&lt;br/&gt;
I assume the reason this output format was chosen as a way to convert fractional numbers to integers, since we&amp;#39;re doing divisions in the calculation. Maybe there is another way of achieving this.</comment>
                            <comment id="14614101" author="mbaesken" created="Tue, 26 Sep 2023 07:31:25 -0700"  >could we use  `printf &amp;quot;%d&amp;quot;, c;`   ? This works with both  nawk and gawk on AIX .&lt;br/&gt;
Currently configure picks up unfortunately gawk on AIX and there the  `printf &amp;quot;%.0f&amp;quot;, c`   syntax seems not to work nicely but leads to 7.000000  which makes the make test fail.&lt;br/&gt;
&amp;nbsp;</comment>
                            <comment id="14614043" author="ihse" created="Tue, 26 Sep 2023 04:16:16 -0700"  >I think it boils down to: What does this print on AIX: `printf &amp;quot;%.0f&amp;quot;, c`? I have some highly specific opinions on what I believe would be correct behavior, but I encourage you to test (and perhaps check POSIX specifications)&lt;br/&gt;
&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5112917">JDK-8318579</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="18900"><![CDATA[aix]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i338ur:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="199"><![CDATA[build]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>