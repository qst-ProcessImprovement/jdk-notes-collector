<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:43:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8324577] [REDO] - [IMPROVE] OPEN_MAX is no longer the max limit on macOS &gt;= 10.6 for RLIMIT_NOFILE</title>
                <link>https://bugs.openjdk.org/browse/JDK-8324577</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Redo of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8300088&quot; title=&quot;[IMPROVE] OPEN_MAX is no longer the max limit on macOS &amp;gt;= 10.6 for RLIMIT_NOFILE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8300088&quot;&gt;&lt;strike&gt;JDK-8300088&lt;/strike&gt;&lt;/a&gt; &lt;br/&gt;
&lt;br/&gt;
This will track an improvement of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8291060&quot; title=&quot;OPEN_MAX is no longer the max limit on macOS &amp;gt;= 10.6 for RLIMIT_NOFILE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8291060&quot;&gt;&lt;strike&gt;JDK-8291060&lt;/strike&gt;&lt;/a&gt; &amp;quot;OPEN_MAX is no longer the max limit on macOS &amp;gt;= 10.6 for RLIMIT_NOFILE&amp;quot; taking into the account what we learned from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8299258&quot; title=&quot;Launching ksh (shell) from within Java through ProcessBuilder causes ksh process to crash with EXC_BAD_ACCESS (SIGSEGV)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8299258&quot;&gt;&lt;strike&gt;JDK-8299258&lt;/strike&gt;&lt;/a&gt; &amp;quot;Launching ksh (shell) from within Java through ProcessBuilder causes ksh process to crash with EXC_BAD_ACCESS (SIGSEGV)&amp;quot;&lt;br/&gt;
&lt;br/&gt;
The reason I would like to see this properly fixed, is that I would like to see parity of macOS and Linux when it comes to process/file count as it might be important to the os behavior under MACH5 and explain the issues we see on macOS compared to other platforms. This is just one tiny piece in a big puzzle and I would like to know that it&amp;#39;s in the right spot.</description>
                <environment></environment>
        <key id="5119879">JDK-8324577</key>
            <summary>[REDO] - [IMPROVE] OPEN_MAX is no longer the max limit on macOS &gt;= 10.6 for RLIMIT_NOFILE</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gziemski">Gerard Ziemski</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>azul-interest</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>os</label>
                    </labels>
                <created>Tue, 23 Jan 2024 16:21:48 -0800</created>
                <updated>Mon, 2 Dec 2024 07:30:19 -0800</updated>
                            <resolved>Wed, 24 Apr 2024 07:29:19 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                                                            <comments>
                            <comment id="14718546" author="rriggs" created="Fri, 1 Nov 2024 05:56:18 -0700"  >This fix has caused existing applications to hang. &lt;br/&gt;
See     &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8343285&quot; title=&quot;java.lang.Process is unresponsive and CPU usage spikes to 100%&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8343285&quot;&gt;&lt;strike&gt;JDK-8343285&lt;/strike&gt;&lt;/a&gt;.  java.lang.Process is unresponsive and CPU usage spikes to 100%&lt;br/&gt;
&lt;br/&gt;
It should NOT be backported and possibly reversed in the backports due to the incompatibility it causes.&lt;br/&gt;
A new fix will be needed.</comment>
                            <comment id="14718514" author="mkartashev" created="Fri, 1 Nov 2024 02:17:12 -0700"  >This change &lt;a href=&quot;https://github.com/openjdk/jdk/pull/18821/files&quot;&gt;https://github.com/openjdk/jdk/pull/18821/files&lt;/a&gt; exposed a bug in gdb resulting in an attempt to launch gdb hanging seemingly forever.&lt;br/&gt;
&lt;br/&gt;
The relevant code can be found here: &lt;a href=&quot;https://github.com/bminor/binutils-gdb/blob/893e4fd6231922495175b701a6c44b665e91cd7e/gdbsupport/filestuff.cc#L154C23-L154C26&quot;&gt;https://github.com/bminor/binutils-gdb/blob/893e4fd6231922495175b701a6c44b665e91cd7e/gdbsupport/filestuff.cc#L154C23-L154C26&lt;/a&gt;&lt;br/&gt;
It loops over *all* file descriptors available to the process at startup, so having INT_MAX there makes the loop take a very long time:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br/&gt;
#ifdef _SC_OPEN_MAX&lt;br/&gt;
	max = sysconf (_SC_OPEN_MAX);&lt;br/&gt;
#else&lt;br/&gt;
	/* Whoops.  */&lt;br/&gt;
	return 0;&lt;br/&gt;
#endif /* _SC_OPEN_MAX */&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (fd = 0; fd &amp;lt; max; ++fd)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br/&gt;
	struct stat sb;&lt;br/&gt;
	int result;&lt;br/&gt;
&lt;br/&gt;
	/* Only call FUNC for open fds.  */&lt;br/&gt;
	if (fstat (fd, &amp;amp;sb) == -1)&lt;br/&gt;
	  continue;&lt;br/&gt;
&lt;br/&gt;
	result = func (arg, fd);&lt;br/&gt;
	if (result != 0)&lt;br/&gt;
	  return result;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}</comment>
                            <comment id="14681990" author="roboduke" created="Mon, 17 Jun 2024 00:55:10 -0700"  >[jdk17u-fix-request] Approval Request from Dmitry Cherepanov&lt;br/&gt;
Sets higher macOS limit for file descriptions. Clean backport. Passes local tier1-4 testing in macos-aarch64.</comment>
                            <comment id="14681987" author="roboduke" created="Mon, 17 Jun 2024 00:51:57 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2595&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2595&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-17 07:46:09 +0000</comment>
                            <comment id="14678151" author="roboduke" created="Mon, 3 Jun 2024 01:48:31 -0700"  >[jdk21u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 21.0.5-oracle. Applies cleanly and tier 1-4 have passed.</comment>
                            <comment id="14677914" author="roboduke" created="Fri, 31 May 2024 12:27:02 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/640&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/640&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-31 19:22:29 +0000</comment>
                            <comment id="14667724" author="dukebot" created="Wed, 24 Apr 2024 07:29:18 -0700"  >Changeset: f1d0e715&lt;br/&gt;
Author:    Gerard Ziemski &amp;lt;&lt;a href=&apos;mailto:gziemski@openjdk.org&apos;&gt;gziemski@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-04-24 14:27:10 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f1d0e715b67e2ca47b525069d8153abbb33f75b9&quot;&gt;https://git.openjdk.org/jdk/commit/f1d0e715b67e2ca47b525069d8153abbb33f75b9&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14666637" author="roboduke" created="Fri, 19 Apr 2024 11:53:54 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18821&quot;&gt;https://git.openjdk.org/jdk/pull/18821&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-17 16:49:25 +0000</comment>
                            <comment id="14665229" author="gziemski" created="Mon, 15 Apr 2024 07:09:17 -0700"  >According to the latest tier1-9 Mach5 test none of the failures involve macOS, which is the only platform affected, so this should give us a high confidence that we can proceed with this fix.&lt;br/&gt;
</comment>
                            <comment id="14661314" author="dcubed" created="Thu, 28 Mar 2024 10:55:12 -0700"  >I didn&amp;#39;t notice that you ran hs-tier1-8. I keep telling people not to limit their pre-integration&lt;br/&gt;
testing to the hs-tiers.&lt;br/&gt;
&lt;br/&gt;
The previous version of this fix had failures in tier3, tier5, tier6, and tier8.&lt;br/&gt;
&lt;br/&gt;
I strongly recommend Tier{1-8} testing for this fix considering the backout history.</comment>
                            <comment id="14646257" author="gziemski" created="Fri, 2 Feb 2024 09:38:31 -0800"  >Same fix as in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8291060&quot; title=&quot;OPEN_MAX is no longer the max limit on macOS &amp;gt;= 10.6 for RLIMIT_NOFILE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8291060&quot;&gt;&lt;strike&gt;JDK-8291060&lt;/strike&gt;&lt;/a&gt;, just with more testing.</comment>
                            <comment id="14643543" author="gziemski" created="Wed, 24 Jan 2024 09:54:41 -0800"  >Still would like to see it fixed, taking into account the recent failure (internal testing in jdwp) and the previous one (ksh)&lt;br/&gt;
&lt;br/&gt;
Summary:&lt;br/&gt;
&lt;br/&gt;
- failure in ksh was due to a bug in ksh where the MAX value was overflowing the internal variable&lt;br/&gt;
- failure in jdwp was due to an issue, where jdwp was closing all file descriptors inherited from a parent process and since we increased the limit, it now times out trying to close them all.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5130292">JDK-8332912</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5130877">JDK-8333420</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132069">JDK-8334440</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="5119990">JDK-8324668</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>Cloners</name>
                                            <outwardlinks description="clones">
                                        <issuelink>
            <issuekey id="5091324">JDK-8300088</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5142639">JDK-8343285</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5090291">JDK-8299258</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5144993">JDK-8345256</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5080076">JDK-8291060</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5119880">JDK-8324578</subtask>
                                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34q6j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>