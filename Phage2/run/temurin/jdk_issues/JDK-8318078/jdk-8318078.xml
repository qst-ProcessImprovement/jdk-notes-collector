<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:34:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8318078] ADLC: pass ASSERT and PRODUCT flags</title>
                <link>https://bugs.openjdk.org/browse/JDK-8318078</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>src/hotspot/share/adlc/main.cpp parses in the -D  inputs and sets AD.set_preproc_def(flag, def)&lt;br/&gt;
And then when the AD file is parsed, it checks ArchDesc::get_preproc_def  to see if it should include the relevant code section or not.&lt;br/&gt;
You can for example find #ifdef _LP64 all over the AD files.&lt;br/&gt;
&lt;br/&gt;
The flags are set in make/hotspot/gensrc/GensrcAdlc.gmk&lt;br/&gt;
&lt;br/&gt;
ADLC_CFLAGS += -DASSERT&lt;br/&gt;
...&lt;br/&gt;
ifeq ($(call isTargetOs, linux), true)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;ADLCFLAGS += -DLINUX=1 -D_GNU_SOURCE=1&lt;br/&gt;
&lt;br/&gt;
We never pass ASSERT or PRODUCT to ADLCFLAGS, hence we cannot use #ifdef with those flags (or rather they are always undefined).&lt;br/&gt;
&lt;br/&gt;
We should fix this, so that the flags can be used consistently with all other C2 code. For example, I would like to be able to make some rules in AD files available only in debug (ASSERT) mode.</description>
                <environment></environment>
        <key id="5112345">JDK-8318078</key>
            <summary>ADLC: pass ASSERT and PRODUCT flags</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="epeter">Emanuel Peter</assignee>
                                    <reporter username="epeter">Emanuel Peter</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-build</label>
                    </labels>
                <created>Fri, 13 Oct 2023 01:59:15 -0700</created>
                <updated>Mon, 11 Dec 2023 10:50:16 -0800</updated>
                            <resolved>Tue, 17 Oct 2023 00:18:21 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14633191" author="shade" created="Mon, 11 Dec 2023 10:50:16 -0800"  >For JDK 17 and earlier, it depends on &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8299254&quot; title=&quot;Support dealing with standard assert macro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8299254&quot;&gt;&lt;strike&gt;JDK-8299254&lt;/strike&gt;&lt;/a&gt; to define NDEBUG in release builds.</comment>
                            <comment id="14633123" author="roboduke" created="Mon, 11 Dec 2023 06:23:02 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2034&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2034&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-11 14:17:16 +0000</comment>
                            <comment id="14628486" author="roboduke" created="Wed, 22 Nov 2023 08:53:34 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to make sure .ad files can use diagnostic asserts. Applies cleanly. Tests pass.</comment>
                            <comment id="14628427" author="roboduke" created="Wed, 22 Nov 2023 04:45:00 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/396&quot;&gt;https://git.openjdk.org/jdk21u/pull/396&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-22 12:36:49 +0000</comment>
                            <comment id="14619148" author="shade" created="Wed, 18 Oct 2023 04:06:54 -0700"  >I think we want to backport this to actively maintained releases, so that future backports that use these macros in .ad files do not (silently) break their #ifdefs.</comment>
                            <comment id="14618708" author="dukebot" created="Tue, 17 Oct 2023 00:18:08 -0700"  >Changeset: 504b0bda&lt;br/&gt;
Author:    Emanuel Peter &amp;lt;&lt;a href=&apos;mailto:epeter@openjdk.org&apos;&gt;epeter@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-10-17 07:14:11 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/504b0bdaaa7fb7c822014d8bd2845299fbdaf0e8&quot;&gt;https://git.openjdk.org/jdk/commit/504b0bdaaa7fb7c822014d8bd2845299fbdaf0e8&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14618015" author="roboduke" created="Fri, 13 Oct 2023 03:07:18 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16178&quot;&gt;https://git.openjdk.org/jdk/pull/16178&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-13 09:49:48 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5115498">JDK-8320782</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5090286">JDK-8299254</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33gz7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>