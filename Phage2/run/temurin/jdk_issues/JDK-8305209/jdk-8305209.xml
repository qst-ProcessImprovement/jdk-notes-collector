<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 18:10:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8305209] JDWP exit error AGENT_ERROR_INVALID_THREAD(203): missing entry in running thread table</title>
                <link>https://bugs.openjdk.org/browse/JDK-8305209</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>I modified the new com/sun/jdi/ThreadMemoryLeakTest.java to support virtual threads. When I did that the test passed, but I noticed the following in the test output:&lt;br/&gt;
&lt;br/&gt;
Goodbye from ThreadMemoryLeakTarg after 247744 iterations!&lt;br/&gt;
JDWP exit error AGENT_ERROR_INVALID_THREAD(203): missing entry in running thread table [/scratch/cplummer/ws/jdk/jdk.clean/open/src/jdk.jdwp.agent/share/native/libjdwp/threadControl.c:1115]&lt;br/&gt;
FATAL ERROR in native method: JDWP missing entry in running thread table, jvmtiError=AGENT_ERROR_INVALID_THREAD(203)&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x118c75b]  jni_FatalError+0xeb  (jni.cpp:630)&lt;br/&gt;
C  [libjdwp.so+0x10833]  jniFatalError.constprop.0+0xc3  (debugInit.c:608)&lt;br/&gt;
C  [libjdwp.so+0x10a6f]  debugInit_exit+0x6f  (debugInit.c:1338)&lt;br/&gt;
C  [libjdwp.so+0x24fca]  threadControl_resumeAll+0x2aa  (threadControl.c:1115)&lt;br/&gt;
C  [libjdwp.so+0xdb04]  resume+0x24  (VirtualMachineImpl.c:656)&lt;br/&gt;
C  [libjdwp.so+0x137a9]  debugLoop_run+0x2a9  (debugLoop.c:162)&lt;br/&gt;
C  [libjdwp.so+0x283f4]  attachThread+0x54  (transport.c:392)&lt;br/&gt;
V  [libjvm.so+0x13bfb8a]  JvmtiAgentThread::call_start_function()+0x17a  (jvmtiImpl.cpp:89)&lt;br/&gt;
V  [libjvm.so+0x109f236]  JavaThread::thread_main_inner()+0x206  (javaThread.cpp:710)&lt;br/&gt;
V  [libjvm.so+0x1aab090]  Thread::call_run()+0x100  (thread.cpp:224)&lt;br/&gt;
V  [libjvm.so+0x1748373]  thread_native_entry(Thread*)+0x103  (os_linux.cpp:740)&lt;br/&gt;
&lt;br/&gt;
The debuggee ran properly and exited, but then the debug agent asserted during the exit. The bug in the debug agent is a missing check to see if the thread is on runningVThreads. It only checked runningThreads. That fix is simple. However, there is the further problem of why this didn&amp;#39;t result in a test failure. The reason is because there is no check for a proper exitCode. TestScaffold. waitForVMDisconnect() should wait for process exit and then verify the exitCode.</description>
                <environment></environment>
        <key id="5097434">JDK-8305209</key>
            <summary>JDWP exit error AGENT_ERROR_INVALID_THREAD(203): missing entry in running thread table</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cjplummer">Chris Plummer</assignee>
                                    <reporter username="cjplummer">Chris Plummer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Mar 2023 14:43:28 -0700</created>
                <updated>Mon, 24 Apr 2023 11:16:32 -0700</updated>
                            <resolved>Thu, 6 Apr 2023 12:14:33 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14572323" author="dukebot" created="Thu, 6 Apr 2023 12:14:32 -0700"  >Changeset: 1d517afb&lt;br/&gt;
Author:    Chris Plummer &amp;lt;&lt;a href=&apos;mailto:cjplummer@openjdk.org&apos;&gt;cjplummer@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-06 19:13:27 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/1d517afbd4547171ad6fb6a3356351c2554c8279&quot;&gt;https://git.openjdk.org/jdk/commit/1d517afbd4547171ad6fb6a3356351c2554c8279&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14570731" author="roboduke" created="Thu, 30 Mar 2023 09:09:28 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13246&quot;&gt;https://git.openjdk.org/jdk/pull/13246&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-30 16:03:05 +0000</comment>
                            <comment id="14570533" author="cjplummer" created="Wed, 29 Mar 2023 14:45:18 -0700"  >Note as part of fixing this bug (both the debug agent and TestScaffold issues), changes are also being made to support ThreadMemoryLeakTest running virtual threads. This is needed in order to test the bug fixes.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5052550">JDK-8269268</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5096547">JDK-8304436</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5099276">JDK-8306758</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30y03:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="370"><![CDATA[debugger]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>