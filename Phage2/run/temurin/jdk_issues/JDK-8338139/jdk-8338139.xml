<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:17:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8338139] {ClassLoading,Memory}MXBean::isVerbose methods are inconsistent with their setVerbose methods</title>
                <link>https://bugs.openjdk.org/browse/JDK-8338139</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The ClassLoadingMXBean and MemoryMXBean APIs have setVerbose methods to control verbose mode and  isVerbose methods to query it.&lt;br/&gt;
&lt;br/&gt;
Some JCK tests expect setVerbose(false) to disable verbose mode and, subsequently, isVerbose() to return false.&lt;br/&gt;
&lt;br/&gt;
However, if logging to a file is enabled by using -Xlog on the java launcher command line then isVerbose() returns true even after calling setVerbose(false).</description>
                <environment></environment>
        <key id="5136505">JDK-8338139</key>
            <summary>{ClassLoading,Memory}MXBean::isVerbose methods are inconsistent with their setVerbose methods</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://bugs.openjdk.org/images/jbsImages/p1.png">P1</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefank">Stefan Karlsson</assignee>
                                    <reporter username="lmesnik">Leonid Mesnik</reporter>
                        <labels>
                            <label>CPU24_10-critical-SQE-OK</label>
                            <label>CPU24_10-critical-approved</label>
                            <label>conformance</label>
                            <label>hgupdate-sync</label>
                            <label>jdk11u-critical-request</label>
                            <label>jdk11u-critical-yes</label>
                            <label>jdk17u-critical-request</label>
                            <label>jdk17u-critical-yes</label>
                            <label>jdk21u-critical-request</label>
                            <label>jdk21u-critical-yes</label>
                            <label>jdk23-fix-request</label>
                            <label>jdk23-fix-yes</label>
                            <label>release-note=yes</label>
                            <label>tck-red-11</label>
                            <label>tck-red-17</label>
                            <label>tck-red-21</label>
                            <label>tck-red-23</label>
                            <label>tck-red-24</label>
                            <label>tck-red-8u345-perf</label>
                    </labels>
                <created>Fri, 9 Aug 2024 14:53:59 -0700</created>
                <updated>Tue, 22 Jul 2025 09:47:04 -0700</updated>
                            <resolved>Mon, 19 Aug 2024 23:17:19 -0700</resolved>
                                    <version>8u345-perf</version>
                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>23</version>
                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>23</watches>
                                                                                                                                                            <comments>
                            <comment id="14702528" author="roboduke" created="Tue, 3 Sep 2024 05:56:47 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u/pull/94&quot;&gt;https://git.openjdk.org/jdk11u/pull/94&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-03 12:48:46 +0000</comment>
                            <comment id="14702392" author="goetz" created="Mon, 2 Sep 2024 23:32:04 -0700"  >Critical request [11u,17u] &lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 11.0.25-oracle and 17.0.13-oracle. See also 21u request. &lt;br/&gt;
I again had to do a simple adaption of the code. &lt;br/&gt;
The tests well reproduce the issue and pass with the fix. SAP nighlyt testing passed. </comment>
                            <comment id="14702154" author="goetz" created="Mon, 2 Sep 2024 01:42:45 -0700"  >Critical request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.5-oracle. Oracle brought this to 21.0.5 &lt;br/&gt;
rather late because it fixes a jck issue. I think this justifies a critical backport.&lt;br/&gt;
I had to do some trivial resolves and to adapt code and test to 21.&lt;br/&gt;
The risk is a narrow medium, it affects a management bean if logging is switched on, an issue here should not affect core execution of the VM. It is not low though, after all it is a change in behaviour.&lt;br/&gt;
&lt;br/&gt;
The tests well reproduce the issue and pass with the fix. SAP nighlyt testing passed.</comment>
                            <comment id="14702149" author="roboduke" created="Mon, 2 Sep 2024 01:07:04 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u/pull/394&quot;&gt;https://git.openjdk.org/jdk17u/pull/394&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-02 08:00:33 +0000</comment>
                            <comment id="14701856" author="roboduke" created="Fri, 30 Aug 2024 08:48:09 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/449&quot;&gt;https://git.openjdk.org/jdk21u/pull/449&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-30 15:43:11 +0000</comment>
                            <comment id="14699438" author="roboduke" created="Tue, 20 Aug 2024 05:53:56 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: jdk23&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20643&quot;&gt;https://git.openjdk.org/jdk/pull/20643&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-20 12:47:59 +0000</comment>
                            <comment id="14699331" author="dukebot" created="Mon, 19 Aug 2024 23:17:18 -0700"  >Changeset: 9775d571&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Stefan Karlsson &amp;lt;&lt;a href=&apos;mailto:stefank@openjdk.org&apos;&gt;stefank@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-08-20 06:15:56 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/9775d57168695dc0d758e017fe5069d93d593f3e&quot;&gt;https://git.openjdk.org/jdk/commit/9775d57168695dc0d758e017fe5069d93d593f3e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14699256" author="mr" created="Mon, 19 Aug 2024 14:08:05 -0700"  >Fix request for JDK 23 approved.</comment>
                            <comment id="14699248" author="stefank" created="Mon, 19 Aug 2024 13:22:53 -0700"  >Fix Request&lt;br/&gt;
The suggested fix resolves the JCK failure. The change is localized to the described API. So far, reviewed by [~dcubed].</comment>
                            <comment id="14699162" author="roboduke" created="Mon, 19 Aug 2024 08:42:56 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20628&quot;&gt;https://git.openjdk.org/jdk/pull/20628&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-19 15:39:02 +0000</comment>
                            <comment id="14698768" author="lmesnik" created="Fri, 16 Aug 2024 08:02:36 -0700"  >I mean that if &amp;#39;UL class+load logging for stdout &amp;#39; is set in CLI, the setVerbose(false) just disable it, Which might be unexpected for users.&lt;br/&gt;
&amp;nbsp;if we ok that MXBean can override command-line setting then needed just to change getter as you proposed. &lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14698086" author="dholmes" created="Tue, 13 Aug 2024 21:16:02 -0700"  >I don&amp;#39;t think you can have any fine-grained control of the UL settings in the VM via the simple &amp;quot;verbose&amp;quot; flag of the classloading MXBean. I think it would make more sense that the MXBean only interacts with UL class+load logging for stdout  as-per set_verbose - which would mean that only get_verbose needs to be fixed.</comment>
                            <comment id="14698043" author="lmesnik" created="Tue, 13 Aug 2024 14:32:52 -0700"  >The logging system might be controlled from different places such as MXBeans, CLI and jcmd. The exact behavior of the system depends on implementation. So might be makes sense to update specification to reflect this. Saying that &amp;#39;isVerbose&amp;#39; returns actual state and that &amp;#39;setVerbose&amp;#39; is only request.&lt;br/&gt;
&lt;br/&gt;
The system that doesn&amp;#39;t support verbose mode might always return false, ignoring &amp;#39;setVerbose&amp;#39; request.  While for &amp;quot;always verbose&amp;quot; mode the bean returns always true.&lt;br/&gt;
&lt;br/&gt;
Also, it makes sense to check the users of the beans and find which behaviour would be more appropriate for them.</comment>
                            <comment id="14697388" author="dholmes" created="Sun, 11 Aug 2024 21:59:12 -0700"  >The problem is that we have:&lt;br/&gt;
&lt;br/&gt;
./hotspot/share/services/classLoadingService.hpp:  static bool get_verbose() { return log_is_enabled(Info, class, load); }&lt;br/&gt;
&lt;br/&gt;
which examines the general class+load log setting. But here:&lt;br/&gt;
&lt;br/&gt;
bool ClassLoadingService::set_verbose(bool verbose) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;MutexLocker m(Management_lock);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;// verbose will be set to the previous value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;LogLevelType level = verbose ? LogLevel::Info : LogLevel::Off;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;LogConfiguration::configure_stdout(level, false, LOG_TAGS(class, load));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;reset_trace_class_unloading();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;return verbose;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
we only configure stdout. So we call setVerbose(false) and it disables stdout, but it remains enabled on file=vm and so isVerbose still returns true.&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14697338" author="dbessono" created="Sat, 10 Aug 2024 05:29:06 -0700"  >Specifications of ClassLoadingMXBean::setVerbose / ::isVerbose look straightforward and consistent, their implementations should be consistent as well.&lt;br/&gt;
&lt;br/&gt;
In the mentioned configuration (-Xlog:all=trace:file=vm-%p.log,filecount=1,filesize=1M ), setting this parameter to `false` doesn&amp;#39;t work:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;final ClassLoadingMXBean mxBean = ManagementFactory.getClassLoadingMXBean();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mxBean.setVerbose(false);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;mxBean.isVerbose() = &amp;quot; + mxBean.isVerbose());&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5137120">JDK-8338684</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137299">JDK-8338824</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137316">JDK-8338836</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137324">JDK-8338842</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5138281">JDK-8339418</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5138344">JDK-8339479</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5138455">JDK-8339581</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5138456">JDK-8339582</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5138469">JDK-8339595</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5138633">JDK-8339724</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5138837">JDK-8339914</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5165320">JDK-8362827</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137552">JDK-8339039</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137553">JDK-8339040</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137566">JDK-8339053</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137577">JDK-8339064</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10400">
                    <name>CSR</name>
                                            <outwardlinks description="csr for">
                                        <issuelink>
            <issuekey id="5136952">JDK-8338540</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                                        </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5137041">JDK-8338621</subtask>
                                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37ibf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="194"><![CDATA[java.lang.management]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>