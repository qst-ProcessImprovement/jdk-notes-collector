<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 17:46:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8304350]     Font.getStringBounds calculates wrong width for TextAttribute.TRACKING other than 0.0</title>
                <link>https://bugs.openjdk.org/browse/JDK-8304350</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Font.getStringBounds calculates wrong width for TextAttribute.TRACKING other than 0.0&lt;br/&gt;
&lt;br/&gt;
Since JDK10, Font.getStringBounds calculates an incorrect width for a&lt;br/&gt;
java.awt.font.Font with the TRACKING attribute set to a value other than&lt;br/&gt;
0.0.&lt;br/&gt;
&lt;br/&gt;
This is not visibly evident in AWT/Swing, but can be checked by reading/printing&lt;br/&gt;
Font.getStringBounds. It&amp;#39;s also reproducible in a simple PDF rendering application.&lt;br/&gt;
&lt;br/&gt;
I have reproduced this issue in JDK11, 17 and 21, as well as confirming it is not&lt;br/&gt;
present in JDK8 (jdk8u352-b08). I&amp;#39;ll attach a reproducer.&lt;br/&gt;
&lt;br/&gt;
See also a small reproducer (PDF renderer) here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/LibrePDF/OpenPDF/issues/796&quot;&gt;https://github.com/LibrePDF/OpenPDF/issues/796&lt;/a&gt;&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5096431">JDK-8304350</key>
            <summary>    Font.getStringBounds calculates wrong width for TextAttribute.TRACKING other than 0.0</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prr">Philip Race</assignee>
                                    <reporter username="jdowland">Jonathan Dowland</reporter>
                        <labels>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk20u-fix-SQE-ok</label>
                            <label>jdk20u-fix-request</label>
                            <label>jdk20u-fix-yes</label>
                            <label>redhat-interest</label>
                            <label>sn_141</label>
                    </labels>
                <created>Thu, 16 Mar 2023 07:01:16 -0700</created>
                <updated>Mon, 22 May 2023 02:06:51 -0700</updated>
                            <resolved>Thu, 13 Apr 2023 05:03:54 -0700</resolved>
                                    <version>10</version>
                    <version>11.0.19</version>
                    <version>17.0.7</version>
                    <version>20.0.2</version>
                                    <fixVersion>21</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14582712" author="jdowland" created="Thu, 18 May 2023 13:17:42 -0700"  >Fix Request (11u)&lt;br/&gt;
&lt;br/&gt;
Please consider this for 11u. It&amp;#39;s clean. I estimate it to be low risk.</comment>
                            <comment id="14582711" author="jdowland" created="Thu, 18 May 2023 13:17:33 -0700"  >Fix Request (17u)&lt;br/&gt;
&lt;br/&gt;
Please consider this for 17u. It&amp;#39;s clean. I estimate it to be low risk.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve manually verified that a) the issue applies in 20 prior to the patch and b) the patch resolves it. </comment>
                            <comment id="14582710" author="jdowland" created="Thu, 18 May 2023 13:17:11 -0700"  >Fix Request (20u)&lt;br/&gt;
&lt;br/&gt;
Please consider this for 20u. It&amp;#39;s clean. I estimate it to be low risk. I&amp;#39;ve manually verified that a) the issue applies in 20 prior to the patch and b) the patch resolves it.&lt;br/&gt;
&lt;br/&gt;
Note: forgive me but I&amp;#39;ve /integrated the PR prior to posting this comment; I had forgotten that this part of the workflow was not part of the github/skara integration. Apologies!</comment>
                            <comment id="14582709" author="roboduke" created="Thu, 18 May 2023 13:13:52 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/1889&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/1889&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-18 20:04:43 +0000</comment>
                            <comment id="14582707" author="roboduke" created="Thu, 18 May 2023 13:11:10 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1372&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1372&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-18 20:03:47 +0000</comment>
                            <comment id="14582621" author="roboduke" created="Thu, 18 May 2023 07:54:10 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20u/pull/81&quot;&gt;https://git.openjdk.org/jdk20u/pull/81&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-18 14:46:36 +0000</comment>
                            <comment id="14573545" author="dukebot" created="Thu, 13 Apr 2023 05:03:53 -0700"  >Changeset: 6b9b7d1d&lt;br/&gt;
Author:    Jonathan Dowland &amp;lt;&lt;a href=&apos;mailto:jdowland@openjdk.org&apos;&gt;jdowland@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Thomas Stuefe &amp;lt;&lt;a href=&apos;mailto:stuefe@openjdk.org&apos;&gt;stuefe@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-13 12:02:14 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/6b9b7d1d921367418f82c2813b272d3447a47595&quot;&gt;https://git.openjdk.org/jdk/commit/6b9b7d1d921367418f82c2813b272d3447a47595&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14572003" author="roboduke" created="Wed, 5 Apr 2023 07:07:16 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13352&quot;&gt;https://git.openjdk.org/jdk/pull/13352&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-05 13:58:48 +0000</comment>
                            <comment id="14571240" author="jdowland" created="Mon, 3 Apr 2023 06:13:20 -0700"  >I did some tracing around this morning. java.awt.Font.getStringBounds(char[],int,int,FontRenderContext) makes a determination as to whether the input is simple or not. For the reproducer App, I think it is determined to be simple. At least, the simple branch returns the same value regardless of tracking attribute and the complex branch doesn&amp;#39;t. So I think the problem is somewhere under sun.font.FontDesignMetrics.getMetrics, and that&amp;#39;s where I&amp;#39;ll focus my efforts next session.</comment>
                            <comment id="14568091" author="jdowland" created="Mon, 20 Mar 2023 06:44:59 -0700"  >Confirmed with current master = commit 652bda0af8f046e9cabd44e3b176fb2cb982c818</comment>
                            <comment id="14568045" author="jdowland" created="Mon, 20 Mar 2023 03:05:31 -0700"  >I&amp;#39;ll do some more reproducibility testing. The precise JDK21 I tested was Debian package version 21~7ea-1 which I believe is a build of openjdk source tag jdk-21+7. I&amp;#39;ll try my own build of current master and perhaps some others.</comment>
                            <comment id="14567820" author="prr" created="Fri, 17 Mar 2023 10:10:53 -0700"  >Perhaps related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8165943&quot;&gt;https://bugs.openjdk.org/browse/JDK-8165943&lt;/a&gt; .. but that was fixed in JDK 20.&lt;br/&gt;
In JDK 10 we removed the proprietary font rasteriser but I can&amp;#39;t think how that would affect this.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5101258">JDK-8308390</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5101360">JDK-8308455</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5101419">JDK-8308505</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="103032" name="App.java" size="2766" author="jdowland" created="Thu, 16 Mar 2023 07:00:39 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="16302">10</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30rt7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17414"><![CDATA[b19]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="197"><![CDATA[2d]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>