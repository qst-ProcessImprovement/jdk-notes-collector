<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:32:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8054022] HttpURLConnection timeouts with Expect: 100-Continue and no chunking</title>
                <link>https://bugs.openjdk.org/browse/JDK-8054022</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>FULL PRODUCT VERSION :&lt;br/&gt;
java version &amp;quot;1.7.0_04&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_04-b20)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode)&lt;br/&gt;
&lt;br/&gt;
ADDITIONAL OS VERSION INFORMATION :&lt;br/&gt;
Linux rigi 3.4.7 #1 SMP Tue Aug 7 10:18:59 CEST 2012 x86_64 Intel(R) Xeon(R) CPU E31225 @ 3.10GHz GenuineIntel GNU/Linux&lt;br/&gt;
&lt;br/&gt;
The Bug is OS independent&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
It is cool that the JDK now  (after ~10 years of the first report) finally supports (and is therefore HTTP 1.1 conform) the expectation header. Really cool would it be if it would also work.&lt;br/&gt;
&lt;br/&gt;
If chunking is disabled (the Http-Header contains a Content-Length field) and the Expect: 100-Continue header is set, the connection times-out on a POST request, because nothing is written to the wire and both endpoints awaiting input.&lt;br/&gt;
&lt;br/&gt;
Simple testcases would prevent such bugs. And please test it also with a proxy, authentication and such before you mark this bug as fixed. I don&amp;#39;t expect a fix in the next few years, but will not loose my hope...&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
- disable chunking&lt;br/&gt;
- enable Expectation&lt;br/&gt;
- Send a Post request&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
An answer from the server&lt;br/&gt;
ACTUAL -&lt;br/&gt;
Timeout&lt;br/&gt;
&lt;br/&gt;
ERROR MESSAGES/STACK TRACES THAT OCCUR :&lt;br/&gt;
java.net.SocketTimeoutException: Read timed out&lt;br/&gt;
&lt;br/&gt;
REPRODUCIBILITY :&lt;br/&gt;
This bug can be reproduced always.&lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt; - I&amp;#39;ve attached the testcase to bug report.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="4680167">JDK-8054022</key>
            <summary>HttpURLConnection timeouts with Expect: 100-Continue and no chunking</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dclarke">Darragh Clarke</assignee>
                                    <reporter username="coffeys">Sean Coffey</reporter>
                        <labels>
                            <label>11bpr-critical-approved</label>
                            <label>17bpr-critical-approved</label>
                            <label>7-wnf</label>
                            <label>8bpr-critical-approved</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>webbug</label>
                    </labels>
                <created>Tue, 21 Aug 2012 07:36:05 -0700</created>
                <updated>Fri, 23 Feb 2024 09:28:13 -0800</updated>
                            <resolved>Mon, 8 May 2023 07:35:09 -0700</resolved>
                                    <version>7</version>
                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14650542" author="roboduke" created="Mon, 19 Feb 2024 12:43:24 -0800"  >[jdk11u-fix-request] Approval Request from Anton Bobrov&lt;br/&gt;
Re-submitting for approval since this needs to land before 2 missing test fixes so that they can be applied on top of it.</comment>
                            <comment id="14649587" author="abobrov" created="Thu, 15 Feb 2024 01:22:11 -0800"  >Fix Request 11u&lt;br/&gt;
&lt;br/&gt;
Backport for parity with 11.0.22.0.1-oracle. The backport is done via existing 17u backport and applies cleanly. Included test and tier1 tests pass. </comment>
                            <comment id="14649572" author="roboduke" created="Thu, 15 Feb 2024 00:58:17 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2523&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2523&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-15 08:50:45 +0000</comment>
                            <comment id="14633761" author="JIRAUSER20703" created="Tue, 12 Dec 2023 13:49:34 -0800"  >Fix request [17u]&lt;br/&gt;
I backport this for parity with 17.0.9.0.3-oracle. &lt;br/&gt;
Patch doesn&amp;#39;t apply cleanly. The notable change is the call to HttpClient#parseHTTP due to a parameter mismatch. &lt;br/&gt;
Testing: regression test passes and tier 1 passes with GHA. &lt;br/&gt;
</comment>
                            <comment id="14633684" author="roboduke" created="Tue, 12 Dec 2023 07:59:48 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2042&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2042&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-11 19:23:12 +0000</comment>
                            <comment id="14579790" author="dukebot" created="Mon, 8 May 2023 07:35:08 -0700"  >Changeset: 4b02956d&lt;br/&gt;
Author:    Darragh Clarke &amp;lt;&lt;a href=&apos;mailto:darraghclarke98@gmail.com&apos;&gt;darraghclarke98@gmail.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Daniel Jeli&#324;ski &amp;lt;&lt;a href=&apos;mailto:djelinski@openjdk.org&apos;&gt;djelinski@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-08 14:33:44 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/4b02956d42c29ce32894f15411d3abe12b07dccd&quot;&gt;https://git.openjdk.org/jdk/commit/4b02956d42c29ce32894f15411d3abe12b07dccd&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14571755" author="roboduke" created="Tue, 4 Apr 2023 10:09:42 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13330&quot;&gt;https://git.openjdk.org/jdk/pull/13330&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-04 17:02:08 +0000</comment>
                            <comment id="14543265" author="JIRAUSER19825" created="Tue, 6 Dec 2022 12:45:35 -0800"  >I can confirm the issue. Attached a modified reproducer that does not require any external code and can be run as a jtreg test.&lt;br/&gt;
&lt;br/&gt;
The problem is that if we set a streaming mode (either chunked or fixed length) and set ReadTimeout to a positive value, we wait for 100-Continue up to the configured ReadTimeout, and if we don&amp;#39;t receive it, the request fails.&lt;br/&gt;
&lt;br/&gt;
If the mode is non-streaming, we start sending immediately. Any 100-Continue response is ignored.&lt;br/&gt;
If the timeout is infinite, we wait for 100-Continue for up to (hardcoded) 5 seconds, then send the request body, then wait for the response using the original (infinite) timeout.&lt;br/&gt;
&lt;br/&gt;
Options?&lt;br/&gt;
- We could always set the hardcoded 5-second timeout for receiving 100-Continue, then revert to the original read timeout&lt;br/&gt;
- or we could set the timeout to a fraction of the configured ReadTimeout&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5116907">JDK-8321992</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117105">JDK-8322171</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117226">JDK-8322275</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117524">JDK-8322482</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122185">JDK-8326480</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5114691">JDK-8320058</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115397">JDK-8320694</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5116043">JDK-8321272</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                                        </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5122257">JDK-8326549</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122305">JDK-8326594</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5101197">JDK-8308336</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5107886">JDK-8314164</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122201">JDK-8326503</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119442">JDK-8324209</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="101925" name="HttpURLConnectionTest-1.java" size="13954" author="djelinski" created="Tue, 6 Dec 2022 12:17:34 -0800"/>
                            <attachment id="21550" name="HttpURLConnectionTest.java" size="15652" author="coffeys" created="Thu, 31 Jul 2014 03:19:28 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17004"><![CDATA[x86]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10001" key="com.atlassian.jira.plugin.system.customfieldtypes:datetime">
                        <customfieldname>Imported</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 Jun 2013 16:44:18 -0700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0xe8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>194763</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17415"><![CDATA[b22]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="193"><![CDATA[java.net]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>