<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:07:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8314121] test tools/jpackage/share/RuntimePackageTest.java#id0 fails on RHEL8</title>
                <link>https://bugs.openjdk.org/browse/JDK-8314121</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>on some RHEL Linux 8.X machines , we run into errors in  test    tools/jpackage/share/RuntimePackageTest.java#id0   , error can be seen below.&lt;br/&gt;
It looks like these errors occur when running the jtreg tests with higher concurrency, I did not see them when running just the single test.&lt;br/&gt;
&lt;br/&gt;
When adding some test output ,  we see the 2 top install dirs below (1 is expected, not 2) :&lt;br/&gt;
./test/unpacked-rpm/opt&lt;br/&gt;
./test/unpacked-rpm/usr&lt;br/&gt;
&lt;br/&gt;
error output :&lt;br/&gt;
&lt;br/&gt;
java.lang.AssertionError: Expected [1]. Actual [2]: Check the package has 1 top installation directories&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.error(TKit.java:273)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.assertEquals(TKit.java:576)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.verifyRootCountInUnpackedPackage(PackageTest.java:705)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.lambda$verifyPackageInstalled$3(PackageTest.java:635)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.Optional.ifPresent(Optional.java:178)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.verifyPackageInstalled(PackageTest.java:633)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.accept(PackageTest.java:592)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$2.accept(PackageTest.java:504)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$2.accept(PackageTest.java:411)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Functional$ThrowingConsumer.lambda$toConsumer$0(Functional.java:41)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.Iterable.forEach(Iterable.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest.lambda$runActions$24(PackageTest.java:381)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest.lambda$runActions$25(PackageTest.java:380)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest.runActions(PackageTest.java:379)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.RunnablePackageTest.run(RunnablePackageTest.java:58)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at RuntimePackageTest.test(RuntimePackageTest.java:83)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.MethodCall.accept(MethodCall.java:145)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TestInstance.run(TestInstance.java:230)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.lambda$ignoreExceptions$5(TKit.java:141)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.lambda$runTests$3(TKit.java:126)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.lambda$runTests$4(TKit.java:123)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:109)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.runTests(TKit.java:122)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Main.runTests(Main.java:79)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Main.lambda$main$2(Main.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:109)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Main.main(Main.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.Thread.run(Thread.java:1570)&lt;br/&gt;
java.lang.AssertionError: Expected [1]. Actual [2]: Check the package has 1 top installation directories&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.error(TKit.java:273)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.assertEquals(TKit.java:576)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.verifyRootCountInUnpackedPackage(PackageTest.java:705)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.lambda$verifyPackageInstalled$3(PackageTest.java:635)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.Optional.ifPresent(Optional.java:178)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.verifyPackageInstalled(PackageTest.java:633)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$Handler.accept(PackageTest.java:592)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$2.accept(PackageTest.java:504)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest$2.accept(PackageTest.java:411)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Functional$ThrowingConsumer.lambda$toConsumer$0(Functional.java:41)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.Iterable.forEach(Iterable.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest.lambda$runActions$24(PackageTest.java:381)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest.lambda$runActions$25(PackageTest.java:380)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.PackageTest.runActions(PackageTest.java:379)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.RunnablePackageTest.run(RunnablePackageTest.java:58)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at RuntimePackageTest.testUsrInstallDir(RuntimePackageTest.java:90)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.MethodCall.accept(MethodCall.java:145)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TestInstance.run(TestInstance.java:230)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.lambda$ignoreExceptions$5(TKit.java:141)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.lambda$runTests$3(TKit.java:126)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.lambda$runTests$4(TKit.java:123)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:109)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.runTests(TKit.java:122)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Main.runTests(Main.java:79)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Main.lambda$main$2(Main.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:109)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage.test.Main.main(Main.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.Thread.run(Thread.java:1570)&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5107826">JDK-8314121</key>
            <summary>test tools/jpackage/share/RuntimePackageTest.java#id0 fails on RHEL8</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbaesken">Matthias Baesken</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-SQE-ok-next</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Thu, 10 Aug 2023 08:22:21 -0700</created>
                <updated>Tue, 9 Jan 2024 23:20:26 -0800</updated>
                            <resolved>Thu, 7 Sep 2023 00:32:46 -0700</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14614246" author="roboduke" created="Wed, 27 Sep 2023 00:19:04 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1799&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1799&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-27 07:08:51 +0000</comment>
                            <comment id="14614242" author="mbaesken" created="Wed, 27 Sep 2023 00:11:37 -0700"  >jdk17u-dev backport request&lt;br/&gt;
I would like to have the patch in jdk17u-dev as well, because the issue is present there too. The patch is low-to-mid risk and applies cleanly.</comment>
                            <comment id="14610312" author="mbaesken" created="Tue, 12 Sep 2023 00:44:01 -0700"  >jdk21u backport request&lt;br/&gt;
I would like to have the patch in jdk21u as well, because the issue is present there too. The patch is low-to-mid risk and applies cleanly.</comment>
                            <comment id="14610308" author="roboduke" created="Tue, 12 Sep 2023 00:39:05 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/154&quot;&gt;https://git.openjdk.org/jdk21u/pull/154&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-12 07:33:34 +0000</comment>
                            <comment id="14609417" author="dukebot" created="Thu, 7 Sep 2023 00:32:45 -0700"  >Changeset: 8107eab3&lt;br/&gt;
Author:    Matthias Baesken &amp;lt;&lt;a href=&apos;mailto:mbaesken@openjdk.org&apos;&gt;mbaesken@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-09-07 07:30:32 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8107eab3c09b3f9fcf1348c3bf1deb7c4ac2fdf3&quot;&gt;https://git.openjdk.org/jdk/commit/8107eab3c09b3f9fcf1348c3bf1deb7c4ac2fdf3&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14608263" author="roboduke" created="Fri, 1 Sep 2023 00:26:40 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15528&quot;&gt;https://git.openjdk.org/jdk/pull/15528&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-01 07:22:12 +0000</comment>
                            <comment id="14608260" author="mbaesken" created="Fri, 1 Sep 2023 00:02:08 -0700"  >Adding &amp;quot;%define _build_id_links none&amp;quot;  to the template.spec fixed the issue.</comment>
                            <comment id="14608133" author="asemenyuk" created="Thu, 31 Aug 2023 11:40:13 -0700"  >Hi Matthias,&lt;br/&gt;
&lt;br/&gt;
On 8/31/2023 4:25 AM, Baesken, Matthias wrote:&lt;br/&gt;
&amp;gt;&amp;gt; I suspect the problem is not with the test, but with rpm that jpackage&lt;br/&gt;
&amp;gt;&amp;gt; produces. It looks like that by some reason it picks up some files from&lt;br/&gt;
&amp;gt;&amp;gt; the previous rpmbuild session. This can be related to&lt;br/&gt;
&amp;gt;&amp;gt; &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot;&gt;https://bugs.openjdk.org/browse/JDK-8311631&lt;/a&gt; as I suggested earlier.&lt;br/&gt;
&amp;gt;&amp;gt; &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot; title=&quot;When multiple users run tools/jpackage/share/LicenseTest.java, Permission denied for writing /var/tmp/*.files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8311631&quot;&gt;&lt;strike&gt;JDK-8311631&lt;/strike&gt;&lt;/a&gt; was because rpmbuild command triggered by jpackage used&lt;br/&gt;
&amp;gt;&amp;gt; /var/tmp directory for intermediate files. Imagine you run jpackage&lt;br/&gt;
&amp;gt;&amp;gt; twice and the first instance aborts leaving some debris out there. The&lt;br/&gt;
&amp;gt;&amp;gt; second instance will pick garbage and put in the rpm. I suspect this is&lt;br/&gt;
&amp;gt;&amp;gt; what is going on. The fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot; title=&quot;When multiple users run tools/jpackage/share/LicenseTest.java, Permission denied for writing /var/tmp/*.files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8311631&quot;&gt;&lt;strike&gt;JDK-8311631&lt;/strike&gt;&lt;/a&gt; made all intermediate rpm&lt;br/&gt;
&amp;gt;&amp;gt; source files go into unique directory. I would advise trying &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot; title=&quot;When multiple users run tools/jpackage/share/LicenseTest.java, Permission denied for writing /var/tmp/*.files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8311631&quot;&gt;&lt;strike&gt;JDK-8311631&lt;/strike&gt;&lt;/a&gt; patch.&lt;br/&gt;
&amp;gt; Hi Alexey, the JBS issue you mentioned&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot;&gt;https://bugs.openjdk.org/browse/JDK-8311631&lt;/a&gt;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; has been pushed some weeks ago,  but we see the error  we are talking about  also in jdk-head = jdk22 (with this change included) so it is not sufficient unfortunately.&lt;br/&gt;
&amp;gt; It can very well be that it is an issue with rpmbuild .&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Looking  into  opt  folder we find a lot of files belonging to JDK so this seems to be fine.&lt;br/&gt;
&amp;gt; In the additional  second  usr  folder  we find&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; ./unpacked-rpm/usr&lt;br/&gt;
&amp;gt; ./unpacked-rpm/usr/lib&lt;br/&gt;
&amp;gt; ./unpacked-rpm/usr/lib/.build-id&lt;br/&gt;
&amp;gt; ./unpacked-rpm/usr/lib/.build-id/1f&lt;br/&gt;
&amp;gt; ./unpacked-rpm/usr/lib/.build-id/1f/50f5b0abe95b3975a76c7d0cb3b8f5950dca80&lt;br/&gt;
&amp;gt; ./unpacked-rpm/usr/lib/.build-id/5b&lt;br/&gt;
&amp;gt; ./unpacked-rpm/usr/lib/.build-id/5b/2003e93144004b2ad927f603a9cb5a15ae1475&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; --&amp;gt; this looks very strange .   The  files  50f5b0abe95b3975a76c7d0cb3b8f5950dca80  and  2003e93144004b2ad927f603a9cb5a15ae1475  are binaries.&lt;br/&gt;
&amp;gt; Names look strange .   Using strings on the files  I see a lot of strings   with prefix  bfd_*    so maybe this is libbfd or something related to it .&lt;br/&gt;
These files are not from another jpackage generated rpm. Given that &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot; title=&quot;When multiple users run tools/jpackage/share/LicenseTest.java, Permission denied for writing /var/tmp/*.files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8311631&quot;&gt;&lt;strike&gt;JDK-8311631&lt;/strike&gt;&lt;/a&gt; is unrelated to the issue you experience.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Is this expected to be there ? Have you seen this before ?&lt;br/&gt;
No. No.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Here is some info an the strange folder  (we are on RHEL) :&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; &lt;a href=&quot;https://urldefense.com/v3/__https://access.redhat.com/discussions/5045161__;!!ACWV5N9M2RV99hQ!IJ2Ke7saPsf0__5WtP1rY3DGPFi-Kqu5MAEdUEwruFJdazFnc_rfln1r9Ojc8pQUMjIdRyJz0-4e_M9MlJzp2T4pyoYZBQ$&quot;&gt;https://urldefense.com/v3/__https://access.redhat.com/discussions/5045161__;!!ACWV5N9M2RV99hQ!IJ2Ke7saPsf0__5WtP1rY3DGPFi-Kqu5MAEdUEwruFJdazFnc_rfln1r9Ojc8pQUMjIdRyJz0-4e_M9MlJzp2T4pyoYZBQ$&lt;/a&gt;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; looks like it is for &amp;quot;improved debugging&amp;quot;   ??&lt;br/&gt;
Automatically adding /usr/lib/.build-id to package seems to be a &amp;quot;feature&amp;quot; of the rpmbuild according to &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1724153&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1724153&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
I guess adding &amp;quot;%define _build_id_links none&amp;quot; somewhere around &lt;a href=&quot;https://github.com/openjdk/jdk/blob/master/src/jdk.jpackage/linux/classes/jdk/jpackage/internal/resources/template.spec#L31&quot;&gt;https://github.com/openjdk/jdk/blob/master/src/jdk.jpackage/linux/classes/jdk/jpackage/internal/resources/template.spec#L31&lt;/a&gt; should solve the issue.&lt;br/&gt;
&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; We could also send you an jtr  of a failed run if this  helps ...&lt;br/&gt;
Thank you! I don&amp;#39;t think this is needed at this stage. Let&amp;#39;s try the fix with adding &amp;quot;_build_id_links&amp;quot; to the spec first.&lt;br/&gt;
&lt;br/&gt;
- Alexey&lt;br/&gt;
</comment>
                            <comment id="14603246" author="asemenyuk" created="Thu, 10 Aug 2023 08:46:18 -0700"  >-----Original Message-----&lt;br/&gt;
From: Christian Stein &lt;br/&gt;
Sent: Thursday, 10 August 2023 16:58&lt;br/&gt;
To: Baesken, Matthias ; Alexey Semenyuk &lt;br/&gt;
Subject: Re: [External] : RE: Error in test tools/jpackage/share/RuntimePackageTest.java#id0 on RHEL8&lt;br/&gt;
&lt;br/&gt;
Hi Matthias, hi Alexey,&lt;br/&gt;
&lt;br/&gt;
No, I don&amp;#39;t know of a way to ensure some tests are always synchronously - except for what you already discussed: jtreg ... -conc:N ... (with N being a low number, like 1)&lt;br/&gt;
&lt;br/&gt;
Skimming &lt;a href=&quot;https://github.com/openjdk/jdk/blob/master/test/jdk/tools/jpackage/share/RuntimePackageTest.java&quot;&gt;https://github.com/openjdk/jdk/blob/master/test/jdk/tools/jpackage/share/RuntimePackageTest.java&lt;/a&gt; seems to be about installing an application onto an operating system, right? Should the test (or the operating system) manage some means to control what to do when multiple installations are performed at the same time?&lt;br/&gt;
&lt;br/&gt;
Cheers,&lt;br/&gt;
Christian&lt;br/&gt;
&lt;br/&gt;
________________________________________&lt;br/&gt;
From: Baesken, Matthias &lt;br/&gt;
Sent: Thursday, August 10, 2023 16:27&lt;br/&gt;
To: Alexey Semenyuk; Christian Stein&lt;br/&gt;
Subject: RE: [External] : RE: Error in test tools/jpackage/share/RuntimePackageTest.java#id0 on RHEL8&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;gt;&amp;gt; It might be caused  by &#8220;multiple tests&#8221;  (we have some concurrency  set  for the  jtreg  tier&amp;lt;x&amp;gt;  runs).&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;*   I agree.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;*&lt;br/&gt;
&amp;nbsp;&amp;nbsp;*   I don&amp;#39;t know. Christian Stein can help better with jtreg questions. I guess the question is how to run all jpackage tests synchronously.&lt;br/&gt;
&lt;br/&gt;
One could probably put them into a separate group here  :&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://github.com/openjdk/jdk/blob/master/test/jdk/TEST.groups&quot;&gt;https://github.com/openjdk/jdk/blob/master/test/jdk/TEST.groups&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
and  document to run this group  with conc 1  .  Not really nice but would work.&lt;br/&gt;
&lt;br/&gt;
Christian, maybe there is a better way to run those  tools/jpackage/share   jtreg  tests   synchronously ?&lt;br/&gt;
It looks like when running them with some higher concurrency , they start to fail .&lt;br/&gt;
We  run those tests currently with higher concurrency  (I think it depends on core number of the machine,  but conc is often between 10 and 20 )  .&lt;br/&gt;
&lt;br/&gt;
Best regards, Matthias&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
From: Alexey Semenyuk &lt;br/&gt;
Sent: Thursday, 10 August 2023 16:04&lt;br/&gt;
To: Baesken, Matthias &lt;br/&gt;
Subject: Re: [External] : RE: Error in test tools/jpackage/share/RuntimePackageTest.java#id0 on RHEL8&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
On 8/9/2023 3:39 AM, Baesken, Matthias wrote:&lt;br/&gt;
&lt;br/&gt;
&amp;gt; It looks broken. It should be ./test/unpacked-rpm/opt for this test.&lt;br/&gt;
&amp;gt; The problem you experience can be related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot; title=&quot;When multiple users run tools/jpackage/share/LicenseTest.java, Permission denied for writing /var/tmp/*.files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8311631&quot;&gt;&lt;strike&gt;JDK-8311631&lt;/strike&gt;&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Hi Alexey,   the issue you pointed to is&lt;br/&gt;
&#8220;When multiple users run tools/jpackage/share/LicenseTest.java, Permission denied for writing /var/tmp/*.files&#8221;&lt;br/&gt;
&lt;br/&gt;
I do not think that &#8220;multiple users&#8221;  is our problem .  But looking at my observation :&lt;br/&gt;
&lt;br/&gt;
&amp;gt; A strange thing  I noticed &#8211; when I execute the single test  (the failure is from a whole suite run), the test works .&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
It might be causes  by &#8220;multiple tests&#8221;  (we have some concurrency  set  for the  jtreg  tier&amp;lt;x&amp;gt;  runs).&lt;br/&gt;
I agree.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Can we configure the test to run &#8220;alone&#8221;   ?&lt;br/&gt;
I don&amp;#39;t know. Christian Stein can help better with jtreg questions. I guess the question is how to run all jpackage tests synchronously.&lt;br/&gt;
&lt;br/&gt;
- Alexey&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Best regards, Matthias&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
From: Alexey Semenyuk &lt;br/&gt;
Sent: Friday, 4 August 2023 16:30&lt;br/&gt;
To: Baesken, Matthias &lt;br/&gt;
Subject: Re: [External] : RE: Error in test tools/jpackage/share/RuntimePackageTest.java#id0 on RHEL8&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
On 8/4/2023 3:59 AM, Baesken, Matthias wrote:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;1.  Actual [2]: Check the package has 1 top installation directories&lt;br/&gt;
&lt;br/&gt;
Hi Alexey, one additional info,  when listing the directories  I get those 2  :&lt;br/&gt;
&lt;br/&gt;
List file(s) of unpacked dir and check count:&lt;br/&gt;
./test/unpacked-rpm/opt&lt;br/&gt;
./test/unpacked-rpm/usr&lt;br/&gt;
&lt;br/&gt;
(in our nightly test run )&lt;br/&gt;
&lt;br/&gt;
Is this expected or does this structure look broken to you ?&lt;br/&gt;
It looks broken. It should be ./test/unpacked-rpm/opt for this test.&lt;br/&gt;
&lt;br/&gt;
The problem you experience can be related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311631&quot; title=&quot;When multiple users run tools/jpackage/share/LicenseTest.java, Permission denied for writing /var/tmp/*.files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8311631&quot;&gt;&lt;strike&gt;JDK-8311631&lt;/strike&gt;&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
- Alexey</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5110228">JDK-8316205</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5111398">JDK-8317239</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118337">JDK-8323218</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5104969">JDK-8311631</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5110640">JDK-8316563</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32p43:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17352"><![CDATA[b15]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2192"><![CDATA[jpackage]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>