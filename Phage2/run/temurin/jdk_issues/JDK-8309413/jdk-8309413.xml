<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:13:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8309413] Improve the performance of MethodTypeDesc::descriptorString</title>
                <link>https://bugs.openjdk.org/browse/JDK-8309413</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The current MethodTypeDesc implementation has a few performance issues. Below are the actionable changes that I recommend:&lt;br/&gt;
&lt;br/&gt;
1. MTD can cache the descriptorString as computation is expensive; and its descriptorString computation can be improved by removing streams and formatting.&lt;br/&gt;
2. MTD doesn&amp;#39;t have to validate all its arguments (to be non-void) every time a new instance is created, especially for return type swapping and parameter dropping.&lt;br/&gt;
3. Since parameterList will be costly, we should replace a few of its occurrences in performance-sensitive area with manually-unrolled loops.&lt;br/&gt;
&lt;br/&gt;
This will most likely replace bug 8306889.&lt;br/&gt;
&lt;br/&gt;
Also a few general side notes:&lt;br/&gt;
1. MTD parsing from descriptor is costly, so we can construct from CDs instead, especially if we don&amp;#39;t use the descriptor.&lt;br/&gt;
2. As a conclusion, MTD should be stored in static final fields in use sites (like constants), such as in SystemModulesPlugin; this will be done in a separate patch.</description>
                <environment></environment>
        <key id="5102460">JDK-8309413</key>
            <summary>Improve the performance of MethodTypeDesc::descriptorString</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liach">Chen Liang</assignee>
                                    <reporter username="liach">Chen Liang</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Sun, 4 Jun 2023 15:56:33 -0700</created>
                <updated>Thu, 25 Apr 2024 03:34:57 -0700</updated>
                            <resolved>Tue, 6 Jun 2023 08:59:27 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14588279" author="JIRAUSER20011" created="Fri, 9 Jun 2023 15:48:45 -0700"  >Thanks for the wording tweaks. Finalized.</comment>
                            <comment id="14588278" author="mchung" created="Fri, 9 Jun 2023 15:47:32 -0700"  >Reviewed.  Please finalize.</comment>
                            <comment id="14588276" author="JIRAUSER20011" created="Fri, 9 Jun 2023 15:25:53 -0700"  >CSR filed. [~mchung] Can you take a look?</comment>
                            <comment id="14588268" author="mchung" created="Fri, 9 Jun 2023 14:47:13 -0700"  >Ok.   A CSR in this case can help answer when questions about the signature change are asked.  No objection.</comment>
                            <comment id="14588264" author="darcy" created="Fri, 9 Jun 2023 14:00:47 -0700"  >Even if a signature change is technically innocuous, that doesn&amp;#39;t imply the change shouldn&amp;#39;t have CSR review, in part to verify the change is in fact innocuous.&lt;br/&gt;
&lt;br/&gt;
[~liach], please file a retroactive CSR for this change; thanks.</comment>
                            <comment id="14588195" author="kganapureddy" created="Fri, 9 Jun 2023 08:36:58 -0700"  >IMO yes. [~darcy] Can you please comment on this.</comment>
                            <comment id="14588147" author="JIRAUSER20011" created="Fri, 9 Jun 2023 05:19:10 -0700"  >[~mchung] recommended to move the implementation of descriptorString into the implementation class. This has no compatibility risk as the removal of default from a method in a sealed interface does not affect users, and this does not change the API specification. Should I file a retroactive CSR for this?</comment>
                            <comment id="14588109" author="kganapureddy" created="Fri, 9 Jun 2023 01:30:09 -0700"  >[~liach] Noticed that the  signature of  - public java.lang.String descriptorString()  got changed as part of this.&lt;br/&gt;
I don&amp;#39;t see any CSR filed for this signature change OR am I missing the one.&lt;br/&gt;
Can you please comment on this.&lt;br/&gt;
</comment>
                            <comment id="14587371" author="dukebot" created="Tue, 6 Jun 2023 08:59:26 -0700"  >Changeset: 38cef2ad&lt;br/&gt;
Author:    Chen Liang &amp;lt;&lt;a href=&apos;mailto:liach@openjdk.org&apos;&gt;liach@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Mandy Chung &amp;lt;&lt;a href=&apos;mailto:mchung@openjdk.org&apos;&gt;mchung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-06 15:56:36 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/38cef2adbd956ac1e953ea7a7e7952fe093a9872&quot;&gt;https://git.openjdk.org/jdk/commit/38cef2adbd956ac1e953ea7a7e7952fe093a9872&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14587199" author="mchung" created="Mon, 5 Jun 2023 17:13:07 -0700"  >I think we can make the description of this issue focus on the performance improvement of `descriptorString` method.  It caches the descriptor string to avoid the repeated computation if the `descriptorString` method is invoked multiple times.   &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8304932&quot; title=&quot;MethodTypeDescImpl can be mutated by argument passed to MethodTypeDesc.of&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8304932&quot;&gt;&lt;strike&gt;JDK-8304932&lt;/strike&gt;&lt;/a&gt; is about the mutability and validation of the paramDescs argument.  &lt;br/&gt;
&lt;br/&gt;
The PR contains fixes for 2 issues.   I take the liberty to update the description of this issue.  It&amp;#39;s clearer for the readers to understand the patch when they look at the commit log.</comment>
                            <comment id="14586802" author="roboduke" created="Sun, 4 Jun 2023 16:52:20 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13186&quot;&gt;https://git.openjdk.org/jdk/pull/13186&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-26 05:23:54 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10400">
                    <name>CSR</name>
                                            <outwardlinks description="csr for">
                                        <issuelink>
            <issuekey id="5102851">JDK-8309755</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5097125">JDK-8304932</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5127895">JDK-8331114</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5099494">JDK-8306889</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31s4r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="190"><![CDATA[java.lang]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>