<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 15:30:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8299858] [Metrics] Swap memory limit reported incorrectly when too large</title>
                <link>https://bugs.openjdk.org/browse/JDK-8299858</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>This bug is related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8292541&quot; title=&quot;[Metrics] Reported memory limit may exceed physical machine memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8292541&quot;&gt;&lt;strike&gt;JDK-8292541&lt;/strike&gt;&lt;/a&gt; which fixed the reported memory limit when it (potentially) exceeds physical host memory. However, a similar issue can happen with Metrics.getMemoryAndSwapLimit(), when the memory limit exceeds host swap limit. That should also not happen.&lt;br/&gt;
&lt;br/&gt;
Host system:&lt;br/&gt;
$ free -b&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;total        used        free      shared  buff/cache   available&lt;br/&gt;
Mem:     67174510592 11629891584 32003850240  1106583552 23540768768 53689348096&lt;br/&gt;
Swap:     8589930496     3145728  8586784768&lt;br/&gt;
&lt;br/&gt;
I.e. total host swap is &amp;#39;8589930496&amp;#39; (8 GB). Total system memory is 64 GB. The container should not be allowed to exceed the host memory and host swap values (8+64 = 72GB).&lt;br/&gt;
&lt;br/&gt;
Reproducer:&lt;br/&gt;
&lt;br/&gt;
$ sudo podman run --rm -ti -v $(pwd)/build/linux-x86_64-server-fastdebug/images/jdk:/opt/jdk:z --memory 671745105920 --memory-swap 671745105920 fedora:37 /opt/jdk/bin/java -XshowSettings:system -version&lt;br/&gt;
Operating System Metrics:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Provider: cgroupv1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Effective CPU Count: 12&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CPU Period: 100000us&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CPU Quota: -1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CPU Shares: -1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List of Processors, 12 total: &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0 1 2 3 4 5 6 7 8 9 10 11 &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List of Effective Processors, 12 total: &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0 1 2 3 4 5 6 7 8 9 10 11 &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List of Memory Nodes, 1 total: &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0 &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List of Available Memory Nodes, 1 total: &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0 &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Memory Limit: Unlimited&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Memory Soft Limit: Unlimited&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Memory &amp;amp; Swap Limit: 625.61G&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Maximum Processes Limit: 2048&lt;br/&gt;
&lt;br/&gt;
openjdk version &amp;quot;20-internal&amp;quot; 2023-03-21&lt;br/&gt;
OpenJDK Runtime Environment (fastdebug build 20-internal-adhoc.sgehwolf.jdk-jdk)&lt;br/&gt;
OpenJDK 64-Bit Server VM (fastdebug build 20-internal-adhoc.sgehwolf.jdk-jdk, mixed mode, sharing)&lt;br/&gt;
&lt;br/&gt;
Note the Memory and Swap Limit of &amp;#39;625.61G&amp;#39; It should be &amp;#39;Unlimited&amp;#39; (=&amp;gt; use host values).</description>
                <environment></environment>
        <key id="5091001">JDK-8299858</key>
            <summary>[Metrics] Swap memory limit reported incorrectly when too large</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sgehwolf">Severin Gehwolf</assignee>
                                    <reporter username="sgehwolf">Severin Gehwolf</reporter>
                        <labels>
                            <label>containers</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                    </labels>
                <created>Tue, 10 Jan 2023 03:32:22 -0800</created>
                <updated>Wed, 19 Mar 2025 00:00:07 -0700</updated>
                            <resolved>Thu, 26 Jan 2023 06:53:19 -0800</resolved>
                                                    <fixVersion>21</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14664581" author="mbaesken" created="Thu, 11 Apr 2024 00:08:56 -0700"  >jdk11u-dev backport request&lt;br/&gt;
I would like to have that patch in jdk11u-dev as well, because the issue is present there too. The backport is clean and low-to-medium risk.</comment>
                            <comment id="14664430" author="roboduke" created="Wed, 10 Apr 2024 07:32:58 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2644&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2644&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-10 14:27:04 +0000</comment>
                            <comment id="14656258" author="mbaesken" created="Mon, 11 Mar 2024 06:57:36 -0700"  >jdk17u-dev backport request&lt;br/&gt;
I would like to have that patch in jdk17u-dev as well, because the issue is present there too. The backport is clean and low-to-medium risk.</comment>
                            <comment id="14656257" author="roboduke" created="Mon, 11 Mar 2024 06:54:46 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2285&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2285&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-11 13:49:42 +0000</comment>
                            <comment id="14656254" author="sgehwolf" created="Mon, 11 Mar 2024 06:35:04 -0700"  >[~mbaesken] It could be, but it&amp;#39;s less critical than &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8292541&quot; title=&quot;[Metrics] Reported memory limit may exceed physical machine memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8292541&quot;&gt;&lt;strike&gt;JDK-8292541&lt;/strike&gt;&lt;/a&gt; I&amp;#39;d say. Feel free to go ahead and backport it.</comment>
                            <comment id="14656232" author="mbaesken" created="Mon, 11 Mar 2024 05:22:16 -0700"  >&amp;gt; This bug is related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8292541&quot; title=&quot;[Metrics] Reported memory limit may exceed physical machine memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8292541&quot;&gt;&lt;strike&gt;JDK-8292541&lt;/strike&gt;&lt;/a&gt; &lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8292541&quot; title=&quot;[Metrics] Reported memory limit may exceed physical machine memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8292541&quot;&gt;&lt;strike&gt;JDK-8292541&lt;/strike&gt;&lt;/a&gt; has been backported to 17, so should we backport this one too at least to jdk17 ?</comment>
                            <comment id="14554699" author="dukebot" created="Thu, 26 Jan 2023 06:53:17 -0800"  >Changeset: 64ddf953&lt;br/&gt;
Author:    Severin Gehwolf &amp;lt;&lt;a href=&apos;mailto:sgehwolf@openjdk.org&apos;&gt;sgehwolf@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-26 14:50:46 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/64ddf9536f55fb81956ebde6dfc0a3c4147af371&quot;&gt;https://git.openjdk.org/jdk/commit/64ddf9536f55fb81956ebde6dfc0a3c4147af371&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14553111" author="roboduke" created="Fri, 20 Jan 2023 08:00:50 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12118&quot;&gt;https://git.openjdk.org/jdk/pull/12118&lt;/a&gt;&lt;br/&gt;
Date: 2023-01-20 15:53:09 +0000</comment>
                            <comment id="14552780" author="sgehwolf" created="Thu, 19 Jan 2023 09:01:59 -0800"  >Adding link to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8300659&quot; title=&quot;Refactor TestMemoryAwareness to use WhiteBox api for host values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8300659&quot;&gt;&lt;strike&gt;JDK-8300659&lt;/strike&gt;&lt;/a&gt; as this fix depends on that refactoring in the test.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5123971">JDK-8327981</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5126866">JDK-8330240</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152335">JDK-8351466</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152354">JDK-8351486</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152721">JDK-8351835</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5091958">JDK-8300659</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5081798">JDK-8292541</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zuaz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17337"><![CDATA[b08]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="194"><![CDATA[java.lang.management]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>