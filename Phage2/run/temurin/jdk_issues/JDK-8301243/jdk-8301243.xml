<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 16:14:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8301243] java/net/httpclient/http2/IdleConnectionTimeoutTest.java intermittent failure</title>
                <link>https://bugs.openjdk.org/browse/JDK-8301243</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The IdleConnectionTimeoutTest has been observed failing once in the CI.&lt;br/&gt;
The test tries to detect whether a connection was reused or not in the server handler by comparing the address+port of the remote client. If the address and port is the same, it assumes that the connection has been reused.&lt;br/&gt;
&lt;br/&gt;
However, when a connection is closed, there is still a chance that a new connection will be able to reuse the same port than the old connection that was just closed, and this is what has been observed here:&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
#section:testng&lt;br/&gt;
----------messages:(7/1505)----------&lt;br/&gt;
command: testng -Djdk.httpclient.HttpClient.log=errors -Djdk.httpclient.keepalive.timeout.h2=1 IdleConnectionTimeoutTest&lt;br/&gt;
...&lt;br/&gt;
finished: Fri Jan 27 11:30:01 UTC 2023&lt;br/&gt;
elapsed time (seconds): 3.609&lt;br/&gt;
...&lt;br/&gt;
----------System.out:(44/2759)----------&lt;br/&gt;
config IdleConnectionTimeoutTest.setup(): success&lt;br/&gt;
test IdleConnectionTimeoutTest.test(): failure&lt;br/&gt;
java.lang.AssertionError: idleConnectionTimeoutEvent was expected but did not occur expected [200] but found [400]&lt;br/&gt;
	at org.testng.Assert.fail(Assert.java:99)&lt;br/&gt;
	at org.testng.Assert.failNotEquals(Assert.java:1037)&lt;br/&gt;
	at org.testng.Assert.assertEqualsImpl(Assert.java:140)&lt;br/&gt;
	at org.testng.Assert.assertEquals(Assert.java:122)&lt;br/&gt;
	at org.testng.Assert.assertEquals(Assert.java:907)&lt;br/&gt;
	at IdleConnectionTimeoutTest.test(IdleConnectionTimeoutTest.java:124)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)&lt;br/&gt;
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)&lt;br/&gt;
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)&lt;br/&gt;
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)&lt;br/&gt;
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)&lt;br/&gt;
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)&lt;br/&gt;
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)&lt;br/&gt;
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)&lt;br/&gt;
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)&lt;br/&gt;
	at org.testng.TestRunner.privateRun(TestRunner.java:764)&lt;br/&gt;
	at org.testng.TestRunner.run(TestRunner.java:585)&lt;br/&gt;
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)&lt;br/&gt;
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)&lt;br/&gt;
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)&lt;br/&gt;
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)&lt;br/&gt;
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)&lt;br/&gt;
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)&lt;br/&gt;
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)&lt;br/&gt;
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)&lt;br/&gt;
	at org.testng.TestNG.runSuites(TestNG.java:1069)&lt;br/&gt;
	at org.testng.TestNG.run(TestNG.java:1037)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:93)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:53)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
&lt;br/&gt;
===============================================&lt;br/&gt;
java/net/httpclient/http2/IdleConnectionTimeoutTest.java&lt;br/&gt;
Total tests run: 1, Passes: 0, Failures: 1, Skips: 0&lt;br/&gt;
===============================================&lt;br/&gt;
&lt;br/&gt;
----------System.err:(44/2287)----------&lt;br/&gt;
TestServer(1): accepting connections&lt;br/&gt;
Test run for jdk.httpclient.keepalive.timeout.h2=1&lt;br/&gt;
TestServer(1): connection accepted&lt;br/&gt;
TestServer(1): stopping is: false&lt;br/&gt;
TestServer(1): accepting connections&lt;br/&gt;
TestServer(1): creating connection&lt;br/&gt;
TestServer: New connection from Socket[addr=/127.0.0.1,port=43374,localport=40965]&lt;br/&gt;
TestServer(1): starting connection&lt;br/&gt;
TestServer: GET /serverTimeoutHandler&lt;br/&gt;
Server: creating input stream for stream 1&lt;br/&gt;
TestServer(1): connection started&lt;br/&gt;
TestServer(1): Using handler for: /serverTimeoutHandler&lt;br/&gt;
Sent response headers 200&lt;br/&gt;
Jan 27, 2023 11:30:00 AM jdk.internal.net.http.Http2Connection shutdown&lt;br/&gt;
INFO: ERROR: java.net.http.HttpConnectTimeoutException: HTTP connection idle, no active streams. Shutting down.&lt;br/&gt;
	at java.net.http/jdk.internal.net.http.Http2Connection$IdleConnectionTimeoutEvent.handle(Http2Connection.java:213)&lt;br/&gt;
	at java.net.http/jdk.internal.net.http.HttpClientImpl.purgeTimeoutsAndReturnNextDeadline(HttpClientImpl.java:1850)&lt;br/&gt;
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:1459)&lt;br/&gt;
&lt;br/&gt;
Server connection to /127.0.0.1:43374 stopping. 1 streams&lt;br/&gt;
TestServer: Connection writer stopping&lt;br/&gt;
TestServer(1): connection accepted&lt;br/&gt;
TestServer(1): stopping is: false&lt;br/&gt;
TestServer(1): accepting connections&lt;br/&gt;
TestServer(1): creating connection&lt;br/&gt;
TestServer: New connection from Socket[addr=/127.0.0.1,port=43374,localport=40965]&lt;br/&gt;
TestServer(1): starting connection&lt;br/&gt;
TestServer: GET /serverTimeoutHandler&lt;br/&gt;
Server: creating input stream for stream 1&lt;br/&gt;
TestServer(1): Using handler for: /serverTimeoutHandler&lt;br/&gt;
Sent response headers 400&lt;br/&gt;
TestServer(1): connection started&lt;br/&gt;
java.lang.Exception: failures: 1&lt;br/&gt;
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:95)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:53)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.Exception: failures: 1&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: java.lang.Exception: failures: 1&lt;br/&gt;
----------rerun:(55/11152)*----------</description>
                <environment></environment>
        <key id="5092642">JDK-8301243</key>
            <summary>java/net/httpclient/http2/IdleConnectionTimeoutTest.java intermittent failure</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ccleary">Conor Cleary</assignee>
                                    <reporter username="dfuchs">Daniel Fuchs</reporter>
                        <labels>
                            <label>httpclient</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Fri, 27 Jan 2023 05:13:52 -0800</created>
                <updated>Wed, 22 Feb 2023 12:27:32 -0800</updated>
                            <resolved>Tue, 14 Feb 2023 01:43:54 -0800</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14559921" author="dukebot" created="Tue, 14 Feb 2023 01:43:53 -0800"  >Changeset: 92474f13&lt;br/&gt;
Author:    Conor Cleary &amp;lt;&lt;a href=&apos;mailto:ccleary@openjdk.org&apos;&gt;ccleary@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-02-14 09:41:36 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/92474f13f03afacc48541b0de17998998f70eb65&quot;&gt;https://git.openjdk.org/jdk/commit/92474f13f03afacc48541b0de17998998f70eb65&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14557985" author="roboduke" created="Tue, 7 Feb 2023 07:54:18 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12457&quot;&gt;https://git.openjdk.org/jdk/pull/12457&lt;/a&gt;&lt;br/&gt;
Date: 2023-02-07 15:41:23 +0000</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i304fn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17338"><![CDATA[b10]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="193"><![CDATA[java.net]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>