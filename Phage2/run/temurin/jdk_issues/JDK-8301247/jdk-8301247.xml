<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:57:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8301247] JPackage app-image exe launches multiple exe&apos;s in JDK 17+</title>
                <link>https://bugs.openjdk.org/browse/JDK-8301247</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
The following Java program and jpackage command create an app-image which launches multiple exe&amp;#39;s on Windows 10. This does not happen before JDK 17. The same code and command work as expected on JDK 16, resulting in a single instance of Main.exe in the Task Manager Details.&lt;br/&gt;
&lt;br/&gt;
import javax.swing.*;&lt;br/&gt;
&lt;br/&gt;
public class Main {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JDialog dialog = new JDialog();&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;dialog.setVisible(true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
jpackage --type app-image --input jpackage_test_jar --dest install/tmp --main-jar jpackage_test.jar --main-class Main&lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 16&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5092200">JDK-8301247</key>
            <summary>JPackage app-image exe launches multiple exe&apos;s in JDK 17+</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asemenyuk">Alexey Semenyuk</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>dcsad</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-SQE-ok-next</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>regression</label>
                            <label>reproducer-yes</label>
                            <label>sn_152</label>
                            <label>sn_153</label>
                            <label>webbug</label>
                    </labels>
                <created>Mon, 23 Jan 2023 05:14:06 -0800</created>
                <updated>Mon, 18 Aug 2025 03:33:36 -0700</updated>
                            <resolved>Mon, 18 Sep 2023 13:22:20 -0700</resolved>
                                    <version>17</version>
                    <version>19</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14616650" author="roboduke" created="Mon, 9 Oct 2023 00:49:43 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1859&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1859&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-09 07:43:07 +0000</comment>
                            <comment id="14616648" author="goetz" created="Mon, 9 Oct 2023 00:45:32 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.10-oracle.&lt;br/&gt;
Low risk. limited to jpackacke and win, but a larger change.&lt;br/&gt;
Clean backport, but the test had to be adapted to Java 17.&lt;br/&gt;
Test passes. SAP nightly testing passes.</comment>
                            <comment id="14615177" author="roboduke" created="Mon, 2 Oct 2023 03:53:32 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/219&quot;&gt;https://git.openjdk.org/jdk21u/pull/219&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-02 10:46:35 +0000</comment>
                            <comment id="14615176" author="goetz" created="Mon, 2 Oct 2023 03:46:17 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.10-oracle.&lt;br/&gt;
Medium risk, fixes a tool on win.  21u should be on-par with 17.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14611867" author="dukebot" created="Mon, 18 Sep 2023 13:22:19 -0700"  >Changeset: dcea9bf0&lt;br/&gt;
Author:    Alexey Semenyuk &amp;lt;&lt;a href=&apos;mailto:asemenyuk@openjdk.org&apos;&gt;asemenyuk@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-09-18 20:19:36 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/dcea9bf087c87548d9caa899c52e95d17478da22&quot;&gt;https://git.openjdk.org/jdk/commit/dcea9bf087c87548d9caa899c52e95d17478da22&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14610685" author="roboduke" created="Tue, 12 Sep 2023 12:56:15 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15690&quot;&gt;https://git.openjdk.org/jdk/pull/15690&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-12 19:47:19 +0000</comment>
                            <comment id="14596380" author="dwookey" created="Sat, 15 Jul 2023 00:44:38 -0700"  >That would solve our issue, but I&amp;#39;m not sure what the issue was for the original bug reporter. They also posted in stack overflow: &lt;a href=&quot;https://stackoverflow.com/q/75173536/4489577&quot;&gt;https://stackoverflow.com/q/75173536/4489577&lt;/a&gt;</comment>
                            <comment id="14596360" author="asemenyuk" created="Fri, 14 Jul 2023 14:53:29 -0700"  >What if we adjust the code launching child process in a way that when the parent process is killed, child process is killed as well?</comment>
                            <comment id="14596050" author="dwookey" created="Thu, 13 Jul 2023 06:51:10 -0700"  >I suspect it was due to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8272328&quot;&gt;https://bugs.openjdk.org/browse/JDK-8272328&lt;/a&gt; where the process is restarted with correct environment variables. The parent process hangs around until the child process exits.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m not sure what other problems this causes, but for us, the main problem is that when the parent process gets killed, it doesn&amp;#39;t kill the child process (but the reverse is true).  This means our installers sometimes fail to kill the process properly. It also means that some of our apps which run as windows services don&amp;#39;t actually stop when stopped (it kills the parent, but not the child), and then start up another 2 new processes when restarted. </comment>
                            <comment id="14595310" author="dwookey" created="Wed, 12 Jul 2023 06:24:28 -0700"  >@ANUPAM DEV I could reproduce this with jdk 19. In your screenshot you show the processes tab, but in the details tab there are 2 instances with different process ids.</comment>
                            <comment id="14555021" author="adev" created="Fri, 27 Jan 2023 06:56:35 -0800"  >I could not reproduce the issue.&lt;br/&gt;
C:\jdk\jdk-19_windows-x64_bin\jdk-19\bin\javac .\Main.java&lt;br/&gt;
PS C:\test&amp;gt; jar -cvf test.jar Main.class&lt;br/&gt;
added manifest&lt;br/&gt;
adding: Main.class(in = 334) (out= 255)(deflated 23%)&lt;br/&gt;
PS C:\test&amp;gt; jar -cvf test.jar Main.class&lt;br/&gt;
PS C:\test&amp;gt; C:\jdk\jdk-19_windows-x64_bin\jdk-19\bin\jpackage --type app-image --input o --dest install --main-jar test.jar --main-class Main&lt;br/&gt;
&lt;br/&gt;
I could see only one instance of Main in the Windows task manager.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5110524">JDK-8316459</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5111684">JDK-8317479</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5112131">JDK-8317884</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="5168505">JDK-8365790</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5120670">JDK-8325203</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="102434" name="Main.java" size="178" author="adev" created="Fri, 27 Jan 2023 06:55:36 -0800"/>
                            <attachment id="102433" name="Screenshot 2023-01-27 202055.png" size="78784" author="adev" created="Fri, 27 Jan 2023 06:53:46 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17005"><![CDATA[windows]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i301pf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17312"><![CDATA[b16]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2192"><![CDATA[jpackage]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>