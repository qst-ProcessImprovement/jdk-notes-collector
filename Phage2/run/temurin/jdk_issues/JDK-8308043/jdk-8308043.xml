<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 19:27:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8308043] Deadlock in TestCSLocker.java due to blocking GC while allocating</title>
                <link>https://bugs.openjdk.org/browse/JDK-8308043</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test timed out in the JDK21 CI:&lt;br/&gt;
&lt;br/&gt;
gc/cslocker/TestCSLocker.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(8/332)----------&lt;br/&gt;
command: main -Xmx256m gc.cslocker.TestCSLocker&lt;br/&gt;
reason: User specified action: run main/native/othervm -Xmx256m gc.cslocker.TestCSLocker &lt;br/&gt;
started: Sun May 14 00:09:45 UTC 2023&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
Timeout information:&lt;br/&gt;
--- Timeout information end.&lt;br/&gt;
finished: Sun May 14 00:21:43 UTC 2023&lt;br/&gt;
elapsed time (seconds): 718.384&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(2/38)----------&lt;br/&gt;
sleeping...&lt;br/&gt;
Timeout refired 480 times&lt;br/&gt;
----------System.err:(0/0)----------&lt;br/&gt;
----------rerun:(39/7096)*----------&lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&lt;br/&gt;
result: Error. Program `/opt/mach5/mesos/work_dir/jib-master/install/jdk-21+23-1940/linux-x64.jdk/jdk-21/bin/java&amp;#39; timed out (timeout set to 480000ms, elapsed time including timeout handling was 718378ms).&lt;br/&gt;
&lt;br/&gt;
The test task&amp;#39;s JVM args are:&lt;br/&gt;
-XX:+UseZGC -XX:+ZGenerational&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5100871">JDK-8308043</key>
            <summary>Deadlock in TestCSLocker.java due to blocking GC while allocating</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eosterlund">Erik &#214;sterlund</assignee>
                                    <reporter username="kbarrett">Kim Barrett</reporter>
                        <labels>
                            <label>genzgc</label>
                            <label>intermittent</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>tier2</label>
                    </labels>
                <created>Sat, 13 May 2023 18:21:03 -0700</created>
                <updated>Fri, 29 Dec 2023 03:08:34 -0800</updated>
                            <resolved>Wed, 17 May 2023 04:49:10 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14636132" author="roboduke" created="Thu, 21 Dec 2023 19:12:59 -0800"  >[jdk11u-fix-request] Approval Request from Amos&lt;br/&gt;
&#8220;Backporting for parity with jdk 11.0.23-oracle. No risk, test fix. UnClean backport. SAP nightlies passed on 2023-12-21&#8221;</comment>
                            <comment id="14634533" author="roboduke" created="Thu, 14 Dec 2023 22:52:50 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2394&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2394&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-15 06:47:57 +0000</comment>
                            <comment id="14629936" author="roboduke" created="Wed, 29 Nov 2023 06:40:10 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1997&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1997&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-29 14:32:14 +0000</comment>
                            <comment id="14629934" author="goetz" created="Wed, 29 Nov 2023 06:32:57 -0800"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.11-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Resolved ProblemList, marked clean.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14596990" author="enikitin" created="Tue, 18 Jul 2023 12:20:16 -0700"  >As the &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8308589&quot; title=&quot;gc/cslocker/TestCSLocker.java timed out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8308589&quot;&gt;&lt;strike&gt;JDK-8308589&lt;/strike&gt;&lt;/a&gt; excluded the test from GenerationalZGC runs, there is no sense now to verify this. Closing as is.</comment>
                            <comment id="14582297" author="dukebot" created="Wed, 17 May 2023 04:49:09 -0700"  >Changeset: 285c833f&lt;br/&gt;
Author:    Erik &amp;#xD6;sterlund &amp;lt;&lt;a href=&apos;mailto:eosterlund@openjdk.org&apos;&gt;eosterlund@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-17 11:47:30 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/285c833ffacdaabe7c4955cbbafb3bc459d26784&quot;&gt;https://git.openjdk.org/jdk/commit/285c833ffacdaabe7c4955cbbafb3bc459d26784&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14581576" author="roboduke" created="Mon, 15 May 2023 07:33:59 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13989&quot;&gt;https://git.openjdk.org/jdk/pull/13989&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-15 14:26:42 +0000</comment>
                            <comment id="14581500" author="eosterlund" created="Mon, 15 May 2023 01:49:18 -0700"  >In this test, the following happens:&lt;br/&gt;
Thread A: starts thread B&lt;br/&gt;
Thread B: produces garbage provoking GCs randomly&lt;br/&gt;
Thread A: starts thread C&lt;br/&gt;
Thread C: locks GC locker in JNI, blockingly waits for thread A to signal it should be released&lt;br/&gt;
Thread A: prints &amp;quot;sleeping&amp;quot;, which inside of the printing implementation allocates memory, which needs a GC&lt;br/&gt;
&lt;br/&gt;
-------------------- deadlock ---------------------&lt;br/&gt;
&lt;br/&gt;
GC is waiting for thread C, thread C is waiting for thread A, thread A is waiting for GC.&lt;br/&gt;
&lt;br/&gt;
This was supposed to happen after, if that println allocation didn&amp;#39;t get stuck on GC:&lt;br/&gt;
Thread A: signals thread C to unlock GC locker&lt;br/&gt;
&lt;br/&gt;
This test could cause test failure with any concurrent GC. In fact it could cause test failures with all GCs, if you are unlucky enough that that allocation in the println statement ends up being the one triggering a GC.</comment>
                            <comment id="14581492" author="tschatzl" created="Mon, 15 May 2023 01:36:16 -0700"  >Somewhat similar to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8293289&quot; title=&quot;gc/cslocker/TestCSLocker.java timed out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8293289&quot;&gt;&lt;strike&gt;JDK-8293289&lt;/strike&gt;&lt;/a&gt; but does not need -Xcomp.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5116012">JDK-8321241</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117834">JDK-8322771</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115312">JDK-8320619</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115313">JDK-8320620</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5082728">JDK-8293289</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5101507">JDK-8308589</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ihn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>