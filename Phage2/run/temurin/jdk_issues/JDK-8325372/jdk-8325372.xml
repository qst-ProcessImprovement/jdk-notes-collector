<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:02:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8325372] Shenandoah: SIGSEGV crash in unnecessary_acquire due to LoadStore split through phi</title>
                <link>https://bugs.openjdk.org/browse/JDK-8325372</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Two seperate users on separate systems reported the same issue.  Example output (more details in the two hs_err log files):&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  SIGSEGV (0xb) at pc=0x0000ffff9825d794, pid=1, tid=16&lt;br/&gt;
#&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment Temurin-17.0.10+7 (17.0.10+7) (build 17.0.10+7)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM Temurin-17.0.10+7 (17.0.10+7, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, shenandoah gc, linux-aarch64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x2dd794]  unnecessary_acquire(Node const*)+0x40&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&amp;quot; (or dumping to //core.1)&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# /tmp/hs_err_pid1.log&lt;br/&gt;
#&lt;br/&gt;
# Compiler replay data is saved as:&lt;br/&gt;
# /tmp/replay_pid1.log&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://github.com/adoptium/adoptium-support/issues&quot;&gt;https://github.com/adoptium/adoptium-support/issues&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
&lt;br/&gt;
[error occurred during error reporting (), id 0x5, SIGTRAP (0x5) at pc=0x0000ffff992a71ec]&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:5753646 53798       4       org.apache.hc.client5.http.impl.async.InternalHttpAsyncExecRuntime::connectEndpoint (99 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x0000ffffa0936000,0x0000ffffa0b34000],  sp=0x0000ffffa0b2f800,  free space=2022k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x2dd794]  unnecessary_acquire(Node const*)+0x40&lt;br/&gt;
V  [libjvm.so+0x642f28]  State::DFA(int, Node const*)+0x16b8&lt;br/&gt;
V  [libjvm.so+0xace2dc]  Matcher::Label_Root(Node const*, State*, Node*, Node*&amp;amp;)+0x338&lt;br/&gt;
V  [libjvm.so+0xacef88]  Matcher::match_tree(Node const*)+0xa8&lt;br/&gt;
V  [libjvm.so+0xad2b54]  Matcher::xform(Node*, int)+0x804&lt;br/&gt;
V  [libjvm.so+0xad574c]  Matcher::match()+0x72c&lt;br/&gt;
V  [libjvm.so+0x5a4854]  Compile::Code_Gen()+0xa4&lt;br/&gt;
V  [libjvm.so+0x5a9648]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0xf88&lt;br/&gt;
V  [libjvm.so+0x4f02d4]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0xd0&lt;br/&gt;
V  [libjvm.so+0x5b174c]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd18&lt;br/&gt;
V  [libjvm.so+0x5b21bc]  CompileBroker::compiler_thread_loop()+0x4fc&lt;br/&gt;
V  [libjvm.so+0xd87e70]  JavaThread::thread_main_inner()+0x15c&lt;br/&gt;
V  [libjvm.so+0xd8cec8]  Thread::call_run()+0xa8&lt;br/&gt;
V  [libjvm.so+0xb76b5c]  thread_native_entry(Thread*)+0xdc&lt;br/&gt;
C  [libpthread.so.0+0x77e4]  start_thread+0x18c&lt;br/&gt;
&lt;br/&gt;
-----&lt;br/&gt;
&lt;br/&gt;
Users reported same crashes on 17.0.7 and 17.0.9.  &lt;br/&gt;
&lt;br/&gt;
One user upgraded to 21.0.1 and reported no crashes after 48 hours&lt;br/&gt;
&lt;br/&gt;
-----&lt;br/&gt;
&lt;br/&gt;
Happy to follow up with the OP&amp;#39;s for further investigation steps.</description>
                <environment></environment>
        <key id="5120879">JDK-8325372</key>
            <summary>Shenandoah: SIGSEGV crash in unnecessary_acquire due to LoadStore split through phi</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roland">Roland Westrelin</assignee>
                                    <reporter username="karianna">Martijn Verburg</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>gc-shenandoah</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oracle-triage-23</label>
                            <label>oraclejdk-na</label>
                    </labels>
                <created>Tue, 6 Feb 2024 20:12:58 -0800</created>
                <updated>Tue, 19 Mar 2024 13:38:09 -0700</updated>
                            <resolved>Fri, 23 Feb 2024 02:12:17 -0800</resolved>
                                    <version>17.0.7</version>
                    <version>17.0.9</version>
                    <version>17.0.10</version>
                    <version>21</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14657504" author="roboduke" created="Thu, 14 Mar 2024 11:14:36 -0700"  >[jdk17u-fix-request] Approval Request from Dan Lutker&lt;br/&gt;
Backport to resolve a handful of customer reports. Ran Tier 1,2,3 and 4 as well as jcstress -m quick with -XX:+UseShenandoahGC and did not hit any issues. GHA failures are not related to this change, memory over commit and RISC-V related.</comment>
                            <comment id="14657491" author="roboduke" created="Thu, 14 Mar 2024 10:01:56 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2259&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2259&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-29 23:19:38 +0000</comment>
                            <comment id="14654864" author="roboduke" created="Tue, 5 Mar 2024 10:02:19 -0800"  >[jdk21u-fix-request] Approval Request from Dan Lutker&lt;br/&gt;
Backport to resolve a handful of customer reports. Ran Tier 1,2,3 and 4 as well as jcstress -m quick with -XX:+UseShenandoahGC and did not hit any issues. GHA failures is not related to this change and didn&amp;#39;t fail on initial run, rerunning to be safe.</comment>
                            <comment id="14654417" author="roboduke" created="Mon, 4 Mar 2024 14:58:33 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/306&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/306&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-29 23:12:15 +0000</comment>
                            <comment id="14651837" author="dukebot" created="Fri, 23 Feb 2024 02:12:16 -0800"  >Changeset: 5d414da5&lt;br/&gt;
Author:    Roland Westrelin &amp;lt;&lt;a href=&apos;mailto:roland@openjdk.org&apos;&gt;roland@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-02-23 10:09:06 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/5d414da50459b7a1e6f0f537ff3b318854b2c427&quot;&gt;https://git.openjdk.org/jdk/commit/5d414da50459b7a1e6f0f537ff3b318854b2c427&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14650731" author="roboduke" created="Tue, 20 Feb 2024 01:57:52 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17926&quot;&gt;https://git.openjdk.org/jdk/pull/17926&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-20 09:46:31 +0000</comment>
                            <comment id="14650522" author="roland" created="Mon, 19 Feb 2024 08:29:57 -0800"  >No luck with the replay files but I managed to write a test case (attached) that fails the same way. I&amp;#39;ll prepare a fix for that crash. Hopefully, it&amp;#39;s the same issue you reported.</comment>
                            <comment id="14649429" author="karianna" created="Wed, 14 Feb 2024 11:32:53 -0800"  >The other OP listed io.opentelemetry.javaagent:opentelemetry-javaagent:1.23.0 which has dependency on com.squareup.okhttp3:okhttp:4.10.0 - not sure if that helps either.  Both OP&amp;#39;s are unable to deliver the JAR bundle (privacy etc).  Anything else I can try to extract from them (perhaps getting a run with some -XX flags on?</comment>
                            <comment id="14647713" author="roland" created="Thu, 8 Feb 2024 07:28:38 -0800"  >I tried the replay file with httpclient5:5.1.4 but didn&amp;#39;t get anywhere. The state captured by the replay file appears to depend on org.apache.hc.core5.concurrent.FutureCallback&lt;br/&gt;
There are most likely more dependencies like this: I didn&amp;#39;t investigate this further once I hit that missing dependency. A bundle of every jars used by the application or all classes mentioned in the replay file (it&amp;#39;s a text file) would be best. It&amp;#39;s not guaranteed that the issue reproduces with the replay file but it&amp;#39;s our best shot.</comment>
                            <comment id="14647532" author="karianna" created="Wed, 7 Feb 2024 17:10:22 -0800"  >org.apache.httpcomponents.client5:httpclient5:5.1.4 was the exact version in the 2nd case</comment>
                            <comment id="14647466" author="karianna" created="Wed, 7 Feb 2024 11:16:21 -0800"  >The log files mention the crash points being at the okhttp lib (okhttp3.internal.http2.Huffman::encode) and separately in the other log the Apachae http client (org.apache.hc.client5.http.impl.async.InternalHttpAsyncExecRuntime::connectEndpoint) - does that help or do you need the exact versions of both?</comment>
                            <comment id="14647352" author="roland" created="Wed, 7 Feb 2024 04:40:54 -0800"  >I would need to reproduce this. I could use the replay files but for that I would need a copy of the class files that were used during the compilation (the exact same class file). Would it possible to bundle them? Are they available for download somewhere?</comment>
                            <comment id="14647230" author="thartmann" created="Tue, 6 Feb 2024 23:19:47 -0800"  >Issue happened with Shenandoah GC. Replay files attached. Leaving this to Red Hat (paging [~roland], [~aph]) to triage.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5124275">JDK-8328226</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5124665">JDK-8328554</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="108315" name="TestUnsafeLoadStoreMergedHeapStableTests.java" size="2474" author="roland" created="Mon, 19 Feb 2024 08:28:00 -0800"/>
                            <attachment id="108177" name="hs_err_pid1.log" size="351821" author="karianna" created="Tue, 6 Feb 2024 20:09:26 -0800"/>
                            <attachment id="108178" name="hs_err_pid19300.log" size="1574606" author="karianna" created="Tue, 6 Feb 2024 20:09:26 -0800"/>
                            <attachment id="108181" name="replay_pid1.log" size="927262" author="thartmann" created="Tue, 6 Feb 2024 23:17:40 -0800"/>
                            <attachment id="108182" name="replay_pid19300.log" size="1475840" author="thartmann" created="Tue, 6 Feb 2024 23:17:40 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34w9f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>