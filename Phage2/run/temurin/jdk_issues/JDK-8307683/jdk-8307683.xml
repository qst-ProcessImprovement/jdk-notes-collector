<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 08:58:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8307683] Loop Predication should not hoist range checks with trap on success projection by negating their condition</title>
                <link>https://bugs.openjdk.org/browse/JDK-8307683</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Ubuntu 22.04 / JDK 11.0.19 (but also 17.0.7)&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
Since the docker image we use to build our application (maven:3.9.1-eclipse-temurin-11-focal) is based on the JDK version 11.0.19, one of our Unit Test makes the JVM crash systematically.&lt;br/&gt;
With the image based on jdk 11.0.18 we do not encounter the problem.&lt;br/&gt;
&lt;br/&gt;
I crashes with the following message:&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (macroAssembler_x86.cpp:864), pid=51663, tid=51664&lt;br/&gt;
#  fatal error: DEBUG MESSAGE: duplicated predicate failed which is impossible&lt;br/&gt;
#&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment Temurin-17.0.7+7 (17.0.7+7) (build 17.0.7+7)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM Temurin-17.0.7+7 (17.0.7+7, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0xafec21]  MacroAssembler::debug64(char*, long, long*)+0x41&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&amp;quot; (or dumping to /home/xxxxxxxx/tmp/core.51663)&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
#  /tmp/hs_err_pid51663.log&lt;br/&gt;
Compiled method (c2)     139  288       4       java.util.GregorianCalendar::computeTime (976 bytes)&lt;br/&gt;
&amp;nbsp;total in heap  [0x00007f6100ed7f90,0x00007f6100ed8680] = 1776&lt;br/&gt;
&amp;nbsp;relocation     [0x00007f6100ed80f0,0x00007f6100ed8120] = 48&lt;br/&gt;
&amp;nbsp;main code      [0x00007f6100ed8120,0x00007f6100ed8460] = 832&lt;br/&gt;
&amp;nbsp;stub code      [0x00007f6100ed8460,0x00007f6100ed8478] = 24&lt;br/&gt;
&amp;nbsp;metadata       [0x00007f6100ed8478,0x00007f6100ed84e0] = 104&lt;br/&gt;
&amp;nbsp;scopes data    [0x00007f6100ed84e0,0x00007f6100ed85a0] = 192&lt;br/&gt;
&amp;nbsp;scopes pcs     [0x00007f6100ed85a0,0x00007f6100ed8620] = 128&lt;br/&gt;
&amp;nbsp;dependencies   [0x00007f6100ed8620,0x00007f6100ed8648] = 40&lt;br/&gt;
&amp;nbsp;handler table  [0x00007f6100ed8648,0x00007f6100ed8660] = 24&lt;br/&gt;
&amp;nbsp;nul chk table  [0x00007f6100ed8660,0x00007f6100ed8680] = 32&lt;br/&gt;
Compiled method (c2)     141  288       4       java.util.GregorianCalendar::computeTime (976 bytes)&lt;br/&gt;
&amp;nbsp;total in heap  [0x00007f6100ed7f90,0x00007f6100ed8680] = 1776&lt;br/&gt;
&amp;nbsp;relocation     [0x00007f6100ed80f0,0x00007f6100ed8120] = 48&lt;br/&gt;
&amp;nbsp;main code      [0x00007f6100ed8120,0x00007f6100ed8460] = 832&lt;br/&gt;
&amp;nbsp;stub code      [0x00007f6100ed8460,0x00007f6100ed8478] = 24&lt;br/&gt;
&amp;nbsp;metadata       [0x00007f6100ed8478,0x00007f6100ed84e0] = 104&lt;br/&gt;
&amp;nbsp;scopes data    [0x00007f6100ed84e0,0x00007f6100ed85a0] = 192&lt;br/&gt;
&amp;nbsp;scopes pcs     [0x00007f6100ed85a0,0x00007f6100ed8620] = 128&lt;br/&gt;
&amp;nbsp;dependencies   [0x00007f6100ed8620,0x00007f6100ed8648] = 40&lt;br/&gt;
&amp;nbsp;handler table  [0x00007f6100ed8648,0x00007f6100ed8660] = 24&lt;br/&gt;
&amp;nbsp;nul chk table  [0x00007f6100ed8660,0x00007f6100ed8680] = 32&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://github.com/adoptium/adoptium-support/issues&quot;&gt;https://github.com/adoptium/adoptium-support/issues&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
fish: Job 1, &amp;#39;/home/xxxxxxxx/.sdkman/candidat&#8230;&amp;#39; terminated by signal SIGABRT (Abort)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
We managed to reproduce it with a simple use case: it happens when we create a Calendar, set lenient to false and force the HOUR_OF_DAY and the MINUTE fields to 0 then call getTime() that triggers computeTime().&lt;br/&gt;
&lt;br/&gt;
The failure occurs only after calling the method several thousands of time, this is why we think the JIT compiler has something to do with it.&lt;br/&gt;
&lt;br/&gt;
Also the problem does not happen when the  -Xcomp flag is set.&lt;br/&gt;
&lt;br/&gt;
We tested it on JDK17 and the same problem occurs with the 17.0.7 version (it works fine with 17.0.6)&lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 11.0.18&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
use the test case source code below: &lt;br/&gt;
&lt;br/&gt;
javac TestCalendarJit.java&lt;br/&gt;
java TestCalendarJit&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
no crash  after the 100000 calls loop&lt;br/&gt;
ACTUAL -&lt;br/&gt;
2544&lt;br/&gt;
2545&lt;br/&gt;
2546&lt;br/&gt;
2547&lt;br/&gt;
2548&lt;br/&gt;
2549&lt;br/&gt;
2550&lt;br/&gt;
2551&lt;br/&gt;
2552&lt;br/&gt;
2553&lt;br/&gt;
2554&lt;br/&gt;
2555&lt;br/&gt;
2556&lt;br/&gt;
=============== DEBUG MESSAGE: duplicated predicate failed which is impossible ================&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  SIGSEGV (0xb) at pc=0x00007fd3b80d97a9, pid=51869, tid=51870&lt;br/&gt;
#&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment Temurin-11.0.19+7 (11.0.19+7) (build 11.0.19+7)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM Temurin-11.0.19+7 (11.0.19+7, mixed mode, tiered, compressed oops, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# J 306 c2 java.util.GregorianCalendar.computeTime()V &lt;a href=&apos;mailto:java.base@11.0.19&apos;&gt;java.base@11.0.19&lt;/a&gt; (970 bytes) @ 0x00007fd3b80d97a9 [0x00007fd3b80d95c0+0x00000000000001e9]&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&amp;quot; (or dumping to /home/xxxxxxxx/tmp/core.51869)&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# /home/xxxxxxxx/tmp/hs_err_pid51869.log&lt;br/&gt;
Compiled method (c2)     193  306       4       java.util.GregorianCalendar::computeTime (970 bytes)&lt;br/&gt;
&amp;nbsp;total in heap  [0x00007fd3b80d9410,0x00007fd3b80d9a90] = 1664&lt;br/&gt;
&amp;nbsp;relocation     [0x00007fd3b80d9588,0x00007fd3b80d95b8] = 48&lt;br/&gt;
&amp;nbsp;main code      [0x00007fd3b80d95c0,0x00007fd3b80d9880] = 704&lt;br/&gt;
&amp;nbsp;stub code      [0x00007fd3b80d9880,0x00007fd3b80d9898] = 24&lt;br/&gt;
&amp;nbsp;metadata       [0x00007fd3b80d9898,0x00007fd3b80d9900] = 104&lt;br/&gt;
&amp;nbsp;scopes data    [0x00007fd3b80d9900,0x00007fd3b80d99c0] = 192&lt;br/&gt;
&amp;nbsp;scopes pcs     [0x00007fd3b80d99c0,0x00007fd3b80d9a40] = 128&lt;br/&gt;
&amp;nbsp;dependencies   [0x00007fd3b80d9a40,0x00007fd3b80d9a58] = 24&lt;br/&gt;
&amp;nbsp;handler table  [0x00007fd3b80d9a58,0x00007fd3b80d9a70] = 24&lt;br/&gt;
&amp;nbsp;nul chk table  [0x00007fd3b80d9a70,0x00007fd3b80d9a90] = 32&lt;br/&gt;
Compiled method (c1)     194  304       3       TestCalendarJit::getDate (29 bytes)&lt;br/&gt;
&amp;nbsp;total in heap  [0x00007fd3b0c21a10,0x00007fd3b0c22680] = 3184&lt;br/&gt;
&amp;nbsp;relocation     [0x00007fd3b0c21b88,0x00007fd3b0c21c40] = 184&lt;br/&gt;
&amp;nbsp;main code      [0x00007fd3b0c21c40,0x00007fd3b0c223c0] = 1920&lt;br/&gt;
&amp;nbsp;stub code      [0x00007fd3b0c223c0,0x00007fd3b0c22450] = 144&lt;br/&gt;
&amp;nbsp;oops           [0x00007fd3b0c22450,0x00007fd3b0c22458] = 8&lt;br/&gt;
&amp;nbsp;metadata       [0x00007fd3b0c22458,0x00007fd3b0c224a0] = 72&lt;br/&gt;
&amp;nbsp;scopes data    [0x00007fd3b0c224a0,0x00007fd3b0c22558] = 184&lt;br/&gt;
&amp;nbsp;scopes pcs     [0x00007fd3b0c22558,0x00007fd3b0c22668] = 272&lt;br/&gt;
&amp;nbsp;dependencies   [0x00007fd3b0c22668,0x00007fd3b0c22670] = 8&lt;br/&gt;
&amp;nbsp;nul chk table  [0x00007fd3b0c22670,0x00007fd3b0c22680] = 16&lt;br/&gt;
Could not load hsdis-amd64.so; library not loadable; PrintAssembly is disabled&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://github.com/adoptium/adoptium-support/issues&quot;&gt;https://github.com/adoptium/adoptium-support/issues&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
fish: Job 1, &amp;#39;/home/xxxxxxxx/.sdkman/candidat&#8230;&amp;#39; terminated by signal SIGABRT (Abort)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
import java.util.Calendar;&lt;br/&gt;
&lt;br/&gt;
public class TestCalendarJit {&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (int i = 0; i &amp;lt; 100000; i++) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.err.println(i);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;getDate();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private static void getDate() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Calendar c = Calendar.getInstance();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c.setLenient(false);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c.set(Calendar.HOUR_OF_DAY, 0);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c.set(Calendar.MINUTE, 0);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c.getTime();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
the problem does not occur with the -Xcomp flag set&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : occasionally&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5100217">JDK-8307683</key>
            <summary>Loop Predication should not hoist range checks with trap on success projection by negating their condition</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chagedorn">Christian Hagedorn</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>bugdb_35489355</label>
                            <label>c2</label>
                            <label>dcsswa</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>oracle-triage-21</label>
                            <label>regression</label>
                            <label>reproducer-yes</label>
                            <label>webbug</label>
                    </labels>
                <created>Fri, 5 May 2023 06:06:32 -0700</created>
                <updated>Sun, 7 Jan 2024 23:29:50 -0800</updated>
                            <resolved>Thu, 1 Jun 2023 01:06:57 -0700</resolved>
                                    <version>9</version>
                    <version>11</version>
                    <version>17</version>
                    <version>19</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="14633790" author="JIRAUSER20917" created="Tue, 12 Dec 2023 19:02:26 -0800"  >Fix request [11u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 11.0.23-oracle.&lt;br/&gt;
Follow the jdk17 backport to solve the error.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14631932" author="roboduke" created="Tue, 5 Dec 2023 22:02:25 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2340&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2340&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-06 05:57:03 +0000</comment>
                            <comment id="14594177" author="roboduke" created="Thu, 6 Jul 2023 00:18:00 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1553&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1553&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-06 07:11:22 +0000</comment>
                            <comment id="14594175" author="goetz" created="Thu, 6 Jul 2023 00:15:05 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
This fixes a regression in 17.0.7. To work around the regression, &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297951&quot; title=&quot;C2: Create skeleton predicates for all If nodes in loop predication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297951&quot;&gt;&lt;strike&gt;JDK-8297951&lt;/strike&gt;&lt;/a&gt; was backed out in 17.0.8.&lt;br/&gt;
Risk: we should fix this, the backout of 8297951 only reduces the likelyhood of the bug. So with the backout we have two issues open.  I will redo the backpout, too.&lt;br/&gt;
I had to do larger adaptions to the change, but the core of the fix is obvious to map to 17.&lt;br/&gt;
Test #id0 crashes without the fix, #id1 passes. Both pass with the fix. SAP nightly testing passed.</comment>
                            <comment id="14586211" author="dukebot" created="Thu, 1 Jun 2023 01:06:55 -0700"  >Changeset: dfd3da3f&lt;br/&gt;
Author:    Christian Hagedorn &amp;lt;&lt;a href=&apos;mailto:chagedorn@openjdk.org&apos;&gt;chagedorn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-01 08:04:45 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/dfd3da3f52480f68f653beb1e720691f8232ace7&quot;&gt;https://git.openjdk.org/jdk/commit/dfd3da3f52480f68f653beb1e720691f8232ace7&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14585969" author="chagedorn" created="Wed, 31 May 2023 05:37:35 -0700"  >The negation of the range check conditions introduced with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-7173584&quot; title=&quot;Implement arraycopy as a macro node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-7173584&quot;&gt;&lt;strike&gt;JDK-7173584&lt;/strike&gt;&lt;/a&gt; turned out to be wrong and is now suggested as final and complete fix.</comment>
                            <comment id="14584594" author="neugens" created="Thu, 25 May 2023 10:17:06 -0700"  >Thanks for the explanation, Christian, and also for the quick turnaround on this!</comment>
                            <comment id="14584585" author="roboduke" created="Thu, 25 May 2023 09:55:29 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14156&quot;&gt;https://git.openjdk.org/jdk/pull/14156&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-25 16:48:35 +0000</comment>
                            <comment id="14584519" author="fthevenet" created="Thu, 25 May 2023 06:45:48 -0700"  >This is great news; thanks Christian!</comment>
                            <comment id="14584516" author="chagedorn" created="Thu, 25 May 2023 06:36:39 -0700"  >Hi Mario, hi Frederic&lt;br/&gt;
&lt;br/&gt;
It&amp;#39;s true that &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297951&quot; title=&quot;C2: Create skeleton predicates for all If nodes in loop predication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297951&quot;&gt;&lt;strike&gt;JDK-8297951&lt;/strike&gt;&lt;/a&gt; inserted the Halt Nodes which we see failing at runtime. However, before &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297951&quot; title=&quot;C2: Create skeleton predicates for all If nodes in loop predication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297951&quot;&gt;&lt;strike&gt;JDK-8297951&lt;/strike&gt;&lt;/a&gt; we could just have a silent wrong execution (I have a test case for that as well). So, it looks like &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297951&quot; title=&quot;C2: Create skeleton predicates for all If nodes in loop predication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297951&quot;&gt;&lt;strike&gt;JDK-8297951&lt;/strike&gt;&lt;/a&gt; revealed this issue and made it much more common. The fix is straight forward. I will create a PR and target it to 21.</comment>
                            <comment id="14584459" author="neugens" created="Thu, 25 May 2023 04:18:26 -0700"  >Hi Christian,&lt;br/&gt;
&lt;br/&gt;
Thanks for looking into this.&lt;br/&gt;
&lt;br/&gt;
Regarding the pattern, I&amp;#39;m not sure if this pattern is very rare though, we had a lot of reports and it seems there are also multiple reports over a Adoptium, but indeed they all look very seem similar.</comment>
                            <comment id="14584437" author="fthevenet" created="Thu, 25 May 2023 03:37:37 -0700"  >While investigating this issue we noticed that a revert of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297951&quot; title=&quot;C2: Create skeleton predicates for all If nodes in loop predication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297951&quot;&gt;&lt;strike&gt;JDK-8297951&lt;/strike&gt;&lt;/a&gt; prevents the crash.</comment>
                            <comment id="14580277" author="chagedorn" created="Tue, 9 May 2023 10:03:08 -0700"  >This is unrelated to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8305428&quot; title=&quot;DEBUG MESSAGE: duplicated predicate failed which is impossible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8305428&quot;&gt;&lt;strike&gt;JDK-8305428&lt;/strike&gt;&lt;/a&gt;. I&amp;#39;ve had a closer look and it seems that the code added by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-4809552&quot; title=&quot;Optimize Arrays.fill(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-4809552&quot;&gt;&lt;strike&gt;JDK-4809552&lt;/strike&gt;&lt;/a&gt; to allow Loop Predication if we have positive values that aren&amp;#39;t LoadRanges is only correct if we have an actual RangeCheckNode. But we also allow normal IfNodes which is wrong. This leads to this crash and wrong executions with a simple reproducer. But this pattern is very rare in practice.</comment>
                            <comment id="14580276" author="chagedorn" created="Tue, 9 May 2023 09:59:40 -0700"  >ILW = Crash with with debug build and possible wrong execution with release build, rare, disable compilation of affected method or use -XX:-UseLoopPredicate = HLM = P3</comment>
                            <comment id="14580069" author="sswsharm" created="Mon, 8 May 2023 23:15:05 -0700"  >Issue is reproduced.&lt;br/&gt;
Crash is observed on JDK 17.0.7, 11.0.19 but not present in JDK 17.0.6, 11.0.18 and below versions.&lt;br/&gt;
However, crash can be avoided by using -Xcomp&lt;br/&gt;
&lt;br/&gt;
OS: Windows 10&lt;br/&gt;
JDK 11.0.18:Pass&lt;br/&gt;
JDK 11.0.19: Fail&lt;br/&gt;
JDK 17.0.6: Pass&lt;br/&gt;
JDK 17.0.7 : Fail&lt;br/&gt;
JDK 20.0.1: Fail&lt;br/&gt;
JDK 21ea: Fail&lt;br/&gt;
&lt;br/&gt;
ILW = Regression,  reproducible on GA build, use -Xcomp= HLM = P3&lt;br/&gt;
&lt;br/&gt;
Moving it to dev team for further analysis.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5105468">JDK-8312068</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5107407">JDK-8313747</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5114298">JDK-8319702</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5116986">JDK-8322061</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5100716">JDK-8307978</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5102122">JDK-8309272</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5088703">JDK-8297951</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4297815">JDK-7173584</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4380830">JDK-4809552</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5101844">JDK-8308884</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5102113">JDK-8309119</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="103765" name="TestCalendarJit.java" size="454" author="sswsharm" created="Mon, 8 May 2023 23:10:48 -0700"/>
                            <attachment id="103766" name="hs_err_pid7652.log" size="37843" author="sswsharm" created="Mon, 8 May 2023 23:10:48 -0700"/>
                            <attachment id="103767" name="hs_err_pid7984.log" size="60198" author="sswsharm" created="Mon, 8 May 2023 23:18:47 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17303"><![CDATA[b01]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31egb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>