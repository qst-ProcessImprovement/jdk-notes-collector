<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:34:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8153837] AArch64: Handle special cases for MaxINode &amp; MinINode</title>
                <link>https://bugs.openjdk.org/browse/JDK-8153837</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>I witnessed some code sequence like the following in specjbb2005 and other benchmarks:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;61976   0x0000007f7e17ff44: mov       w13, wzr&lt;br/&gt;
&amp;nbsp;&amp;nbsp;61977   0x0000007f7e17ff48: cmp       w12, w13&lt;br/&gt;
&amp;nbsp;&amp;nbsp;61978   0x0000007f7e17ff4c: csel       w11, w12, w13, gt  ;*iinc {reexecute=0 rethrow=0 return_oop=0}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;61979                                                 ; - jdk.internal.org.objectweb.asm.Type::&lt;a href=&apos;mailto:getArgumentsAndReturnSizes@103&apos;&gt;getArgumentsAndReturnSizes@103&lt;/a&gt; (line 451)&lt;br/&gt;
......&lt;br/&gt;
&amp;nbsp;123349   0x0000007f7e1db660: mov       w16, wzr&lt;br/&gt;
&amp;nbsp;123350   0x0000007f7e1db664: sub       w10, w19, w23   ;*iload {reexecute=0 rethrow=0 return_oop=0}&lt;br/&gt;
&amp;nbsp;123351                                                 ; - java.math.MutableBigInteger::&lt;a href=&apos;mailto:divideMagnitude@182&apos;&gt;divideMagnitude@182&lt;/a&gt; (line 1503)&lt;br/&gt;
&amp;nbsp;123352&lt;br/&gt;
&amp;nbsp;123353   0x0000007f7e1db668: cmp       w15, w16&lt;br/&gt;
&amp;nbsp;123354   0x0000007f7e1db66c: csel      w18, w15, w16, gt&lt;br/&gt;
&amp;nbsp;123355   0x0000007f7e1db670: mov       w25, wzr        ;*iastore {reexecute=0 rethrow=0 return_oop=0}&lt;br/&gt;
&amp;nbsp;123356                                                 ; - java.math.MutableBigInteger::&lt;a href=&apos;mailto:divideMagnitude@221&apos;&gt;divideMagnitude@221&lt;/a&gt; (line 1506)&lt;br/&gt;
......&lt;br/&gt;
&amp;nbsp;187167   0x0000007f7e23a6f0: mov       w12, wzr&lt;br/&gt;
&amp;nbsp;187168   0x0000007f7e23a6f4: cmp       w11, w12&lt;br/&gt;
&amp;nbsp;187169   0x0000007f7e23a6f8: csel      w10, w11, w12, gt&lt;br/&gt;
......&lt;br/&gt;
&amp;nbsp;&amp;nbsp;17114   0x0000007f7e124058: orr       w14, wzr, #0x1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;17115&lt;br/&gt;
&amp;nbsp;&amp;nbsp;17116   0x0000007f7e12405c: mov       w10, wzr&lt;br/&gt;
&amp;nbsp;&amp;nbsp;17117   0x0000007f7e124060: cmp       w13, w14&lt;br/&gt;
&amp;nbsp;&amp;nbsp;17118   0x0000007f7e124064: csel      w12, w13, w14, gt&lt;br/&gt;
......&lt;br/&gt;
&amp;nbsp;&amp;nbsp;61072   0x0000007f7e179450: orr       w11, wzr, #0x1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;61073   0x0000007f7e179454: cmp       w10, w11&lt;br/&gt;
&amp;nbsp;&amp;nbsp;61074   0x0000007f7e179458: csel      w12, w10, w11, gt&lt;br/&gt;
&lt;br/&gt;
For the aarch64 port, we have csel/csinc/csinv instructions which can be applied for these cases eliminating one extra mov instruction here.&lt;br/&gt;
&lt;br/&gt;
I mean something like this:&lt;br/&gt;
min(x, 1) which becomes&lt;br/&gt;
&lt;br/&gt;
cmp x, 0&lt;br/&gt;
csinc x, x, zr, le&lt;br/&gt;
&lt;br/&gt;
min(x, -1) which becomes&lt;br/&gt;
&lt;br/&gt;
cmp x, 0&lt;br/&gt;
csinv x, x, zr, lt&lt;br/&gt;
&lt;br/&gt;
max(x, 1)&lt;br/&gt;
&lt;br/&gt;
cmp x, 0&lt;br/&gt;
csinc x, x, zr, gt&lt;br/&gt;
&lt;br/&gt;
max(x, -1)&lt;br/&gt;
&lt;br/&gt;
cmp x, 0&lt;br/&gt;
csinv x, x, zr, ge&lt;br/&gt;
</description>
                <environment></environment>
        <key id="4876202">JDK-8153837</key>
            <summary>AArch64: Handle special cases for MaxINode &amp; MinINode</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dchuyko">Dmitry Chuyko</assignee>
                                    <reporter username="fyang">Fei Yang</reporter>
                        <labels>
                            <label>c1</label>
                            <label>c2</label>
                            <label>c2-cg</label>
                            <label>community-candidate</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>openjdk</label>
                            <label>performance</label>
                    </labels>
                <created>Fri, 8 Apr 2016 01:12:25 -0700</created>
                <updated>Tue, 4 Jul 2023 23:40:15 -0700</updated>
                            <resolved>Wed, 18 Jan 2023 06:58:45 -0800</resolved>
                                    <version>9</version>
                    <version>10</version>
                    <version>17</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14591278" author="mdoerr" created="Thu, 22 Jun 2023 01:31:19 -0700"  >Fix Request (17u):&lt;br/&gt;
Should get backported for parity with 17.0.9-oracle. Applies cleanly.</comment>
                            <comment id="14591034" author="roboduke" created="Wed, 21 Jun 2023 08:08:52 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1483&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1483&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-21 15:02:53 +0000</comment>
                            <comment id="14552398" author="dukebot" created="Wed, 18 Jan 2023 06:58:44 -0800"  >Changeset: b3684f4b&lt;br/&gt;
Author:    Dmitry Chuyko &amp;lt;&lt;a href=&apos;mailto:dchuyko@openjdk.org&apos;&gt;dchuyko@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-18 14:56:53 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b3684f4bacd8310eea75ebf4ccc70397328d5e86&quot;&gt;https://git.openjdk.org/jdk/commit/b3684f4bacd8310eea75ebf4ccc70397328d5e86&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14543616" author="roboduke" created="Wed, 7 Dec 2022 10:53:31 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11570&quot;&gt;https://git.openjdk.org/jdk/pull/11570&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-07 18:42:52 +0000</comment>
                            <comment id="14536107" author="fyang" created="Wed, 9 Nov 2022 17:21:41 -0800"  >[~dchuyko] I am not looking at this issue afterwards. As I remembered, it&amp;#39;s not easy to compose a test case to reproduce this issue. </comment>
                            <comment id="14535957" author="dchuyko" created="Wed, 9 Nov 2022 09:14:09 -0800"  >Hi Felix [~fyang], do you still work on this? I have a small patch that follows your proposal.</comment>
                            <comment id="14135862" author="fyang" created="Wed, 29 Nov 2017 16:45:51 -0800"  >Hi Zoltan, it&amp;#39;s code generated by aarch64 C2 jit compiler. </comment>
                            <comment id="14051035" author="zmajo" created="Mon, 13 Feb 2017 08:12:42 -0800"  >Hi Felix [~fyang], which compiler (C1 or C2) does generate the code sequences you mentioned? (And is thus target of this enhancement?)</comment>
                            <comment id="13952024" author="kvn" created="Thu, 2 Jun 2016 10:32:00 -0700"  >FC (Feature Complete) date (May 26) is passed. Targeting to JDK 10. Ask for FC exemption if you want to get it into JSK 9.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5103737">JDK-8310508</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5103965">JDK-8310723</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4988790">JDK-8223020</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5043683">JDK-8263006</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="14949">9</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zmk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>