<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:49:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8313904] [macos] All signing tests which verifies unsigned app images are failing</title>
                <link>https://bugs.openjdk.org/browse/JDK-8313904</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>All signing tests which verify unsigned app images are failing. This is regression from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8298488&quot; title=&quot;[macos13] tools/jpackage tests failing with &amp;quot;Exit code: 137&amp;quot; on macOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8298488&quot;&gt;&lt;strike&gt;JDK-8298488&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
tools/jpackage/macosx/SigningAppImageTest.java&lt;br/&gt;
tools/jpackage/macosx/SigningAppImageTwoStepsTest.java&lt;br/&gt;
tools/jpackage/macosx/SigningPackageFromTwoStepAppImageTest.java:&lt;br/&gt;
tools/jpackage/macosx/SigningPackageTwoStepTest.java&lt;br/&gt;
&lt;br/&gt;
They all failed for same reason:&lt;br/&gt;
----------System.err:(45/3004)----------&lt;br/&gt;
java.lang.AssertionError: Expected [1]. Actual [0]: Check command [/usr/bin/codesign --verify --deep --strict --verbose=2 ./test.e003ef3f/output/SigningAppImageTest.app/Contents/MacOS/SigningAppImageTest](6) exited with 1 code&lt;br/&gt;
	at jdk.jpackage.test.TKit.error(TKit.java:273)&lt;br/&gt;
	at jdk.jpackage.test.TKit.assertEquals(TKit.java:576)&lt;br/&gt;
	at jdk.jpackage.test.Executor$Result.assertExitCodeIs(Executor.java:186)&lt;br/&gt;
	at jdk.jpackage.test.Executor.execute(Executor.java:224)&lt;br/&gt;
	at SigningBase.codesignResult(SigningBase.java:59)&lt;br/&gt;
	at SigningBase.verifyCodesign(SigningBase.java:135)&lt;br/&gt;
	at SigningAppImageTest.test(SigningAppImageTest.java:80)&lt;br/&gt;
&lt;br/&gt;
To reproduce issue just run above tests.</description>
                <environment></environment>
        <key id="5107585">JDK-8313904</key>
            <summary>[macos] All signing tests which verifies unsigned app images are failing</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="almatvee">Alexander Matveev</assignee>
                                    <reporter username="almatvee">Alexander Matveev</reporter>
                        <labels>
                            <label>jdk17u-todo</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>macos</label>
                            <label>sn_150</label>
                    </labels>
                <created>Mon, 7 Aug 2023 17:30:30 -0700</created>
                <updated>Wed, 28 Aug 2024 08:38:05 -0700</updated>
                            <resolved>Fri, 11 Aug 2023 14:02:20 -0700</resolved>
                                    <version>17.0.8-oracle</version>
                    <version>20</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14604564" author="roboduke" created="Wed, 16 Aug 2023 17:16:15 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/67&quot;&gt;https://git.openjdk.org/jdk21u/pull/67&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-17 00:10:11 +0000</comment>
                            <comment id="14604562" author="almatvee" created="Wed, 16 Aug 2023 17:09:05 -0700"  >Fix Request&lt;br/&gt;
Without this fix all signing tests which verifies unsigned app images will fail and it will be hard to test any fixes related to jpackage macOS signing since tests are broken. These tests are not run automatically, but executed by dev/SQE as needed due to special setup requirements. Also, this fix fixes issue when post-process unsigned app images when used with DMG or PKG will result in broken installed app image. Patch applies cleanly, low risk since it is fix to test and ad-hoc re-signing post process image should not cause any issues.</comment>
                            <comment id="14603504" author="dukebot" created="Fri, 11 Aug 2023 14:02:18 -0700"  >Changeset: ec0cc630&lt;br/&gt;
Author:    Alexander Matveev &amp;lt;&lt;a href=&apos;mailto:almatvee@openjdk.org&apos;&gt;almatvee@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-08-11 21:00:52 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ec0cc6300a02dd92b25d9072b8b3859dab583bbd&quot;&gt;https://git.openjdk.org/jdk/commit/ec0cc6300a02dd92b25d9072b8b3859dab583bbd&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14603316" author="roboduke" created="Thu, 10 Aug 2023 16:03:11 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15235&quot;&gt;https://git.openjdk.org/jdk/pull/15235&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-10 22:58:18 +0000</comment>
                            <comment id="14603082" author="almatvee" created="Wed, 9 Aug 2023 16:49:19 -0700"  >Another issue discovered while working on this one. Unsigned app image becomes invalid when we creating DMG/PKG image from it.&lt;br/&gt;
1) jpackage --type app-image -i input -n Test --main-class components.DynamicTreeDemo --main-jar DynamicTreeDemo.jar&lt;br/&gt;
2) jpackage --type dmg --app-image Test.app&lt;br/&gt;
or&lt;br/&gt;
2) jpackage --type pkg --app-image Test.app&lt;br/&gt;
3) Mount DMG or install PKG&lt;br/&gt;
4) /usr/bin/codesign --verify --deep --strict --verbose=2 /Volumes/Test/Test.app&lt;br/&gt;
/Volumes/Test/Test.app: a sealed resource is missing or invalid&lt;br/&gt;
file added: /Volumes/Test/Test.app/Contents/app/.package&lt;br/&gt;
or&lt;br/&gt;
4) /usr/bin/codesign --verify --deep --strict --verbose=2 /Applications/Test.app &lt;br/&gt;
/Applications/Test.app: a sealed resource is missing or invalid&lt;br/&gt;
file added: /Applications/Test.app/Contents/app/.package&lt;br/&gt;
&lt;br/&gt;
Original image:&lt;br/&gt;
/usr/bin/codesign --verify --deep --strict --verbose=2 Test.app              &lt;br/&gt;
Test.app: valid on disk&lt;br/&gt;
Test.app: satisfies its Designated Requirement&lt;br/&gt;
&lt;br/&gt;
Adhoc code signing failed and thus app considered invalid. Reason for this is that we adding .package file to &amp;quot;unsigned&amp;quot; app image and &amp;quot;unsigned&amp;quot; app image is actually signed with adhoc signature and cannot be modified.&lt;br/&gt;
&lt;br/&gt;
Since root cause is same as this issue and it is regression from same &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8298488&quot; title=&quot;[macos13] tools/jpackage tests failing with &amp;quot;Exit code: 137&amp;quot; on macOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8298488&quot;&gt;&lt;strike&gt;JDK-8298488&lt;/strike&gt;&lt;/a&gt;, this additional issue will be fixed as part of this bug.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5108498">JDK-8314685</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5108502">JDK-8314689</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="5100272">JDK-8308042</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5082976">JDK-8293462</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5089333">JDK-8298488</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32nmj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17311"><![CDATA[b11]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2192"><![CDATA[jpackage]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>