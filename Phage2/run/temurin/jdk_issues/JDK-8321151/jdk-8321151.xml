<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:13:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8321151] JDK-8294427 breaks Windows L&amp;F on all older Windows versions</title>
                <link>https://bugs.openjdk.org/browse/JDK-8321151</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294427&quot;&gt;https://bugs.openjdk.org/browse/JDK-8294427&lt;/a&gt; starts to use this API&lt;br/&gt;
&lt;a href=&quot;https://learn.microsoft.com/en-us/windows/win32/api/uxtheme/nf-uxtheme-openthemedatafordpi&quot;&gt;https://learn.microsoft.com/en-us/windows/win32/api/uxtheme/nf-uxtheme-openthemedatafordpi&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
which was introduced only in Windows 10 1703.&lt;br/&gt;
So the theming engine won&amp;#39;t load on anything earlier like the original windows 10 or windows 8.1 etc.&lt;br/&gt;
&lt;br/&gt;
So as an undocumented side-effect it completely breaks the theming of Windows L&amp;amp;F on anything earlier&lt;br/&gt;
and it falls back to hard-coded rendering like Windows NT/Windows 2000&lt;br/&gt;
&lt;br/&gt;
Whilst those older versions are technically out of at least &amp;quot;mainstream&amp;quot; support, this is not the way&lt;br/&gt;
to make that breaking change and I see this fix has been backported to older releases which expect stability&lt;br/&gt;
&lt;br/&gt;
it seems to me that this code should NOT fail if the new API is missing and instead fall back to the old code.&lt;br/&gt;
No one will care about a pixel being off on hi-dpi if the entire UI is wrong.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
To reproduce the bug, start SwingSet2, then under the &#8220;Look &amp;amp; Feel&#8221; menu click &#8220;Windows Style Look &amp;amp; Feel&#8221;. Any other Swing application in Windows Look &amp;amp; Feel can be used to reproduce the bug.</description>
                <environment></environment>
        <key id="5115903">JDK-8321151</key>
            <summary>JDK-8294427 breaks Windows L&amp;F on all older Windows versions</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rmahajan">Rajat Mahajan</assignee>
                                    <reporter username="prr">Philip Race</reporter>
                        <labels>
                            <label>17bpr-critical-approved</label>
                            <label>amazon-interest</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>noreg-hard</label>
                            <label>regression</label>
                            <label>regression_8294427</label>
                            <label>sustaining</label>
                    </labels>
                <created>Thu, 30 Nov 2023 14:50:41 -0800</created>
                <updated>Fri, 28 Mar 2025 12:25:58 -0700</updated>
                            <resolved>Fri, 22 Dec 2023 12:18:31 -0800</resolved>
                                    <version>11.0.22</version>
                    <version>11.0.22-oracle</version>
                    <version>17.0.10</version>
                    <version>17.0.10-oracle</version>
                    <version>21.0.2</version>
                    <version>22</version>
                                    <fixVersion>23</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14651491" author="serb" created="Thu, 22 Feb 2024 00:04:33 -0800"  >Fix request (21u 17u 11u)&lt;br/&gt;
&lt;br/&gt;
Clean backport. The fix for the regression introdcued by the &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294427&quot; title=&quot;Check boxes and radio buttons have rendering issues on Windows in High DPI env&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8294427&quot;&gt;&lt;strike&gt;JDK-8294427&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
Testing:&lt;br/&gt;
&amp;nbsp;* Windows 10: The jdk_desktop tests are green&lt;br/&gt;
&amp;nbsp;* Windows 7: The bug is reproduced before the patch, and it works fine after&lt;br/&gt;
&lt;br/&gt;
Review 21u-dev: &lt;a href=&quot;https://github.com/openjdk/jdk21u-dev/pull/200&quot;&gt;https://github.com/openjdk/jdk21u-dev/pull/200&lt;/a&gt;&lt;br/&gt;
Review 17u-dev: &lt;a href=&quot;https://github.com/openjdk/jdk17u-dev/pull/2148&quot;&gt;https://github.com/openjdk/jdk17u-dev/pull/2148&lt;/a&gt;&lt;br/&gt;
Review 11u-dev: &lt;a href=&quot;https://github.com/openjdk/jdk11u-dev/pull/2466&quot;&gt;https://github.com/openjdk/jdk11u-dev/pull/2466&lt;/a&gt;</comment>
                            <comment id="14642410" author="roboduke" created="Mon, 22 Jan 2024 11:32:55 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2466&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2466&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-22 05:33:31 +0000</comment>
                            <comment id="14642028" author="roboduke" created="Fri, 19 Jan 2024 22:11:22 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2148&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2148&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-20 00:27:44 +0000</comment>
                            <comment id="14642027" author="roboduke" created="Fri, 19 Jan 2024 22:11:00 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/200&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/200&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-20 00:25:03 +0000</comment>
                            <comment id="14641725" author="roboduke" created="Thu, 18 Jan 2024 15:44:24 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/25&quot;&gt;https://git.openjdk.org/jdk22u/pull/25&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-18 23:39:27 +0000</comment>
                            <comment id="14640799" author="rmahajan" created="Tue, 16 Jan 2024 13:30:44 -0800"  >Fix request (22u)&lt;br/&gt;
&lt;br/&gt;
Clean backport. It is a minor code change to provide fallback path to support older versions of Windows that do not support OpenThemeDataForDpi(), and needs to be backported.</comment>
                            <comment id="14637710" author="aivanov" created="Fri, 5 Jan 2024 04:40:35 -0800"  >I see a value in providing the fallback separately &#8212; it&amp;#39;ll be easier to remove it when the time comes.</comment>
                            <comment id="14636257" author="dukebot" created="Fri, 22 Dec 2023 12:18:30 -0800"  >Changeset: f695ca58&lt;br/&gt;
Author:    Rajat Mahajan &amp;lt;&lt;a href=&apos;mailto:rmahajan@openjdk.org&apos;&gt;rmahajan@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Alexey Ivanov &amp;lt;&lt;a href=&apos;mailto:aivanov@openjdk.org&apos;&gt;aivanov@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-12-22 20:16:45 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f695ca588453265d6ad791c6a396197e8a53ba39&quot;&gt;https://git.openjdk.org/jdk/commit/f695ca588453265d6ad791c6a396197e8a53ba39&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14635854" author="roboduke" created="Wed, 20 Dec 2023 17:25:42 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17173&quot;&gt;https://git.openjdk.org/jdk/pull/17173&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-21 01:19:40 +0000</comment>
                            <comment id="14632767" author="aivanov" created="Fri, 8 Dec 2023 12:53:22 -0800"  >Today Rajat and I discussed how to provide the fallback. It could be not as hard as I thought, although it will bring additional conditions into the code path.&lt;br/&gt;
&lt;br/&gt;
Handling scaling up and down all the values and images where DPI-aware API isn&amp;#39;t available seems to be the major trouble-maker. Let us explore the fallback further.</comment>
                            <comment id="14632765" author="aivanov" created="Fri, 8 Dec 2023 12:49:19 -0800"  >Start of the compatibility discussion in code review of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294427&quot; title=&quot;Check boxes and radio buttons have rendering issues on Windows in High DPI env&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8294427&quot;&gt;&lt;strike&gt;JDK-8294427&lt;/strike&gt;&lt;/a&gt;: &lt;a href=&quot;https://github.com/openjdk/jdk/pull/13701#discussion_r1180829485&quot;&gt;https://github.com/openjdk/jdk/pull/13701#discussion_r1180829485&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The thread ends with my message &lt;a href=&quot;https://github.com/openjdk/jdk/pull/13701#discussion_r1227202738&quot;&gt;https://github.com/openjdk/jdk/pull/13701#discussion_r1227202738&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&#8220;I think it&amp;#39;s unfeasible to provide the fallback to keep the code simpler.&lt;br/&gt;
&lt;br/&gt;
&#8220;If OpenThemeDataForDpi isn&amp;#39;t available, we cannot get per-DPI images. Then we have to fallback to using the DPI of the main display and scale up / down all the returned values and images.&#8221;</comment>
                            <comment id="14632763" author="aivanov" created="Fri, 8 Dec 2023 12:45:43 -0800"  >Mail thread: &lt;a href=&quot;https://mail.openjdk.org/pipermail/client-libs-dev/2023-November/016360.html&quot;&gt;https://mail.openjdk.org/pipermail/client-libs-dev/2023-November/016360.html&lt;/a&gt;&lt;br/&gt;
where the problem is reported.</comment>
                            <comment id="14632158" author="vdyakov" created="Wed, 6 Dec 2023 09:51:22 -0800"  >as a regression upgraded to P3</comment>
                            <comment id="14630493" author="prr" created="Thu, 30 Nov 2023 18:32:25 -0800"  >Actually this was discussed internally as the consequence was realised at the time.&lt;br/&gt;
Need to decide if its a fix or document. Older JDK releases in particular might want to know.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5119459">JDK-8324224</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5121613">JDK-8325988</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5121615">JDK-8325989</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122127">JDK-8326427</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122456">JDK-8326695</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122457">JDK-8326696</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122458">JDK-8326697</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5129615">JDK-8332389</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                                        </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                                                <inwardlinks description="caused by">
                                        <issuelink>
            <issuekey id="5084200">JDK-8294427</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5126769">JDK-8330162</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17452"><![CDATA[b04]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="23031">22</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i342j7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17314"><![CDATA[b04]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="206"><![CDATA[javax.swing]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>