<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 19:39:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8308678] (fs) UnixPath::toRealPath needs additional permissions when running with SM (macOS)</title>
                <link>https://bugs.openjdk.org/browse/JDK-8308678</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
MacOSX, JDK 20&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
The fix addressing &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8295753&quot; title=&quot;(fs) UnixPath::toRealPath does not return correct case when links not followed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8295753&quot;&gt;&lt;strike&gt;JDK-8295753&lt;/strike&gt;&lt;/a&gt; causes reproducible AccessControlException on the &amp;#39;/&amp;#39; folder in MacOSX. It seems the fix now requires granting full read rights to all folders on the path to a resource, something that wasn&amp;#39;t required before. &lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 17.0.7&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Run provided source with enabled security manager.&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
Hello World!&lt;br/&gt;
/private/tmp/hello.txt&lt;br/&gt;
ACTUAL -&lt;br/&gt;
Hello World!&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.security.AccessControlException: access denied (&amp;quot;java.io.FilePermission&amp;quot; &amp;quot;/&amp;quot; &amp;quot;read&amp;quot;)&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
Policy:&lt;br/&gt;
grant {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;permission java.io.FilePermission &amp;quot;/private/tmp&amp;quot;, &amp;quot;read,write&amp;quot;;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;permission java.io.FilePermission &amp;quot;/private/tmp/-&amp;quot;, &amp;quot;read,write,delete&amp;quot;;&lt;br/&gt;
};&lt;br/&gt;
&lt;br/&gt;
Reproducer:&lt;br/&gt;
public static void main(String[] args) throws Exception {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Works&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Files.writeString(Paths.get(&amp;quot;/private/tmp/hello.txt&amp;quot;), &amp;quot;Hello World!&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(Files.readString(Paths.get(&amp;quot;/private/tmp/hello.txt&amp;quot;)));&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Exception&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(Paths.get(&amp;quot;/private/tmp/hello.txt&amp;quot;).toRealPath(LinkOption.NOFOLLOW_LINKS));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
Grant read access to all folders for a resource on the way to the root&lt;br/&gt;
or&lt;br/&gt;
Use JDK &amp;lt; 20&lt;br/&gt;
or&lt;br/&gt;
Don&amp;#39;t use toRealPath.&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5101557">JDK-8308678</key>
            <summary>(fs) UnixPath::toRealPath needs additional permissions when running with SM (macOS)</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bpb">Brian Burkhalter</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>regression</label>
                            <label>webbug</label>
                    </labels>
                <created>Tue, 23 May 2023 02:38:04 -0700</created>
                <updated>Fri, 21 Jul 2023 07:36:32 -0700</updated>
                            <resolved>Wed, 31 May 2023 12:41:12 -0700</resolved>
                                    <version>20.0.1</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14586111" author="dukebot" created="Wed, 31 May 2023 12:41:08 -0700"  >Changeset: 8dbd3840&lt;br/&gt;
Author:    Brian Burkhalter &amp;lt;&lt;a href=&apos;mailto:bpb@openjdk.org&apos;&gt;bpb@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-31 19:40:23 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8dbd3840039dfe962b8fda0e4fa2b2d53068fb5e&quot;&gt;https://git.openjdk.org/jdk/commit/8dbd3840039dfe962b8fda0e4fa2b2d53068fb5e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14584595" author="roboduke" created="Thu, 25 May 2023 10:17:25 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14157&quot;&gt;https://git.openjdk.org/jdk/pull/14157&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-25 17:08:39 +0000</comment>
                            <comment id="14584275" author="bpb" created="Wed, 24 May 2023 17:16:36 -0700"  >The problem does indeed seem to be caused by attempting to open a DirectoryStream on &amp;quot;/&amp;quot; when permissions disallow it.</comment>
                            <comment id="14583955" author="bpb" created="Tue, 23 May 2023 17:34:01 -0700"  >Same behavior for JDK 15 as well.</comment>
                            <comment id="14583954" author="bpb" created="Tue, 23 May 2023 17:32:38 -0700"  >Actually it does not look like it worked, as claimed in the description, for JDK 17 either:&lt;br/&gt;
&lt;br/&gt;
bpb{155}$ /Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home/bin/javac Repro.java &lt;br/&gt;
bpb{156}$ /Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home/bin/java -Djava.security.manager Repro&lt;br/&gt;
WARNING: A command line option has enabled the Security Manager&lt;br/&gt;
WARNING: The Security Manager is deprecated and will be removed in a future release&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.security.AccessControlException: access denied (&amp;quot;java.io.FilePermission&amp;quot; &amp;quot;/private/tmp/hello.txt&amp;quot; &amp;quot;write&amp;quot;)&lt;br/&gt;
	at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:485)&lt;br/&gt;
	at java.base/java.security.AccessController.checkPermission(AccessController.java:1068)&lt;br/&gt;
	at java.base/java.lang.SecurityManager.checkPermission(SecurityManager.java:416)&lt;br/&gt;
	at java.base/java.lang.SecurityManager.checkWrite(SecurityManager.java:847)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixChannelFactory.open(UnixChannelFactory.java:248)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixChannelFactory.newFileChannel(UnixChannelFactory.java:133)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixChannelFactory.newFileChannel(UnixChannelFactory.java:146)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:217)&lt;br/&gt;
	at java.base/java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:484)&lt;br/&gt;
	at java.base/java.nio.file.Files.newOutputStream(Files.java:228)&lt;br/&gt;
	at java.base/java.nio.file.Files.write(Files.java:3512)&lt;br/&gt;
	at java.base/java.nio.file.Files.writeString(Files.java:3734)&lt;br/&gt;
	at java.base/java.nio.file.Files.writeString(Files.java:3674)&lt;br/&gt;
	at Repro.main(Repro.java:6)&lt;br/&gt;
bpb{157}$ /Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home/bin/java -version&lt;br/&gt;
java version &amp;quot;17&amp;quot; 2021-09-14 LTS&lt;br/&gt;
Java(TM) SE Runtime Environment (build 17+35-LTS-2724)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 17+35-LTS-2724, mixed mode, sharing)</comment>
                            <comment id="14583950" author="bpb" created="Tue, 23 May 2023 16:49:02 -0700"  >It is not clear that the changes for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8295753&quot; title=&quot;(fs) UnixPath::toRealPath does not return correct case when links not followed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8295753&quot;&gt;&lt;strike&gt;JDK-8295753&lt;/strike&gt;&lt;/a&gt; caused this problem. Those changes were almost entirely within UnixPath::toRealPath. The failing stack trace of the attached test is the following and there is no sign of UnixPath::toRealPath:&lt;br/&gt;
&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.security.AccessControlException: access denied (&amp;quot;java.io.FilePermission&amp;quot; &amp;quot;/private/tmp/hello.txt&amp;quot; &amp;quot;write&amp;quot;)&lt;br/&gt;
	at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:488)&lt;br/&gt;
	at java.base/java.security.AccessController.checkPermission(AccessController.java:1071)&lt;br/&gt;
	at java.base/java.lang.SecurityManager.checkPermission(SecurityManager.java:411)&lt;br/&gt;
	at java.base/java.lang.SecurityManager.checkWrite(SecurityManager.java:833)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixChannelFactory.open(UnixChannelFactory.java:248)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixChannelFactory.newFileChannel(UnixChannelFactory.java:133)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixChannelFactory.newFileChannel(UnixChannelFactory.java:146)&lt;br/&gt;
	at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:259)&lt;br/&gt;
	at java.base/java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:482)&lt;br/&gt;
	at java.base/java.nio.file.Files.newOutputStream(Files.java:227)&lt;br/&gt;
	at java.base/java.nio.file.Files.write(Files.java:3492)&lt;br/&gt;
	at java.base/java.nio.file.Files.writeString(Files.java:3714)&lt;br/&gt;
	at java.base/java.nio.file.Files.writeString(Files.java:3654)&lt;br/&gt;
	at Repro.main(Repro.java:6)</comment>
                            <comment id="14583751" author="alanb" created="Tue, 23 May 2023 07:39:44 -0700"  >The SecurityManager is deprecated but it still a supported operating mode so this should be fixed.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5085926">JDK-8295753</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="103953" name="Repro.java" size="417" author="bpb" created="Tue, 23 May 2023 16:41:07 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31mk3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17411"><![CDATA[b25]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="228"><![CDATA[java.nio]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>