<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 18:13:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8305352] updateIconImages may lead to deadlock after JDK-8276849</title>
                <link>https://bugs.openjdk.org/browse/JDK-8305352</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Reproducible with jdk21+15 and jdk20. Works with jdk19.&lt;br/&gt;
&lt;br/&gt;
The deadlock occurs during startup when app attempts to show the main frame and hangs. Thread dump attached.&lt;br/&gt;
&lt;br/&gt;
I didn&amp;#39;t manage to reproduce with a minimal test and unfortunately I can&amp;#39;t share the sources of the app which I use to reproduce this issue.</description>
                <environment></environment>
        <key id="5097592">JDK-8305352</key>
            <summary>updateIconImages may lead to deadlock after JDK-8276849</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcherepanov">Dmitry Cherepanov</assignee>
                                    <reporter username="dcherepanov">Dmitry Cherepanov</reporter>
                        <labels>
                            <label>jdk20u-fix-SQE-ok</label>
                            <label>jdk20u-fix-request</label>
                            <label>jdk20u-fix-yes</label>
                            <label>noreg-hard</label>
                            <label>regression</label>
                            <label>regression_8276849</label>
                    </labels>
                <created>Fri, 31 Mar 2023 02:00:38 -0700</created>
                <updated>Mon, 15 May 2023 18:15:15 -0700</updated>
                            <resolved>Mon, 24 Apr 2023 23:58:56 -0700</resolved>
                                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14576571" author="roboduke" created="Tue, 25 Apr 2023 01:47:45 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20u/pull/62&quot;&gt;https://git.openjdk.org/jdk20u/pull/62&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-25 08:39:36 +0000</comment>
                            <comment id="14576569" author="dcherepanov" created="Tue, 25 Apr 2023 01:38:32 -0700"  >Fix request (20u)&lt;br/&gt;
&lt;br/&gt;
This is a low-risk change that fixes regression introduced in 20. The backport applies cleanly.</comment>
                            <comment id="14576534" author="dukebot" created="Mon, 24 Apr 2023 23:58:55 -0700"  >Changeset: f968da97&lt;br/&gt;
Author:    Dmitry Cherepanov &amp;lt;&lt;a href=&apos;mailto:dcherepanov@openjdk.org&apos;&gt;dcherepanov@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-25 06:56:32 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f968da97a5a5c68c28ad29d13fdfbe3a4adf5ef7&quot;&gt;https://git.openjdk.org/jdk/commit/f968da97a5a5c68c28ad29d13fdfbe3a4adf5ef7&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14571065" author="prr" created="Fri, 31 Mar 2023 11:26:56 -0700"  >No objections to a safe fix for this, but the app is creating and - more to the point - showing (setVisible) the AWT window on the main thread.&lt;br/&gt;
Even for AWT (non-swing) apps, it is recommended to do it on the EDT to avoid threading issues - such as this.&lt;br/&gt;
Lots of apps do use the main thread, and have no issues but that&amp;#39;s not guaranteed.&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14570917" author="roboduke" created="Fri, 31 Mar 2023 02:19:17 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13263&quot;&gt;https://git.openjdk.org/jdk/pull/13263&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-31 09:11:20 +0000</comment>
                            <comment id="14570914" author="dcherepanov" created="Fri, 31 Mar 2023 02:05:14 -0700"  >This is a regression of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8276849&quot; title=&quot;Refresh the window icon on graphics configuration changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8276849&quot;&gt;&lt;strike&gt;JDK-8276849&lt;/strike&gt;&lt;/a&gt;. Now additional call to updateIconImages() happens on the EDT thread may lead to deadlock between the EDT thread and the main thread.&lt;br/&gt;
&lt;br/&gt;
EDT thread:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.java2d.loops.GraphicsPrimitiveMgr.initIDs(&lt;a href=&apos;mailto:java.desktop@21-ea&apos;&gt;java.desktop@21-ea&lt;/a&gt;/Native Method)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- waiting on the Class initialization monitor for sun.java2d.loops.Blit&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.java2d.loops.GraphicsPrimitiveMgr.&amp;lt;clinit&amp;gt;(&lt;a href=&apos;mailto:java.desktop@21-ea&apos;&gt;java.desktop@21-ea&lt;/a&gt;/GraphicsPrimitiveMgr.java:56)&lt;br/&gt;
&lt;br/&gt;
main thread:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.java2d.loops.Blit.&amp;lt;clinit&amp;gt;(&lt;a href=&apos;mailto:java.desktop@21-ea&apos;&gt;java.desktop@21-ea&lt;/a&gt;/Blit.java:114)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- waiting on the Class initialization monitor for sun.java2d.loops.GraphicsPrimitiveMgr&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.java2d.windows.GDIWindowSurfaceData.&amp;lt;clinit&amp;gt;(&lt;a href=&apos;mailto:java.desktop@21-ea&apos;&gt;java.desktop@21-ea&lt;/a&gt;/GDIWindowSurfaceData.java:88)&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5099741">JDK-8307107</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5100969">JDK-8308125</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5062262">JDK-8276849</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="103191" name="dump.txt" size="14844" author="dcherepanov" created="Fri, 31 Mar 2023 02:01:05 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17005"><![CDATA[windows]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30yz7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="196"><![CDATA[java.awt]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>