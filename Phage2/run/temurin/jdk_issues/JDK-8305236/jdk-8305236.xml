<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 18:11:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8305236] Some LoadLoad barriers in the interpreter are unnecessary after JDK-8220051</title>
                <link>https://bugs.openjdk.org/browse/JDK-8305236</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>After &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8220051&quot; title=&quot;Remove global safepoint code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8220051&quot;&gt;&lt;strike&gt;JDK-8220051&lt;/strike&gt;&lt;/a&gt;, Interpreter::notice_safepoints() only be executed at a safe point, so LoadLoad barrier is useless.</description>
                <environment></environment>
        <key id="5097467">JDK-8305236</key>
            <summary>Some LoadLoad barriers in the interpreter are unnecessary after JDK-8220051</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sguoyun">Sun Guoyun</assignee>
                                    <reporter username="sguoyun">Sun Guoyun</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>interpreter</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                    </labels>
                <created>Thu, 30 Mar 2023 04:41:04 -0700</created>
                <updated>Sun, 9 Jul 2023 19:11:22 -0700</updated>
                            <resolved>Thu, 20 Apr 2023 17:48:59 -0700</resolved>
                                    <version>17</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14590420" author="roboduke" created="Mon, 19 Jun 2023 20:38:44 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1427&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1427&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-13 09:43:25 +0000</comment>
                            <comment id="14590339" author="shade" created="Mon, 19 Jun 2023 13:04:42 -0700"  >Fix Request (17u)&lt;br/&gt;
&lt;br/&gt;
Provides a minor performance improvement in interpreter, by avoiding unnecessary memory barrier. AArch64 parts apply cleanly; RISC-V parts are missing due to missing port. Testing passes. Benchmark in this RFE improves.</comment>
                            <comment id="14590184" author="shade" created="Mon, 19 Jun 2023 00:58:28 -0700"  >The simplest way to demonstrate the minor cost of the redundant barrier on branch path is:&lt;br/&gt;
&lt;br/&gt;
```&lt;br/&gt;
public class Branchy {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String... args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (int c = 0; c &amp;lt; 10_000_000; c++) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
On m6g.4xlarge:&lt;br/&gt;
&lt;br/&gt;
```&lt;br/&gt;
&amp;nbsp;Performance counter stats for &amp;#39;build/baseline/bin/java -Xint Branchy&amp;#39; (100 runs):&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;125.43 msec task-clock:u              #    0.977 CPUs utilized            ( +-  0.25% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0      context-switches:u        #    0.000 K/sec                  &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0      cpu-migrations:u          #    0.000 K/sec                  &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3,369      page-faults:u             #    0.027 M/sec                    ( +-  0.01% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;275,721,009      cycles:u                  #    2.198 GHz                      ( +-  0.28% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;658,380,244      instructions:u            #    2.39  insn per cycle           ( +-  0.00% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;not supported&amp;gt;      branches:u                                                  &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;236,032      branch-misses:u                                               ( +-  0.20% )&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0.128448 +- 0.000312 seconds time elapsed  ( +-  0.24% )&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;Performance counter stats for &amp;#39;build/linux-aarch64-server-release/images/jdk/bin/java -Xint Branchy&amp;#39; (100 runs):&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;111.74 msec task-clock:u              #    0.978 CPUs utilized            ( +-  0.31% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0      context-switches:u        #    0.000 K/sec                  &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0      cpu-migrations:u          #    0.000 K/sec                  &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3,378      page-faults:u             #    0.030 M/sec                    ( +-  0.01% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;241,446,765      cycles:u                  #    2.161 GHz                      ( +-  0.35% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;648,373,730      instructions:u            #    2.69  insn per cycle           ( +-  0.00% )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;not supported&amp;gt;      branches:u                                                  &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;237,119      branch-misses:u                                               ( +-  0.19% )&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0.114232 +- 0.000345 seconds time elapsed  ( +-  0.30% )&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
Saves about 1 insn and 3 cycles per branch in interpreter code.</comment>
                            <comment id="14590173" author="roboduke" created="Mon, 19 Jun 2023 00:24:58 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1468&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1468&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-19 07:17:05 +0000</comment>
                            <comment id="14575602" author="dukebot" created="Thu, 20 Apr 2023 17:48:56 -0700"  >Changeset: 2c70828e&lt;br/&gt;
Author:    sunguoyun &amp;lt;&lt;a href=&apos;mailto:sunguoyun@loongson.cn&apos;&gt;sunguoyun@loongson.cn&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Fei Yang &amp;lt;&lt;a href=&apos;mailto:fyang@openjdk.org&apos;&gt;fyang@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-21 00:47:24 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/2c70828e7dc78783c174e3f93c94b6e2439d2dfb&quot;&gt;https://git.openjdk.org/jdk/commit/2c70828e7dc78783c174e3f93c94b6e2439d2dfb&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14571531" author="dholmes" created="Mon, 3 Apr 2023 19:18:51 -0700"  >[~dcubed] The only use of notice_safepoints() now is by JVMTI - that why I think this was filed under JVMTI.</comment>
                            <comment id="14570774" author="dcubed" created="Thu, 30 Mar 2023 12:39:02 -0700"  >I&amp;#39;m not sure why this bug started in hotspot/jvmti. The PR shows&lt;br/&gt;
changes to interpreter code so I&amp;#39;m moving this bug to hotspot/runtime&lt;br/&gt;
for initial triage.</comment>
                            <comment id="14570686" author="roboduke" created="Thu, 30 Mar 2023 05:54:34 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13244&quot;&gt;https://git.openjdk.org/jdk/pull/13244&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-30 12:49:09 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5103686">JDK-8310462</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4984809">JDK-8220051</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    <customfieldvalue key="20300"><![CDATA[riscv]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30y7f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>