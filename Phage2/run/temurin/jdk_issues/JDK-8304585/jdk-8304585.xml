<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 17:51:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8304585] Method::invoke rewraps InvocationTargetException if a caller-sensitive method throws IAE</title>
                <link>https://bugs.openjdk.org/browse/JDK-8304585</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The InvocationTargetException is duplicated when the invocation of a caller-sensitive method without a caller-sensitive adapter fails.&lt;br/&gt;
The changed behavior was introduced by  &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8271820&quot;&gt;https://bugs.openjdk.org/browse/JDK-8271820&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
Test case:&lt;br/&gt;
{code}&lt;br/&gt;
import java.lang.reflect.Field;&lt;br/&gt;
import java.lang.reflect.Method;&lt;br/&gt;
&lt;br/&gt;
public class Main {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public int value = 10;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) throws ReflectiveOperationException {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Field f = Main.class.getDeclaredField(&amp;quot;value&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Method m = Field.class.getDeclaredMethod(&amp;quot;get&amp;quot;, Object.class);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;m.invoke(f, new Object());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
{code}&lt;br/&gt;
&lt;br/&gt;
The InvocationTargetException stack trace on JDK 20:&lt;br/&gt;
{code}&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:146)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at Main.main(Main.java:11)&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:131)&lt;br/&gt;
	... 2 more&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: Can not get int field Main.value on java.lang.Object&lt;br/&gt;
	at java.base/jdk.internal.reflect.MethodHandleFieldAccessorImpl.newGetIllegalArgumentException(MethodHandleFieldAccessorImpl.java:86)&lt;br/&gt;
	at java.base/jdk.internal.reflect.MethodHandleIntegerFieldAccessorImpl.getInt(MethodHandleIntegerFieldAccessorImpl.java:84)&lt;br/&gt;
	at java.base/jdk.internal.reflect.MethodHandleIntegerFieldAccessorImpl.get(MethodHandleIntegerFieldAccessorImpl.java:55)&lt;br/&gt;
	at java.base/java.lang.reflect.Field.get(Field.java:440)&lt;br/&gt;
	... 3 more&lt;br/&gt;
{code}&lt;br/&gt;
&lt;br/&gt;
The InvocationTargetException stack trace on JDK 17:&lt;br/&gt;
{code}&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)&lt;br/&gt;
	at Main.main(Main.java:11)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: Can not set int field Main.value to java.lang.Object&lt;br/&gt;
	at java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:167)&lt;br/&gt;
	at java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:171)&lt;br/&gt;
	at java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:58)&lt;br/&gt;
	at java.base/jdk.internal.reflect.UnsafeIntegerFieldAccessorImpl.getInt(UnsafeIntegerFieldAccessorImpl.java:56)&lt;br/&gt;
	at java.base/jdk.internal.reflect.UnsafeIntegerFieldAccessorImpl.get(UnsafeIntegerFieldAccessorImpl.java:36)&lt;br/&gt;
	at java.base/java.lang.reflect.Field.get(Field.java:425)&lt;br/&gt;
	... 5 more&lt;br/&gt;
{code}&lt;br/&gt;
&lt;br/&gt;
Expected: The InvocationTargetException should have the IllegalArgumentException as a cause.</description>
                <environment></environment>
        <key id="5096726">JDK-8304585</key>
            <summary>Method::invoke rewraps InvocationTargetException if a caller-sensitive method throws IAE</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mchung">Mandy Chung</assignee>
                                    <reporter username="tzezula">Tom&#225;&#353; Zezula</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Mar 2023 00:51:27 -0700</created>
                <updated>Wed, 5 Apr 2023 23:16:54 -0700</updated>
                            <resolved>Thu, 30 Mar 2023 09:10:23 -0700</resolved>
                                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14570732" author="dukebot" created="Thu, 30 Mar 2023 09:10:22 -0700"  >Changeset: 1d7bb1ff&lt;br/&gt;
Author:    Mandy Chung &amp;lt;&lt;a href=&apos;mailto:mchung@openjdk.org&apos;&gt;mchung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-03-30 16:07:47 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/1d7bb1ffa0b80d2ef1cd991aa33f13c9b7c47dcc&quot;&gt;https://git.openjdk.org/jdk/commit/1d7bb1ffa0b80d2ef1cd991aa33f13c9b7c47dcc&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14570532" author="roboduke" created="Wed, 29 Mar 2023 14:32:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13233&quot;&gt;https://git.openjdk.org/jdk/pull/13233&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-29 21:26:24 +0000</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17004"><![CDATA[x86]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30tmr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17417"><![CDATA[b17]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="668"><![CDATA[java.lang:reflect]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>