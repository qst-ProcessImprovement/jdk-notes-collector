<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:09:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8309266] C2: assert(final_con == (jlong)final_int) failed: final value should be integer</title>
                <link>https://bugs.openjdk.org/browse/JDK-8309266</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The attached test fails with the following assertion:&lt;br/&gt;
&lt;br/&gt;
To reproduce:&lt;br/&gt;
$ java -Xbatch -XX:CompileOnly=Test Test.java&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S179622/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/72cab011-e6f0-4b37-b72c-1a28ae55422a/runs/5b27fa5b-32f8-4c80-9524-015f5098fcf7/workspace/open/src/hotspot/share/opto/loopnode.cpp:2299), pid=276454, tid=276467&lt;br/&gt;
#  assert(final_con == (jlong)final_int) failed: final value should be integer&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (21.0+25) (fastdebug build 21-ea+25-LTS-2192)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 21-ea+25-LTS-2192, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x1274363]  LoopLimitNode::Value(PhaseGVN*) const+0x2c3&lt;br/&gt;
#&lt;br/&gt;
.........&lt;br/&gt;
Command Line: -XX:CompileOnly=Test::test -Xbatch --add-modules=ALL-DEFAULT jdk.compiler/com.sun.tools.javac.launcher.Main Test.java&lt;br/&gt;
.........&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:   1433   84    b  4       Test::test (33 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007fb726a00000,0x00007fb726b00000],  sp=0x00007fb726afb2a0,  free space=1004k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x1274363]  LoopLimitNode::Value(PhaseGVN*) const+0x2c3  (loopnode.cpp:2299)&lt;br/&gt;
V  [libjvm.so+0x1518230]  PhaseCCP::analyze()+0x2b0&lt;br/&gt;
V  [libjvm.so+0x9ee1ea]  Compile::Optimize()+0x60a&lt;br/&gt;
V  [libjvm.so+0x9f0ca6]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x1b96&lt;br/&gt;
V  [libjvm.so+0x84aa54]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x3c4&lt;br/&gt;
V  [libjvm.so+0x9fcbb0]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xa00&lt;br/&gt;
V  [libjvm.so+0x9fda38]  CompileBroker::compiler_thread_loop()+0x618&lt;br/&gt;
V  [libjvm.so+0xeb5b6c]  JavaThread::thread_main_inner()+0xcc&lt;br/&gt;
V  [libjvm.so+0x179316a]  Thread::call_run()+0xba&lt;br/&gt;
V  [libjvm.so+0x149450c]  thread_native_entry(Thread*)+0x11c</description>
                <environment></environment>
        <key id="5102287">JDK-8309266</key>
            <summary>C2: assert(final_con == (jlong)final_int) failed: final value should be integer</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enothum">Eric Nothum</assignee>
                                    <reporter username="chagedorn">Christian Hagedorn</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>hgupdate-sync</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>oracle-triage-21</label>
                    </labels>
                <created>Thu, 1 Jun 2023 01:56:44 -0700</created>
                <updated>Thu, 19 Oct 2023 02:41:45 -0700</updated>
                            <resolved>Tue, 20 Jun 2023 06:55:08 -0700</resolved>
                                    <version>17</version>
                    <version>19</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14595247" author="goetz" created="Wed, 12 Jul 2023 02:10:13 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.9-oracle.&lt;br/&gt;
Simple C2 change, low risk.&lt;br/&gt;
Applies clean, but adaptions to fix compilation needed.&lt;br/&gt;
Test passes, but unfortunately also without the fix. SAP nightly testing passed.</comment>
                            <comment id="14595037" author="roboduke" created="Tue, 11 Jul 2023 07:19:36 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1570&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1570&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-11 14:13:05 +0000</comment>
                            <comment id="14590926" author="roboduke" created="Wed, 21 Jun 2023 03:35:28 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21/pull/49&quot;&gt;https://git.openjdk.org/jdk21/pull/49&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-21 10:28:11 +0000</comment>
                            <comment id="14590601" author="dukebot" created="Tue, 20 Jun 2023 06:55:07 -0700"  >Changeset: 4a9cc8a0&lt;br/&gt;
Author:    Eric Nothum &amp;lt;&lt;a href=&apos;mailto:eric.nothum@oracle.com&apos;&gt;eric.nothum@oracle.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Tobias Hartmann &amp;lt;&lt;a href=&apos;mailto:thartmann@openjdk.org&apos;&gt;thartmann@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-20 13:52:45 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/4a9cc8a000cafb3ad77a33710054b567e8553652&quot;&gt;https://git.openjdk.org/jdk/commit/4a9cc8a000cafb3ad77a33710054b567e8553652&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14589617" author="roboduke" created="Thu, 15 Jun 2023 06:13:13 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14490&quot;&gt;https://git.openjdk.org/jdk/pull/14490&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-15 10:43:53 +0000</comment>
                            <comment id="14587615" author="roboduke" created="Wed, 7 Jun 2023 05:40:42 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14353&quot;&gt;https://git.openjdk.org/jdk/pull/14353&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-07 12:33:48 +0000</comment>
                            <comment id="14586278" author="chagedorn" created="Thu, 1 Jun 2023 03:34:40 -0700"  >Starts to fail after &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8282045&quot; title=&quot;When loop strip mining fails, safepoints are removed from loop anyway&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8282045&quot;&gt;&lt;strike&gt;JDK-8282045&lt;/strike&gt;&lt;/a&gt; but that might be unrelated and just revealed an existing issue.</comment>
                            <comment id="14586240" author="chagedorn" created="Thu, 1 Jun 2023 02:24:42 -0700"  >ILW = C2 assertion with inserted loop limit check predicate, edge case, disable compilation of affected method = HLM = P3</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5103837">JDK-8310603</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5104657">JDK-8311330</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5105217">JDK-8311860</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5105472">JDK-8312070</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5112238">JDK-8318505</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="104156" name="Test.java" size="434" author="chagedorn" created="Thu, 1 Jun 2023 01:55:21 -0700"/>
                            <attachment id="104157" name="hs_err_pid276454.log" size="76569" author="chagedorn" created="Thu, 1 Jun 2023 01:55:11 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31r2b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17305"><![CDATA[b03]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>