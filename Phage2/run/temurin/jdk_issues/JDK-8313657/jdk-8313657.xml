<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:48:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8313657] com.sun.jndi.ldap.Connection.cleanup does not close connections on SocketTimeoutErrors</title>
                <link>https://bugs.openjdk.org/browse/JDK-8313657</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>com.sun.jndi.ldap.Connection#cleanup does not close underlying socket if the is an IOException generation in the below code.&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
This causes ldap connection build ups that get cleared only during GC.&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
This also causes issues with Ldap SSL Handshakes and causes additional delay . Even after the connection is abandoned by the Ldap client the connection is not closed. Ldap server assumes the server is active and keeps reattempting to complete the handshake for the timeout period (currently set to 300s ) .&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
com.sun.jndi.ldap.Connection#cleanup&lt;br/&gt;
&lt;br/&gt;
void cleanup(Control[] reqCtls, boolean notifyParent) {&lt;br/&gt;
660 boolean nparent = false;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
676 } finally {&lt;br/&gt;
677 try {&lt;br/&gt;
678 outStream.flush(); // try to perform a flush - that triggers a socket readtimeout .&lt;br/&gt;
679 sock.close(); // socket close is not called.&lt;br/&gt;
680 unpauseReader();&lt;br/&gt;
681 } catch (IOException ie) {&lt;br/&gt;
682 if (debug)&lt;br/&gt;
683 System.err.println(&amp;quot;Connection: problem closing socket: &amp;quot; + ie);&lt;br/&gt;
684 }&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
Stack Triggering the timeout.&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;at sun.security.ssl.SSLSocketImpl.access$200(java.base/SSLSocketImpl.java:76)&lt;br/&gt;
&amp;nbsp;at sun.security.ssl.SSLSocketImpl$AppOutputStream.write(java.base/SSLSocketImpl.java:1138)&lt;br/&gt;
&amp;nbsp;at java.io.BufferedOutputStream.flushBuffer(java.base/BufferedOutputStream.java:82)&lt;br/&gt;
&amp;nbsp;at java.io.BufferedOutputStream.flush(java.base/BufferedOutputStream.java:140)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- locked &amp;lt;0x00000007dd63ea80&amp;gt; (a java.io.BufferedOutputStream)&lt;br/&gt;
&amp;nbsp;at com.sun.jndi.ldap.Connection.cleanup(java.base/Connection.java:678)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- locked &amp;lt;0x00000007dd63ea98&amp;gt; (a com.sun.jndi.ldap.Connection)&lt;br/&gt;
&amp;nbsp;at com.sun.jndi.ldap.Connection.writeRequest(java.base/Connection.java:453)&lt;br/&gt;
&amp;nbsp;at com.sun.jndi.ldap.Connection.writeRequest(java.base/Connection.java:423)&lt;br/&gt;
&amp;nbsp;at com.sun.jndi.ldap.LdapClient.ldapBind(java.base/LdapClient.java:359)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- locked &amp;lt;0x00000007dd63eb88&amp;gt; (a com.sun.jndi.ldap.LdapClient)&lt;br/&gt;
&amp;nbsp;at com.sun.jndi.ldap.LdapClient.authenticate(java.base/LdapClient.java:214)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- locked &amp;lt;0x00000007dd63eb88&amp;gt; (a com.sun.jndi.ldap.LdapClient)&lt;br/&gt;
&amp;nbsp;at com.sun.jndi.ldap.LdapCtx.connect(java.base/LdapCtx.java:2895)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- locked &amp;lt;0x00000007dd63ebc0&amp;gt; (a java.lang.Object)&lt;br/&gt;
&amp;nbsp;at com.sun.jndi.ldap.LdapCtx.&amp;lt;init&amp;gt;(java.base/LdapCtx.java:348)&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;jdk.JavaExceptionThrow {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;startTime = 19:21:23.192&lt;br/&gt;
&amp;nbsp;&amp;nbsp;message = &amp;quot;Read timed out&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;thrownClass = java.net.SocketTimeoutException (classLoader = bootstrap)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;eventThread = &amp;quot;[STUCK] ExecuteThread: &amp;#39;239&amp;#39; for queue:&lt;br/&gt;
&amp;#39;weblogic.kernel.Default (self-tuning)&amp;#39;&amp;quot; (javaThreadId&lt;br/&gt;
&amp;nbsp;&amp;nbsp;stackTrace = [&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.lang.Throwable.&amp;lt;init&amp;gt;(String) line: 275&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.lang.Exception.&amp;lt;init&amp;gt;(String) line: 66&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.io.IOException.&amp;lt;init&amp;gt;(String) line: 58&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.io.InterruptedIOException.&amp;lt;init&amp;gt;(String) line: 64&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.net.SocketTimeoutException.&amp;lt;init&amp;gt;(String) line: 43&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.net.SocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.net.SocketInputStream.socketRead(FileDescriptor, byte[], int, int, int) line: 116&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.net.SocketInputStream.read(byte[], int, int, int) line: 171&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.net.SocketInputStream.read(byte[], int, int) line: 141&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketInputRecord.read(InputStream, byte[], int, int) line: 475&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketInputRecord.readHeader() line: 469&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketInputRecord.decode(ByteBuffer[], int, int) line: 159&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLTransport.decode(TransportContext, ByteBuffer[], int, int, ByteBuffer[], int, int) line&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketImpl.decode(ByteBuffer) line: 1320&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketImpl.readHandshakeRecord() line: 1233&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketImpl.startHandshake(boolean) line: 417&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketImpl.ensureNegotiated(boolean) line: 837&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketImpl.access$200(SSLSocketImpl, boolean) line: 76&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sun.security.ssl.SSLSocketImpl$AppOutputStream.write(byte[], int, int) line: 1138&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.io.BufferedOutputStream.flushBuffer() line: 82&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.io.BufferedOutputStream.flush() line: 140&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.Connection.cleanup(Control[], boolean) line: 678&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.Connection.writeRequest(BerEncoder, int, boolean, int) line: 453&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.Connection.writeRequest(BerEncoder, int, boolean) line: 423&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapClient.ldapBind(String, byte[], Control[], String, boolean) line: 359&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapClient.authenticate(boolean, String, Object, int, String, Control[], Hashtable) line:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapCtx.connect(boolean) line: 2895&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapCtx.&amp;lt;init&amp;gt;(String, String, int, Hashtable, boolean) line: 348&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxFromUrl(String, String, LdapURL, Hashtable) line: 225&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(String, Hashtable) line: 189&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(String[], Hashtable) line: 243&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Object, Hashtable) line: 154&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Hashtable) line: 84&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;javax.naming.spi.NamingManager.getInitialContext(Hashtable) line: 694&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;javax.naming.InitialContext.getDefaultInitCtx() line: 313&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;javax.naming.InitialContext.init(Hashtable) line: 244&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;javax.naming.ldap.InitialLdapContext.&amp;lt;init&amp;gt;(Hashtable, Control[]) line: 154 </description>
                <environment></environment>
        <key id="5107279">JDK-8313657</key>
            <summary>com.sun.jndi.ldap.Connection.cleanup does not close connections on SocketTimeoutErrors</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wxiao">Weibing Xiao</assignee>
                                    <reporter username="rpallath">Rajendrakumar Pallath</reporter>
                        <labels>
                            <label>8bpr-critical-approved</label>
                            <label>Internal</label>
                            <label>amazon-interest</label>
                            <label>bugdb_35557158</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Wed, 2 Aug 2023 19:00:10 -0700</created>
                <updated>Tue, 15 Jul 2025 06:19:34 -0700</updated>
                            <resolved>Mon, 14 Aug 2023 10:39:43 -0700</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14777692" author="weijun" created="Wed, 7 May 2025 07:17:55 -0700"  >A bug report on this code change at &lt;a href=&quot;https://mail.openjdk.org/pipermail/security-dev/2025-April/045603.html&quot;&gt;https://mail.openjdk.org/pipermail/security-dev/2025-April/045603.html&lt;/a&gt;</comment>
                            <comment id="14613934" author="JIRAUSER20917" created="Mon, 25 Sep 2023 19:01:09 -0700"  >Fix request [11u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 11.0.22-oracle.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Same with 17 backport.&lt;br/&gt;
Test passes and fails without the fix. SAP nightly testing passed.</comment>
                            <comment id="14613118" author="roboduke" created="Fri, 22 Sep 2023 01:44:24 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2140&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2140&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-22 08:33:25 +0000</comment>
                            <comment id="14611177" author="roboduke" created="Thu, 14 Sep 2023 04:53:50 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1740&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1740&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-14 11:46:09 +0000</comment>
                            <comment id="14611171" author="goetz" created="Thu, 14 Sep 2023 04:45:42 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.10-oracle.&lt;br/&gt;
Low risk, straight forward adding of error support.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes and fails without the fix. SAP nightly testing passed.</comment>
                            <comment id="14604423" author="roboduke" created="Wed, 16 Aug 2023 07:42:30 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/64&quot;&gt;https://git.openjdk.org/jdk21u/pull/64&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-16 14:37:46 +0000</comment>
                            <comment id="14603776" author="dukebot" created="Mon, 14 Aug 2023 10:39:42 -0700"  >Changeset: e56d3bc2&lt;br/&gt;
Author:    Weibing Xiao &amp;lt;&lt;a href=&apos;mailto:weibing.xiao@oracle.com&apos;&gt;weibing.xiao@oracle.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Aleksei Efimov &amp;lt;&lt;a href=&apos;mailto:aefimov@openjdk.org&apos;&gt;aefimov@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-08-14 17:38:53 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/e56d3bc2dab3d32453b6eda66e8434953c436084&quot;&gt;https://git.openjdk.org/jdk/commit/e56d3bc2dab3d32453b6eda66e8434953c436084&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14601930" author="roboduke" created="Fri, 4 Aug 2023 06:05:20 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15143&quot;&gt;https://git.openjdk.org/jdk/pull/15143&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-03 17:32:43 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5107320">JDK-8313692</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5108084">JDK-8314317</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5108085">JDK-8314318</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5108222">JDK-8314443</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5110656">JDK-8316576</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5111176">JDK-8317035</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5108083">JDK-8314316</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="5164634">JDK-8362268</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                                        </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5107761">JDK-8314063</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32lqj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17311"><![CDATA[b11]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="227"><![CDATA[javax.naming]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>