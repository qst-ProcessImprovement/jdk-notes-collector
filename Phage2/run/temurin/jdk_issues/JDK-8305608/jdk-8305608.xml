<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 18:20:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8305608] Change VMConnection to use &quot;test.class.path&quot;instead of &quot;test.classes&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8305608</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>VMConnection runs debuggee using &amp;quot;test.classes&amp;quot; as a classpath for debuggee classes. It works fine when test and TestScaffold.java are located in the same directory and are both compiled into &amp;quot;test.classes&amp;quot; location. However, it causes test failures when the virtual thread factory (wrapper) is enabled and the test is not located in the same directory as TestScaffold. Such tests use TestScaffold as a testlibrary. (They have &amp;#39; * @library ..&amp;#39; or something like similar). &lt;br/&gt;
So TestScaffold is not included in &amp;#39;test.classes&amp;#39; which include tests only. However, it is included as all testlibrary classes in &amp;quot;test.class.path&amp;quot; classparth.&lt;br/&gt;
&lt;br/&gt;
It is needed to use &amp;quot;test.class.path&amp;quot; to be able to use TestScaffolld as debugee wrapper. It might be better to always use  &amp;quot;test.class.path&amp;quot;  as classpath for debugee  to minimize the difference between standard and &amp;quot;virtual&amp;quot; execution.</description>
                <environment></environment>
        <key id="5097917">JDK-8305608</key>
            <summary>Change VMConnection to use &quot;test.class.path&quot;instead of &quot;test.classes&quot;</summary>
                <type id="5" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14716&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="5078278">JDK-8289546</parent>
                                    <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lmesnik">Leonid Mesnik</assignee>
                                    <reporter username="lmesnik">Leonid Mesnik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Apr 2023 12:31:44 -0700</created>
                <updated>Wed, 16 Aug 2023 14:32:14 -0700</updated>
                            <resolved>Thu, 6 Apr 2023 07:13:40 -0700</resolved>
                                                    <fixVersion>21</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14572274" author="dukebot" created="Thu, 6 Apr 2023 07:13:38 -0700"  >Changeset: ddd50d0d&lt;br/&gt;
Author:    Leonid Mesnik &amp;lt;&lt;a href=&apos;mailto:lmesnik@openjdk.org&apos;&gt;lmesnik@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-06 14:11:40 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ddd50d0db31e50c0fcedafa290d6eac277ddae3e&quot;&gt;https://git.openjdk.org/jdk/commit/ddd50d0db31e50c0fcedafa290d6eac277ddae3e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14572100" author="cjplummer" created="Wed, 5 Apr 2023 14:42:44 -0700"  >I believe the difference between Virtual wrapper test runs and normal test runs that you are trying to point out is that when the Virtual wrapper is used, the debuggee is launched with TestScaffold as the main program rather than the actual debuggee class, which is instead passed as an arg to TestScaffold.main(), which creates an instance of the debuggee class and calls its main method. The com/sun/jdi tests are not in any package, and are found in the &amp;quot;test.classes&amp;quot; classpath, which only includes the directory that the test is in. So when the test is in a subdir of com/sun/jdi, it does not include the directory that TestScaffold is in.&lt;br/&gt;
&lt;br/&gt;
BTW, I pointed out in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8289546&quot; title=&quot;TestScaffold.java could use some improvements to virtual thread wrapper support.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8289546&quot;&gt;JDK-8289546&lt;/a&gt; that TestScaffold.main() should go in its own class, maybe DebuggeeWrapper.java, or something like that. I think that might help make things easier to understand in the future.</comment>
                            <comment id="14571816" author="roboduke" created="Tue, 4 Apr 2023 13:55:06 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13339&quot;&gt;https://git.openjdk.org/jdk/pull/13339&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-04 20:42:34 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5073260">JDK-8285423</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i310oz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="370"><![CDATA[debugger]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>