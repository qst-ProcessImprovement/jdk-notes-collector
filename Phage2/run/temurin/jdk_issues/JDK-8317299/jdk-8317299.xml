<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:35:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8317299] safepoint scalarization doesn&apos;t keep track of the depth of the JVM state</title>
                <link>https://bugs.openjdk.org/browse/JDK-8317299</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment (17.0.9) (fastdebug build 17.0.9-internal+0-adhoc.jdk17u)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM (fastdebug 17.0.9-internal+0-adhoc.jdk17u, compiled mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
I ran a testcase using JDK17.0.9, and I found the JVM crashed under the option -Xcomp  -XX:-InlineUnsafeOps &lt;br/&gt;
&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/data/jdk17u/src/hotspot/share/opto/output.cpp:803), pid=2064999, tid=2065012&lt;br/&gt;
#  assert(local) failed: use _top instead of null&lt;br/&gt;
#&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment (17.0.9) (fastdebug build 17.0.9-internal+0-adhoc.jdk17u)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM (fastdebug 17.0.9-internal+0-adhoc.jdk17u, compiled mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x28a206c]  PhaseOutput::FillLocArray(int, MachSafePointNode*, Node*, GrowableArray&amp;lt;ScopeValue*&amp;gt;*, GrowableArray&amp;lt;ScopeValue*&amp;gt;*)+0x48c&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&amp;quot; (or dumping to /data/bugs/TestIntrinsicBailOut_09_21_17_52_10/core.2064999)&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
java -Xcomp  -XX:-InlineUnsafeOps   compiler.vectorapi.TestIntrinsicBailOut&lt;br/&gt;
&lt;br/&gt;
ACTUAL -&lt;br/&gt;
# To suppress the following error report, specify this argument&lt;br/&gt;
# after -XX: or in .hotspotrc:  SuppressErrorAt=/output.cpp:803&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/data/jdk17u/src/hotspot/share/opto/output.cpp:803), pid=2064999, tid=2065012&lt;br/&gt;
#  assert(local) failed: use _top instead of null&lt;br/&gt;
#&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment (17.0.9) (fastdebug build 17.0.9-internal+0-adhoc.jdk17u)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM (fastdebug 17.0.9-internal+0-adhoc.jdk17u, compiled mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x28a206c]  PhaseOutput::FillLocArray(int, MachSafePointNode*, Node*, GrowableArray&amp;lt;ScopeValue*&amp;gt;*, GrowableArray&amp;lt;ScopeValue*&amp;gt;*)+0x48c&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&amp;quot; (or dumping to /data/bugs/TestIntrinsicBailOut_09_21_17_52_10/core.2064999)&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# /data/bugs/TestIntrinsicBailOut_09_21_17_52_10/hs_err_pid2064999.log&lt;br/&gt;
#&lt;br/&gt;
# Compiler replay data is saved as:&lt;br/&gt;
# /data/bugs/TestIntrinsicBailOut_09_21_17_52_10/replay_pid2064999.log&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5110769">JDK-8317299</key>
            <summary>safepoint scalarization doesn&apos;t keep track of the depth of the JVM state</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dfenacci">Damon Fenacci</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>dcsswa</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22-defer-request</label>
                            <label>jdk22-defer-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>oracle-triage-22</label>
                            <label>reproducer-yes</label>
                            <label>vectorapi</label>
                            <label>webbug</label>
                    </labels>
                <created>Thu, 21 Sep 2023 06:24:09 -0700</created>
                <updated>Fri, 14 Jun 2024 09:27:18 -0700</updated>
                            <resolved>Mon, 5 Feb 2024 23:54:46 -0800</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14681626" author="roboduke" created="Fri, 14 Jun 2024 00:39:25 -0700"  >[jdk21u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 21.0.5-oracle. The backport has been reviewed and tier 1-4 have passed.</comment>
                            <comment id="14681421" author="roboduke" created="Thu, 13 Jun 2024 08:11:14 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/716&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/716&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-13 15:04:52 +0000</comment>
                            <comment id="14653038" author="roboduke" created="Tue, 27 Feb 2024 22:55:27 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/74&quot;&gt;https://git.openjdk.org/jdk22u/pull/74&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-28 06:50:47 +0000</comment>
                            <comment id="14653037" author="thartmann" created="Tue, 27 Feb 2024 22:52:05 -0800"  >Fix Request (JDK 22u)&lt;br/&gt;
Fixes a crash during C2 compilation or potential incorrect execution. The fix is medium risk. Tested with tier1,tier2,tier3,hs-comp-stress,hs-precheckin-comp. Applies cleanly.</comment>
                            <comment id="14646916" author="dukebot" created="Mon, 5 Feb 2024 23:54:45 -0800"  >Changeset: 6d911f68&lt;br/&gt;
Author:    Damon Fenacci &amp;lt;&lt;a href=&apos;mailto:dfenacci@openjdk.org&apos;&gt;dfenacci@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-02-06 07:53:03 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/6d911f68a3244c40a62ab2570dfec68b8d0ed5d8&quot;&gt;https://git.openjdk.org/jdk/commit/6d911f68a3244c40a62ab2570dfec68b8d0ed5d8&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14643356" author="roboduke" created="Wed, 24 Jan 2024 01:31:02 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17500&quot;&gt;https://git.openjdk.org/jdk/pull/17500&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-19 16:31:25 +0000</comment>
                            <comment id="14640111" author="thartmann" created="Mon, 15 Jan 2024 01:51:40 -0800"  >Deferral Request:&lt;br/&gt;
Fix is not ready in time for JDK 22 and will most likely be complex. This is not a regression in JDK 22.</comment>
                            <comment id="14614925" author="thartmann" created="Fri, 29 Sep 2023 03:34:50 -0700"  >ILW = Assert during C2 compilation, single test with diagnostic flag -XX:-InlineUnsafeOps, disable compilation of affected method = HLM = P3</comment>
                            <comment id="14614923" author="thartmann" created="Fri, 29 Sep 2023 03:33:04 -0700"  >I can reproduce this with JDK 17.0.9 and with slightly adjusted TestIntrinsicBailOut2 also with JDK 22:&lt;br/&gt;
&lt;br/&gt;
java --add-modules jdk.incubator.vector -Xcomp -XX:-TieredCompilation -XX:-InlineUnsafeOps -XX:CompileCommand=compileonly,TestIntrinsicBailOut2::test -XX:CompileCommand=quiet --enable-preview --source 22 TestIntrinsicBailOut2.java </comment>
                            <comment id="14614903" author="sswsharm" created="Fri, 29 Sep 2023 02:21:30 -0700"  >Issue is not reproduced.&lt;br/&gt;
Crash is not observed on JDK 17&lt;br/&gt;
&lt;br/&gt;
OS: Ubuntu 20.04&lt;br/&gt;
JDK 17.0.8: Pass&lt;br/&gt;
&lt;br/&gt;
ILW = Crash, not reproducible , no known workaround yet = MLM = P4&lt;br/&gt;
&lt;br/&gt;
Attaching submitter&amp;#39;s crash log hs_err_pid2055037.log file.&lt;br/&gt;
Moving it to dev team for further analysis</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5123101">JDK-8327195</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131688">JDK-8334118</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131903">JDK-8334308</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5116906">JDK-8321991</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5119908">JDK-8324605</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5120809">JDK-8325313</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5062478">JDK-8276998</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="106618" name="TestIntrinsicBailOut.java" size="2091" author="sswsharm" created="Fri, 29 Sep 2023 02:20:00 -0700"/>
                            <attachment id="106623" name="TestIntrinsicBailOut2.java" size="1936" author="thartmann" created="Fri, 29 Sep 2023 03:33:12 -0700"/>
                            <attachment id="106619" name="hs_err_pid2055037.log" size="80298" author="sswsharm" created="Fri, 29 Sep 2023 02:20:00 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17048"><![CDATA[linux_ubuntu]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3379v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17336"><![CDATA[b09]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>