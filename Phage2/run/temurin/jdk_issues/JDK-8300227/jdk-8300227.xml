<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 15:43:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8300227] [macos_aarch64] assert(cpu_has(&quot;hw.optional.arm.FEAT_AES&quot;)) failed after JDK-8297092</title>
                <link>https://bugs.openjdk.org/browse/JDK-8300227</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>[2023-01-17T02:23:42,276Z] Error getting java.specification.version for /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-21+6-316/macosx-aarch64-debug.jdk/jdk-21/fastdebug: exit code 134&lt;br/&gt;
[2023-01-17T02:23:42,276Z] # To suppress the following error report, specify this argument&lt;br/&gt;
[2023-01-17T02:23:42,276Z] # after -XX: or in .hotspotrc:  SuppressErrorAt=/vm_version_bsd_aarch64.cpp:75&lt;br/&gt;
[2023-01-17T02:23:42,277Z] #&lt;br/&gt;
[2023-01-17T02:23:42,277Z] # A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
[2023-01-17T02:23:42,277Z] #&lt;br/&gt;
[2023-01-17T02:23:42,277Z] #  Internal Error (/System/Volumes/Data/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S82745/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/2e52dd00-5922-4a1e-8f2a-b7c3aa1b783b/runs/2c5f2fc1-fee9-422c-8983-6143a4bd8635/workspace/open/src/hotspot/os_cpu/bsd_aarch64/vm_version_bsd_aarch64.cpp:75), pid=79523, tid=9987&lt;br/&gt;
[2023-01-17T02:23:42,277Z] #  assert(cpu_has(&amp;quot;hw.optional.arm.FEAT_AES&amp;quot;)) failed: should be&lt;br/&gt;
[2023-01-17T02:23:42,277Z] #&lt;br/&gt;
[2023-01-17T02:23:42,277Z] # JRE version:  (21.0+6) (fastdebug build )&lt;br/&gt;
[2023-01-17T02:23:42,277Z] # Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 21-ea+6-LTS-316, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, bsd-aarch64)&lt;br/&gt;
[2023-01-17T02:23:42,277Z] # Core dump will be written. Default location: core.79523&lt;br/&gt;
[2023-01-17T02:23:42,277Z] #&lt;br/&gt;
[2023-01-17T02:23:42,277Z] # An error report file with more information is saved as:&lt;br/&gt;
[2023-01-17T02:23:42,277Z] # /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-21+6-316/src.full/open/hs_err_pid79523.log&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5091484">JDK-8300227</key>
            <summary>[macos_aarch64] assert(cpu_has(&quot;hw.optional.arm.FEAT_AES&quot;)) failed after JDK-8297092</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="haosun">Hao Sun</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>noreg-build</label>
                            <label>regression</label>
                            <label>tier1</label>
                            <label>tier2</label>
                            <label>tier3</label>
                    </labels>
                <created>Mon, 16 Jan 2023 18:31:45 -0800</created>
                <updated>Fri, 30 Jun 2023 12:52:00 -0700</updated>
                            <resolved>Mon, 16 Jan 2023 22:44:51 -0800</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14551551" author="dukebot" created="Mon, 16 Jan 2023 22:44:50 -0800"  >Changeset: f829a679&lt;br/&gt;
Author:    Hao Sun &amp;lt;&lt;a href=&apos;mailto:haosun@openjdk.org&apos;&gt;haosun@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-17 06:43:58 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f829a67935328824d2465d9073107cda7eaaf216&quot;&gt;https://git.openjdk.org/jdk/commit/f829a67935328824d2465d9073107cda7eaaf216&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14551548" author="roboduke" created="Mon, 16 Jan 2023 22:36:02 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12022&quot;&gt;https://git.openjdk.org/jdk/pull/12022&lt;/a&gt;&lt;br/&gt;
Date: 2023-01-17 06:27:15 +0000</comment>
                            <comment id="14551545" author="haosun" created="Mon, 16 Jan 2023 22:29:17 -0800"  >Hi [~dholmes], it&amp;#39;s &lt;a href=&quot;https://github.com/openjdk/jdk/pull/12022&quot;&gt;https://github.com/openjdk/jdk/pull/12022&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
As mentioned in the commit msg, I checked the JDK build in my Macmini. &lt;br/&gt;
Could you also help test this PR with your CI?&lt;br/&gt;
Thanks in advance.</comment>
                            <comment id="14551543" author="dholmes" created="Mon, 16 Jan 2023 22:22:19 -0800"  >[~haosun] is that patch forthcoming? If not then I will have to initiate a backout as this is crippling our CI. Thanks.</comment>
                            <comment id="14551524" author="haosun" created="Mon, 16 Jan 2023 19:46:11 -0800"  >Hi [~dholmes], thanks for reporting this bug.&lt;br/&gt;
&lt;br/&gt;
1) We previously missed this build failure mainly because our internal CI was run on one Macmini with new XNU kernel version, i.e. xnu-8020.140.41&lt;br/&gt;
```&lt;br/&gt;
Darwin 21.6.0 Darwin Kernel Version 21.6.0: Sat Jun 18 17:05:47 PDT 2022; root:xnu-8020.140.41~1/RELEASE_ARM64_T8101 arm64 arm64 Macmini9,1 Darwin&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
2) I can reproduce this failure on one Macmini with XNU version xnu-7195&lt;br/&gt;
```&lt;br/&gt;
Darwin 20.6.0 Darwin Kernel Version 20.6.0: Mon Aug 30 06:12:20 PDT 2021; root:xnu-7195.141.6~3/RELEASE_ARM64_T8101 arm64&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
Root cause:&lt;br/&gt;
From &lt;a href=&quot;https://github.com/apple-oss-distributions/xnu/blob/rel/xnu-7195/bsd/kern/kern_mib.c#L855,&quot;&gt;https://github.com/apple-oss-distributions/xnu/blob/rel/xnu-7195/bsd/kern/kern_mib.c#L855,&lt;/a&gt; we can see sysctl string name &amp;quot;FEAT_ASE&amp;quot; is not introduced in xnu-7195.&lt;br/&gt;
Hence, our assertions added in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297092&quot; title=&quot;[macos_aarch64] Add support for SHA feature detection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297092&quot;&gt;&lt;strike&gt;JDK-8297092&lt;/strike&gt;&lt;/a&gt; would fail.&lt;br/&gt;
&lt;br/&gt;
I will make a patch soon.</comment>
                            <comment id="14551520" author="dholmes" created="Mon, 16 Jan 2023 18:42:42 -0800"  >Unable to retrive hs_err file so far.&lt;br/&gt;
&lt;br/&gt;
Machine Info:&lt;br/&gt;
Name	Value&lt;br/&gt;
cpu_name	Apple_M1&lt;br/&gt;
os_vendor	Apple&lt;br/&gt;
os_version	11.4&lt;br/&gt;
os_arch	aarch64&lt;br/&gt;
cpu_totalCores	8&lt;br/&gt;
hw_model	Macmini9_1&lt;br/&gt;
os_description	Mac_OS_X_11.4&lt;br/&gt;
os_name	macosx&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5087657">JDK-8297092</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="22711">21</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zxab:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>