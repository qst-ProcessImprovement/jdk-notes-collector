<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 18:04:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8305008] RISC-V: Factor out immediate checking functions from assembler_riscv.inline.hpp</title>
                <link>https://bugs.openjdk.org/browse/JDK-8305008</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The call-point to &amp;#39;is_imm_in_range&amp;#39;, &amp;#39;is_unsigned_imm_in_range&amp;#39; and &amp;#39;is_offset_in_range&amp;#39; in assembler_riscv.inline.hpp could to be replaced with shared code.&lt;br/&gt;
&lt;br/&gt;
For &amp;#39;is_imm_in_range&amp;#39;, if align_bits = 0, then the call point can be changed to call &amp;#39;is_simm&amp;#39;. If align_bits = 1, then an additional summation judgement is added to determine if it is a multiple of 2. For &amp;#39;is_unsigned_imm_in_range&amp;#39;, we can first determine if it is greater than 0, and then call &amp;#39;is_uimm&amp;#39; further. &amp;#39;is_offset_in_range&amp;#39; can be changed directly to call &amp;#39;is_simm&amp;#39;. This patch also refactored for is_valid_riscv64_address and movptr.&lt;br/&gt;
&lt;br/&gt;
This patch removed the original functions from assembler_riscv.inline.hpp and defined some fixed-width judgment functions based on the number of immediate or offset bits in the spec[1]. At the same time, we also adjusted two includes to fix the compilation error after the modification.&lt;br/&gt;
&lt;br/&gt;
This patch also renames the function &amp;#39;operand_valid_for_add_immediate&amp;#39; to &amp;#39;operand_valid_for_add_sub_immediate&amp;#39; to make it consistent with its usage.&lt;br/&gt;
&lt;br/&gt;
Finally, this patch modified the return value in os::non_memory_address_word to avoid an imm64 value of -1 in MacroAssembler::movptr.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;https://github.com/riscv/riscv-isa-manual/releases/download/draft-20230131-c0b298a/riscv-spec.pdf&quot;&gt;https://github.com/riscv/riscv-isa-manual/releases/download/draft-20230131-c0b298a/riscv-spec.pdf&lt;/a&gt;</description>
                <environment></environment>
        <key id="5097216">JDK-8305008</key>
            <summary>RISC-V: Factor out immediate checking functions from assembler_riscv.inline.hpp</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dzhang">Dingli Zhang</assignee>
                                    <reporter username="dzhang">Dingli Zhang</reporter>
                        <labels>
                            <label>oraclejdk-na</label>
                    </labels>
                <created>Mon, 27 Mar 2023 21:31:01 -0700</created>
                <updated>Sun, 9 Jul 2023 19:29:13 -0700</updated>
                            <resolved>Thu, 30 Mar 2023 18:25:37 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14590404" author="roboduke" created="Mon, 19 Jun 2023 20:38:08 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1427&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1427&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-13 09:43:25 +0000</comment>
                            <comment id="14585076" author="roboduke" created="Sun, 28 May 2023 18:43:58 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/riscv-port-jdk17u/pull/63&quot;&gt;https://git.openjdk.org/riscv-port-jdk17u/pull/63&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-29 01:38:47 +0000</comment>
                            <comment id="14570843" author="dukebot" created="Thu, 30 Mar 2023 18:25:36 -0700"  >Changeset: a144c713&lt;br/&gt;
Author:    Dingli Zhang &amp;lt;&lt;a href=&apos;mailto:dzhang@openjdk.org&apos;&gt;dzhang@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Fei Yang &amp;lt;&lt;a href=&apos;mailto:fyang@openjdk.org&apos;&gt;fyang@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-03-31 01:22:54 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a144c713b7bd8d4345ab33974573062536fc25d6&quot;&gt;https://git.openjdk.org/jdk/commit/a144c713b7bd8d4345ab33974573062536fc25d6&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14569875" author="roboduke" created="Mon, 27 Mar 2023 23:03:10 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13202&quot;&gt;https://git.openjdk.org/jdk/pull/13202&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-28 05:59:49 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5105103">JDK-8311758</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="20300"><![CDATA[riscv]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30wnn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17417"><![CDATA[b17]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>