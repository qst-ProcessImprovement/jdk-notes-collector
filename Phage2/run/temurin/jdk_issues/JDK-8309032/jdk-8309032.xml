<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:06:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8309032] jpackage does not work for module projects unless --module-path is specified</title>
                <link>https://bugs.openjdk.org/browse/JDK-8309032</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Windows 10 and Linux OpenJDK20&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
jpackage with multiple module launchers crashes unless the command line contains a trivial / unnecessary module path. &lt;br/&gt;
Note that this bug is similar to the report mentioned in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8306488&quot; title=&quot;When running jpackage and adding `--add-launcher`, it throws `ClassCastException`.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8306488&quot;&gt;&lt;strike&gt;JDK-8306488&lt;/strike&gt;&lt;/a&gt; but isn&amp;#39;t quite the same issue. The test case for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8306488&quot; title=&quot;When running jpackage and adding `--add-launcher`, it throws `ClassCastException`.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8306488&quot;&gt;&lt;strike&gt;JDK-8306488&lt;/strike&gt;&lt;/a&gt; has omitted --module-path when it should have added one (so is perhaps an issue with the test case), whereas in this example --module-path isn&amp;#39;t needed at all but must be specified even though not needed.&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
I have a large project with multiple modules, I built a JRE with jlink that contains every module used and pass that JRE to jpackage command so that no additional modules are required by jpackage. Fortunately I can reproduce simply by calling jpackage with a classname of module &amp;quot;java.base&amp;quot; and with the standard OpenJDK20 runtime.  On WIndows / Linux start in empty directory:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;mkdir THIS_ISNT_NEEDED_BUT_JPACKAGE_FAILS_WITHOUT_IT&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
Create a launcher specifying module from a package found in the runtime image (java.base in this case)&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;echo module=java.base/classdoesnotmatter &amp;gt; launcher.properties&lt;br/&gt;
&lt;br/&gt;
On Windows I use OpenJDK as the runtime parameter - C:\java\jdk-20&lt;br/&gt;
&lt;br/&gt;
jpackage --name &amp;quot;TEST&amp;quot; --runtime-image C:\java\jdk-20 --type app-image --module java.base/classnotimportant --dest jpackage0.out &lt;br/&gt;
&lt;br/&gt;
jpackage --name &amp;quot;TEST&amp;quot; --runtime-image C:\java\jdk-20 --type app-image --module java.base/classnotimportant --add-launcher another=launcher.properties --dest jpackage1.out &lt;br/&gt;
&lt;br/&gt;
jpackage --name &amp;quot;TEST&amp;quot; --runtime-image C:\java\jdk-20 --type app-image --module java.base/classnotimportant --add-launcher another=launcher.properties --dest jpackage2.out --module-path THIS_ISNT_NEEDED_BUT_JPACKAGE_FAILS_WITHOUT_IT&lt;br/&gt;
&lt;br/&gt;
On Linux I use OpenJDK as the runtime parameter - /mnt/c/linux/jdk-20&lt;br/&gt;
&lt;br/&gt;
jpackage --name &amp;quot;TEST&amp;quot; --runtime-image /mnt/c/linux/jdk-20 --type app-image --module java.base/classnotimportant --dest jpackage3.out &lt;br/&gt;
&lt;br/&gt;
jpackage --name &amp;quot;TEST&amp;quot; --runtime-image /mnt/c/linux/jdk-20 --type app-image --module java.base/classnotimportant --add-launcher another=launcher.properties --dest jpackage4.out &lt;br/&gt;
&lt;br/&gt;
jpackage --name &amp;quot;TEST&amp;quot; --runtime-image /mnt/c/linux/jdk-20 --type app-image --module java.base/classnotimportant --add-launcher another=launcher.properties --dest jpackage5.out --module-path THIS_ISNT_NEEDED_BUT_JPACKAGE_FAILS_WITHOUT_IT&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
All 6 jpackage commands should generate app-image structure as the JRE runtime supplied contains the required module &amp;quot;java.base&amp;quot; that was specified by each launch configuration. [Obviously these apps won&amp;#39;t run as the classnames are made up]&lt;br/&gt;
&lt;br/&gt;
ACTUAL -&lt;br/&gt;
Two of the commands fail - runs for jpackage1.out and jpackage4.out both crash with exception:&lt;br/&gt;
java.lang.ClassCastException: class java.util.ImmutableCollections$List12 cannot be cast to class java.lang.String (java.util.ImmutableCollections$List12 and java.lang.String are in module java.base of loader &amp;#39;bootstrap&amp;#39;)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
The workaround is to supply `--module-path` for an empty directory. That gets copied into the release and every launcher contains these unnecessary lines: &lt;br/&gt;
&amp;nbsp;&amp;nbsp;java-options=--module-path&lt;br/&gt;
&amp;nbsp;&amp;nbsp;java-options=$APPDIR\mods&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5101450">JDK-8309032</key>
            <summary>jpackage does not work for module projects unless --module-path is specified</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asemenyuk">Alexey Semenyuk</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>dcsad</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk20u-fix-request</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>reproducer-yes</label>
                            <label>webbug</label>
                    </labels>
                <created>Mon, 22 May 2023 03:52:25 -0700</created>
                <updated>Tue, 12 Sep 2023 06:22:57 -0700</updated>
                            <resolved>Wed, 19 Jul 2023 19:16:32 -0700</resolved>
                                    <version>17.0.6</version>
                    <version>20</version>
                                    <fixVersion>22</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14610287" author="roboduke" created="Mon, 11 Sep 2023 23:06:45 -0700"  >[jdk17u-fix-request] Approval Request from airsquared&lt;br/&gt;
</comment>
                            <comment id="14608399" author="phh" created="Fri, 1 Sep 2023 08:30:50 -0700"  >Fix Request (17u, 20u, 21u).&lt;br/&gt;
&lt;br/&gt;
On behalf of airsquared.&lt;br/&gt;
&lt;br/&gt;
jpackage failure, clean backport, low risk.&lt;br/&gt;
</comment>
                            <comment id="14608221" author="roboduke" created="Thu, 31 Aug 2023 20:06:58 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1717&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1717&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-01 02:51:03 +0000</comment>
                            <comment id="14608220" author="roboduke" created="Thu, 31 Aug 2023 20:05:12 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/120&quot;&gt;https://git.openjdk.org/jdk21u/pull/120&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-01 03:00:15 +0000</comment>
                            <comment id="14597559" author="roboduke" created="Thu, 20 Jul 2023 03:34:25 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20u/pull/86&quot;&gt;https://git.openjdk.org/jdk20u/pull/86&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-20 02:52:13 +0000</comment>
                            <comment id="14597466" author="roboduke" created="Wed, 19 Jul 2023 19:40:49 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21/pull/140&quot;&gt;https://git.openjdk.org/jdk21/pull/140&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-20 02:34:05 +0000</comment>
                            <comment id="14597465" author="dukebot" created="Wed, 19 Jul 2023 19:16:31 -0700"  >Changeset: dfe764e3&lt;br/&gt;
Author:    airsquared &amp;lt;36649395+&lt;a href=&apos;mailto:airsquared@users.noreply.github.com&apos;&gt;airsquared@users.noreply.github.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Alexey Semenyuk &amp;lt;&lt;a href=&apos;mailto:asemenyuk@openjdk.org&apos;&gt;asemenyuk@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-07-20 02:14:19 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/dfe764e3f85784752d69fd51306644732e808d38&quot;&gt;https://git.openjdk.org/jdk/commit/dfe764e3f85784752d69fd51306644732e808d38&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14596695" author="roboduke" created="Mon, 17 Jul 2023 13:00:09 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14840&quot;&gt;https://git.openjdk.org/jdk/pull/14840&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-11 23:47:30 +0000</comment>
                            <comment id="14585266" author="adev" created="Sun, 28 May 2023 22:14:49 -0700"  >The issue is reproducible.  Tested on Windows with standard JDK:&lt;br/&gt;
$ C:\jdk\jdk-20_windows-x64_bin\jdk-20\bin\jpackage --name &amp;quot;TEST&amp;quot; --runtime-image C:\jdk\jdk-20_windows-x64_bin\jdk-20  --type app-image --module java.base/classnotimportant --add-launcher another=launcher.properties --dest jpackage1.out&lt;br/&gt;
&lt;br/&gt;
java.lang.ClassCastException: class java.util.ImmutableCollections$List12 cannot be cast to class java.lang.String (java.util.ImmutableCollections$List12 and java.lang.String are in module java.base of loader &amp;#39;bootstrap&amp;#39;)</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5109602">JDK-8315654</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5109682">JDK-8315727</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5110130">JDK-8316120</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5098957">JDK-8306488</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31lwb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17337"><![CDATA[b08]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2192"><![CDATA[jpackage]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>