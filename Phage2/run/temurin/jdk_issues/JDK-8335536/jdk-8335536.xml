<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:15:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8335536] Fix assertion failure in IdealGraphPrinter when append is true</title>
                <link>https://bugs.openjdk.org/browse/JDK-8335536</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When `IdealGraphPrinter` is created with `append` set to true, it does not write the head element to the file in its constructor. But in the destructor, it always writes the tail element to the file no matter `append` is true or not, which causes an assertion failure in `xmlStream::pop_tag`:&lt;br/&gt;
&lt;br/&gt;
#  Internal Error (/root/jdk/src/hotspot/share/utilities/xmlstream.cpp:186), pid=1520448, tid=1520452&lt;br/&gt;
#  assert(_element_depth &amp;gt; 0) failed: must be in an element to close&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007ffff59fc000,0x00007ffff5afd000],  sp=0x00007ffff5afbc70,  free space=1023k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x197e9d3]  xmlStream::pop_tag(char const*)+0x1c3  (xmlstream.cpp:186)&lt;br/&gt;
V  [libjvm.so+0x197f8c3]  xmlStream::tail(char const*)+0x13  (xmlstream.cpp:317)&lt;br/&gt;
V  [libjvm.so+0xdce4ec]  IdealGraphPrinter::~IdealGraphPrinter()+0x1c  (idealGraphPrinter.cpp:218)&lt;br/&gt;
V  [libjvm.so+0xdce5ff]  IdealGraphPrinter::clean_up()+0x9f  (idealGraphPrinter.cpp:106)&lt;br/&gt;
V  [libjvm.so+0x17d03c7]  Threads::destroy_vm()+0x267  (threads.cpp:949)&lt;br/&gt;
V  [libjvm.so+0xf7571c]  jni_DestroyJavaVM+0x9c  (jni.cpp:3733)&lt;br/&gt;
C  [libjli.so+0x455f]  JavaMain+0x2bf  (java.c:679)&lt;br/&gt;
C  [libjli.so+0x7cc9]  ThreadJavaMain+0x9  (java_md.c:653)&lt;br/&gt;
&lt;br/&gt;
This issue can be reproduced by calling `igv_append` directly, or by calling `Compile::igv_print_method_to_file` with `append` set to true.&lt;br/&gt;
&lt;br/&gt;
This patch fixes the issue.</description>
                <environment></environment>
        <key id="5133277">JDK-8335536</key>
            <summary>Fix assertion failure in IdealGraphPrinter when append is true</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://bugs.openjdk.org/images/jbsImages/p5.png">P5</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="qxing">Qizheng Xing</assignee>
                                    <reporter username="qxing">Qizheng Xing</reporter>
                        <labels>
                            <label>c2</label>
                            <label>igv</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-fix-SQE-ok</label>
                            <label>jdk23u-fix-request</label>
                            <label>jdk23u-fix-yes</label>
                            <label>oracle-triage-24</label>
                    </labels>
                <created>Tue, 2 Jul 2024 02:28:47 -0700</created>
                <updated>Tue, 6 Aug 2024 05:46:13 -0700</updated>
                            <resolved>Wed, 3 Jul 2024 05:13:38 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14695286" author="roboduke" created="Thu, 1 Aug 2024 18:44:22 -0700"  >[jdk17u-fix-request] Approval Request from MaxXing&lt;br/&gt;
Backporting this patch fixes assertion failures when debugging on ideal graph. Risk is low. The original patch does not apply cleanly to 17u due to some merge conflicts about creating xmlStream with placement new expressions.</comment>
                            <comment id="14687307" author="roboduke" created="Fri, 5 Jul 2024 00:17:56 -0700"  >[jdk23u-fix-request] Approval Request from MaxXing&lt;br/&gt;
Backporting this patch fixes assertion failures when debugging on ideal graph. Applies cleanly and risk is low.</comment>
                            <comment id="14687298" author="roboduke" created="Fri, 5 Jul 2024 00:09:20 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/14&quot;&gt;https://git.openjdk.org/jdk23u/pull/14&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-05 07:04:28 +0000</comment>
                            <comment id="14687251" author="clanger" created="Thu, 4 Jul 2024 22:12:41 -0700"  >[~qxing] can you please backport this to jdk23u first?</comment>
                            <comment id="14686971" author="roboduke" created="Wed, 3 Jul 2024 20:39:04 -0700"  >[jdk21u-fix-request] Approval Request from MaxXing&lt;br/&gt;
Backporting this patch fixes assertion failures when debugging on ideal graph. Applies cleanly and risk is low.</comment>
                            <comment id="14686968" author="roboduke" created="Wed, 3 Jul 2024 20:11:36 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2657&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2657&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-04 03:06:59 +0000</comment>
                            <comment id="14686957" author="roboduke" created="Wed, 3 Jul 2024 18:58:37 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/816&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/816&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-04 01:53:31 +0000</comment>
                            <comment id="14686774" author="dukebot" created="Wed, 3 Jul 2024 05:13:36 -0700"  >Changeset: 6db4c6a7&lt;br/&gt;
Author:    Qizheng Xing &amp;lt;&lt;a href=&apos;mailto:qxing@openjdk.org&apos;&gt;qxing@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Tobias Hartmann &amp;lt;&lt;a href=&apos;mailto:thartmann@openjdk.org&apos;&gt;thartmann@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-07-03 12:12:00 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/6db4c6a772df856fc3099c32a5b2c102a30d360c&quot;&gt;https://git.openjdk.org/jdk/commit/6db4c6a772df856fc3099c32a5b2c102a30d360c&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14686689" author="thartmann" created="Tue, 2 Jul 2024 22:39:30 -0700"  >ILW = Harmless assert in IGV code deconstructor because head element in xml is missing, only when invoking IGV print methods with append from debugger, no workaround = LLH = P5</comment>
                            <comment id="14686425" author="chagedorn" created="Tue, 2 Jul 2024 03:11:54 -0700"  >[~qxing] Can you add the assertion message to the description? This allows others to find this issue here when hitting the same assertion.</comment>
                            <comment id="14686416" author="roboduke" created="Tue, 2 Jul 2024 02:35:47 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19986&quot;&gt;https://git.openjdk.org/jdk/pull/19986&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-02 09:31:32 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5133762">JDK-8335956</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5133793">JDK-8335988</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5136252">JDK-8337937</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5017852">JDK-8244207</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36zhv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17315"><![CDATA[b05]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>