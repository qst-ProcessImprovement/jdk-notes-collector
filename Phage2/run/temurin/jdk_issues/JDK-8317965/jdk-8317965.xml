<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:43:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8317965] TestLoadLibraryDeadlock.java fails with &quot;Unable to load native library.: expected true, was false&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8317965</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK22 CI:&lt;br/&gt;
&lt;br/&gt;
java/lang/ClassLoader/loadLibraryDeadlock/TestLoadLibraryDeadlock.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(6/285)----------&lt;br/&gt;
command: main -Xcheck:jni TestLoadLibraryDeadlock&lt;br/&gt;
reason: User specified action: run main/othervm/native -Xcheck:jni TestLoadLibraryDeadlock &lt;br/&gt;
started: Wed Oct 11 03:21:31 UTC 2023&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
finished: Wed Oct 11 03:21:46 UTC 2023&lt;br/&gt;
elapsed time (seconds): 15.144&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(37/3004)----------&lt;br/&gt;
COMMAND: /opt/mach5/mesos/work_dir/jib-master/install/jdk-22+19-1462/linux-x64-debug.jdk/jdk-22/fastdebug/bin/keytool -storepass changeit -keypass changeit -keystore keystore.jks -keyalg rsa -keysize 2048 -genkeypair -alias test -dname CN=test -validity 366&lt;br/&gt;
[2023-10-11T03:21:31.284284819Z] Gathering output for process 3085986&lt;br/&gt;
[2023-10-11T03:21:32.716092259Z] Waiting for completion for process 3085986&lt;br/&gt;
[2023-10-11T03:21:32.716285545Z] Waiting for completion finished for process 3085986&lt;br/&gt;
Output and diagnostic info for process 3085986 was saved into &amp;#39;pid-3085986-output.log&amp;#39;&lt;br/&gt;
[2023-10-11T03:21:32.729673568Z] Waiting for completion for process 3085986&lt;br/&gt;
[2023-10-11T03:21:32.729805329Z] Waiting for completion finished for process 3085986&lt;br/&gt;
added manifest&lt;br/&gt;
adding: LoadLibraryDeadlock.class(in = 650) (out= 431)(deflated 33%)&lt;br/&gt;
adding: LoadLibraryDeadlock$1.class(in = 1035) (out= 609)(deflated 41%)&lt;br/&gt;
adding: LoadLibraryDeadlock$2.class(in = 881) (out= 549)(deflated 37%)&lt;br/&gt;
added manifest&lt;br/&gt;
adding: Class1.class(in = 481) (out= 330)(deflated 31%)&lt;br/&gt;
added manifest&lt;br/&gt;
adding: p/Class2.class(in = 188) (out= 158)(deflated 15%)&lt;br/&gt;
COMMAND: /opt/mach5/mesos/work_dir/jib-master/install/jdk-22+19-1462/linux-x64-debug.jdk/jdk-22/fastdebug/bin/jarsigner -keystore keystore.jks -storepass changeit c.jar test&lt;br/&gt;
[2023-10-11T03:21:32.869244297Z] Gathering output for process 3086013&lt;br/&gt;
[2023-10-11T03:21:34.147437592Z] Waiting for completion for process 3086013&lt;br/&gt;
[2023-10-11T03:21:34.147652229Z] Waiting for completion finished for process 3086013&lt;br/&gt;
Output and diagnostic info for process 3086013 was saved into &amp;#39;pid-3086013-output.log&amp;#39;&lt;br/&gt;
[2023-10-11T03:21:34.148342559Z] Waiting for completion for process 3086013&lt;br/&gt;
[2023-10-11T03:21:34.148415436Z] Waiting for completion finished for process 3086013&lt;br/&gt;
COMMAND: /opt/mach5/mesos/work_dir/jib-master/install/jdk-22+19-1462/linux-x64-debug.jdk/jdk-22/fastdebug/bin/java -cp a.jar:b.jar:c.jar -Djava.library.path=/opt/mach5/mesos/work_dir/jib-master/install/jdk-22+19-1462/linux-x64-debug.test/jdk/jtreg/native LoadLibraryDeadlock&lt;br/&gt;
&lt;br/&gt;
COMMAND: /opt/mach5/mesos/work_dir/jib-master/install/jdk-22+19-1462/linux-x64-debug.jdk/jdk-22/fastdebug/bin/jcmd 3086039 Thread.print&lt;br/&gt;
[2023-10-11T03:21:40.167915121Z] Gathering output for process 3086060&lt;br/&gt;
[2023-10-11T03:21:46.064971788Z] Waiting for completion for process 3086060&lt;br/&gt;
[2023-10-11T03:21:46.065524556Z] Waiting for completion finished for process 3086060&lt;br/&gt;
Output and diagnostic info for process 3086060 was saved into &amp;#39;pid-3086060-output.log&amp;#39;&lt;br/&gt;
3086039:&lt;br/&gt;
java.io.IOException: No such process&lt;br/&gt;
	at jdk.attach/sun.tools.attach.VirtualMachineImpl.sendQuitTo(Native Method)&lt;br/&gt;
	at jdk.attach/sun.tools.attach.VirtualMachineImpl.&amp;lt;init&amp;gt;(VirtualMachineImpl.java:94)&lt;br/&gt;
	at jdk.attach/sun.tools.attach.AttachProviderImpl.attachVirtualMachine(AttachProviderImpl.java:58)&lt;br/&gt;
	at jdk.attach/com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:207)&lt;br/&gt;
	at jdk.jcmd/sun.tools.jcmd.JCmd.executeCommandForPid(JCmd.java:113)&lt;br/&gt;
	at jdk.jcmd/sun.tools.jcmd.JCmd.main(JCmd.java:97)&lt;br/&gt;
----------System.err:(13/845)----------&lt;br/&gt;
java.lang.RuntimeException: Unable to load native library.: expected true, was false&lt;br/&gt;
	at jdk.test.lib.Asserts.fail(Asserts.java:594)&lt;br/&gt;
	at jdk.test.lib.Asserts.assertTrue(Asserts.java:486)&lt;br/&gt;
	at TestLoadLibraryDeadlock.main(TestLoadLibraryDeadlock.java:229)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1570)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException: Unable to load native library.: expected true, was false&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: java.lang.RuntimeException: Unable to load native library.: expected true, was false&lt;br/&gt;
----------rerun:(38/7270)*----------&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
The following Graal specific bug appears to have the same failure mode:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8315867&quot; title=&quot;TestLoadLibraryDeadlock.java fails transiently on libgraal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8315867&quot;&gt;&lt;strike&gt;JDK-8315867&lt;/strike&gt;&lt;/a&gt; TestLoadLibraryDeadlock.java fails transiently on libgraal</description>
                <environment></environment>
        <key id="5112214">JDK-8317965</key>
            <summary>TestLoadLibraryDeadlock.java fails with &quot;Unable to load native library.: expected true, was false&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mchung">Mandy Chung</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>intermittent</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>tier5</label>
                            <label>ursqe-triaged</label>
                    </labels>
                <created>Wed, 11 Oct 2023 09:01:41 -0700</created>
                <updated>Sun, 4 Aug 2024 09:19:12 -0700</updated>
                            <resolved>Wed, 1 Nov 2023 15:21:55 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14661989" author="roboduke" created="Tue, 2 Apr 2024 01:30:48 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/434&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/434&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-02 08:26:16 +0000</comment>
                            <comment id="14661352" author="roboduke" created="Thu, 28 Mar 2024 13:07:58 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/423&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/423&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-28 20:03:04 +0000</comment>
                            <comment id="14661332" author="goetz" created="Thu, 28 Mar 2024 11:42:45 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.4-oracle. Includes &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8319265&quot; title=&quot;TestLoadLibraryDeadlock.java fails on windows-x64 &amp;quot;Unable to load b.jar&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8319265&quot;&gt;&lt;strike&gt;JDK-8319265&lt;/strike&gt;&lt;/a&gt;&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Two clean backports, marked clean.&lt;br/&gt;
Test passes. &lt;br/&gt;
SAP nightly testing passed.</comment>
                            <comment id="14648896" author="msheppar" created="Tue, 13 Feb 2024 12:22:22 -0800"  >JDK22 b33</comment>
                            <comment id="14623430" author="mchung" created="Thu, 2 Nov 2023 09:45:22 -0700"  >Backporting note: this issue has to be backported together with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8319265&quot; title=&quot;TestLoadLibraryDeadlock.java fails on windows-x64 &amp;quot;Unable to load b.jar&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8319265&quot;&gt;&lt;strike&gt;JDK-8319265&lt;/strike&gt;&lt;/a&gt; which fixes the test failure on windows.</comment>
                            <comment id="14623306" author="shade" created="Thu, 2 Nov 2023 02:27:48 -0700"  >I see that test was added by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8266310&quot; title=&quot;deadlock between System.loadLibrary and JNI FindClass loading another class &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8266310&quot;&gt;&lt;strike&gt;JDK-8266310&lt;/strike&gt;&lt;/a&gt;, so I am marking up this issue with more affected versions.</comment>
                            <comment id="14623117" author="dukebot" created="Wed, 1 Nov 2023 15:21:54 -0700"  >Changeset: 5207443b&lt;br/&gt;
Author:    Mandy Chung &amp;lt;&lt;a href=&apos;mailto:mchung@openjdk.org&apos;&gt;mchung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-01 22:19:57 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/5207443b360cfe3ee9c53ece55da3464c13f6a9f&quot;&gt;https://git.openjdk.org/jdk/commit/5207443b360cfe3ee9c53ece55da3464c13f6a9f&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14623063" author="roboduke" created="Wed, 1 Nov 2023 10:59:47 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16459&quot;&gt;https://git.openjdk.org/jdk/pull/16459&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-01 17:54:00 +0000</comment>
                            <comment id="14623057" author="mchung" created="Wed, 1 Nov 2023 10:37:24 -0700"  >When running the command &amp;quot;jcmd 3086039 Thread.print&amp;quot;, the process 3086039 does not exist.   The process has already terminated.&lt;br/&gt;
&lt;br/&gt;
The test runs LoadLibraryDeadlock and wait for 5 seconds and then grab the output.   Then run jcmd to dump the thread stacks in case it&amp;#39;s deadlock.   The test swallows the exceptions.   I would suggest to simplify the test to use the ProcessTools test library to launch LoadLibraryDeadlock and propagate if any exception is thrown.    That will capture more information for diagnosing the problem when the test fails the next time.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5125028">JDK-8328854</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5126087">JDK-8329590</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5048432">JDK-8266310</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5113736">JDK-8319265</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5109848">JDK-8315867</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33g63:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="252"><![CDATA[java.lang:class_loading]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>