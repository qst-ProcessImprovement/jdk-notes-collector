<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:22:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8222884] ConcurrentClassDescLookup.java times out intermittently</title>
                <link>https://bugs.openjdk.org/browse/JDK-8222884</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test times out intermittently in the JDK13 CI:&lt;br/&gt;
&lt;br/&gt;
java/io/Serializable/concurrentClassDescLookup/ConcurrentClassDescLookup.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(8/262)----------&lt;br/&gt;
command: main ConcurrentClassDescLookup&lt;br/&gt;
reason: Assumed action based on file name: run main ConcurrentClassDescLookup &lt;br/&gt;
Mode: agentvm&lt;br/&gt;
Agent id: 10&lt;br/&gt;
Timeout refired 480 times&lt;br/&gt;
Timeout information:&lt;br/&gt;
--- Timeout information end.&lt;br/&gt;
elapsed time (seconds): 512.412&lt;br/&gt;
----------configuration:(9/771)*----------&lt;br/&gt;
Boot Layer&lt;br/&gt;
&amp;nbsp;&amp;nbsp;class path: C:\\ade\\mesos\\work_dir\\jib-master\\install\\java\\re\\jtreg\\4.2\\promoted\\all\\b14\\bundles\\jtreg_bin-4.2.zip\\jtreg\\lib\\javatest.jar &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;C:\\ade\\mesos\\work_dir\\jib-master\\install\\java\\re\\jtreg\\4.2\\promoted\\all\\b14\\bundles\\jtreg_bin-4.2.zip\\jtreg\\lib\\jtreg.jar &lt;br/&gt;
&amp;nbsp;&amp;nbsp;patch:      java.base T:\\testoutput\\test-support\\jtreg_open_test_jdk_tier2_part2\\patches\\java.base&lt;br/&gt;
&lt;br/&gt;
Test Layer&lt;br/&gt;
&amp;nbsp;&amp;nbsp;class path: T:\\testoutput\\test-support\\jtreg_open_test_jdk_tier2_part2\\classes\\2\\java\\io\\Serializable\\concurrentClassDescLookup\\ConcurrentClassDescLookup.d&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jdk13-jdk.880\\src.full\\open\\test\\jdk\\java\\io\\Serializable\\concurrentClassDescLookup&lt;br/&gt;
&lt;br/&gt;
----------rerun:(32/4277)*----------</description>
                <environment></environment>
        <key id="4988586">JDK-8222884</key>
            <summary>ConcurrentClassDescLookup.java times out intermittently</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jpai">Jaikiran Pai</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>hgupdate-sync</label>
                            <label>intermittent</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>teststabilization</label>
                            <label>tier2</label>
                    </labels>
                <created>Tue, 23 Apr 2019 07:51:37 -0700</created>
                <updated>Thu, 7 Nov 2024 20:37:13 -0800</updated>
                            <resolved>Tue, 11 Jun 2024 22:38:05 -0700</resolved>
                                    <version>13</version>
                    <version>17</version>
                    <version>18</version>
                    <version>19</version>
                    <version>23</version>
                                    <fixVersion>24</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14684067" author="roboduke" created="Mon, 24 Jun 2024 02:50:59 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19853&quot;&gt;https://git.openjdk.org/jdk/pull/19853&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-24 09:40:14 +0000</comment>
                            <comment id="14684009" author="JIRAUSER20917" created="Mon, 24 Jun 2024 01:31:38 -0700"  >Fix request [11u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 11.0.25-oracle.&lt;br/&gt;
No risk, only tests change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test pass. SAP nightly testing passed.</comment>
                            <comment id="14684007" author="JIRAUSER20917" created="Mon, 24 Jun 2024 01:31:32 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.13-oracle.&lt;br/&gt;
No risk, only tests change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test pass. SAP nightly testing passed.</comment>
                            <comment id="14684005" author="JIRAUSER20917" created="Mon, 24 Jun 2024 01:31:26 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.5-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test pass.  SAP nightly testing passed.&lt;br/&gt;
</comment>
                            <comment id="14683572" author="roboduke" created="Fri, 21 Jun 2024 01:15:19 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2801&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2801&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-21 08:08:48 +0000</comment>
                            <comment id="14683571" author="roboduke" created="Fri, 21 Jun 2024 01:15:12 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2622&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2622&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-21 08:08:40 +0000</comment>
                            <comment id="14683569" author="roboduke" created="Fri, 21 Jun 2024 01:12:54 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/773&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/773&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-21 08:08:32 +0000</comment>
                            <comment id="14680752" author="dukebot" created="Tue, 11 Jun 2024 22:38:04 -0700"  >Changeset: bd046d9b&lt;br/&gt;
Author:    Jaikiran Pai &amp;lt;&lt;a href=&apos;mailto:jpai@openjdk.org&apos;&gt;jpai@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-06-12 05:36:30 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/bd046d9b9e79e4eea89c72af358961ef6e98e660&quot;&gt;https://git.openjdk.org/jdk/commit/bd046d9b9e79e4eea89c72af358961ef6e98e660&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14680561" author="roboduke" created="Tue, 11 Jun 2024 06:15:44 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19659&quot;&gt;https://git.openjdk.org/jdk/pull/19659&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-11 13:09:21 +0000</comment>
                            <comment id="14680441" author="jpai" created="Tue, 11 Jun 2024 01:39:42 -0700"  >That&amp;#39;s good to hear. Since the patch has been in use, in your CI, for more than two months without causing this test to fail, I&amp;#39;ll go ahead and officially propose this as a fix in mainline.</comment>
                            <comment id="14680411" author="mbaesken" created="Tue, 11 Jun 2024 00:50:30 -0700"  >&amp;gt; Hello Matthias [~mbaesken], did you get a chance to test this proposed patch against your CI? Did it help?&lt;br/&gt;
&lt;br/&gt;
Yeah I had that patch in our CI queue f&amp;#xFC;r jdk23/24 since 8th April.  No errors were observed since then for the test in jdk23/24. </comment>
                            <comment id="14680365" author="jpai" created="Mon, 10 Jun 2024 23:04:51 -0700"  >Hello Matthias [~mbaesken], did you get a chance to test this proposed patch against your CI? Did it help?</comment>
                            <comment id="14663513" author="jpai" created="Mon, 8 Apr 2024 00:53:13 -0700"  >Hello Matthias,&lt;br/&gt;
&lt;br/&gt;
&amp;gt; But I think we need a couple of weeks, just a few days will not be sufficient because the issue does not occur that often. &lt;br/&gt;
&lt;br/&gt;
That sounds fine to me.</comment>
                            <comment id="14663505" author="mbaesken" created="Mon, 8 Apr 2024 00:21:15 -0700"  >&amp;gt; Matthias [~mbaesken], would it be possible to apply the attached patch in your CI runs and run it for some days to see if that test now passes consistently? If it does, then I can propose it officially as a PR against mainline.&lt;br/&gt;
&lt;br/&gt;
Yes we can test it in our test infrastructure. But I think we need a couple of weeks, just a few days will not be sufficient because the issue does not occur that often.</comment>
                            <comment id="14663427" author="jpai" created="Sat, 6 Apr 2024 09:28:15 -0700"  >I haven&amp;#39;t been able to reproduce this in our CI. I took a look at the test code and it appears that this could be a test issue.&lt;br/&gt;
&lt;br/&gt;
The test main thread launches 50 &amp;quot;successful lookup&amp;quot; tasks and 50 &amp;quot;failed lookup&amp;quot; tasks. Each task is a Thread. The test passes a Object instance shared by 50 of these tasks and each task when it starts execution, in its run() method does a &amp;quot;wait()&amp;quot; on that Object instance. The test main thread then after launching 50 tasks each sleeps for a second (to let the 50 Threads start execution and arrive at the Object.wait()) and then does a &amp;quot;notifyAll()&amp;quot; on that object instance. In theory and likely in practice too, it&amp;#39;s possible that (especially) for the last batch of 50 tasks (the &amp;quot;failing lookup&amp;quot; tasks), the &amp;quot;notifyAll()&amp;quot; might end up getting invoked before one or more task Thread(s) have actually done a &amp;quot;wait()&amp;quot;. That can then mean that one or more task Thread(s) will keep wait()ing indefinitely with no one notify()ing the Object instance to proceed with the task execution.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve a potential fix to the test (patch attached &amp;quot;8222884.patch&amp;quot;) which I&amp;#39;ve tested in our CI with several test repeat runs and the test continues to pass. The test uses a CountDownLatch instead of a Object.wait()/notifyAll() to implement the barrier. But given that I haven&amp;#39;t reproduced the original issue, it&amp;#39;s unclear if this will solve the test timeout that you are seeing in your CI. Matthias [~mbaesken], would it be possible to apply the attached patch in your CI runs and run it for some days to see if that test now passes consistently? If it does, then I can propose it officially as a PR against mainline.&lt;br/&gt;
</comment>
                            <comment id="14663191" author="mbaesken" created="Fri, 5 Apr 2024 04:51:58 -0700"  >We see the timeouts sometimes in our CI; most (all?) cases on Windows. We use fastdebug binaries, maybe this makes the timeouts more likely compared to product ?&lt;br/&gt;
7 occurrences were seen in March 2024 (jdk17 and 23).</comment>
                            <comment id="14630369" author="goetz" created="Thu, 30 Nov 2023 08:17:28 -0800"  >We still see this regularly on several different windows machines:&lt;br/&gt;
2023-11-30 jdk17u&lt;br/&gt;
2023-11-21 jdk17u&lt;br/&gt;
2023-11-03 jdk17u&lt;br/&gt;
2023-10-28 jdk17u&lt;br/&gt;
2023-10-18 jdk17u 2x&lt;br/&gt;
2023-10-17 jdk21u&lt;br/&gt;
2023-10-14 jdk11u&lt;br/&gt;
...&lt;br/&gt;
</comment>
                            <comment id="14563507" author="rriggs" created="Tue, 28 Feb 2023 09:27:24 -0800"  >Not seen in &amp;gt; 12 months.</comment>
                            <comment id="14465587" author="mbaesken" created="Tue, 21 Dec 2021 04:04:19 -0800"  >We see these failures too,  in OpenJDK 11, 17, 18 and 19.&lt;br/&gt;
It seems they (almost?) always occur on Windows  (at least all 12 occurences seen in our test infra  from October 2021- December 2021 were on Windows).&lt;br/&gt;
The test also output :   &amp;quot;Could not find process id for the process that timed out.&amp;quot;&lt;br/&gt;
&lt;br/&gt;
----------System.out:(0/0)----------&lt;br/&gt;
----------System.err:(0/0)----------&lt;br/&gt;
result: Passed. Compilation successful&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(7/278)----------&lt;br/&gt;
command: main ConcurrentClassDescLookup&lt;br/&gt;
reason: Assumed action based on file name: run main ConcurrentClassDescLookup &lt;br/&gt;
Mode: othervm&lt;br/&gt;
Timeout information:&lt;br/&gt;
Could not find process id for the process that timed out.&lt;br/&gt;
Skipping timeout handling.&lt;br/&gt;
elapsed time (seconds): 723.483&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(1/27)----------&lt;br/&gt;
Timeout refired 720 times&lt;br/&gt;
----------System.err:(0/0)----------&lt;br/&gt;
&lt;br/&gt;
So we have no stacktrace of the test after failure/timeout.&lt;br/&gt;
It might be beneficial to add a bit more output to the test  to see what is going on ?&lt;br/&gt;
</comment>
                            <comment id="14462277" author="rriggs" created="Fri, 3 Dec 2021 09:30:26 -0800"  >Not seen since 2019.</comment>
                            <comment id="14259213" author="dcubed" created="Tue, 23 Apr 2019 07:55:27 -0700"  >This test generally passes in &amp;lt; 15 seconds according to the CI history.&lt;br/&gt;
For the failures that I&amp;#39;ve spotted, the test is timing out after 8 minutes.&lt;br/&gt;
Makes me wonder if we have a rare deadlock...&lt;br/&gt;
&lt;br/&gt;
Took a quick look at the test suite&amp;#39;s stdout and didn&amp;#39;t see anything&lt;br/&gt;
amiss. All three of the failures I&amp;#39;ve spotted in the CI are for Win*.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5131825">JDK-8334243</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131829">JDK-8334246</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131876">JDK-8334283</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132605">JDK-8334924</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132933">JDK-8335230</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5133148">JDK-8335414</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5133616">JDK-8335828</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132593">JDK-8334910</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="108878" name="8222884.patch" size="5318" author="jpai" created="Sat, 6 Apr 2024 09:28:50 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2imsz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17317"><![CDATA[b02]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="186"><![CDATA[java.io:serialization]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>