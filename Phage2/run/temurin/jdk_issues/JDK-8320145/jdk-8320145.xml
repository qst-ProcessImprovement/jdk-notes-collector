<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:09:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8320145] Compiler should accept final variable in Record Pattern</title>
                <link>https://bugs.openjdk.org/browse/JDK-8320145</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
javac 22-ea, javac 21.0.1&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
This does not compile:&lt;br/&gt;
&lt;br/&gt;
{code:java}&lt;br/&gt;
public class WithFinal {&lt;br/&gt;
	record ARecord(String aComponent) {}&lt;br/&gt;
&lt;br/&gt;
	public String match(Object o) {&lt;br/&gt;
		return switch(o) {&lt;br/&gt;
			case ARecord(final String s) -&amp;gt; s;&lt;br/&gt;
			default -&amp;gt; &amp;quot;No match&amp;quot;;&lt;br/&gt;
		};&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
{code}&lt;br/&gt;
&lt;br/&gt;
javac outputs the following errors:&lt;br/&gt;
&lt;br/&gt;
{noformat}&lt;br/&gt;
./WithFinal.java:6: error: illegal start of expression&lt;br/&gt;
			case ARecord(final String s) -&amp;gt; s;&lt;br/&gt;
			             ^&lt;br/&gt;
./WithFinal.java:6: error: &amp;#39;;&amp;#39; expected&lt;br/&gt;
			case ARecord(final String s) -&amp;gt; s;&lt;br/&gt;
			                           ^&lt;br/&gt;
./WithFinal.java:6: error: not a statement&lt;br/&gt;
			case ARecord(final String s) -&amp;gt; s;&lt;br/&gt;
			                                ^&lt;br/&gt;
3 errors&lt;br/&gt;
{noformat}&lt;br/&gt;
&lt;br/&gt;
According to chapter 14.30.1. of the JLS, {{final}} is allowed as a _VariableModifier_. Without {{final}}, mutating the pattern variable is valid:&lt;br/&gt;
&lt;br/&gt;
{code:java}&lt;br/&gt;
public class NotEffectivelyFinal {&lt;br/&gt;
	record ARecord(String aComponent) {}&lt;br/&gt;
&lt;br/&gt;
	public String match(Object o) {&lt;br/&gt;
		return switch(o) {&lt;br/&gt;
			case ARecord(String s) -&amp;gt; {&lt;br/&gt;
				s = &amp;quot;&amp;quot;;&lt;br/&gt;
				yield s;&lt;br/&gt;
			}&lt;br/&gt;
			default -&amp;gt; &amp;quot;No match&amp;quot;;&lt;br/&gt;
		};&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
{code}&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5114513">JDK-8320145</key>
            <summary>Compiler should accept final variable in Record Pattern</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abimpoudis">Angelos Bimpoudis</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>dcsad</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>reproducer-yes</label>
                            <label>sup-nrt</label>
                            <label>webbug</label>
                    </labels>
                <created>Fri, 10 Nov 2023 04:47:28 -0800</created>
                <updated>Tue, 9 Jan 2024 08:35:09 -0800</updated>
                            <resolved>Thu, 30 Nov 2023 23:15:58 -0800</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14637387" author="roboduke" created="Thu, 4 Jan 2024 02:41:25 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/125&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/125&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-04 10:18:57 +0000</comment>
                            <comment id="14637385" author="roboduke" created="Thu, 4 Jan 2024 02:38:10 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix the new language feature in JDK 21. The patch extends the space of compilable programs. Applies cleanly. Tests pass.</comment>
                            <comment id="14630515" author="dukebot" created="Thu, 30 Nov 2023 23:15:57 -0800"  >Changeset: 4ba94ef6&lt;br/&gt;
Author:    Aggelos Biboudis &amp;lt;&lt;a href=&apos;mailto:abimpoudis@openjdk.org&apos;&gt;abimpoudis@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-12-01 07:13:39 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/4ba94ef69ef2ee576c50bb6003a795746dcdf30d&quot;&gt;https://git.openjdk.org/jdk/commit/4ba94ef69ef2ee576c50bb6003a795746dcdf30d&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14630265" author="roboduke" created="Thu, 30 Nov 2023 03:11:07 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16899&quot;&gt;https://git.openjdk.org/jdk/pull/16899&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-30 11:03:09 +0000</comment>
                            <comment id="14625924" author="adev" created="Mon, 13 Nov 2023 22:11:17 -0800"  >PS C:\test&amp;gt; C:\jdk\jdk-21.0.1\bin\javac .\WithFinal.java&lt;br/&gt;
.\WithFinal.java:6: error: illegal start of expression&lt;br/&gt;
case ARecord(final String s) -&amp;gt; s;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;^&lt;br/&gt;
.\WithFinal.java:6: error: &amp;#39;;&amp;#39; expected&lt;br/&gt;
case ARecord(final String s) -&amp;gt; s;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;^&lt;br/&gt;
.\WithFinal.java:6: error: not a statement&lt;br/&gt;
case ARecord(final String s) -&amp;gt; s;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5118291">JDK-8323176</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118322">JDK-8323205</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="107229" name="WithFinal.java" size="187" author="adev" created="Tue, 14 Nov 2023 21:23:11 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33ty3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17419"><![CDATA[b27]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="212"><![CDATA[javac]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>