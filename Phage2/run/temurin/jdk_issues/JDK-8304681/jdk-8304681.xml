<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 17:52:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8304681] compiler/sharedstubs/SharedStubToInterpTest.java fails after JDK-8304387</title>
                <link>https://bugs.openjdk.org/browse/JDK-8304681</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8304387&quot; title=&quot;Fix positions of shared static stubs / trampolines&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8304387&quot;&gt;&lt;strike&gt;JDK-8304387&lt;/strike&gt;&lt;/a&gt; moved the positions of static stubs which lets `compiler/sharedstubs/SharedStubToInterpTest.java` fail in tier2 on different architectures as the test still expects the old layout. The test should be fixed accordingly.&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a log file snippet:&lt;br/&gt;
&lt;br/&gt;
----------System.err:(12/767)----------&lt;br/&gt;
java.lang.RuntimeException: Found {static_stub} before Deopt Handler Code&lt;br/&gt;
	at compiler.sharedstubs.SharedStubToInterpTest.checkOutput(SharedStubToInterpTest.java:110)&lt;br/&gt;
	at compiler.sharedstubs.SharedStubToInterpTest.runTest(SharedStubToInterpTest.java:70)&lt;br/&gt;
	at compiler.sharedstubs.SharedStubToInterpTest.main(SharedStubToInterpTest.java:80)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
result: Failed. Execution failed: `main&amp;#39; threw exception: java.lang.RuntimeException: Found {static_stub} before Deopt Handler Code</description>
                <environment></environment>
        <key id="5096832">JDK-8304681</key>
            <summary>compiler/sharedstubs/SharedStubToInterpTest.java fails after JDK-8304387</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xlinzheng">Xiaolin Zheng</assignee>
                                    <reporter username="chagedorn">Christian Hagedorn</reporter>
                        <labels>
                            <label>noreg-self</label>
                            <label>oracle-triage-21</label>
                            <label>problemlist</label>
                            <label>tier2</label>
                            <label>tier3</label>
                            <label>tier4</label>
                    </labels>
                <created>Tue, 21 Mar 2023 08:54:25 -0700</created>
                <updated>Mon, 3 Apr 2023 12:11:04 -0700</updated>
                            <resolved>Wed, 29 Mar 2023 01:31:03 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                                                            <comments>
                            <comment id="14570274" author="dukebot" created="Wed, 29 Mar 2023 01:31:02 -0700"  >Changeset: 09852884&lt;br/&gt;
Author:    Xiaolin Zheng &amp;lt;&lt;a href=&apos;mailto:xlinzheng@openjdk.org&apos;&gt;xlinzheng@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Aleksey Shipilev &amp;lt;&lt;a href=&apos;mailto:shade@openjdk.org&apos;&gt;shade@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-03-29 08:29:03 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/09852884cc4f55b2c95e2dbe28cf5c7ad9095684&quot;&gt;https://git.openjdk.org/jdk/commit/09852884cc4f55b2c95e2dbe28cf5c7ad9095684&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14569611" author="roboduke" created="Mon, 27 Mar 2023 05:00:19 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13135&quot;&gt;https://git.openjdk.org/jdk/pull/13135&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-22 05:14:21 +0000</comment>
                            <comment id="14569610" author="JIRAUSER19809" created="Mon, 27 Mar 2023 04:53:08 -0700"  >Thanks a lot for the response, [~eastigeevich]!</comment>
                            <comment id="14569602" author="eastigeevich" created="Mon, 27 Mar 2023 04:16:54 -0700"  >Thanks [~xlinzheng] for taking care of it.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; I was wondering if the comment &amp;quot;Static stubs must be created at the end of the Stub section.&amp;quot; in &amp;quot;SharedStubToInterpTest.java&amp;quot; [1] is a design for which purpose?&lt;br/&gt;
&lt;br/&gt;
There was no specific purpose. &lt;br/&gt;
&lt;br/&gt;
&amp;gt; I think we can relax the limitation. What do you think? &lt;br/&gt;
&lt;br/&gt;
Yes, we can relax. I don&amp;#39;t have any objections.</comment>
                            <comment id="14568720" author="chagedorn" created="Wed, 22 Mar 2023 00:54:38 -0700"  >Thanks [~xlinzheng] for taking care of it!</comment>
                            <comment id="14568700" author="JIRAUSER19809" created="Tue, 21 Mar 2023 22:18:45 -0700"  >A draft PR [1] to fix this test was filed. After a positive confirmation from Evgeny, I would mark that PR as RFR.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;https://github.com/openjdk/jdk/pull/13135&quot;&gt;https://github.com/openjdk/jdk/pull/13135&lt;/a&gt;</comment>
                            <comment id="14568694" author="JIRAUSER19809" created="Tue, 21 Mar 2023 20:48:31 -0700"  >I would like to ask this feature&amp;#39;s author [~eastigeevich] one minor question:&lt;br/&gt;
&lt;br/&gt;
I was wondering if the comment &amp;quot;Static stubs must be created at the end of the Stub section.&amp;quot; in &amp;quot;SharedStubToInterpTest.java&amp;quot; [1] is a design for which purpose? For I recently moved shared static stubs and shared runtime trampolines back between the &amp;quot;[Stub Code]&amp;quot; and &amp;quot;[Exception Handler]&amp;quot; in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8304387&quot; title=&quot;Fix positions of shared static stubs / trampolines&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8304387&quot;&gt;&lt;strike&gt;JDK-8304387&lt;/strike&gt;&lt;/a&gt; and I think we can relax the limitation. What do you think? Thank you very much in advance!&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;https://github.com/openjdk/jdk/blob/0deb648985b018653ccdaf193dc13b3cf21c088a/test/hotspot/jtreg/compiler/sharedstubs/SharedStubToInterpTest.java#L109&quot;&gt;https://github.com/openjdk/jdk/blob/0deb648985b018653ccdaf193dc13b3cf21c088a/test/hotspot/jtreg/compiler/sharedstubs/SharedStubToInterpTest.java#L109&lt;/a&gt;</comment>
                            <comment id="14568692" author="JIRAUSER19809" created="Tue, 21 Mar 2023 19:23:17 -0700"  >Ah! Very thankful for taking time to cover this issue, [~chagedorn] and [~dcubed]. My apologies that I was focusing on hs_errs and failed to observe the Exception failure. I am working on this asap. And also thanks for the kind reminder! :-)</comment>
                            <comment id="14568604" author="dcubed" created="Tue, 21 Mar 2023 10:03:49 -0700"  >The ProblemListing is in jdk-21+15-1222.</comment>
                            <comment id="14568587" author="chagedorn" created="Tue, 21 Mar 2023 09:08:37 -0700"  >The test has been problemlisted for now as it created noise in the CI (failures in tier2). Don&amp;#39;t forget to unproblemlist the test again once it is fixed :-)</comment>
                            <comment id="14568586" author="chagedorn" created="Tue, 21 Mar 2023 09:07:29 -0700"  >ILW = Test failure in tier2, single test, no workaround = MLH = P4&lt;br/&gt;
&lt;br/&gt;
[~xlinzheng] can you have a look at it?</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5096481">JDK-8304387</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5096830">JDK-8304680</subtask>
                                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30uab:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17312"><![CDATA[b16]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>