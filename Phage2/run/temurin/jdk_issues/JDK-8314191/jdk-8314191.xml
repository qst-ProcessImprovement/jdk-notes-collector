<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:08:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8314191] C2 compilation fails with &quot;bad AD file&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8314191</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>java -Xcomp -XX:CompileCommand=compileonly,Test4::test*  -XX:-TieredCompilation Test4.java&lt;br/&gt;
CompileCommand: compileonly Test4.test* bool compileonly = true&lt;br/&gt;
&lt;br/&gt;
o137  CountedLoopEnd  === o144 o155 o154  [[ o138 o140 7 ]] [gt] P=0,900000, C=-1,000000&lt;br/&gt;
&lt;br/&gt;
--N: o137  CountedLoopEnd  === o144 o155 o154  [[ o138 o140 7 ]] [gt] P=0,900000, C=-1,000000&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o155  Bool  === _ o154  [[ o137 ]] [gt]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;CMPOP  0  CMPOP&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;CMPOPU  0  CMPOPU&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;CMPOPUCF  0  CMPOPUCF&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;CMPOP_VCMPPD  0  CMPOP_VCMPPD&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o154  CmpU  === _ o85 o24  [[ o155 o137 ]] &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;RFLAGSREGU  100  compU_rReg&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o85  Phi  === o144 o20 o97  [[ o97 o154 ]]  #int:min+1..0&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RREGI  0  RREGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RAX_REGI  0  RAX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RBX_REGI  0  RBX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RCX_REGI  0  RCX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDX_REGI  0  RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDI_REGI  0  RDI_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RAX_RDX_REGI  0  NO_RAX_RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RBP_R13_REGI  0  NO_RBP_R13_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;STACKSLOTI  100  storeSSI&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o24  LoadI  === _ o7 o23  [[ o26 o154 ]]  @java/lang/Class (java/io/Serializable,java/lang/constant/Constable,java/lang/reflect/AnnotatedElement,java/lang/invoke/TypeDescriptor,java/lang/reflect/GenericDeclaration,java/lang/reflect/Type,java/lang/invoke/TypeDescriptor$OfField):exact+112 *, name=limit, idx=4; #int&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RREGI  0  RREGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RAX_REGI  0  RAX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RBX_REGI  0  RBX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RCX_REGI  0  RCX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDX_REGI  0  RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDI_REGI  0  RDI_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RAX_RDX_REGI  0  NO_RAX_RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RBP_R13_REGI  0  NO_RBP_R13_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;STACKSLOTI  100  storeSSI&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S24783/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/d520ea84-8540-4e3f-bebb-7467656d99a8/runs/a75cd7f7-52f4-4fb9-b459-e34df625d6c3/workspace/open/src/hotspot/share/opto/matcher.cpp:1723), pid=476875, tid=476888&lt;br/&gt;
#  assert(false) failed: bad AD file&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (21.0+22) (fastdebug build 21-ea+22-LTS-1875)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 21-ea+22-LTS-1875, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x12ede38]  Matcher::Label_Root(Node const*, State*, Node*, Node*&amp;amp;)+0x508&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:   1865   82    b        Test4::test (30 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007fd3b5218000,0x00007fd3b5319000],  sp=0x00007fd3b5313bc0,  free space=1006k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x12ede38]  Matcher::Label_Root(Node const*, State*, Node*, Node*&amp;amp;)+0x508  (matcher.cpp:1723)&lt;br/&gt;
V  [libjvm.so+0x12ee447]  Matcher::match_tree(Node const*)+0x187&lt;br/&gt;
V  [libjvm.so+0x12f5a4d]  Matcher::xform(Node*, int)+0xc7d&lt;br/&gt;
V  [libjvm.so+0x12fb039]  Matcher::match()+0x1649&lt;br/&gt;
V  [libjvm.so+0x9b79ca]  Compile::Code_Gen()+0x9a&lt;br/&gt;
V  [libjvm.so+0x9bd7e9]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x1b89&lt;br/&gt;
V  [libjvm.so+0x814aa4]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x3c4&lt;br/&gt;
V  [libjvm.so+0x9c94f0]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x9e0&lt;br/&gt;
V  [libjvm.so+0x9ca398]  CompileBroker::compiler_thread_loop()+0x628&lt;br/&gt;
V  [libjvm.so+0xe6594e]  JavaThread::thread_main_inner()+0xee&lt;br/&gt;
V  [libjvm.so+0x17361e8]  Thread::call_run()+0xb8&lt;br/&gt;
V  [libjvm.so+0x14371da]  thread_native_entry(Thread*)+0x11a&lt;br/&gt;
&lt;br/&gt;
Running with -XX:+TraceLoopOpts also triggers this:&lt;br/&gt;
&lt;br/&gt;
Counted          Loop: N144/N138  counted [0,int),-2147483648 (-1 iters) &lt;br/&gt;
Loop: N0/N0  has_sfpt&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Loop: N143/N142  limit_check profile_predicated predicated&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Loop: N144/N138  limit_check profile_predicated predicated counted [0,int),-2147483648 (-1 iters)  has_sfpt strip_mined&lt;br/&gt;
Loop: N0/N0  has_sfpt&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Loop: N143/N142  limit_check profile_predicated predicated sfpts={ 145 }&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Loop: N144/N138  limit_check profile_predicated predicated counted [int,int),#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S24783/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/d520ea84-8540-4e3f-bebb-7467656d99a8/runs/a75cd7f7-52f4-4fb9-b459-e34df625d6c3/workspace/open/src/hotspot/share/opto/type.hpp:596), pid=479842, tid=479855&lt;br/&gt;
#  Error: assert(is_con()) failed&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (21.0+22) (fastdebug build 21-ea+22-LTS-1875)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 21-ea+22-LTS-1875, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x17585f3]  TypeInteger::get_con_as_long(BasicType) const+0xb3&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:   1725   82    b        Test4::test (30 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007f76b7638000,0x00007f76b7739000],  sp=0x00007f76b7732fb0,  free space=1003k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x17585f3]  TypeInteger::get_con_as_long(BasicType) const+0xb3  (type.hpp:596)&lt;br/&gt;
V  [libjvm.so+0x12236cc]  IdealLoopTree::dump_head()+0x51c&lt;br/&gt;
V  [libjvm.so+0x122396b]  IdealLoopTree::dump()+0x5b&lt;br/&gt;
V  [libjvm.so+0x123c8cd]  PhaseIdealLoop::build_and_optimize()+0xfdd&lt;br/&gt;
V  [libjvm.so+0x9be9d0]  PhaseIdealLoop::optimize(PhaseIterGVN&amp;amp;, LoopOptsMode)+0x250&lt;br/&gt;
V  [libjvm.so+0x9bb02e]  Compile::Optimize()+0x10fe&lt;br/&gt;
V  [libjvm.so+0x9bd705]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x1aa5&lt;br/&gt;
V  [libjvm.so+0x814aa4]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x3c4&lt;br/&gt;
V  [libjvm.so+0x9c94f0]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x9e0&lt;br/&gt;
V  [libjvm.so+0x9ca398]  CompileBroker::compiler_thread_loop()+0x628&lt;br/&gt;
V  [libjvm.so+0xe6594e]  JavaThread::thread_main_inner()+0xee&lt;br/&gt;
V  [libjvm.so+0x17361e8]  Thread::call_run()+0xb8&lt;br/&gt;
V  [libjvm.so+0x14371da]  thread_native_entry(Thread*)+0x11a</description>
                <environment></environment>
        <key id="5107929">JDK-8314191</key>
            <summary>C2 compilation fails with &quot;bad AD file&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="qamai">Quan Anh Mai</assignee>
                                    <reporter username="thartmann">Tobias Hartmann</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>jdk21u-fix-SQE-ok-next</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oracle-triage-17</label>
                            <label>oracle-triage-22</label>
                    </labels>
                <created>Sun, 13 Aug 2023 22:32:31 -0700</created>
                <updated>Tue, 30 Jan 2024 01:08:40 -0800</updated>
                            <resolved>Tue, 5 Sep 2023 09:18:04 -0700</resolved>
                                    <version>18</version>
                    <version>19</version>
                    <version>20</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14613229" author="shade" created="Fri, 22 Sep 2023 08:38:40 -0700"  >Waiting for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8316719&quot; title=&quot;C2 compilation still fails with &amp;quot;bad AD file&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8316719&quot;&gt;&lt;strike&gt;JDK-8316719&lt;/strike&gt;&lt;/a&gt; to be resolved before continuing with backports.</comment>
                            <comment id="14612970" author="roboduke" created="Thu, 21 Sep 2023 11:41:23 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes a recent C2 regression.</comment>
                            <comment id="14612920" author="roboduke" created="Thu, 21 Sep 2023 08:32:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/190&quot;&gt;https://git.openjdk.org/jdk21u/pull/190&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-21 15:20:32 +0000</comment>
                            <comment id="14608917" author="dukebot" created="Tue, 5 Sep 2023 09:18:03 -0700"  >Changeset: 969fcdb0&lt;br/&gt;
Author:    Quan Anh Mai &amp;lt;&lt;a href=&apos;mailto:qamai@openjdk.org&apos;&gt;qamai@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-09-05 16:15:54 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/969fcdb0de962b6eda7b362af010cb138e45afcf&quot;&gt;https://git.openjdk.org/jdk/commit/969fcdb0de962b6eda7b362af010cb138e45afcf&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14608486" author="roboduke" created="Sat, 2 Sep 2023 04:38:57 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15551&quot;&gt;https://git.openjdk.org/jdk/pull/15551&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-02 11:34:17 +0000</comment>
                            <comment id="14608277" author="thartmann" created="Fri, 1 Sep 2023 01:24:09 -0700"  >[~qamai] What JDK version and platform are you using? I just checked and I can reproduce it with latest JDK 22 (fastdebug build 22-ea+14-975) on Linux x64:&lt;br/&gt;
&lt;br/&gt;
java -Xcomp -XX:CompileCommand=compileonly,Test4::test* -XX:-TieredCompilation Test4.java</comment>
                            <comment id="14607793" author="JIRAUSER19817" created="Wed, 30 Aug 2023 10:27:34 -0700"  >[~thartmann] I cannot reproduce this issue with and without `-XX:+TraceLoopOpts`, but my educated guess is that the loop exit test `x + MIN_INT &amp;gt;= limit + (MIN_INT + 1)` is transformed into `x u&amp;gt; limit`, which violates the assumption regarding counted loop shape. As a result, my proposed fix is to not do the transformation if either side is a loop increment variable. Can you verify if the issue is still present and if this patch can fix it? Thanks a lot.&lt;br/&gt;
&lt;br/&gt;
diff --git a/src/hotspot/share/opto/subnode.cpp b/src/hotspot/share/opto/subnode.cpp&lt;br/&gt;
index 1dcc8b045c2..c317759585a 100644&lt;br/&gt;
--- a/src/hotspot/share/opto/subnode.cpp&lt;br/&gt;
+++ b/src/hotspot/share/opto/subnode.cpp&lt;br/&gt;
@@ -1556,12 +1556,14 @@ Node *BoolNode::Ideal(PhaseGVN *phase, bool can_reshape) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;// and    &amp;quot;cmp (add X min_jint) c&amp;quot; into &amp;quot;cmpu X (c + min_jint)&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;if (cop == Op_CmpI &amp;amp;&amp;amp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmp1_op == Op_AddI &amp;amp;&amp;amp;&lt;br/&gt;
+      !is_cloop_increment(cmp1) &amp;amp;&amp;amp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;phase-&amp;gt;type(cmp1-&amp;gt;in(2)) == TypeInt::MIN) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (cmp2_op == Op_ConI) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node* ncmp2 = phase-&amp;gt;intcon(java_add(cmp2-&amp;gt;get_int(), min_jint));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node* ncmp = phase-&amp;gt;transform(new CmpUNode(cmp1-&amp;gt;in(1), ncmp2));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return new BoolNode(ncmp, _test._test);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} else if (cmp2_op == Op_AddI &amp;amp;&amp;amp;&lt;br/&gt;
+               !is_cloop_increment(cmp2) &amp;amp;&amp;amp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;phase-&amp;gt;type(cmp2-&amp;gt;in(2)) == TypeInt::MIN) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node* ncmp = phase-&amp;gt;transform(new CmpUNode(cmp1-&amp;gt;in(1), cmp2-&amp;gt;in(1)));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return new BoolNode(ncmp, _test._test);&lt;br/&gt;
@@ -1572,12 +1574,14 @@ Node *BoolNode::Ideal(PhaseGVN *phase, bool can_reshape) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;// and    &amp;quot;cmp (add X min_jlong) c&amp;quot; into &amp;quot;cmpu X (c + min_jlong)&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;if (cop == Op_CmpL &amp;amp;&amp;amp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmp1_op == Op_AddL &amp;amp;&amp;amp;&lt;br/&gt;
+      !is_cloop_increment(cmp1) &amp;amp;&amp;amp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;phase-&amp;gt;type(cmp1-&amp;gt;in(2)) == TypeLong::MIN) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (cmp2_op == Op_ConL) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node* ncmp2 = phase-&amp;gt;longcon(java_add(cmp2-&amp;gt;get_long(), min_jlong));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node* ncmp = phase-&amp;gt;transform(new CmpULNode(cmp1-&amp;gt;in(1), ncmp2));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return new BoolNode(ncmp, _test._test);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} else if (cmp2_op == Op_AddL &amp;amp;&amp;amp;&lt;br/&gt;
+               !is_cloop_increment(cmp2) &amp;amp;&amp;amp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;phase-&amp;gt;type(cmp2-&amp;gt;in(2)) == TypeLong::MIN) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node* ncmp = phase-&amp;gt;transform(new CmpULNode(cmp1-&amp;gt;in(1), cmp2-&amp;gt;in(1)));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return new BoolNode(ncmp, _test._test);</comment>
                            <comment id="14603631" author="thartmann" created="Mon, 14 Aug 2023 02:19:24 -0700"  >Thanks to [~chagedorn] for helping with analyzing this failure!</comment>
                            <comment id="14603628" author="thartmann" created="Mon, 14 Aug 2023 02:17:55 -0700"  >[~qamai], could you please have a look?</comment>
                            <comment id="14603627" author="thartmann" created="Mon, 14 Aug 2023 02:17:27 -0700"  >This is a regression from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8276162&quot; title=&quot;Optimise unsigned comparison pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8276162&quot;&gt;&lt;strike&gt;JDK-8276162&lt;/strike&gt;&lt;/a&gt; in JDK 18 b24. The new cmp optimization introduces an unexpected pattern, triggering an assert in IdealLoopTree::dump_head with -XX:+TraceLoopOpts. The corresponding ad file rules were later removed by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8302814&quot; title=&quot;Delete unused CountLoopEnd instruct with CmpX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8302814&quot;&gt;&lt;strike&gt;JDK-8302814&lt;/strike&gt;&lt;/a&gt; in JDK 21 b16, now leading to a failure during matching.&lt;br/&gt;
&lt;br/&gt;
ILW = Crash during C2 compilation, reproducible with single test, no workaround but disable compilation of affected method = HLM = P3</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5114380">JDK-8319772</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118497">JDK-8323365</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5061445">JDK-8276162</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5094546">JDK-8302814</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5110822">JDK-8316719</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118270">JDK-8323154</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="105095" name="Test4.java" size="280" author="thartmann" created="Sun, 13 Aug 2023 22:31:08 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17624"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="21802">18</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32pqz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17407"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>