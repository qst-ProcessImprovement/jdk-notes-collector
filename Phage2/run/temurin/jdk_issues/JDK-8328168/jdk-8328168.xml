<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:11:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8328168] Epsilon: Premature OOM when allocating object larger than uncommitted heap size</title>
                <link>https://bugs.openjdk.org/browse/JDK-8328168</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When an object size meets the following three conditions, the allocation will fail unexpectedly.&lt;br/&gt;
&lt;br/&gt;
1. `object_size` &amp;gt; `uncommitted_size`&lt;br/&gt;
2. `object_size` &amp;gt; `committed_but_unused_size`&lt;br/&gt;
3. `object_size` &amp;lt; `unused_size` (`unused_size` equals `uncommitted_size + committed_but_unused_size`)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
The corresponding test case is shown below.&lt;br/&gt;
&lt;br/&gt;
```&lt;br/&gt;
package gc.epsilon;&lt;br/&gt;
/**&lt;br/&gt;
&amp;nbsp;* @test TestEnoughUnusedSpace&lt;br/&gt;
&amp;nbsp;* @requires vm.gc.Epsilon&lt;br/&gt;
&amp;nbsp;* @summary Epsilon should allocates object successfully if it has enough space.&lt;br/&gt;
&amp;nbsp;* @run main/othervm -XX:InitialHeapSize=64M -Xmx128M -XX:+UnlockExperimentalVMOptions&lt;br/&gt;
&amp;nbsp;*                   -XX:+UseEpsilonGC gc.epsilon.TestEnoughUnusedSpace&lt;br/&gt;
&amp;nbsp;*/&lt;br/&gt;
&lt;br/&gt;
public class TestEnoughUnusedSpace {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;byte[] arr = new byte[90 * 1024 * 1024];&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(arr.length);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
```</description>
                <environment></environment>
        <key id="5124213">JDK-8328168</key>
            <summary>Epsilon: Premature OOM when allocating object larger than uncommitted heap size</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gli">Guoxiong Li</assignee>
                                    <reporter username="gli">Guoxiong Li</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>gc-epsilon</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                    </labels>
                <created>Thu, 14 Mar 2024 06:22:35 -0700</created>
                <updated>Wed, 23 Oct 2024 07:46:24 -0700</updated>
                            <resolved>Mon, 18 Mar 2024 04:29:45 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14668220" author="roboduke" created="Fri, 26 Apr 2024 02:28:39 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2430&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2430&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-26 09:17:44 +0000</comment>
                            <comment id="14668215" author="roboduke" created="Fri, 26 Apr 2024 02:23:23 -0700"  >[jdk17u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes Epsilon performance problem, corner-case with clear test. Applies cleanly. New regression test fails without the fix, passes with it. Other Epsilon tests pass as well. There is no bugtail after a month in mainline.</comment>
                            <comment id="14667562" author="roboduke" created="Tue, 23 Apr 2024 12:14:02 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/163&quot;&gt;https://git.openjdk.org/jdk22u/pull/163&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-23 19:10:14 +0000</comment>
                            <comment id="14667561" author="roboduke" created="Tue, 23 Apr 2024 12:11:55 -0700"  >[jdk22u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes Epsilon performance problem, corner-case with clear test. Applies cleanly. New regression test fails without the fix, passes with it. Other Epsilon tests pass as well. There is no bugtail after a month in mainline.</comment>
                            <comment id="14667553" author="shade" created="Tue, 23 Apr 2024 11:55:33 -0700"  >&amp;gt; Any reason why 22u ports are not occurring for such backports ? &lt;br/&gt;
&lt;br/&gt;
Because, for example, this backport depends on &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8328166&quot; title=&quot;Epsilon: &amp;#39;EpsilonHeap::allocate_work&amp;#39; misuses the parameter &amp;#39;size&amp;#39; as size in bytes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8328166&quot;&gt;&lt;strike&gt;JDK-8328166&lt;/strike&gt;&lt;/a&gt; being backported first. 21u approvals are much faster than for 22u, so 21u got both faster.</comment>
                            <comment id="14667347" author="coffeys" created="Tue, 23 Apr 2024 03:21:29 -0700"  >Any reason why 22u ports are not occurring for such backports ?</comment>
                            <comment id="14666849" author="roboduke" created="Mon, 22 Apr 2024 01:47:07 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/518&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/518&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-22 08:41:00 +0000</comment>
                            <comment id="14666843" author="roboduke" created="Mon, 22 Apr 2024 01:43:46 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes Epsilon performance problem, corner-case with clear test. Applies cleanly. New regression test fails without the fix, passes with it. Other Epsilon tests pass as well. There is no bugtail after a month in mainline.</comment>
                            <comment id="14658063" author="dukebot" created="Mon, 18 Mar 2024 04:29:44 -0700"  >Changeset: 7baec662&lt;br/&gt;
Author:    Guoxiong Li &amp;lt;&lt;a href=&apos;mailto:gli@openjdk.org&apos;&gt;gli@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-03-18 11:27:27 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/7baec6622254fc21e315b974a213605a7605daac&quot;&gt;https://git.openjdk.org/jdk/commit/7baec6622254fc21e315b974a213605a7605daac&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14657432" author="roboduke" created="Thu, 14 Mar 2024 07:13:13 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18304&quot;&gt;https://git.openjdk.org/jdk/pull/18304&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-14 14:06:45 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5128225">JDK-8331308</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5128226">JDK-8331309</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5128210">JDK-8331297</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5142289">JDK-8342894</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5124211">JDK-8328166</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35g8j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17352"><![CDATA[b15]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>