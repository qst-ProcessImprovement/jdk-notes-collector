<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:43:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8240774] [REDO] G1DirtyCardQueue destructor has useless flush</title>
                <link>https://bugs.openjdk.org/browse/JDK-8240774</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&amp;nbsp;~G1DirtyCardQueue calls flush(), but that&amp;#39;s too late. The final flush must occur in on_thread_detach(), with no further queued log entries after that, else operations like concatenate_logs won&amp;#39;t be able to find and process those late logs. on_thread_detach() already contains the necessary flush(), so the one in the destructor is just a waste of time, and possibly hides bugs. Better to just remove it. &lt;br/&gt;
&lt;br/&gt;
However, it&amp;#39;s not so simple as just removing the call (and possibly the now empty destructor).  There are bootstrapping problems (see &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8240722&quot; title=&quot;[BACKOUT] G1DirtyCardQueue destructor has useless flush&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8240722&quot;&gt;&lt;strike&gt;JDK-8240722&lt;/strike&gt;&lt;/a&gt;).  There are write barrier invocations by the initial thread before it has been added to the threads list (which includes calling BarrierSet::on_thread_attach).  Those are occurring in init_globals.  If init_globals ultimately returns failure, the initial thread gets deleted, without calling BarrierSet::on_thread_detach (where the flush would normally occur for a running thread being deleted).  This leaves a partially filled buffer in place, triggering the assert in ~PtrQueue.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5013066">JDK-8240774</key>
            <summary>[REDO] G1DirtyCardQueue destructor has useless flush</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kbarrett">Kim Barrett</assignee>
                                    <reporter username="kbarrett">Kim Barrett</reporter>
                        <labels>
                            <label>gc-g1</label>
                            <label>gc-pending-review</label>
                    </labels>
                <created>Mon, 9 Mar 2020 12:29:18 -0700</created>
                <updated>Sun, 4 Jun 2023 20:15:53 -0700</updated>
                            <resolved>Tue, 30 May 2023 18:54:03 -0700</resolved>
                                    <version>15</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14585839" author="dukebot" created="Tue, 30 May 2023 18:54:02 -0700"  >Changeset: 927a9ed6&lt;br/&gt;
Author:    Kim Barrett &amp;lt;&lt;a href=&apos;mailto:kbarrett@openjdk.org&apos;&gt;kbarrett@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-31 01:52:05 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/927a9ed68371597eba1609f97ac03dd1de812e26&quot;&gt;https://git.openjdk.org/jdk/commit/927a9ed68371597eba1609f97ac03dd1de812e26&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14584065" author="roboduke" created="Wed, 24 May 2023 03:30:57 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14119&quot;&gt;https://git.openjdk.org/jdk/pull/14119&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-24 10:24:56 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5101706">JDK-8308764</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5013000">JDK-8240722</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5012167">JDK-8240133</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2molv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17411"><![CDATA[b25]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>