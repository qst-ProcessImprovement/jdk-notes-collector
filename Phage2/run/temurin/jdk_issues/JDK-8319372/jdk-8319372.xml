<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:07:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8319372] C2 compilation fails with &quot;Bad immediate dominator info&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8319372</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>java -Xcomp -XX:CompileOnly=TestSimple::test  -XX:CompileCommand=quiet -XX:-TieredCompilation -XX:+UnlockDiagnosticVMOptions -XX:+StressIGVN -XX:RepeatCompilation=100 TestSimple.java&lt;br/&gt;
&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/workspace/open/src/hotspot/share/opto/loopnode.hpp:1137), pid=3339531, tid=3339546&lt;br/&gt;
#  assert(n != nullptr) failed: Bad immediate dominator info.&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (22.0+21) (fastdebug build 22-ea+21-1641)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 22-ea+21-1641, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x12babca]  PhaseIdealLoop::clone_loop_handle_data_uses(Node*, Node_List&amp;amp;, IdealLoopTree*, IdealLoopTree*, Node_List*&amp;amp;, Node_List*&amp;amp;, Node_List*&amp;amp;, Node_List&amp;amp;, unsigned int, PhaseIdealLoop::CloneLoopMode)+0xe7a&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:1896   82    b        TestSimple::test (51 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007fc7a840f000,0x00007fc7a8510000],  sp=0x00007fc7a850a770,  free space=1005k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x12babca]  PhaseIdealLoop::clone_loop_handle_data_uses(Node*, Node_List&amp;amp;, IdealLoopTree*, IdealLoopTree*, Node_List*&amp;amp;, Node_List*&amp;amp;, Node_List*&amp;amp;, Node_List&amp;amp;, unsigned int, PhaseIdealLoop::CloneLoopMode)+0xe7a  (loopnode.hpp:1137)&lt;br/&gt;
V  [libjvm.so+0x12bf566]  PhaseIdealLoop::clone_loop(IdealLoopTree*, Node_List&amp;amp;, int, PhaseIdealLoop::CloneLoopMode, Node*)+0x556&lt;br/&gt;
V  [libjvm.so+0x126e2dc]  PhaseIdealLoop::insert_post_loop(IdealLoopTree*, Node_List&amp;amp;, CountedLoopNode*, CountedLoopEndNode*, Node*&amp;amp;, Node*, CountedLoopNode*&amp;amp;)+0xdc&lt;br/&gt;
V  [libjvm.so+0x127042c]  PhaseIdealLoop::insert_pre_post_loops(IdealLoopTree*, Node_List&amp;amp;, bool)+0x2dc&lt;br/&gt;
V  [libjvm.so+0x127f7de]  IdealLoopTree::iteration_split_impl(PhaseIdealLoop*, Node_List&amp;amp;)+0x4be&lt;br/&gt;
V  [libjvm.so+0x127fa87]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&amp;amp;)+0x117&lt;br/&gt;
V  [libjvm.so+0x127f9a3]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&amp;amp;)+0x33&lt;br/&gt;
V  [libjvm.so+0x127f9a3]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&amp;amp;)+0x33&lt;br/&gt;
V  [libjvm.so+0x12ab88b]  PhaseIdealLoop::build_and_optimize()+0xe1b&lt;br/&gt;
V  [libjvm.so+0x9fdf9b]  PhaseIdealLoop::optimize(PhaseIterGVN&amp;amp;, LoopOptsMode)+0x3ab&lt;br/&gt;
V  [libjvm.so+0x9fa8b2]  Compile::Optimize()+0x16f2&lt;br/&gt;
V  [libjvm.so+0x9fc681]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x1bc1&lt;br/&gt;
V  [libjvm.so+0x849ca7]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x207&lt;br/&gt;
V  [libjvm.so+0xa08725]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x9f5&lt;br/&gt;
V  [libjvm.so+0xa09438]  CompileBroker::compiler_thread_loop()+0x508&lt;br/&gt;
V  [libjvm.so+0xec438c]  JavaThread::thread_main_inner()+0xcc&lt;br/&gt;
V  [libjvm.so+0x17a22ca]  Thread::call_run()+0xba&lt;br/&gt;
V  [libjvm.so+0x14a710a]  thread_native_entry(Thread*)+0x12a&lt;br/&gt;
&lt;br/&gt;
In product:&lt;br/&gt;
&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  SIGSEGV (0xb) at pc=0x00007efe7295fca6, pid=3339733, tid=3339747&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (22.0+22) (build 22-ea+22-1754)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (22-ea+22-1754, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0xbb8ca6]  PhaseIdealLoop::clone_loop_handle_data_uses(Node*, Node_List&amp;amp;, IdealLoopTree*, IdealLoopTree*, Node_List*&amp;amp;, Node_List*&amp;amp;, Node_List*&amp;amp;, Node_List&amp;amp;, unsigned int, PhaseIdealLoop::CloneLoopMode)+0x5e6&lt;br/&gt;
#&lt;br/&gt;
# No core dump will be written. Core dumps have been disabled. To enable core dumping, try &amp;quot;ulimit -c unlimited&amp;quot; before starting Java again&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5113922">JDK-8319372</key>
            <summary>C2 compilation fails with &quot;Bad immediate dominator info&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roland">Roland Westrelin</assignee>
                                    <reporter username="thartmann">Tobias Hartmann</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>c2-loopopts</label>
                            <label>javafuzzer</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oracle-triage-22</label>
                    </labels>
                <created>Fri, 3 Nov 2023 05:09:52 -0700</created>
                <updated>Tue, 3 Jun 2025 04:42:46 -0700</updated>
                            <resolved>Thu, 30 Nov 2023 00:11:03 -0800</resolved>
                                    <version>16</version>
                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14655544" author="roboduke" created="Thu, 7 Mar 2024 08:09:15 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2274&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2274&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-07 16:05:10 +0000</comment>
                            <comment id="14655543" author="goetz" created="Thu, 7 Mar 2024 08:06:33 -0800"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.12-oracle.&lt;br/&gt;
Typical C2 risk, but acceptable as removing a wrong optimization in C2&lt;br/&gt;
I had to resolve as among other the code differs slightly.&lt;br/&gt;
Tests pass but unfortunately also without the fix. SAP nightly testing passed.&lt;br/&gt;
</comment>
                            <comment id="14640467" author="roboduke" created="Tue, 16 Jan 2024 00:46:34 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix C2 bug and better parity.</comment>
                            <comment id="14639221" author="roboduke" created="Wed, 10 Jan 2024 11:09:31 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/157&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/157&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-10 19:04:32 +0000</comment>
                            <comment id="14630209" author="dukebot" created="Thu, 30 Nov 2023 00:11:02 -0800"  >Changeset: 77667850&lt;br/&gt;
Author:    Roland Westrelin &amp;lt;&lt;a href=&apos;mailto:roland@openjdk.org&apos;&gt;roland@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-30 08:09:06 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/7766785098816cfcdae3479540cdc866c1ed18ad&quot;&gt;https://git.openjdk.org/jdk/commit/7766785098816cfcdae3479540cdc866c1ed18ad&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14629475" author="roboduke" created="Tue, 28 Nov 2023 03:04:38 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16844&quot;&gt;https://git.openjdk.org/jdk/pull/16844&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-28 10:55:13 +0000</comment>
                            <comment id="14623610" author="thartmann" created="Fri, 3 Nov 2023 05:19:02 -0700"  >[~roland], would you have time to take a look?</comment>
                            <comment id="14623609" author="thartmann" created="Fri, 3 Nov 2023 05:18:19 -0700"  >ILW = Assert / Crash during C2 compilation, with generated test, no workaround but disable compilation of affected method = HMM = P2</comment>
                            <comment id="14623608" author="thartmann" created="Fri, 3 Nov 2023 05:12:01 -0700"  >I attached a simplified version of the generated test. This is a regression from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8256730&quot; title=&quot;Code that uses Object.checkIndex() range checks doesn&amp;#39;t optimize well&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8256730&quot;&gt;&lt;strike&gt;JDK-8256730&lt;/strike&gt;&lt;/a&gt; in JDK 16 b28.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5119208">JDK-8324000</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5123796">JDK-8327813</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118382">JDK-8323256</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5121688">JDK-8326049</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="5121030">JDK-8325494</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5113051">JDK-8318690</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5151249">JDK-8350576</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115856">JDK-8321109</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115854">JDK-8321107</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5115843">JDK-8321097</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5160423">JDK-8358501</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5035140">JDK-8256730</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="107108" name="FuzzerUtils.java" size="13240" author="thartmann" created="Fri, 3 Nov 2023 05:06:25 -0700"/>
                            <attachment id="107107" name="Test.java" size="6757" author="thartmann" created="Fri, 3 Nov 2023 05:06:25 -0700"/>
                            <attachment id="107106" name="TestSimple.java" size="496" author="thartmann" created="Fri, 3 Nov 2023 05:06:25 -0700"/>
                            <attachment id="107105" name="hs_err_pid3339531.log" size="80149" author="thartmann" created="Fri, 3 Nov 2023 05:07:47 -0700"/>
                            <attachment id="107104" name="replay_pid3339531.log" size="234876" author="thartmann" created="Fri, 3 Nov 2023 05:07:48 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17444"><![CDATA[b28]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="20800">16</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33qar:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17419"><![CDATA[b27]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>