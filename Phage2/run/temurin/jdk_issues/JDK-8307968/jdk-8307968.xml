<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 19:24:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8307968] serviceability/jvmti/vthread/StopThreadTest/StopThreadTest.java timed out</title>
                <link>https://bugs.openjdk.org/browse/JDK-8307968</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following new test timed out in the JDK21 CI:&lt;br/&gt;
&lt;br/&gt;
serviceability/jvmti/vthread/StopThreadTest/StopThreadTest.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(8/343)----------&lt;br/&gt;
command: main -agentlib:StopThreadTest StopThreadTest&lt;br/&gt;
reason: User specified action: run main/othervm/native -agentlib:StopThreadTest StopThreadTest &lt;br/&gt;
started: Thu May 11 23:54:49 GMT 2023&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
Timeout information:&lt;br/&gt;
--- Timeout information end.&lt;br/&gt;
finished: Fri May 12 00:03:53 GMT 2023&lt;br/&gt;
elapsed time (seconds): 543.32&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(15/446)----------&lt;br/&gt;
Agent init&lt;br/&gt;
Main: prepareAgent started&lt;br/&gt;
Main: prepareAgent finished&lt;br/&gt;
&lt;br/&gt;
Main #A: method A() must be blocked on entering a synchronized statement&lt;br/&gt;
TestTask.run: started&lt;br/&gt;
&lt;br/&gt;
Main #A.1: unsuspended&lt;br/&gt;
Main: stopThread: StopThread returned code: JVMTI_ERROR_THREAD_NOT_SUSPENDED (13)&lt;br/&gt;
Main #A.1: got expected THREAD_NOT_SUSPENDED&lt;br/&gt;
&lt;br/&gt;
Main #A.2: suspended&lt;br/&gt;
Main: suspendThread&lt;br/&gt;
Main: stopThread: StopThread returned code: JVMTI_ERROR_NONE (0)&lt;br/&gt;
Timeout refired 480 times&lt;br/&gt;
----------System.err:(3/186)----------&lt;br/&gt;
java version &amp;quot;21-ea&amp;quot; 2023-09-19 LTS&lt;br/&gt;
Java(TM) SE Runtime Environment (fastdebug build 21-ea+23-LTS-1910)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (fastdebug build 21-ea+23-LTS-1910, mixed mode)&lt;br/&gt;
----------rerun:(36/6757)*----------&lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&lt;br/&gt;
result: Error. Program `/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-21+23-1910/macosx-x64-debug.jdk/jdk-21/fastdebug/bin/java&amp;#39; timed out (timeout set to 480000ms, elapsed time including timeout handling was 543310ms).&lt;br/&gt;
&lt;br/&gt;
This test was recently added by:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8306034&quot; title=&quot;add support of virtual threads to JVMTI StopThread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8306034&quot;&gt;&lt;strike&gt;JDK-8306034&lt;/strike&gt;&lt;/a&gt; add support of virtual threads to JVMTI StopThread&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5100767">JDK-8307968</key>
            <summary>serviceability/jvmti/vthread/StopThreadTest/StopThreadTest.java timed out</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sspitsyn">Serguei Spitsyn</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>tier1</label>
                            <label>tier3</label>
                    </labels>
                <created>Thu, 11 May 2023 17:55:54 -0700</created>
                <updated>Wed, 4 Dec 2024 15:55:29 -0800</updated>
                            <resolved>Tue, 16 May 2023 00:22:19 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14581800" author="dukebot" created="Tue, 16 May 2023 00:22:18 -0700"  >Changeset: c2ef3024&lt;br/&gt;
Author:    Serguei Spitsyn &amp;lt;&lt;a href=&apos;mailto:sspitsyn@openjdk.org&apos;&gt;sspitsyn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-16 07:20:01 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/c2ef3024689d60c79320ab3ef9a2fdeccb4cde72&quot;&gt;https://git.openjdk.org/jdk/commit/c2ef3024689d60c79320ab3ef9a2fdeccb4cde72&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14581349" author="roboduke" created="Sat, 13 May 2023 00:35:17 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13969&quot;&gt;https://git.openjdk.org/jdk/pull/13969&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-13 07:28:38 +0000</comment>
                            <comment id="14581222" author="dcubed" created="Fri, 12 May 2023 07:31:32 -0700"  >Here&amp;#39;s a log file snippet from the jdk-21+23-1920-tier1 sighting: &lt;br/&gt;
&lt;br/&gt;
serviceability/jvmti/vthread/StopThreadTest/StopThreadTest.java#default&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(6/292)----------&lt;br/&gt;
command: main -agentlib:StopThreadTest StopThreadTest&lt;br/&gt;
reason: User specified action: run main/othervm/native -agentlib:StopThreadTest StopThreadTest &lt;br/&gt;
started: Fri May 12 07:04:48 GMT 2023&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
finished: Fri May 12 07:04:49 GMT 2023&lt;br/&gt;
elapsed time (seconds): 0.964&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(16/490)----------&lt;br/&gt;
Agent init&lt;br/&gt;
Main: prepareAgent started&lt;br/&gt;
Main: prepareAgent finished&lt;br/&gt;
&lt;br/&gt;
Main #A: method A() must be blocked on entering a synchronized statement&lt;br/&gt;
TestTask.run: started&lt;br/&gt;
&lt;br/&gt;
Main #A.1: unsuspended&lt;br/&gt;
Main: stopThread: StopThread returned code: JVMTI_ERROR_THREAD_NOT_SUSPENDED (13)&lt;br/&gt;
Main #A.1: got expected THREAD_NOT_SUSPENDED&lt;br/&gt;
&lt;br/&gt;
Main #A.2: suspended&lt;br/&gt;
Main: suspendThread&lt;br/&gt;
Main: stopThread: StopThread returned code: JVMTI_ERROR_OPAQUE_FRAME (32)&lt;br/&gt;
&lt;br/&gt;
FAILED: Main #A.2: expected JVMTI_ERROR_NONE instead of: 32&lt;br/&gt;
----------System.err:(13/725)----------&lt;br/&gt;
java.lang.RuntimeException: StopThreadTest failed!&lt;br/&gt;
	at StopThreadTest.throwFailed(StopThreadTest.java:80)&lt;br/&gt;
	at StopThreadTest.run(StopThreadTest.java:123)&lt;br/&gt;
	at StopThreadTest.main(StopThreadTest.java:85)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1583)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException: StopThreadTest failed!&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: java.lang.RuntimeException: StopThreadTest failed!&lt;br/&gt;
----------rerun:(34/6675)*----------&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
So this failure sighting is not a timeout, but is instead an unexpected JVM/TI return code:&lt;br/&gt;
&lt;br/&gt;
Main #A.2: suspended&lt;br/&gt;
Main: suspendThread&lt;br/&gt;
Main: stopThread: StopThread returned code: JVMTI_ERROR_OPAQUE_FRAME (32)&lt;br/&gt;
&lt;br/&gt;
FAILED: Main #A.2: expected JVMTI_ERROR_NONE instead of: 32</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5145450">JDK-8345543</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5098455">JDK-8306034</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31huj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="372"><![CDATA[jvmti]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>