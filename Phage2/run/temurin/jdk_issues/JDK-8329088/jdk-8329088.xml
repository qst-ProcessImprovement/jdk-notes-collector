<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:54:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8329088] Stack chunk thawing races with concurrent GC stack iteration</title>
                <link>https://bugs.openjdk.org/browse/JDK-8329088</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>In ThawBase::finalize_thaw we do this:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;if (!_stream.is_done()) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;assert(_stream.sp() &amp;gt;= chunk-&amp;gt;sp_address(), &amp;quot;&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;chunk-&amp;gt;set_sp(chunk-&amp;gt;to_offset(_stream.sp()));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;chunk-&amp;gt;set_pc(_stream.pc());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;} else {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;chunk-&amp;gt;set_argsize(0);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;chunk-&amp;gt;set_sp(chunk-&amp;gt;stack_size());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;chunk-&amp;gt;set_pc(nullptr);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
The sp and argsize are both read when setting up a StackChunkFrameStream from concurrent GC threads to scan the stack. The lack of atomicity implies the GC thread might observe old values of argsize with new values of sp, or vice versa. The consequences are unknown, but this is clearly not right.</description>
                <environment></environment>
        <key id="5125276">JDK-8329088</key>
            <summary>Stack chunk thawing races with concurrent GC stack iteration</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eosterlund">Erik &#214;sterlund</assignee>
                                    <reporter username="eosterlund">Erik &#214;sterlund</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>gc-g1</label>
                            <label>gc-shenandoah</label>
                            <label>genzgc</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>loom</label>
                            <label>zgc</label>
                    </labels>
                <created>Tue, 26 Mar 2024 05:42:35 -0700</created>
                <updated>Mon, 4 Nov 2024 00:29:54 -0800</updated>
                            <resolved>Thu, 2 May 2024 01:35:03 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14680436" author="roboduke" created="Tue, 11 Jun 2024 01:25:02 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix a race with concurrent GC and Virtual Threads. Applies cleanly, all tests pass (see 21u PR). Risk is low-medium: affects product code paths, but limited to only Virtual Thread paths; the change is relatively simple, rewrites the way VM tracks stack chunk sizes. The change was in mainline for 5 weeks without bugtail.</comment>
                            <comment id="14679900" author="roboduke" created="Fri, 7 Jun 2024 12:23:39 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/680&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/680&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-07 18:47:46 +0000</comment>
                            <comment id="14670339" author="dukebot" created="Thu, 2 May 2024 01:35:02 -0700"  >Changeset: 8bcd2e61&lt;br/&gt;
Author:    Erik &amp;#xD6;sterlund &amp;lt;&lt;a href=&apos;mailto:eosterlund@openjdk.org&apos;&gt;eosterlund@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-05-02 08:31:49 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8bcd2e61aec51f7c5b09ae162f8cca85a8bbf105&quot;&gt;https://git.openjdk.org/jdk/commit/8bcd2e61aec51f7c5b09ae162f8cca85a8bbf105&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14663063" author="roboduke" created="Thu, 4 Apr 2024 23:10:39 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18643&quot;&gt;https://git.openjdk.org/jdk/pull/18643&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-05 05:54:11 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5132080">JDK-8334447</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143021">JDK-8343527</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                                        </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35mqb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17415"><![CDATA[b22]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>