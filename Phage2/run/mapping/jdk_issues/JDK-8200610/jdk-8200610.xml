<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:38:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8200610] Compiling fails with java.nio.file.ReadOnlyFileSystemException</title>
                <link>https://bugs.openjdk.org/browse/JDK-8200610</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>FULL PRODUCT VERSION :&lt;br/&gt;
javac 9.0.4&lt;br/&gt;
&lt;br/&gt;
ADDITIONAL OS VERSION INFORMATION :&lt;br/&gt;
Kernel: Linux middleearth 4.14.27-gentoo #1 SMP Tue Mar 20 09:47:26 CET 2018 x86_64 GNU/Linux&lt;br/&gt;
Userspace: Debian i386 &lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
compilation bails out  with java.nio.file.ReadOnlyFileSystemException&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
For additional info see &lt;br/&gt;
&lt;a href=&quot;https://buildd.debian.org/status/fetch.php?pkg=gdcm&amp;arch=x32&amp;ver=2.8.4-1%2Bb1&amp;stamp=1521789107&amp;raw=0&quot;&gt;https://buildd.debian.org/status/fetch.php?pkg=gdcm&amp;amp;arch=x32&amp;amp;ver=2.8.4-1%2Bb1&amp;amp;stamp=1521789107&amp;amp;raw=0&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
REGRESSION.  Last worked in version 8u162&lt;br/&gt;
&lt;br/&gt;
ADDITIONAL REGRESSION INFORMATION: &lt;br/&gt;
javac 1.8.0_162&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Compile the Debian package gdcm in a clean changeroot using the latest version of openjdk-9 &lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
package builds&lt;br/&gt;
ACTUAL -&lt;br/&gt;
Package fails to build &lt;br/&gt;
&lt;br/&gt;
ERROR MESSAGES/STACK TRACES THAT OCCUR :&lt;br/&gt;
An exception has occurred in the compiler (9.0.4). Please file a bug against the Java compiler via the Java bug reporting page (&lt;a href=&quot;http://bugreport.java.com&quot;&gt;http://bugreport.java.com&lt;/a&gt;) after checking the Bug Database (&lt;a href=&quot;http://bugs.java.com&quot;&gt;http://bugs.java.com&lt;/a&gt;) for duplicates. Include your program and the following diagnostic in your report. Thank you.&lt;br/&gt;
java.nio.file.ReadOnlyFileSystemException&lt;br/&gt;
	at jdk.zipfs/jdk.nio.zipfs.ZipFileSystem.checkWritable(ZipFileSystem.java:147)&lt;br/&gt;
	at jdk.zipfs/jdk.nio.zipfs.ZipFileSystem.newOutputStream(ZipFileSystem.java:499)&lt;br/&gt;
	at jdk.zipfs/jdk.nio.zipfs.ZipPath.newOutputStream(ZipPath.java:840)&lt;br/&gt;
	at jdk.zipfs/jdk.nio.zipfs.ZipFileSystemProvider.newOutputStream(ZipFileSystemProvider.java:283)&lt;br/&gt;
	at java.base/java.nio.file.Files.newOutputStream(Files.java:218)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.file.PathFileObject.openOutputStream(PathFileObject.java:459)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.jvm.ClassWriter.writeClass(ClassWriter.java:1677)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.genCode(JavaCompiler.java:743)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.generate(JavaCompiler.java:1621)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.generate(JavaCompiler.java:1589)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:959)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.main.Main.compile(Main.java:302)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.main.Main.compile(Main.java:162)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.Main.compile(Main.java:57)&lt;br/&gt;
	at jdk.compiler/com.sun.tools.javac.Main.main(Main.java:43)&lt;br/&gt;
make[4]: *** [Utilities/VTK/CMakeFiles/VTKGDCMJavaJar.dir/build.make:64: bin/vtkgdcm.jar] Erro&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
REPRODUCIBILITY :&lt;br/&gt;
This bug can be reproduced often.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="4956704">JDK-8200610</key>
            <summary>Compiling fails with java.nio.file.ReadOnlyFileSystemException</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acobbs">Archie Cobbs</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>additional-information-requested</label>
                            <label>dcsfai</label>
                            <label>noreg-hard</label>
                            <label>regression-unsure</label>
                            <label>reproducer-no</label>
                            <label>webbug</label>
                    </labels>
                <created>Tue, 3 Apr 2018 00:50:01 -0700</created>
                <updated>Tue, 20 Aug 2024 07:15:43 -0700</updated>
                            <resolved>Wed, 4 Jan 2023 09:35:28 -0800</resolved>
                                    <version>9.0.4</version>
                                    <fixVersion>21</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14548744" author="dukebot" created="Wed, 4 Jan 2023 09:35:27 -0800"  >Changeset: b9758d22&lt;br/&gt;
Author:    Archie L. Cobbs &amp;lt;&lt;a href=&apos;mailto:archie.cobbs@gmail.com&apos;&gt;archie.cobbs@gmail.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Vicente Romero &amp;lt;&lt;a href=&apos;mailto:vromero@openjdk.org&apos;&gt;vromero@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-04 17:32:33 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b9758d2201655cecfdda48660e77c598c52fcd9b&quot;&gt;https://git.openjdk.org/jdk/commit/b9758d2201655cecfdda48660e77c598c52fcd9b&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14531628" author="roboduke" created="Fri, 21 Oct 2022 08:39:10 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/10818&quot;&gt;https://git.openjdk.org/jdk/pull/10818&lt;/a&gt;&lt;br/&gt;
Date: 2022-10-21 15:33:22 +0000</comment>
                            <comment id="14169946" author="jjg" created="Fri, 6 Apr 2018 08:12:02 -0700"  >There&amp;#39;s enough info in the log ... namely the overt stack trace ... for this to be reopened and addressed. javac should detect and handle the case of trying to write to a readonly file system.</comment>
                            <comment id="14169942" author="jjg" created="Fri, 6 Apr 2018 08:08:57 -0700"  >This looks like a javac issue, not a core-libs issue.&lt;br/&gt;
&lt;br/&gt;
a) javac should never crash or report an internal exception; it should catch the exception (if it is reasonably expected) and report an error.&lt;br/&gt;
&lt;br/&gt;
b)&lt;br/&gt;
&lt;br/&gt;
Interesting lines near the end of the log:&lt;br/&gt;
&lt;br/&gt;
make[4]: Entering directory &amp;#39;/&amp;lt;&amp;lt;PKGBUILDDIR&amp;gt;&amp;gt;/obj-x86_64-linux-gnux32&amp;#39;&lt;br/&gt;
[ 97%] javac *.java -&amp;gt; jar; jar cvf -&amp;gt; vtkgdcm.jar&lt;br/&gt;
cd /&amp;lt;&amp;lt;PKGBUILDDIR&amp;gt;&amp;gt;/obj-x86_64-linux-gnux32/Utilities/VTK/java &amp;amp;&amp;amp; /usr/bin/javac -source 1.7 -target 1.7 -classpath /usr/share/java/vtk6.jar vtk/*.java&lt;br/&gt;
&lt;br/&gt;
While the log seems like it may be lacking info, there is not obviously a -d option in the command, meaning that javac will try and write the class file into the same directory as the source. If the source is coming from a source file in the jar file (vtk6.jar) then javac may try and write into the jar file, and therefore might get the observed exception.&lt;br/&gt;
&lt;br/&gt;
As regards the &amp;quot;file system&amp;quot; being readonly, the exception is probably referring to the inability to write into the virtual file system in a jar file, not the ability to write into the user&amp;#39;s file system containing the jar file.</comment>
                            <comment id="14169838" author="alanb" created="Fri, 6 Apr 2018 00:33:11 -0700"  >The stack trace shows javac attempting to create a class file in the zip file system (not the platform file system). Is javac be used via the API? A test case would be useful to fully understand this.</comment>
                            <comment id="14169835" author="fmatte" created="Fri, 6 Apr 2018 00:23:18 -0700"  >Requested submitter to share the java file generating this crash</comment>
                            <comment id="14169834" author="fmatte" created="Fri, 6 Apr 2018 00:22:06 -0700"  >Additional information from submitter&lt;br/&gt;
==&lt;br/&gt;
The file system where the files in question are written to is definitely writeable. I also uses strace and didn&amp;#39;t see any indication that the compiler tries to open a file for writing write to a strange location. In fact, I was able to reproduce the problem on amd64 compiling a single file within the same project, and here the class file is actually written, and then the error message is printed.&lt;br/&gt;
</comment>
                            <comment id="14168895" author="fmatte" created="Tue, 3 Apr 2018 02:28:49 -0700"  >I don&amp;#39;t think we can do much here, we are getting &amp;quot;ReadOnlyFileSystemException&amp;quot;, when we try to create output stream to write on the path, getting ROFSE.&lt;br/&gt;
We get exception in the below code from ZipFileSystem.java&lt;br/&gt;
&lt;br/&gt;
496    OutputStream newOutputStream(byte[] path, OpenOption... options)&lt;br/&gt;
497        throws IOException&lt;br/&gt;
498    {&lt;br/&gt;
499        checkWritable(); &lt;br/&gt;
&lt;br/&gt;
145    private void checkWritable() throws IOException {&lt;br/&gt;
146        if (readOnly)&lt;br/&gt;
147            throw new ReadOnlyFileSystemException(); //&lt;br/&gt;
148    }&lt;br/&gt;
&lt;br/&gt;
Kindly verify if the write permissions are in place for the filesystem (path)</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5137112">JDK-8338675</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d9pf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17314"><![CDATA[b04]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="212"><![CDATA[javac]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>