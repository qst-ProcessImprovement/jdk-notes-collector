<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:27:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8294699] Launcher causes lingering busy cursor</title>
                <link>https://bugs.openjdk.org/browse/JDK-8294699</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Windows 10.&lt;br/&gt;
Java 17.&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
Normally, when an application is launched from the desktop or start menu on Windows, the system turns the mouse cursor into a busy indicator (e.g. an hourglass or circle) while the application is launching and restores the regular cursor once the application has finished launching.&lt;br/&gt;
&lt;br/&gt;
This works as expected for Java applications launched using &amp;quot;javaw.exe&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
However, when a Java application is packaged with jpackage and launched using the exe launcher that jpackage creates, the busy cursor lingers for several seconds after the application&amp;#39;s window shows up on screen.&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
1. Take any small Java application, one that launches quickly.&lt;br/&gt;
2. Package it on Windows using jpackage with the &amp;quot;--win-shortcut&amp;quot; option.&lt;br/&gt;
3. Install the packaged application.&lt;br/&gt;
4. Launch the packaged application from the desktop using the shortcut.&lt;br/&gt;
&lt;br/&gt;
Below is a WSH script which, when executed with &amp;quot;cscript build.js&amp;quot; and assuming HelloSwing.java contains some simple Swing application, performs the first 3 steps and additionally creates the shortcut &amp;quot;ExpectedBehavior.lnk&amp;quot; for comparison (which launches the same JAR using &amp;quot;javaw&amp;quot;).&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var shell = WSH.CreateObject(&amp;quot;WScript.Shell&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var shellapp = WSH.CreateObject(&amp;quot;Shell.Application&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var fs = WSH.CreateObject(&amp;quot;Scripting.FileSystemObject&amp;quot;)&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function main() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;withTempDir(function(tempdir) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;build(tempdir)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;package(tempdir)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;})&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;install(&amp;quot;HelloSwing-1.0.msi&amp;quot;)&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;createSystemJavaAppShortcut()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function build(appdir) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;run(&amp;quot;javac HelloSwing.java&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var jarPath = joinPath(appdir, &amp;quot;hello.jar&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;run(&amp;quot;jar cfe &amp;quot; + quote(jarPath) + &amp;quot; HelloSwing HelloSwing.class&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function package(appdir) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var cmd = &amp;quot;jpackage&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd += &amp;quot; -i &amp;quot; + quote(appdir)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd += &amp;quot; --main-jar hello.jar&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd += &amp;quot; --type msi --win-per-user-install --win-shortcut&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cmd += &amp;quot; --add-modules java.base,java.desktop&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;run(cmd)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function install(msiPath) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;run(&amp;quot;msiexec /i &amp;quot; + quote(msiPath) + &amp;quot; /norestart&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function createSystemJavaAppShortcut() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var exePath = getDesktopShortcutPath(&amp;quot;HelloSwing.lnk&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var installDir = fs.GetParentFolderName(exePath)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var desktopPath = shell.SpecialFolders(&amp;quot;Desktop&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var shortcutPath = joinPath(desktopPath, &amp;quot;ExpectedBehavior.lnk&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var jarPath = joinPath(installDir, &amp;quot;app&amp;quot;, &amp;quot;hello.jar&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var shortcut = shell.CreateShortcut(shortcutPath)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;shortcut.TargetPath = &amp;quot;javaw&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;shortcut.Arguments = &amp;quot;-jar &amp;quot; + quote(jarPath)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;shortcut.Save()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function getDesktopShortcutPath(name) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var desktop = shellapp.Namespace(0)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var shortcut = desktop.ParseName(name).GetLink&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return shortcut.Path&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function withTempDir(func) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var path = joinPath(fs.GetSpecialFolder(2), fs.GetTempName())&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fs.CreateFolder(path)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;func(path)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fs.DeleteFolder(path)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;catch (ex) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;print(&amp;quot;Failed to delete temp directory.&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function joinPath() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var parts = Array.prototype.slice.call(arguments, 0, arguments.length - 1)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var last = arguments[arguments.length - 1]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (parts.length === 0)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return last&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return fs.BuildPath(joinPath.apply(null, parts), last)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function quote(s) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return &amp;quot;\&amp;quot;&amp;quot; + s + &amp;quot;\&amp;quot;&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function run(command) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;print(&amp;quot;Running command: &amp;quot; + command)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var result = shell.Run(&amp;quot;cmd /c &amp;quot; + command, 0, true)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (result !== 0) throw new Error(&amp;quot;Command failed: &amp;quot; + command)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function print() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var args = Array.prototype.slice.call(arguments)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;WScript.Echo(args.join(&amp;quot; &amp;quot;))&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;main()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;catch (ex) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw ex&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
It should behave as it does when launched using &amp;quot;javaw.exe&amp;quot;: The busy cursor should appear briefly while the application is launching. The regular mouse cursor should be restored when the application window is displayed.&lt;br/&gt;
ACTUAL -&lt;br/&gt;
The busy cursor remains for several seconds after the application window has shown up on screen.&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
import javax.swing.*;&lt;br/&gt;
&lt;br/&gt;
import static javax.swing.BorderFactory.createEmptyBorder;&lt;br/&gt;
import static javax.swing.WindowConstants.*;&lt;br/&gt;
&lt;br/&gt;
public class HelloSwing {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SwingUtilities.invokeLater(() -&amp;gt; {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var label = new JLabel(&amp;quot;Hello Swing!&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;label.setBorder(createEmptyBorder(30, 30, 30, 30));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var frame = new JFrame(&amp;quot;Hello Swing!&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.setDefaultCloseOperation(EXIT_ON_CLOSE);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.add(label);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.pack();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.setVisible(true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5084164">JDK-8294699</key>
            <summary>Launcher causes lingering busy cursor</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asemenyuk">Alexey Semenyuk</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>17-bp</label>
                            <label>additional-information-received</label>
                            <label>amazon-interest</label>
                            <label>dcsad</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>reproducer-yes</label>
                            <label>sn_129</label>
                            <label>sn_158</label>
                            <label>webbug</label>
                    </labels>
                <created>Mon, 26 Sep 2022 13:21:43 -0700</created>
                <updated>Sat, 9 Nov 2024 14:57:10 -0800</updated>
                            <resolved>Tue, 5 Dec 2023 10:44:29 -0800</resolved>
                                    <version>17.0.2</version>
                    <version>18</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14676673" author="roboduke" created="Tue, 28 May 2024 01:30:10 -0700"  >[jdk17u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 17.0.12-oracle. Applies cleanly and tier1-4 have passed.</comment>
                            <comment id="14676557" author="roboduke" created="Mon, 27 May 2024 09:10:47 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2497&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2497&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-27 16:05:57 +0000</comment>
                            <comment id="14662559" author="sgehwolf" created="Wed, 3 Apr 2024 05:06:35 -0700"  >Windows only, fixes a jpackage msi launcher issue. Should be low risk.</comment>
                            <comment id="14654363" author="roboduke" created="Mon, 4 Mar 2024 09:28:14 -0800"  >[jdk21u-fix-request] Approval Request from Dan Lutker&lt;br/&gt;
Parity with Oracle 21.0.4</comment>
                            <comment id="14654360" author="roboduke" created="Mon, 4 Mar 2024 09:08:35 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/327&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/327&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-04 17:03:09 +0000</comment>
                            <comment id="14631783" author="dukebot" created="Tue, 5 Dec 2023 10:44:27 -0800"  >Changeset: d3df3eb5&lt;br/&gt;
Author:    Alexey Semenyuk &amp;lt;&lt;a href=&apos;mailto:asemenyuk@openjdk.org&apos;&gt;asemenyuk@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-12-05 18:41:38 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/d3df3eb5d7f5537ade917db7a36caba028f94111&quot;&gt;https://git.openjdk.org/jdk/commit/d3df3eb5d7f5537ade917db7a36caba028f94111&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14631151" author="roboduke" created="Mon, 4 Dec 2023 12:31:24 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16958&quot;&gt;https://git.openjdk.org/jdk/pull/16958&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-04 20:08:15 +0000</comment>
                            <comment id="14631123" author="asemenyuk" created="Mon, 4 Dec 2023 10:49:14 -0800"  >I played around the following jpackage command mentioned earlier:&lt;br/&gt;
---&lt;br/&gt;
build/windows-x64/images/jdk/bin/jpackage.exe --type msi --input build/windows-x64/images/jdk/demo/jfc/J2Ddemo --main-jar J2Ddemo.jar --win-per-user-install --win-shortcut --add-modules java.base,java.desktop --jlink-options&lt;br/&gt;
---&lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t see the issue with lingering wait cursor in the following cases:&lt;br/&gt;
1. run app launcher from a console window (cygwin shell or cmd.exe). This scenario creates a subprocess, but there is a console window attached to app launcher process implicitly. This means &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8272328&quot; title=&quot; java.library.path is not set properly by Windows jpackage app launcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8272328&quot;&gt;&lt;strike&gt;JDK-8272328&lt;/strike&gt;&lt;/a&gt; is not directly causing the issue.&lt;br/&gt;
2. set JPACKAGE_DEBUG=true env variable and launch the app from the explorer. In this scenario, app launcher creates a console window to collect debug output - &lt;a href=&quot;https://github.com/openjdk/jdk/blob/316b78336c9fbf290e6d423f831f9eff1a84bc40/src/jdk.jpackage/windows/native/common/WinApp.cpp#L129&quot;&gt;https://github.com/openjdk/jdk/blob/316b78336c9fbf290e6d423f831f9eff1a84bc40/src/jdk.jpackage/windows/native/common/WinApp.cpp#L129&lt;/a&gt;&lt;br/&gt;
3. set system-wide PATH env variable to contain a path to app&amp;#39;s &amp;quot;app&amp;quot; directory to prevent the restart of app launcher (PATH=%PATH%;C:/Users/asemenyu/AppData/Local/J2Ddemo/app). In this scenario, no subprocess is created, no existing console window is associated with the app launcher, and no console is created by app launcher.&lt;br/&gt;
&lt;br/&gt;
With the above observations, it looks like not having a GUI window and not running a message loop in app launcher linked with /SUBSYSTEM:WINDOWS option (the case of jpackageapplauncherw.exe launcher used as an app launcher in J2Ddemo) results in the lingering wait cursor. When jpackageapplauncherw.exe directly launches Java GUI app, the GUI window is created by the Java app. When jpackageapplauncherw.exe restarts itself and there is no existing console window or it doesn&amp;#39;t create one the parent jpackageapplauncherw.exe process ends up without a single GUI window and more importantly without running a message loop. If the Windows app doesn&amp;#39;t run a message loop it looks like the system provides some default behavior with extendeddisplay of a wait cursor.&lt;br/&gt;
&lt;br/&gt;
The solution would be to add a message loop to jpackage app launcher in case it needs to restart itself. The message loop must be bound to a valid HWND handle. Windows API supports message-only windows that are invisible, don&amp;#39;t accept user input, and are not included in Z-ordering, i.e. completely excluded from GUI (&lt;a href=&quot;https://learn.microsoft.com/en-us/windows/win32/winmsg/window-features#message-only-windows&quot;&gt;https://learn.microsoft.com/en-us/windows/win32/winmsg/window-features#message-only-windows&lt;/a&gt;). The app launcher should create one such window and run a message loop for it.&lt;br/&gt;
&lt;br/&gt;
The app laucnher will create a message-only window and run a message loop (&lt;a href=&quot;https://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows&quot;&gt;https://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows&lt;/a&gt;) for it in the main thread. It will start an app launcher subprocess from a worker thread. The worker thread will wait for subprocess termination, collect its exit code, pass it to the main app launcher thread, and post WM_QUIT to exit the message loop and exit the app launcher process.&lt;br/&gt;
</comment>
                            <comment id="14613442" author="pnarayanaswa" created="Sun, 24 Sep 2023 22:16:12 -0700"  >Additional Information from submitter:&lt;br/&gt;
============================ &lt;br/&gt;
Followup comment on issue &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294699&quot; title=&quot;Launcher causes lingering busy cursor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8294699&quot;&gt;&lt;strike&gt;JDK-8294699&lt;/strike&gt;&lt;/a&gt;:&lt;br/&gt;
&lt;br/&gt;
This is a regression. The bug is reproducible in JDK 17.0.2 but not in 17.0.1. (And also not in JDK 16.)&lt;br/&gt;
&lt;br/&gt;
A very likely cause of the regression is commit cd2dbe5f007baf81ae9262c1152917e620970621 (the fix for issue &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8272328&quot; title=&quot; java.library.path is not set properly by Windows jpackage app launcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8272328&quot;&gt;&lt;strike&gt;JDK-8272328&lt;/strike&gt;&lt;/a&gt;) which was backported to JDK 17.0.2 in issue &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8274441&quot; title=&quot; java.library.path is not set properly by Windows jpackage app launcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8274441&quot;&gt;&lt;strike&gt;JDK-8274441&lt;/strike&gt;&lt;/a&gt;. This commit modified the launcher to run the application in a subprocess, which, as explained in the links referenced in earlier comments, will cause exactly this problem.&lt;br/&gt;
&lt;br/&gt;
Works as expected in JDK 17.0.1. Is broken (see issue &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294699&quot; title=&quot;Launcher causes lingering busy cursor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8294699&quot;&gt;&lt;strike&gt;JDK-8294699&lt;/strike&gt;&lt;/a&gt; for details) in JDK 17.0.2.&lt;br/&gt;
</comment>
                            <comment id="14528111" author="pnarayanaswa" created="Wed, 5 Oct 2022 21:46:55 -0700"  >Additional Information from submitter:&lt;br/&gt;
============================&lt;br/&gt;
As I mentioned in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294706&quot; title=&quot;jpackage: Busy cursor remains after application has launched&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8294706&quot;&gt;&lt;strike&gt;JDK-8294706&lt;/strike&gt;&lt;/a&gt;, a likely explanation for the issue is that Windows is waiting for the launched process to enter its message loop and call GetMessage to indicate that it has finished launching.&lt;br/&gt;
&lt;br/&gt;
See the section on STARTF_FORCEONFEEDBACK here: &lt;a href=&quot;https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa&quot;&gt;https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/ns-processthreadsapi-startupinfoa&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
See also: &lt;a href=&quot;https://stackoverflow.com/questions/7522685&quot;&gt;https://stackoverflow.com/questions/7522685&lt;/a&gt;</comment>
                            <comment id="14527804" author="asemenyuk" created="Tue, 4 Oct 2022 12:16:26 -0700"  >I suspect this is due jli lib is statically linked to the standard launcher and dynamically loaded by jpackage app launcher. Also, jpackage app launcher is statically linked to msvc runtime and is almost 10x times larger than the standard java launcher. Need more evaluation</comment>
                            <comment id="14527802" author="asemenyuk" created="Tue, 4 Oct 2022 12:00:55 -0700"  >I can reproduce the issue using the standard J2Ddemo demo jar.&lt;br/&gt;
&lt;br/&gt;
Command to create the msi:&lt;br/&gt;
---&lt;br/&gt;
build/windows-x64/images/jdk/bin/jpackage.exe --type msi --input build/windows-x64/images/jdk/demo/jfc/J2Ddemo --main-jar J2Ddemo.jar --win-per-user-install --win-shortcut --add-modules java.base,java.desktop --jlink-options&lt;br/&gt;
---&lt;br/&gt;
&lt;br/&gt;
Go to the desktop and launch the app using J2Ddemo shortcut. The &amp;quot;busy&amp;quot; cursor stays for a while.&lt;br/&gt;
Copy J2Ddemo shortcut (J2Ddemo-java) and replace &amp;quot;C:\Users\asemenyu\AppData\Local\J2Ddemo\J2Ddemo.exe&amp;quot; with &amp;quot;C:\Users\asemenyu\AppData\Local\J2Ddemo\runtime\bin\javaw.exe -jar C:\Users\asemenyu\AppData\Local\J2Ddemo\app\J2Ddemo.jar&amp;quot; command. Launch the app using this shortcut, The &amp;quot;busy&amp;quot; cursor goes away very fast.&lt;br/&gt;
If I launch the app using J2Ddemo.exe from cmd prompt I don&amp;#39;t see the &amp;quot;busy&amp;quot; cursor.</comment>
                            <comment id="14527320" author="adev" created="Sun, 2 Oct 2022 21:16:59 -0700"  >I am getting following error when executing jpackage with the given reproducer. I have Wix 3.11.2 installed on my system&lt;br/&gt;
&lt;br/&gt;
PS C:\test&amp;gt; jpackage --verbose --type msi -i test --main-jar hello.jar --win-per-user-install --win-shortcut --add-modules java.base,java.desktop&lt;br/&gt;
[09:48:35.758] Running candle.exe&lt;br/&gt;
[09:48:35.773] Running C:\Program Files (x86)\WiX Toolset v3.11\bin\candle.exe&lt;br/&gt;
[09:48:36.022] jdk.jpackage.internal.PackagerException: Error: Invalid or unsupported type: [msi]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage/jdk.jpackage.internal.Arguments.generateBundle(Arguments.java:670)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage/jdk.jpackage.internal.Arguments.processArguments(Arguments.java:550)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage/jdk.jpackage.main.Main.execute(Main.java:91)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jpackage/jdk.jpackage.main.Main.main(Main.java:52)&lt;br/&gt;
[09:48:36.022] Detected [candle.exe] version project. but version 3.0 is required.&lt;br/&gt;
[09:48:36.022] Download WiX 3.0 or later from &lt;a href=&quot;https://wixtoolset.org&quot;&gt;https://wixtoolset.org&lt;/a&gt; and add it to the PATH.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5122860">JDK-8327083</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122873">JDK-8327091</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5126398">JDK-8329841</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5130517">JDK-8333115</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5084584">JDK-8294706</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5116158">JDK-8321950</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5056496">JDK-8272328</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="100919" name="build.js" size="2804" author="adev" created="Sun, 2 Oct 2022 21:25:40 -0700"/>
                            <attachment id="100918" name="test.zip" size="1364" author="adev" created="Sun, 2 Oct 2022 21:17:59 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19301"><![CDATA[windows_10]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yozv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17419"><![CDATA[b27]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2192"><![CDATA[jpackage]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>