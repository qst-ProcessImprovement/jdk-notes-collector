<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 15:14:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8299343] Windows: Invalid thread_native_entry declaration</title>
                <link>https://bugs.openjdk.org/browse/JDK-8299343</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>(This is an issue extracted from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8295146&quot; title=&quot;Clean up native code with newer C/C++ language features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8295146&quot;&gt;JDK-8295146&lt;/a&gt;: Clean up native code with newer C/C++ language features.  See &lt;a href=&quot;https://github.com/openjdk/jdk/pull/11081&quot;&gt;https://github.com/openjdk/jdk/pull/11081&lt;/a&gt;.  It&amp;#39;s an enhancement rather than a bug because it isn&amp;#39;t currently causing any known issues.)&lt;br/&gt;
&lt;br/&gt;
Class os::win32 declares `thread_native_entry` to be a friend function. In os_windows.cpp it is defined as a static (file-scoped) function. Those declarations are inconsistent. &amp;quot;A function first declared in a friend declaration has external linkage.&amp;quot; (C++14 11.3/4). It seems Visual Studio versions through 2019 don&amp;#39;t diagnose the inconsistencey, though that may change in the future, especially if we enable more strict compilation modes (such as `-permissive-`).&lt;br/&gt;
&lt;br/&gt;
For other platforms, the corresponding function is file-scoped, and there is no corresponding friend declaration.&lt;br/&gt;
&lt;br/&gt;
There are several ways we could address this.&lt;br/&gt;
&lt;br/&gt;
(1) We could declare the function to be file scoped in the header, though that&amp;#39;s weird. The declaration would be present in every translation unit, but only be defined in os_windows.cpp.  And it nominally pollutes the global namespace of every including file (though name clashes seem unlikely).&lt;br/&gt;
&lt;br/&gt;
(2) We could leave it with external linkage and fix the definition to be non-static.  Again, this nominally pollutes the global namespace.&lt;br/&gt;
&lt;br/&gt;
(3) We could remove the friend declaration, addressing the reasons for it.&lt;br/&gt;
&lt;br/&gt;
The reason for the friendship is to provide the definition with access to the private enum os::win32::Ept and os::win32::exit_process_or_thread. Those could be made public. Alternatively, the function could be changed to be a private static member of os::win32.&lt;br/&gt;
&lt;br/&gt;
There is also a mismatch between the signature and the type where it is used that is currently dealt with via a cast.  That should also be fixed.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5090397">JDK-8299343</key>
            <summary>Windows: Invalid thread_native_entry declaration</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kbarrett">Kim Barrett</assignee>
                                    <reporter username="kbarrett">Kim Barrett</reporter>
                        <labels>
                            <label>cleanup</label>
                            <label>noreg-cleanup</label>
                            <label>os</label>
                    </labels>
                <created>Sat, 24 Dec 2022 16:10:04 -0800</created>
                <updated>Tue, 23 May 2023 11:57:47 -0700</updated>
                            <resolved>Thu, 5 Jan 2023 14:04:15 -0800</resolved>
                                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14549100" author="dukebot" created="Thu, 5 Jan 2023 14:04:14 -0800"  >Changeset: dfdbd0fe&lt;br/&gt;
Author:    Kim Barrett &amp;lt;&lt;a href=&apos;mailto:kbarrett@openjdk.org&apos;&gt;kbarrett@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-05 22:02:45 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/dfdbd0fe7f800257c40fd148bc0a41c8eb826bdf&quot;&gt;https://git.openjdk.org/jdk/commit/dfdbd0fe7f800257c40fd148bc0a41c8eb826bdf&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14547775" author="roboduke" created="Sat, 24 Dec 2022 17:25:44 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11787&quot;&gt;https://git.openjdk.org/jdk/pull/11787&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-25 01:19:29 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5085109">JDK-8295146</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17005"><![CDATA[windows]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zqkr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17315"><![CDATA[b05]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>