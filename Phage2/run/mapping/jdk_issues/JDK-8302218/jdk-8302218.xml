<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 16:44:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8302218] CHeapBitMap::free frees with incorrect size</title>
                <link>https://bugs.openjdk.org/browse/JDK-8302218</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>I&amp;#39;ve found that we crash if we try to use ArrayAllocatorMallocLimit. The cause is that the CHeapBitMap destructor passes down the size to CHeapBitMap::free in &amp;quot;bits&amp;quot; but that function expects the size to be in &amp;quot;words&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
This is a benign in normal runs, because the CHeapBitMap then uses os::free and it ignores the size. However, if you use the experimental ArrayAllocatorMallocLimit flag, then you can force CHeapBitMap to use mmap/munmap instead of malloc/free, and then the JVM will crash.</description>
                <environment></environment>
        <key id="5093844">JDK-8302218</key>
            <summary>CHeapBitMap::free frees with incorrect size</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="iklam">Ioi Lam</assignee>
                                    <reporter username="stefank">Stefan Karlsson</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>memory</label>
                    </labels>
                <created>Fri, 10 Feb 2023 06:26:00 -0800</created>
                <updated>Tue, 28 Nov 2023 13:53:23 -0800</updated>
                            <resolved>Tue, 28 Nov 2023 13:52:38 -0800</resolved>
                                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14629674" author="jwilhelm" created="Tue, 28 Nov 2023 13:51:45 -0800"  >Fix was pushed to 21 while this main issue was targeted to 22. Reset the this issue to fixed in 21 and copied the Robo Duke entry here.&lt;br/&gt;
&lt;br/&gt;
Changeset: f99ad11d&lt;br/&gt;
Author: quadhier &amp;lt;&lt;a href=&apos;mailto:quadhier@163.com&apos;&gt;quadhier@163.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Ioi Lam &amp;lt;&lt;a href=&apos;mailto:iklam@openjdk.org&apos;&gt;iklam@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date: 2023-05-22 16:51:20 +0000&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f99ad11dd11a4d83e5227b246866822e69b38ae7&quot;&gt;https://git.openjdk.org/jdk/commit/f99ad11dd11a4d83e5227b246866822e69b38ae7&lt;/a&gt;</comment>
                            <comment id="14583462" author="xliu" created="Mon, 22 May 2023 13:52:48 -0700"  >I feel sorry I didn&amp;#39;t spot this in the first place &lt;br/&gt;
we refactored free() in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8296139&quot; title=&quot;Make GrowableBitMap the base class of all implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8296139&quot;&gt;&lt;strike&gt;JDK-8296139&lt;/strike&gt;&lt;/a&gt;. The unit changed but we kept the same code in ~CHeapBitMap()&lt;br/&gt;
-  static void free(const Allocator&amp;amp;, bm_word_t* map, idx_t size_in_bits);&lt;br/&gt;
+ void free(bm_word_t* map, idx_t size_in_words) const&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;</comment>
                            <comment id="14583331" author="roboduke" created="Mon, 22 May 2023 05:12:26 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14079&quot;&gt;https://git.openjdk.org/jdk/pull/14079&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-22 12:04:58 +0000</comment>
                            <comment id="14560079" author="mseledtsov" created="Tue, 14 Feb 2023 11:29:34 -0800"  >ILW = MLM = P4</comment>
                            <comment id="14559147" author="stefank" created="Fri, 10 Feb 2023 06:29:51 -0800"  >I think this bug was introduced with:&lt;br/&gt;
commit 1b94ae13d3940951134a1010500fd95001b8cb15&lt;br/&gt;
Author: Xin Liu &amp;lt;&lt;a href=&apos;mailto:xliu@openjdk.org&apos;&gt;xliu@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:   Wed Nov 9 19:51:54 2022 +0000&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;8296139: Make GrowableBitMap the base class of all implementations&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Reviewed-by: aboldtch, stefank, simonis&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5101496">JDK-8308580</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5086420">JDK-8296139</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30buj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17436"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>