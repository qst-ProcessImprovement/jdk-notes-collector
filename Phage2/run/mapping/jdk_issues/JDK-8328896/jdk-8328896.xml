<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:53:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8328896] Fontmetrics for large Fonts has zero width</title>
                <link>https://bugs.openjdk.org/browse/JDK-8328896</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Occurs on Windows and Linux.&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
In Java 17.0.10 the font metrics returns a string width of zero for large font size. Moreover, every subsequent call for that font metrics with &amp;quot;normal&amp;quot; size will also return zero width, unless that size was requested before the &amp;quot;breaking&amp;quot; one.&lt;br/&gt;
&lt;br/&gt;
Seems to be related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8233097&quot;&gt;https://bugs.openjdk.org/browse/JDK-8233097&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 11&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Build and run the source code&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 100,000 width 24,744.094&lt;br/&gt;
size 7 width 33.845&lt;br/&gt;
size 8 width 38.68&lt;br/&gt;
size 9 width 43.515&lt;br/&gt;
size 10 width 48.35&lt;br/&gt;
size 11 width 53.185&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 14 width 67.689&lt;br/&gt;
size 16 width 77.359&lt;br/&gt;
size 18 width 87.029&lt;br/&gt;
size 20 width 96.699&lt;br/&gt;
size 24 width 116.039&lt;br/&gt;
ACTUAL -&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 100,000 width 0&lt;br/&gt;
size 7 width 0&lt;br/&gt;
size 8 width 0&lt;br/&gt;
size 9 width 0&lt;br/&gt;
size 10 width 0&lt;br/&gt;
size 11 width 0&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 14 width 0&lt;br/&gt;
size 16 width 0&lt;br/&gt;
size 18 width 0&lt;br/&gt;
size 20 width 0&lt;br/&gt;
size 24 width 0&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String testString = &amp;quot;Test String&amp;quot;;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Font font = new Font(&amp;quot;SansSerif&amp;quot;, Font.PLAIN, 12);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FontRenderContext frc = new FontRenderContext(null, false, true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(MessageFormat.format(&amp;quot;size {0} width {1}&amp;quot;, font.getSize(), font.getStringBounds(testString, frc).getWidth()));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// breaking size&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;font = font.deriveFont(100000f);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(MessageFormat.format(&amp;quot;size {0} width {1}&amp;quot;, font.getSize(), font.getStringBounds(testString, frc).getWidth()));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;float[] sizes = new float[] {7, 8, 9, 10, 11, 12, 14, 16, 18, 20, 24};&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (float size: sizes) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;font = font.deriveFont(size);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(MessageFormat.format(&amp;quot;size {0} width {1}&amp;quot;, font.getSize(), font.getStringBounds(testString, frc).getWidth()));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
None, unless using JDK11 is an option&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5124861">JDK-8328896</key>
            <summary>Fontmetrics for large Fonts has zero width</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prr">Philip Race</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>dcspks</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>regression</label>
                            <label>reproducer-yes</label>
                            <label>sn_167</label>
                            <label>sn_168</label>
                            <label>webbug</label>
                    </labels>
                <created>Thu, 21 Mar 2024 09:15:55 -0700</created>
                <updated>Thu, 7 Aug 2025 00:56:06 -0700</updated>
                            <resolved>Wed, 24 Apr 2024 10:56:42 -0700</resolved>
                                    <version>14</version>
                    <version>17.0.5</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14685679" author="roboduke" created="Fri, 28 Jun 2024 04:21:58 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2826&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2826&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-28 11:14:50 +0000</comment>
                            <comment id="14685284" author="roboduke" created="Thu, 27 Jun 2024 00:55:01 -0700"  >[jdk17u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 17.0.13-oracle. Applies cleanly and tier 1-4 have passed.</comment>
                            <comment id="14684897" author="roboduke" created="Wed, 26 Jun 2024 02:55:14 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2640&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2640&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-26 09:49:38 +0000</comment>
                            <comment id="14684754" author="roboduke" created="Tue, 25 Jun 2024 14:28:18 -0700"  >[jdk21u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 21.0.5-oracle. Applies cleanly and included test has passed.</comment>
                            <comment id="14684624" author="roboduke" created="Tue, 25 Jun 2024 06:41:34 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/792&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/792&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-25 13:36:55 +0000</comment>
                            <comment id="14667778" author="dukebot" created="Wed, 24 Apr 2024 10:56:41 -0700"  >Changeset: 25871af3&lt;br/&gt;
Author:    Phil Race &amp;lt;&lt;a href=&apos;mailto:prr@openjdk.org&apos;&gt;prr@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-04-24 17:54:10 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/25871af36b1397bdc3715ab0edc589f0483ea0b1&quot;&gt;https://git.openjdk.org/jdk/commit/25871af36b1397bdc3715ab0edc589f0483ea0b1&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14664153" author="roboduke" created="Tue, 9 Apr 2024 12:11:45 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18703&quot;&gt;https://git.openjdk.org/jdk/pull/18703&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-09 18:50:17 +0000</comment>
                            <comment id="14661116" author="prr" created="Wed, 27 Mar 2024 16:10:53 -0700"  >A call to set up freetype with the large size fails. As a result we incorrectly flag a problem with the scaler so it installs the null scaler.&lt;br/&gt;
The fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8233097&quot;&gt;https://bugs.openjdk.org/browse/JDK-8233097&lt;/a&gt; resolved an earlier problem with getting zero metrics, but that was at sizes&lt;br/&gt;
that freetype was willing to accept. Once you get to point sizes like 100000 FT just flags an error.&lt;br/&gt;
&lt;br/&gt;
The JDK handling of this needs to be limited to the specific size / strike, not the whole font.&lt;br/&gt;
TBD: what to report if FT won&amp;#39;t handle it ? Is it reasonable to accept a font size of 100000 ?&lt;br/&gt;
Perhaps we can use a smaller size and apply a scale afterwards.</comment>
                            <comment id="14659996" author="pardesha" created="Mon, 25 Mar 2024 03:14:40 -0700"  >As per submission, in Windows and Linux, with JDK 17.0.10, font metrics return zero width for large font sizes. Subsequent calls for normal size also yield zero width unless it is requested prior to the problematic size. The issue seems to be related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8233097&quot; title=&quot;Fontmetrics for large Fonts has zero width&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8233097&quot;&gt;&lt;strike&gt;JDK-8233097&lt;/strike&gt;&lt;/a&gt;, which has a fix to an earlier issue reported with JDK 11.0.5 where the font metrics return a string width of zero for large (Fontsize &amp;gt; 1950) objects. The fix was integrated into JDK 11.0.5.0.3 and 13.0.2.&lt;br/&gt;
&lt;br/&gt;
The new aspect of the case is that, even concerning normal size, it produces zero width unless specifically requested prior to encountering the problematic size.&lt;br/&gt;
&lt;br/&gt;
Checked this with the attached test case against reported JDK version 17.0.10 and could confirm the issue as reported. Detailed verification confirms that the issue started appearing from JDK 17.0.5 b01 onwards, including JDK versions 21.0.2 GA build 13, JDK 22 GA build 36, as well as JDK 23 ea b15.&lt;br/&gt;
==============================================================&lt;br/&gt;
&lt;br/&gt;
Checked on Windows 11 (64-bit) with respective JDK versions:&lt;br/&gt;
Pass:&lt;br/&gt;
JDK 11 b28, JDK 14.0.2 b11, JDK 15.0.2 b07, JDK 16.0.2 b07, JDK 17 b35, JDK 17.0.4 b11, JDK 17.0.4.1.1 b01, JDK 14.0.2, JDK 15.0.2 b07, JDK 16.0.2 b07, JDK 17 b35, JDk 17.0.4 b11, JDK 17.0.4.1.1 b01&lt;br/&gt;
&lt;br/&gt;
Fail:&lt;br/&gt;
JDK 11.0.22 b09, JDK 17.0.5.b01, JDK 17.0.10 b11,  JDK 21.0.2 GA build 13, JDK 22 GA build 36 and JDK 23 ea b15&lt;br/&gt;
&lt;br/&gt;
Out put with JDK 11 b28 .... JDK 17.0.4.1.1. b01:&lt;br/&gt;
$ java FontMetricsExample&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 100,000 width 24,744.094&lt;br/&gt;
size 7 width 33.845&lt;br/&gt;
size 8 width 38.68&lt;br/&gt;
size 9 width 43.515&lt;br/&gt;
size 10 width 48.35&lt;br/&gt;
size 11 width 53.185&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 14 width 67.689&lt;br/&gt;
size 16 width 77.359&lt;br/&gt;
size 18 width 87.029&lt;br/&gt;
size 20 width 96.699&lt;br/&gt;
size 24 width 116.039&lt;br/&gt;
&lt;br/&gt;
Output with JDK 11.0.22 b09 ....  JDK 17.0.5.b01, JDK 17.0.10 b11, JDK 21.0.2 GA build 13, JDK 22 GA build 36 and JDK 23 ea b15:&lt;br/&gt;
$ java FontMetricsExample&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 100,000 width 0&lt;br/&gt;
size 7 width 0&lt;br/&gt;
size 8 width 0&lt;br/&gt;
size 9 width 0&lt;br/&gt;
size 10 width 0&lt;br/&gt;
size 11 width 0&lt;br/&gt;
size 12 width 58.02&lt;br/&gt;
size 14 width 0&lt;br/&gt;
size 16 width 0&lt;br/&gt;
size 18 width 0&lt;br/&gt;
size 20 width 0&lt;br/&gt;
size 24 width 0&lt;br/&gt;
=========================================================================</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5132587">JDK-8334903</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132800">JDK-8335109</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132850">JDK-8335157</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132920">JDK-8335219</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5133030">JDK-8335316</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5002963">JDK-8233097</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5159511">JDK-8357672</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="108725" name="FontMetricsExample.java" size="1025" author="pardesha" created="Mon, 25 Mar 2024 03:16:17 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="19703">14</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19301"><![CDATA[windows_10]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35k6b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="197"><![CDATA[2d]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>