<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:36:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8298215] gc/g1/TestVerifyGCType.java failed with &quot;Missing expected verification pattern Verifying After GC for: Pause Young (Prepare Mixed): expected true, was false&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8298215</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK20 CI:&lt;br/&gt;
&lt;br/&gt;
gc/g1/TestVerifyGCType.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
----------System.err:(15/939)----------&lt;br/&gt;
java.lang.RuntimeException: Missing expected verification pattern Verifying After GC for: Pause Young (Prepare Mixed): expected true, was false&lt;br/&gt;
	at jdk.test.lib.Asserts.fail(Asserts.java:594)&lt;br/&gt;
	at jdk.test.lib.Asserts.assertTrue(Asserts.java:486)&lt;br/&gt;
	at gc.g1.TestVerifyGCType.verifyType(TestVerifyGCType.java:202)&lt;br/&gt;
	at gc.g1.TestVerifyGCType.verifyCollection(TestVerifyGCType.java:197)&lt;br/&gt;
	at gc.g1.TestVerifyGCType.testYoungEvacFail(TestVerifyGCType.java:135)&lt;br/&gt;
	at gc.g1.TestVerifyGCType.main(TestVerifyGCType.java:57)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1599)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
result: Failed. Execution failed: `main&amp;#39; threw exception: java.lang.RuntimeException: Missing expected verification pattern Verifying After GC for: Pause Young (Prepare Mixed): expected true, was false&lt;br/&gt;
&lt;br/&gt;
Starting this as a P2 since this is Tier1 failure.</description>
                <environment></environment>
        <key id="5089034">JDK-8298215</key>
            <summary>gc/g1/TestVerifyGCType.java failed with &quot;Missing expected verification pattern Verifying After GC for: Pause Young (Prepare Mixed): expected true, was false&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kbarrett">Kim Barrett</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>gc-g1</label>
                            <label>gc-pending-review</label>
                            <label>problemlist</label>
                            <label>tier1</label>
                            <label>tier2</label>
                            <label>tier3</label>
                    </labels>
                <created>Tue, 6 Dec 2022 12:48:03 -0800</created>
                <updated>Fri, 20 Jan 2023 19:31:57 -0800</updated>
                            <resolved>Mon, 19 Dec 2022 16:15:42 -0800</resolved>
                                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>20</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                                                            <comments>
                            <comment id="14553258" author="lmesnik" created="Fri, 20 Jan 2023 19:31:57 -0800"  >Stop failing in CI.</comment>
                            <comment id="14546693" author="dukebot" created="Mon, 19 Dec 2022 16:15:41 -0800"  >Changeset: ea40f299&lt;br/&gt;
Author:    Kim Barrett &amp;lt;&lt;a href=&apos;mailto:kbarrett@openjdk.org&apos;&gt;kbarrett@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2022-12-20 00:13:25 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk20/commit/ea40f299397f19f1bbedd4eeb4d24802a709a912&quot;&gt;https://git.openjdk.org/jdk20/commit/ea40f299397f19f1bbedd4eeb4d24802a709a912&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14546307" author="roboduke" created="Sun, 18 Dec 2022 14:47:40 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20/pull/52&quot;&gt;https://git.openjdk.org/jdk20/pull/52&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-18 22:42:11 +0000</comment>
                            <comment id="14546268" author="kbarrett" created="Sat, 17 Dec 2022 15:00:55 -0800"  >The problem is a related to the policy change from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297186&quot; title=&quot;G1 triggers unnecessary full GCs when heap utilization is low&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297186&quot;&gt;&lt;strike&gt;JDK-8297186&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
The test is failing because there isn&amp;#39;t a verification step at the end of the &amp;quot;Prepare Mixed&amp;quot; collection when the test is only requesting verification after an evacuation failure. This is happening because there wasn&amp;#39;t an evacuation failure.  There wasn&amp;#39;t an evacuation failure because the mutator didn&amp;#39;t allocate anything before triggering another GC.&lt;br/&gt;
&lt;br/&gt;
The GC set the young length to include an eden regions.  However, we now (as of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8137022&quot; title=&quot;Concurrent refinement thread adjustment and (de-)activation suboptimal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8137022&quot;&gt;&lt;strike&gt;JDK-8137022&lt;/strike&gt;&lt;/a&gt;) revise the young length almost immediately after coming out of the GC, and &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297186&quot; title=&quot;G1 triggers unnecessary full GCs when heap utilization is low&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297186&quot;&gt;&lt;strike&gt;JDK-8297186&lt;/strike&gt;&lt;/a&gt; allows there to be no eden regions in that case.  So we revise the young length to have no eden regions, then allocate and trigger a GC.  That GC doesn&amp;#39;t have anything to evacuate, so doesn&amp;#39;t have any evacuation failures.  And so doesn&amp;#39;t do the verification step, causing the test to fail.&lt;br/&gt;
&lt;br/&gt;
This situation seems to very intermittent.  However, with my proposed changes for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8293824&quot; title=&quot;gc/whitebox/TestConcMarkCycleWB.java failed &amp;quot;RuntimeException: assertTrue: expected true, was false&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8293824&quot;&gt;&lt;strike&gt;JDK-8293824&lt;/strike&gt;&lt;/a&gt; (&lt;a href=&quot;https://github.com/openjdk/jdk/pull/11435&quot;&gt;https://github.com/openjdk/jdk/pull/11435&lt;/a&gt;) this failure becomes very consistent.&lt;br/&gt;
&lt;br/&gt;
This can be fixed by ensuring the desired young length always includes at least one eden region, regardless of whether the update is occurring at the end of a GC or during the mutator phase.&lt;br/&gt;
</comment>
                            <comment id="14545235" author="kbarrett" created="Tue, 13 Dec 2022 19:41:30 -0800"  >The failure seems to be pretty rare.  Only 3 occurrences in Oracle&amp;#39;s CI (20/21) so far (1 week since the first occurrence).  I&amp;#39;ve run the test 700 times each on linux-x64 and linux-aarch64 without any failures.&lt;br/&gt;
&lt;br/&gt;
Not sure what might have triggered it to start failing, as the obviously relevant code seems to have been stable for a while. One possibility is a subtle effect of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297186&quot; title=&quot;G1 triggers unnecessary full GCs when heap utilization is low&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297186&quot;&gt;&lt;strike&gt;JDK-8297186&lt;/strike&gt;&lt;/a&gt;, which was pushed a few hours before the first CI occurrence.&lt;br/&gt;
&lt;br/&gt;
The failures I have all look the same, failing with -XX:VerifyGCAfter=young-evac-fail.  It turns out my in-development changes to fix &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8293824&quot; title=&quot;gc/whitebox/TestConcMarkCycleWB.java failed &amp;quot;RuntimeException: assertTrue: expected true, was false&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8293824&quot;&gt;&lt;strike&gt;JDK-8293824&lt;/strike&gt;&lt;/a&gt; make this test fail pretty reliably.&lt;br/&gt;
&lt;br/&gt;
I changed the output from a failure in the verifyType helper to include the log data, to get more information about what might be going wrong.  It looks like what is happening is that after the concurrent cycle completes there is an &amp;quot;ordinary&amp;quot; young GC (not triggered by the test program via WhiteBox) that takes the &amp;quot;Prepare Mixed&amp;quot; slot, and this young GC doesn&amp;#39;t have any evacuation failures.  Because it doesn&amp;#39;t have any evacuation failures (even though command line arguments try to ensure all young GCs will have some), it doesn&amp;#39;t print the expected verification log message for that GC, failing the test.&lt;br/&gt;
&lt;br/&gt;
Not sure yet why this unrequested GC doesn&amp;#39;t produce any evacuation failures.&lt;br/&gt;
</comment>
                            <comment id="14545210" author="dcubed" created="Tue, 13 Dec 2022 13:37:20 -0800"  >Spotted in my macosx-aarch64 stress run with jdk-20+27 bits:&lt;br/&gt;
&lt;br/&gt;
$ unzip -l jdk-20+27_macosx-aarch64.8298215.zip&lt;br/&gt;
Archive:  jdk-20+27_macosx-aarch64.8298215.zip&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Length      Date    Time    Name&lt;br/&gt;
---------  ---------- -----   ----&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;40104  12-11-2022 10:47   jdk-20+27_3/failures.macosx-aarch64/TestVerifyGCType.jtr.fastdebug&lt;br/&gt;
---------                     -------&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;40104                     1 file</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5090114">JDK-8299109</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5087771">JDK-8297186</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5089606">JDK-8298702</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="102013" name="jdk-20+27_macosx-aarch64.8298215.zip" size="4721" author="dcubed" created="Tue, 13 Dec 2022 13:37:15 -0800"/>
                    </attachments>
                <subtasks>
                                              <subtask id="5089828">JDK-8298888</subtask>
                                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zigr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17413"><![CDATA[b29]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>