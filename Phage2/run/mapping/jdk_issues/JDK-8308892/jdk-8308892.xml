<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:05:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8308892] Bad graph detected in build_loop_late after JDK-8305635</title>
                <link>https://bugs.openjdk.org/browse/JDK-8308892</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK21 CI:&lt;br/&gt;
&lt;br/&gt;
java/lang/String/LiteralReplace.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
----------stdout:(21/1124)*----------&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ffedf8120e2, pid=42888, tid=47848&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (21.0+25) (build 21-ea+25-LTS-2128)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (21-ea+25-LTS-2128, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, windows-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [jvm.dll+0x5f20e2]  PhaseIdealLoop::build_loop_late_post_work+0x272&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: C:\\sb\\prod\\1685037075\\testoutput\\test-support\\jtreg_open_test_jdk_tier1_part1\\scratch\\1\\hs_err_pid42888.mdmp&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# C:\\sb\\prod\\1685037075\\testoutput\\test-support\\jtreg_open_test_jdk_tier1_part1\\scratch\\1\\hs_err_pid42888.log&lt;br/&gt;
#&lt;br/&gt;
# Compiler replay data is saved as:&lt;br/&gt;
# C:\\sb\\prod\\1685037075\\testoutput\\test-support\\jtreg_open_test_jdk_tier1_part1\\scratch\\1\\replay_pid42888.log&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
result: Error. Agent communication error: java.net.SocketException: Connection reset; check console log for any additional details&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s the crashing thread&amp;#39;s stack:&lt;br/&gt;
&lt;br/&gt;
---------------  T H R E A D  ---------------&lt;br/&gt;
&lt;br/&gt;
Current thread (0x0000016054ef6100):  JavaThread &amp;quot;C2 CompilerThread0&amp;quot; daemon [_thread_in_native, id=47848, stack(0x0000005efc300000,0x0000005efc400000) (1024K)]&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:  87063 4915       4       java.util.regex.Pattern$StartS::match (138 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x0000005efc300000,0x0000005efc400000],  sp=0x0000005efc3face0,  free space=1003k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [jvm.dll+0x5f20e2]  PhaseIdealLoop::build_loop_late_post_work+0x272  (loopnode.cpp:6064)&lt;br/&gt;
V  [jvm.dll+0x5f1e14]  PhaseIdealLoop::build_loop_late+0x214  (loopnode.cpp:5910)&lt;br/&gt;
V  [jvm.dll+0x5f0f98]  PhaseIdealLoop::build_and_optimize+0x708  (loopnode.cpp:4407)&lt;br/&gt;
V  [jvm.dll+0x251fc4]  PhaseIdealLoop::optimize+0x114  (loopnode.hpp:1201)&lt;br/&gt;
V  [jvm.dll+0x24a664]  Compile::Optimize+0xcb4  (compile.cpp:2359)&lt;br/&gt;
V  [jvm.dll+0x247ede]  Compile::Compile+0xd4e  (compile.cpp:840)&lt;br/&gt;
V  [jvm.dll+0x1c9641]  C2Compiler::compile_method+0xc1  (c2compiler.cpp:121)&lt;br/&gt;
V  [jvm.dll+0x257ab9]  CompileBroker::invoke_compiler_on_method+0x739  (compileBroker.cpp:2268)&lt;br/&gt;
V  [jvm.dll+0x25609a]  CompileBroker::compiler_thread_loop+0x26a  (compileBroker.cpp:1945)&lt;br/&gt;
V  [jvm.dll+0x3ee546]  JavaThread::run+0x116  (javaThread.cpp:704)&lt;br/&gt;
V  [jvm.dll+0x7f8558]  Thread::call_run+0xc8  (thread.cpp:227)&lt;br/&gt;
V  [jvm.dll+0x6c344d]  os::win32::thread_native_entry+0x7d  (os_windows.cpp:551)&lt;br/&gt;
C  [ucrtbase.dll+0x1fb80]&lt;br/&gt;
C  [KERNEL32.DLL+0x84d4]&lt;br/&gt;
C  [ntdll.dll+0x51791]&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
With a debug build:&lt;br/&gt;
&lt;br/&gt;
Bad graph detected in build_loop_late&lt;br/&gt;
n:  1891  Bool  === _ 1890  [[ 1883 ]] [ne] !orig=[1018] !jvms: Pattern::lambda$negate$7 @ bci:2 (line 5818) 0x800000032::is @ bci:5 Pattern::lambda$and$2 @ bci:12 (line 5795) 0x0000000801061988::is @ bci:9 Pattern$CharProperty::match @ bci:37 (line 4109) Pattern$StartS::match @ bci:44 (line 3820)&lt;br/&gt;
early(n):  1934  IfFalse  === 1933  [[ 1827 591 ]] #0 !orig=[1818]&lt;br/&gt;
n-&amp;gt;in(1):  1890  CmpP  === _ 1006 25  [[ 1891 ]]  !orig=[1017] !jvms: Pattern::lambda$negate$7 @ bci:2 (line 5818) 0x800000032::is @ bci:5 Pattern::lambda$and$2 @ bci:12 (line 5795) 0x0000000801061988::is @ bci:9 Pattern$CharProperty::match @ bci:37 (line 4109) Pattern$StartS::match @ bci:44 (line 3820)&lt;br/&gt;
early(n-&amp;gt;in(1)):  1934  IfFalse  === 1933  [[ 1827 591 ]] #0 !orig=[1818]&lt;br/&gt;
n-&amp;gt;in(1)-&amp;gt;in(1):  1006  DecodeN  === _ 1005  [[ 1029 1890 ]]  #java/lang/Object *  Oop:java/lang/Object * !orig=[1889],... !jvms: 0x800000032::is @ bci:1 Pattern::lambda$and$2 @ bci:12 (line 5795) 0x0000000801061988::is @ bci:9 Pattern$CharProperty::match @ bci:37 (line 4109) Pattern$StartS::match @ bci:44 (line 3820)&lt;br/&gt;
early(n-&amp;gt;in(1)-&amp;gt;in(1)):  1934  IfFalse  === 1933  [[ 1827 591 ]] #0 !orig=[1818]&lt;br/&gt;
n-&amp;gt;in(1)-&amp;gt;in(2):    25  ConP  === 0  [[ 26 34 140 1178 215 1890 1871 1815 1171 1909 1834 1265 1917 1272 ]]  #null&lt;br/&gt;
early(n-&amp;gt;in(1)-&amp;gt;in(2)):     0  Root  === 0 38 1641 93 1648 124 1614 1579 204 1182 1491 1476 376 391 1107 481 518 565 1649 1200 1293 1276 762 832 856 917 1077 1237  [[ 0 1 3 25 33 40 41 54 55 75 88 108 136 153 157 166 231 1620 316 1619 355 371 399 1299 505 1259 1256 585 650 715 1187 726 1033 971 731 736 748 757 800 801 802 803 813 820 844 860 865 902 905 1688 1715 1724 1728 1923 ]] &lt;br/&gt;
&lt;br/&gt;
LCA(n):  1926  IfFalse  === 1925  [[ 1883 977 ]] #0 !orig=[1874]&lt;br/&gt;
n-&amp;gt;out(0):  1883  If  === 1926 1891  [[ 1884 1885 ]] P=0,999999, C=-1,000000&lt;br/&gt;
n-&amp;gt;out(0)-&amp;gt;out(0):  1884  IfTrue  === 1883  [[ 1941 1029 ]] #1&lt;br/&gt;
n-&amp;gt;out(0)-&amp;gt;out(1):  1885  IfFalse  === 1883  [[ 1846 ]] #0&lt;br/&gt;
&lt;br/&gt;
idoms of early &amp;quot;1934 IfFalse&amp;quot;:&lt;br/&gt;
idom[21]:   1926  IfFalse&lt;br/&gt;
idom[20]:   1883  If&lt;br/&gt;
idom[19]:   1884  IfTrue&lt;br/&gt;
idom[18]:   1941  If&lt;br/&gt;
idom[17]:   1942  IfFalse&lt;br/&gt;
idom[16]:   1902  If&lt;br/&gt;
idom[15]:   1903  IfTrue&lt;br/&gt;
idom[14]:   1911  If&lt;br/&gt;
idom[13]:   1912  IfTrue&lt;br/&gt;
idom[12]:     84  ParsePredicate&lt;br/&gt;
idom[11]:     94  IfTrue&lt;br/&gt;
idom[10]:   1785  If&lt;br/&gt;
idom[9]:    1786  IfTrue&lt;br/&gt;
idom[8]:    1929  If&lt;br/&gt;
idom[7]:    1930  IfFalse&lt;br/&gt;
idom[6]:    1797  If&lt;br/&gt;
idom[5]:    1798  IfTrue&lt;br/&gt;
idom[4]:    1945  If&lt;br/&gt;
idom[3]:    1946  IfFalse&lt;br/&gt;
idom[2]:    1809  If&lt;br/&gt;
idom[1]:    1810  IfTrue&lt;br/&gt;
idom[0]:    1933  If&lt;br/&gt;
n:          1934  IfFalse&lt;br/&gt;
&lt;br/&gt;
idoms of (wrong) LCA &amp;quot;1926 IfFalse&amp;quot;:&lt;br/&gt;
n:         1926  IfFalse&lt;br/&gt;
&lt;br/&gt;
Real LCA of early &amp;quot;1934 IfFalse&amp;quot; (idom[21]) and wrong LCA &amp;quot;1926 IfFalse&amp;quot;:&lt;br/&gt;
&amp;nbsp;1926  IfFalse  === 1925  [[ 1883 977 ]] #0 !orig=[1874]&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S172117/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/79c14d5a-c3a8-484b-8985-95db5d2b9d8b/runs/8a9050ac-9e8d-4077-97c9-481f59b3e962/workspace/open/src/hotspot/share/opto/loopnode.cpp:6060), pid=3591450, tid=3591463&lt;br/&gt;
#  assert(false) failed: Bad graph detected in build_loop_late&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (21.0+25) (fastdebug build 21-ea+25-LTS-2128)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 21-ea+25-LTS-2128, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x1295a04]  PhaseIdealLoop::build_loop_late_post_work(Node*, bool)+0x904&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5101853">JDK-8308892</key>
            <summary>Bad graph detected in build_loop_late after JDK-8305635</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chagedorn">Christian Hagedorn</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>c2</label>
                            <label>intermittent</label>
                            <label>oracle-triage-11</label>
                            <label>oracle-triage-17</label>
                            <label>oracle-triage-21</label>
                            <label>regression</label>
                            <label>tier1</label>
                    </labels>
                <created>Thu, 25 May 2023 11:36:26 -0700</created>
                <updated>Tue, 11 Jul 2023 05:45:45 -0700</updated>
                            <resolved>Fri, 2 Jun 2023 05:02:55 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14587103" author="dcubed" created="Mon, 5 Jun 2023 09:02:20 -0700"  >Here&amp;#39;s the log files from my jdk-21+25 stress testing sighting on macosx-aarch64:&lt;br/&gt;
&lt;br/&gt;
$ unzip -l jdk-21+25_macosx-aarch64.8308892.zip&lt;br/&gt;
Archive:  jdk-21+25_macosx-aarch64.8308892.zip&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Length      Date    Time    Name&lt;br/&gt;
---------  ---------- -----   ----&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;262158  06-01-2023 20:53   jdk-21+25_1/failures.macosx-aarch64/LiteralReplace.jtr.slowdebug&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;103761  06-01-2023 20:53   jdk-21+25_1/failures.macosx-aarch64/hs_err_pid44589.log&lt;br/&gt;
---------                     -------&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;365919                     2 files</comment>
                            <comment id="14586688" author="dcubed" created="Fri, 2 Jun 2023 08:35:11 -0700"  >The fix for this bug is integrated in jdk-21+26-2241.</comment>
                            <comment id="14586593" author="dukebot" created="Fri, 2 Jun 2023 05:02:54 -0700"  >Changeset: 7dbdad50&lt;br/&gt;
Author:    Christian Hagedorn &amp;lt;&lt;a href=&apos;mailto:chagedorn@openjdk.org&apos;&gt;chagedorn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-02 12:00:11 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/7dbdad50a616abb01d60ddd53c1bc464cf8c5eb3&quot;&gt;https://git.openjdk.org/jdk/commit/7dbdad50a616abb01d60ddd53c1bc464cf8c5eb3&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14585059" author="roboduke" created="Sun, 28 May 2023 15:12:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14196&quot;&gt;https://git.openjdk.org/jdk/pull/14196&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-28 22:06:42 +0000</comment>
                            <comment id="14584860" author="chagedorn" created="Fri, 26 May 2023 01:59:31 -0700"  >ILW = C2 assert due to bad graph, intermittent in tier1, disable compilation of affected method = HMM = P2</comment>
                            <comment id="14584859" author="chagedorn" created="Fri, 26 May 2023 01:58:36 -0700"  >I&amp;#39;ll have a look. Seems to be quite intermittent as I&amp;#39;ve never hit that before in my testing.</comment>
                            <comment id="14584854" author="thartmann" created="Fri, 26 May 2023 01:53:42 -0700"  >Christian, please have a look.</comment>
                            <comment id="14584853" author="thartmann" created="Fri, 26 May 2023 01:53:17 -0700"  >I can reproduce this with replay compilation and the attached replay file. It&amp;#39;s a regression from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8305635&quot; title=&quot;Replace Parse Predicate IfNode with new ParsePredicateNode and route predicate queries through dedicated classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8305635&quot;&gt;&lt;strike&gt;JDK-8305635&lt;/strike&gt;&lt;/a&gt;.</comment>
                            <comment id="14584634" author="dlong" created="Thu, 25 May 2023 12:34:29 -0700"  >This looks like a &amp;quot;normal&amp;quot; crash to me, and probably not related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8258825&quot; title=&quot;strange crashes with applications/jcstress on AMD EPYC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8258825&quot;&gt;JDK-8258825&lt;/a&gt; even though it happened on EPYC.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5102058">JDK-8309066</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5097950">JDK-8305635</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5102058">JDK-8309066</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="104191" name="jdk-21+25_macosx-aarch64.8308892.zip" size="45244" author="dcubed" created="Mon, 5 Jun 2023 09:02:14 -0700"/>
                            <attachment id="104033" name="replay_pid42888.log" size="377957" author="thartmann" created="Fri, 26 May 2023 01:47:56 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31odv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>