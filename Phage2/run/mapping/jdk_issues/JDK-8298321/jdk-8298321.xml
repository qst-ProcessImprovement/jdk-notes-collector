<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:39:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8298321] 2 File Leak defect groups in 2 files</title>
                <link>https://bugs.openjdk.org/browse/JDK-8298321</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Fixing 2 file leak warnings:&lt;br/&gt;
1) DirectivesParser::parse_from_file_inner() in open/src/hotspot/share/compiler/directivesParser.cpp&lt;br/&gt;
2) mmap_attach_shared() in open/src/hotspot/os/posix/perfMemory_posix.cpp</description>
                <environment></environment>
        <key id="5089151">JDK-8298321</key>
            <summary>2 File Leak defect groups in 2 files</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ccheung">Calvin Cheung</assignee>
                                    <reporter username="shadowbug">Shadow Bug</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Dec 2022 12:08:13 -0800</created>
                <updated>Tue, 17 Jan 2023 12:07:17 -0800</updated>
                            <resolved>Wed, 11 Jan 2023 09:51:03 -0800</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14550426" author="dukebot" created="Wed, 11 Jan 2023 09:51:01 -0800"  >Changeset: 9c1e98da&lt;br/&gt;
Author:    Calvin Cheung &amp;lt;&lt;a href=&apos;mailto:ccheung@openjdk.org&apos;&gt;ccheung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-11 17:48:36 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/9c1e98dac54ed2ce169f3f3df05bc80052f6a217&quot;&gt;https://git.openjdk.org/jdk/commit/9c1e98dac54ed2ce169f3f3df05bc80052f6a217&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14549730" author="roboduke" created="Mon, 9 Jan 2023 11:59:35 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11909&quot;&gt;https://git.openjdk.org/jdk/pull/11909&lt;/a&gt;&lt;br/&gt;
Date: 2023-01-09 19:34:55 +0000</comment>
                            <comment id="14549361" author="ccheung" created="Fri, 6 Jan 2023 15:56:47 -0800"  >More details on the 2 issues mentioned in the description:&lt;br/&gt;
&lt;br/&gt;
1)&lt;br/&gt;
bool DirectivesParser::parse_from_file_inner(const char* filename, outputStream* stream) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;struct stat st;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;ResourceMark rm;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;if (os::stat(filename, &amp;amp;st) == 0) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// found file, open it&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int file_handle = os::open(filename, 0, 0);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (file_handle != -1) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// read contents into resource array&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;char* buffer = NEW_RESOURCE_ARRAY(char, st.st_size+1);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ssize_t num_read = ::read(file_handle, (char*) buffer, st.st_size);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (num_read &amp;gt;= 0) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;buffer[num_read] = &amp;#39;\0&amp;#39;;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// close file&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;::close(file_handle);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return parse_string(buffer, stream) &amp;gt; 0;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;return false;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
The file_handle should also be closed for the case (num_read &amp;lt; 0).&lt;br/&gt;
&lt;br/&gt;
2)&lt;br/&gt;
static void mmap_attach_shared(int vmid, char** addr, size_t* sizep, TRAPS) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;// We don&amp;#39;t use CHECK as we need to free the strings even if an exception occurred.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;int fd = open_sharedmem_file(filename, file_flags, THREAD);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;// free the c heap resources that are no longer needed&lt;br/&gt;
&amp;nbsp;&amp;nbsp;FREE_C_HEAP_ARRAY(char, luser);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;FREE_C_HEAP_ARRAY(char, dirname);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;FREE_C_HEAP_ARRAY(char, filename);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;if (fd == OS_ERR || HAS_PENDING_EXCEPTION) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
A static analysis tool gives a warning that the fd is not closed under the conditions HAS_PENDING_EXCEPTION and fd != OS_ERR.&lt;br/&gt;
It is ok because in open_sharedmem_file(), if there&amp;#39;s an exception, fd always equals OS_ERR.&lt;br/&gt;
For clarity, the HAS_PENDING_EXCEPTION condition should be removed from the &amp;quot;if&amp;quot; statement.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5080084">JDK-8291067</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17019"><![CDATA[other]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zj6r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17315"><![CDATA[b05]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>