<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:56:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8330027] Identity hashes of archived objects must be based on a reproducible random seed</title>
                <link>https://bugs.openjdk.org/browse/JDK-8330027</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>CDS archive contains archived objects with identity hashes. &lt;br/&gt;
&lt;br/&gt;
These hashes are deliberately preserved or even generated during dumping. They are generated based on a seed that is initialized randomly on a per-thread basis. These generations preceede CDS dump initialization, so they are not affected by the init_random call there or by the changes of  &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8323900&quot; title=&quot;Avoid calling os::init_random() in CDS static dump&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8323900&quot;&gt;&lt;strike&gt;JDK-8323900&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
A random seed will not work for dumping archives since it prevents reproducible archive generation. Therefore, when dumping, these seeds must be initiated in a reproducible way.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5126598">JDK-8330027</key>
            <summary>Identity hashes of archived objects must be based on a reproducible random seed</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stuefe">Thomas Stuefe</assignee>
                                    <reporter username="stuefe">Thomas Stuefe</reporter>
                        <labels>
                            <label>cds</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                    </labels>
                <created>Wed, 10 Apr 2024 06:04:29 -0700</created>
                <updated>Wed, 16 Oct 2024 08:05:40 -0700</updated>
                            <resolved>Fri, 10 May 2024 02:49:14 -0700</resolved>
                                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14684851" author="roboduke" created="Wed, 26 Jun 2024 00:03:43 -0700"  >[jdk21u-fix-request] Approval Request from Thomas Stuefe&lt;br/&gt;
I would like to fix this in JDK 21, since it is important for our reproducible-build effort.</comment>
                            <comment id="14672642" author="roboduke" created="Fri, 10 May 2024 23:01:41 -0700"  >[jdk22u-fix-request] Approval Request from Thomas Stuefe&lt;br/&gt;
This fixes an issue with CDS archive reproducibility that can happen under rare circumstances. Since CDS reproducibility issues are time consuming to debug and the fix is simple and low risk, I would like to see this issue fixed in JDK 22.</comment>
                            <comment id="14672638" author="roboduke" created="Fri, 10 May 2024 22:27:03 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/562&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/562&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-10 14:58:37 +0000</comment>
                            <comment id="14672559" author="roboduke" created="Fri, 10 May 2024 07:58:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/194&quot;&gt;https://git.openjdk.org/jdk22u/pull/194&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-10 10:47:35 +0000</comment>
                            <comment id="14672499" author="dukebot" created="Fri, 10 May 2024 02:49:12 -0700"  >Changeset: 9f43ce5a&lt;br/&gt;
Author:    Thomas Stuefe &amp;lt;&lt;a href=&apos;mailto:stuefe@openjdk.org&apos;&gt;stuefe@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-05-10 09:48:14 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/9f43ce5a725b212cec0f3cd17491c4bada953676&quot;&gt;https://git.openjdk.org/jdk/commit/9f43ce5a725b212cec0f3cd17491c4bada953676&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14670310" author="stuefe" created="Thu, 2 May 2024 00:06:59 -0700"  >After discussions with Ioi, we settled on:&lt;br/&gt;
&lt;br/&gt;
1 make sure CDS dump only ever calls ihash generation from one thread. Means we disable the explicit hash generation we had been doing before, since that one was called from the VM thread, not from the single java thread&lt;br/&gt;
2 Start out with a constant seed for all threads when dumping. This is fine and does not cause collisions between threads, since - see above - we only call ihash generation from a single thread.&lt;br/&gt;
</comment>
                            <comment id="14664656" author="roboduke" created="Thu, 11 Apr 2024 06:11:10 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18735&quot;&gt;https://git.openjdk.org/jdk/pull/18735&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-11 09:24:16 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5129378">JDK-8332179</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132938">JDK-8335235</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5141733">JDK-8342408</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5126527">JDK-8329968</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119104">JDK-8323900</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35uvv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>