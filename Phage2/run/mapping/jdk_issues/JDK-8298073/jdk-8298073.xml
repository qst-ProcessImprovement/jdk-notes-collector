<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:34:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8298073] gc/metaspace/CompressedClassSpaceSizeInJmapHeap.java causes test task timeout on macosx</title>
                <link>https://bugs.openjdk.org/browse/JDK-8298073</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>gc/metaspace/CompressedClassSpaceSizeInJmapHeap.java is causing the test task to timeout. It usually does so after 4 hours, which is the default for mach5, but it also had 2d and 3d timeouts in some other specially run test tasks that were given longer task timeouts. This seems to happen with almost every aarch64 test run. It seems to be much less common on x64.&lt;br/&gt;
&lt;br/&gt;
Please don&amp;#39;t confuse this CR with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8241293&quot; title=&quot;CompressedClassSpaceSizeInJmapHeap.java time out after 8 minutes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8241293&quot;&gt;&lt;strike&gt;JDK-8241293&lt;/strike&gt;&lt;/a&gt;, which has the test timing out after 8 minutes, but usually the log will say PASSED.</description>
                <environment></environment>
        <key id="5088866">JDK-8298073</key>
            <summary>gc/metaspace/CompressedClassSpaceSizeInJmapHeap.java causes test task timeout on macosx</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cjplummer">Chris Plummer</assignee>
                                    <reporter username="lmesnik">Leonid Mesnik</reporter>
                        <labels>
                            <label>atr</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Sun, 4 Dec 2022 09:40:08 -0800</created>
                <updated>Wed, 8 Feb 2023 08:10:14 -0800</updated>
                            <resolved>Fri, 9 Dec 2022 10:44:28 -0800</resolved>
                                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                                                            <comments>
                            <comment id="14557459" author="roboduke" created="Mon, 6 Feb 2023 03:54:27 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1146&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1146&lt;/a&gt;&lt;br/&gt;
Date: 2023-02-06 11:46:31 +0000</comment>
                            <comment id="14557457" author="goetz" created="Mon, 6 Feb 2023 03:47:53 -0800"  >Fix request 17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.7-oracle.&lt;br/&gt;
No risk, only a test change. Another issue is fixed with this, too. It will be marked as backported if I push this, too.&lt;br/&gt;
I had to resolve and adapt&lt;br/&gt;
Test passes. SAP nightly testing passes.</comment>
                            <comment id="14554253" author="clanger" created="Wed, 25 Jan 2023 00:29:18 -0800"  >Any reason why this is not fixed in 17u?</comment>
                            <comment id="14554051" author="roboduke" created="Tue, 24 Jan 2023 06:49:40 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/1684&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/1684&lt;/a&gt;&lt;br/&gt;
Date: 2023-01-24 14:39:30 +0000</comment>
                            <comment id="14554042" author="goetz" created="Tue, 24 Jan 2023 06:40:20 -0800"  >Fix request [11u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 11.0.19-oracle.&lt;br/&gt;
No risk, only a test change. Another issue is fixed with this, too. It will be marked as backported if I push this, too.&lt;br/&gt;
I had to resolve and adapt&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14544301" author="dukebot" created="Fri, 9 Dec 2022 10:44:27 -0800"  >Changeset: 99a6c478&lt;br/&gt;
Author:    Chris Plummer &amp;lt;&lt;a href=&apos;mailto:cjplummer@openjdk.org&apos;&gt;cjplummer@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2022-12-09 18:42:35 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/99a6c47855ad82e81a80726cf3aa4522c547716d&quot;&gt;https://git.openjdk.org/jdk/commit/99a6c47855ad82e81a80726cf3aa4522c547716d&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14543719" author="roboduke" created="Wed, 7 Dec 2022 19:16:54 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11576&quot;&gt;https://git.openjdk.org/jdk/pull/11576&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-08 03:06:31 +0000</comment>
                            <comment id="14543650" author="cjplummer" created="Wed, 7 Dec 2022 13:53:12 -0800"  >This is very odd. Here are the processes involved, including the parent PID for each:&lt;br/&gt;
&lt;br/&gt;
52208 52213  test process&lt;br/&gt;
52212 52208  sudo jhsdb map --heap --pid 52208&lt;br/&gt;
52213 52212  jhsdb map --heap --pid 52208&lt;br/&gt;
&lt;br/&gt;
So we have the main test process 52208, spawning the sudo process 52212, which spawns the jhsdb process 52213, which attaches back to main test process 52208. That is all as expected. However, it seems by doing this attach the jhsdb process has become the parent of the test process, even though I&amp;#39;m pretty sure the actual parent process is the AgentServer process 52207. I&amp;#39;m not sure if this is the problem or is what normally happens when do a debugger attach to a process. In any case, this circularity makes it hard to get these processes cleaned up if one of them gets wedged.&lt;br/&gt;
&lt;br/&gt;
I tried to attach with jhsdb to the 52213 jhsdb process, but it hung:&lt;br/&gt;
&lt;br/&gt;
sudo  /Users/cplummer/dev/ws/jdk/build/macosx-aarch64-debug/images/jdk/bin/jhsdb clhsdb --pid 52213&lt;br/&gt;
Password:&lt;br/&gt;
Attaching to process 52213, please wait...&lt;br/&gt;
&lt;br/&gt;
I did a ctrl-Z and looked at the 52213 process:&lt;br/&gt;
&lt;br/&gt;
52213 53556  jhsdb jmap --heap --pid 52208&lt;br/&gt;
53555 23149  sudo jhsdb clhsdb --pid 52213&lt;br/&gt;
53556 53555  jhsdb clhsdb --pid 52213&lt;br/&gt;
&lt;br/&gt;
By attempting to attach to the 52213 process, it&amp;#39;s parent pid changed to the attaching process 53556.&lt;br/&gt;
&lt;br/&gt;
My guess is the root issue here is that the test is spawning a process that attempts to attach back to the test process. I don&amp;#39;t believe any of our other SA tests do this. They normally spawn LingeredApp and attach to it. Probably this issue can be fixed by doing the same.</comment>
                            <comment id="14543386" author="JIRAUSER20106" created="Wed, 7 Dec 2022 00:03:26 -0800"  >Thanks Chris, I will then relink the failure in 11 to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8241293&quot;&gt;https://bugs.openjdk.org/browse/JDK-8241293&lt;/a&gt;</comment>
                            <comment id="14543338" author="cjplummer" created="Tue, 6 Dec 2022 18:39:21 -0800"  >The mach5 jobs I started earlier today eventually got task timeouts after 4 hours. This is similar to what we see in some of the reported &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8241293&quot; title=&quot;CompressedClassSpaceSizeInJmapHeap.java time out after 8 minutes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8241293&quot;&gt;&lt;strike&gt;JDK-8241293&lt;/strike&gt;&lt;/a&gt;  failures. I think the reason this CR was originally reported with a 2d task timeout is because it was a special test task that was given a lot more time than usual. So I think we have two issues here:&lt;br/&gt;
&lt;br/&gt;
1. This CR as originally presented, which is the test task going off the deep end and eventually resulting in a test task timeout. Let&amp;#39;s continue to have this CR cover this failure mode. I&amp;#39;ll update the synopsis.&lt;br/&gt;
2. &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8241293&quot; title=&quot;CompressedClassSpaceSizeInJmapHeap.java time out after 8 minutes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8241293&quot;&gt;&lt;strike&gt;JDK-8241293&lt;/strike&gt;&lt;/a&gt; as originally reported, which has the test printing that it passed, but before it passes a timeout triggers (after 8 minutes) and the test completes shortly after that. The end result is the test failing (even though it prints out that is passed) due to the timeout. We will continue to use &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8241293&quot; title=&quot;CompressedClassSpaceSizeInJmapHeap.java time out after 8 minutes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8241293&quot;&gt;&lt;strike&gt;JDK-8241293&lt;/strike&gt;&lt;/a&gt; for this failure mode. I&amp;#39;ll also update its synopsis.</comment>
                            <comment id="14543277" author="cjplummer" created="Tue, 6 Dec 2022 13:16:49 -0800"  >&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8241293&quot; title=&quot;CompressedClassSpaceSizeInJmapHeap.java time out after 8 minutes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8241293&quot;&gt;&lt;strike&gt;JDK-8241293&lt;/strike&gt;&lt;/a&gt; reported this test timeout on macosx-x64 and also problem listed it there. However, we seem to have two different types of timeouts. With one the test still passes, and completes shortly after the timeout, so it seems in these cases the issue is simply that the timeout is too short. However, &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8241293&quot; title=&quot;CompressedClassSpaceSizeInJmapHeap.java time out after 8 minutes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8241293&quot;&gt;&lt;strike&gt;JDK-8241293&lt;/strike&gt;&lt;/a&gt; also reports some task timeouts after 4 hours. That sounds more like the issue we are seeing here.</comment>
                            <comment id="14543272" author="cjplummer" created="Tue, 6 Dec 2022 13:00:56 -0800"  >All this test is doing is running &amp;quot;jhsdb jmap --heap&amp;quot; on itself. Very odd that it is having issues, but we don&amp;#39;t see issues with other SA tests.</comment>
                            <comment id="14543266" author="cjplummer" created="Tue, 6 Dec 2022 12:47:05 -0800"  >I&amp;#39;ve been able to easily reproduce this. On my local host it is quickly putting the machine in duress. It creates some very hard to kill jhsdb, java, and sudo processes, and Activity Monitor hangs. It&amp;#39;s very hard to cleanup afterwards. I&amp;#39;ve had some success, but may have to reboot.&lt;br/&gt;
&lt;br/&gt;
Note I did not wait the 2 days or more for the test to fail. I think the reason it takes so long to fail is because the runaway test is burning so many CPU cycles that the test infra can&amp;#39;t get enough cycles to force the test to exit after what should be an 8 minute timeout. That&amp;#39;s also why we don&amp;#39;t have any process artifacts to look at.&lt;br/&gt;
&lt;br/&gt;
I think we should problem list this test on macosx-aarch64 so it does not waste a lot of host CPU cycles.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5090865">JDK-8299754</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5092436">JDK-8301059</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5093671">JDK-8302079</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5093672">JDK-8302080</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5013756">JDK-8241293</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5089040">JDK-8298221</subtask>
                                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zhff:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17317"><![CDATA[b02]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2072"><![CDATA[svc-agent]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>