<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 15:13:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8299329] Assertion failure with fastdebug build when trying to use CDS without classpath</title>
                <link>https://bugs.openjdk.org/browse/JDK-8299329</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Steps to reproduce:&lt;br/&gt;
&lt;br/&gt;
1. Create a CDS archive using a classpath:&lt;br/&gt;
$ java -Xshare:dump -Xlog:cds=info -XX:SharedArchiveFile=testcds.jsa -XX:ExtraSharedClassListFile=classlist -cp hello.jar HelloWorld&lt;br/&gt;
&lt;br/&gt;
2. Try to use it without specifying any classpath:&lt;br/&gt;
$ java -Xshare:on -XX:SharedArchiveFile=testcds.jsa -Xlog:cds=info HelloWorld&lt;br/&gt;
&lt;br/&gt;
# To suppress the following error report, specify this argument&lt;br/&gt;
# after -XX: or in .hotspotrc:  SuppressErrorAt=/filemap.cpp:905&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/work/jdk/src/hotspot/share/cds/filemap.cpp:905), pid=526339, tid=526340&lt;br/&gt;
#  assert(strlen(rp_array-&amp;gt;at(i)) &amp;gt; (size_t)runtime_prefix_len) failed: sanity&lt;br/&gt;
#&lt;br/&gt;
# JRE version:  (21.0) (fastdebug build )&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM (fastdebug 21-internal-adhoc.asmehra.jdk, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0xc17085]  FileMapInfo::check_paths(int, int, GrowableArray&amp;lt;char const*&amp;gt;*, unsigned int, unsigned int) [clone .constprop.159]+0x305&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: /work/jdk/core.526339&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# /work/jdk/hs_err_pid526339.log&lt;br/&gt;
#&lt;br/&gt;
#&lt;br/&gt;
Aborted (core dumped)&lt;br/&gt;
&lt;br/&gt;
Assertion failure happens at jdk/src/hotspot/share/cds/filemap.cpp:905&lt;br/&gt;
assert(strlen(rp_array-&amp;gt;at(i)) &amp;gt; (size_t)runtime_prefix_len)&lt;br/&gt;
&lt;br/&gt;
Reason for the failure is runtime_prefix_len is incorrectly computed to be 1 by longest_common_app_classpath_prefix_len() but it should be 0 when the classpath is not specified.</description>
                <environment></environment>
        <key id="5090379">JDK-8299329</key>
            <summary>Assertion failure with fastdebug build when trying to use CDS without classpath</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asmehra">Ashutosh Mehra</assignee>
                                    <reporter username="asmehra">Ashutosh Mehra</reporter>
                        <labels>
                            <label>cds</label>
                    </labels>
                <created>Fri, 23 Dec 2022 08:44:50 -0800</created>
                <updated>Fri, 11 Apr 2025 06:08:58 -0700</updated>
                            <resolved>Thu, 5 Jan 2023 08:12:18 -0800</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14548988" author="dukebot" created="Thu, 5 Jan 2023 08:12:17 -0800"  >Changeset: be64bf8c&lt;br/&gt;
Author:    Ashutosh Mehra &amp;lt;&lt;a href=&apos;mailto:asmehra@redhat.com&apos;&gt;asmehra@redhat.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Calvin Cheung &amp;lt;&lt;a href=&apos;mailto:ccheung@openjdk.org&apos;&gt;ccheung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-05 16:09:28 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/be64bf8cf085c17b8e405b9447357ae59ef21765&quot;&gt;https://git.openjdk.org/jdk/commit/be64bf8cf085c17b8e405b9447357ae59ef21765&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14547684" author="roboduke" created="Fri, 23 Dec 2022 09:20:36 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11781&quot;&gt;https://git.openjdk.org/jdk/pull/11781&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-23 17:11:28 +0000</comment>
                            <comment id="14547675" author="JIRAUSER20510" created="Fri, 23 Dec 2022 08:58:05 -0800"  >Updated the &amp;quot;Affect Version&amp;quot; to 21.</comment>
                            <comment id="14547671" author="dcubed" created="Fri, 23 Dec 2022 08:51:02 -0800"  >Why is Affects Version/s set to &amp;quot;20&amp;quot; when the report is for 21?&lt;br/&gt;
&lt;br/&gt;
&amp;gt; # JRE version: (21.0) (fastdebug build )&lt;br/&gt;
&amp;gt; # Java VM: OpenJDK 64-Bit Server VM (fastdebug 21-internal-adhoc.asmehra.jdk, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64) </comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="5090802">JDK-8299699</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zqgr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17315"><![CDATA[b05]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>