<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:27:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8293850] need a largest_committed  metric for each category of NMT&apos;s output</title>
                <link>https://bugs.openjdk.org/browse/JDK-8293850</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Linux 3.10.0-1062.4.3.el7.x86_64 #1 SMP Wed Nov 13 23:58:53 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux&lt;br/&gt;
&lt;br/&gt;
openjdk version &amp;quot;17.0.3&amp;quot; 2022-04-19 LTS&lt;br/&gt;
OpenJDK Runtime Environment 21.9 (build 17.0.3+7-LTS)&lt;br/&gt;
OpenJDK 64-Bit Server VM 21.9 (build 17.0.3+7-LTS, mixed mode, sharing)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
The current NMT&amp;#39;s output only dumps the current reserved/committed metrics for each category, while for categories like c2 compiler, the memory would be allocated and then freed in a quite short time, so it would be hard to notice spikes in such categories.&lt;br/&gt;
&lt;br/&gt;
To make monitoring memory usage spikes easier,  I propose to add a &amp;#39;largest committed&amp;#39; metric to each category of NMT&amp;#39;s output, just like ThreadPool&amp;#39;s largestPoolSize(&lt;a href=&quot;https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.base/share/classes/java/util/concurrent/ThreadPoolExecutor.java#L484&quot;&gt;https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.base/share/classes/java/util/concurrent/ThreadPoolExecutor.java#L484&lt;/a&gt;).&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5083444">JDK-8293850</key>
            <summary>need a largest_committed  metric for each category of NMT&apos;s output</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azafari">Afshin Zafari</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>dcsswa</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>nmt</label>
                            <label>reproducer-no</label>
                            <label>webbug</label>
                    </labels>
                <created>Wed, 14 Sep 2022 20:38:13 -0700</created>
                <updated>Fri, 13 Jun 2025 03:21:13 -0700</updated>
                            <resolved>Tue, 5 Sep 2023 04:08:18 -0700</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14664366" author="sgehwolf" created="Wed, 10 Apr 2024 05:06:40 -0700"  >Approving for 21u on the basis that &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320061&quot; title=&quot;[nmt] Multiple issues with peak accounting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8320061&quot;&gt;&lt;strike&gt;JDK-8320061&lt;/strike&gt;&lt;/a&gt; gets backported to JDK 21 as well to fix those issues.</comment>
                            <comment id="14663141" author="sgehwolf" created="Fri, 5 Apr 2024 02:03:30 -0700"  >The original change has a bug which might yield wrong output (largest_committed=0$scale), while it should only print the value if peak is not 0. Before we backport we should get this fixed. Removing the approval label meanwhile.</comment>
                            <comment id="14662604" author="roboduke" created="Wed, 3 Apr 2024 07:34:55 -0700"  >[jdk21u-fix-request] Approval Request from Mar&amp;#xED;a Arias de Reyna&lt;br/&gt;
Fix Request&lt;br/&gt;
This is a backport for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8293850&quot;&gt;https://bugs.openjdk.org/browse/JDK-8293850&lt;/a&gt; (need a largest_committed metric for each category of NMT&amp;#39;s output) needed in preparation to backport &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320061&quot;&gt;https://bugs.openjdk.org/browse/JDK-8320061&lt;/a&gt; ( [nmt] Multiple issues with peak accounting ). This backport adds peak usage of the memory to the NMT output to be able to detect spikes.</comment>
                            <comment id="14662542" author="roboduke" created="Wed, 3 Apr 2024 04:21:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/440&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/440&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-03 11:16:23 +0000</comment>
                            <comment id="14608845" author="dukebot" created="Tue, 5 Sep 2023 04:08:17 -0700"  >Changeset: 8647f001&lt;br/&gt;
Author:    Afshin Zafari &amp;lt;&lt;a href=&apos;mailto:azafari@openjdk.org&apos;&gt;azafari@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-09-05 11:05:49 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8647f001bbb804503e8491d10f77aa0f34d66bf2&quot;&gt;https://git.openjdk.org/jdk/commit/8647f001bbb804503e8491d10f77aa0f34d66bf2&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14605716" author="roboduke" created="Tue, 22 Aug 2023 02:02:45 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15305&quot;&gt;https://git.openjdk.org/jdk/pull/15305&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-16 08:48:56 +0000</comment>
                            <comment id="14523883" author="sswsharm" created="Thu, 15 Sep 2022 02:04:28 -0700"  >This is an enhancement request to add a &amp;#39;largest committed&amp;#39; metric to each category of NMT&amp;#39;s output.&lt;br/&gt;
Moving it to Dev team for analysis.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5127711">JDK-8330957</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5114694">JDK-8320061</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ykjv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17407"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>