<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:22:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8261433] Better pkcs11 performance for libpkcs11:C_EncryptInit/libpkcs11:C_DecryptInit</title>
                <link>https://bugs.openjdk.org/browse/JDK-8261433</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>For Ciphers running through the CKM_AES_GCM SunPKCS11 mechanism - two types of CK_GCM_PARAMS struct are used in order to deal with interoperability issues introduced with PKCS#11 v2.40. (&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8080462&quot; title=&quot;Update SunPKCS11 provider with PKCS11 v2.40 support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8080462&quot;&gt;&lt;strike&gt;JDK-8080462&lt;/strike&gt;&lt;/a&gt;/&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8229243&quot; title=&quot;SunPKCS11-Solaris provider tests failing on Solaris 11.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8229243&quot;&gt;&lt;strike&gt;JDK-8229243&lt;/strike&gt;&lt;/a&gt;)&lt;br/&gt;
&lt;br/&gt;
CK_GCM_PARAMS_NO_IVBITS is attempted first. If that fails, then CK_GCM_PARAMS is attempted. &lt;br/&gt;
&lt;br/&gt;
This is a performance hit since only the 2nd struct is successful in both NSS and Solaris libpkcs11 where PKCS#11 spec version is 2.40 and above. &lt;br/&gt;
&lt;br/&gt;
e.g:&lt;br/&gt;
/2:     lseek(15, 0x0001B390, SEEK_SET)                 = 111504&lt;br/&gt;
/2:     read(15, &amp;quot;85 R m S12 Q18 =97B7 ] p&amp;quot;.., 579)     = 579&lt;br/&gt;
/2@2:   -&amp;gt; libpkcs11:C_EncryptInit(0x1005d6770, 0x1007a46a0, 0x1005fa840, 0x0)&lt;br/&gt;
/2@2:     -&amp;gt; libucrypto:crypto_encrypt_init(0xffffffff7f2eee08, 0xffffffff7f2eee20, 0x0, 0x1005d68b8)&lt;br/&gt;
/2@2:     &amp;lt;- libucrypto:crypto_encrypt_init() = 29&lt;br/&gt;
/2@2:   &amp;lt;- libpkcs11:C_EncryptInit() = 113&lt;br/&gt;
/2@2:   -&amp;gt; libpkcs11:C_EncryptInit(0x1005d6770, 0x1007a46a0, 0x1005fa840, 0x71)&lt;br/&gt;
/2@2:     -&amp;gt; libucrypto:crypto_encrypt_init(0xffffffff7f2eee08, 0xffffffff7f2eee20, 0x0, 0x1005d68b8)&lt;br/&gt;
/2@2:     &amp;lt;- libucrypto:crypto_encrypt_init() = 0&lt;br/&gt;
/2@2:   &amp;lt;- libpkcs11:C_EncryptInit() = 0</description>
                <environment></environment>
        <key id="5041600">JDK-8261433</key>
            <summary>Better pkcs11 performance for libpkcs11:C_EncryptInit/libpkcs11:C_DecryptInit</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pkumaraswamy">Prajwal Kumaraswamy</assignee>
                                    <reporter username="coffeys">Sean Coffey</reporter>
                        <labels>
                            <label>CPU24_10</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                    </labels>
                <created>Tue, 9 Feb 2021 04:38:07 -0800</created>
                <updated>Wed, 10 Jul 2024 07:23:54 -0700</updated>
                            <resolved>Mon, 13 May 2024 09:12:44 -0700</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                                    <fixVersion>23</fixVersion>
                                    <component>security-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14684556" author="roboduke" created="Tue, 25 Jun 2024 03:41:56 -0700"  >[jdk11u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 11.0.25-oracle. The version from 17u applies cleanly (except one Copyright year update) and tier 1-4 have passed.</comment>
                            <comment id="14684079" author="roboduke" created="Mon, 24 Jun 2024 03:18:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2811&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2811&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-24 10:11:21 +0000</comment>
                            <comment id="14680387" author="roboduke" created="Mon, 10 Jun 2024 23:34:31 -0700"  >[jdk17u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 17.0.13-oracle. The backport has been reviewed and tier 1-4 have passed.</comment>
                            <comment id="14680234" author="roboduke" created="Mon, 10 Jun 2024 08:38:30 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2560&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2560&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-10 15:32:47 +0000</comment>
                            <comment id="14678159" author="roboduke" created="Mon, 3 Jun 2024 01:55:12 -0700"  >[jdk21u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 21.0.5-oracle. Applies cleanly and tier 1-4 have passed.</comment>
                            <comment id="14677923" author="roboduke" created="Fri, 31 May 2024 12:52:27 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/645&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/645&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-31 19:45:01 +0000</comment>
                            <comment id="14673190" author="roboduke" created="Tue, 14 May 2024 03:58:01 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/203&quot;&gt;https://git.openjdk.org/jdk22u/pull/203&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-14 10:53:39 +0000</comment>
                            <comment id="14672932" author="dukebot" created="Mon, 13 May 2024 09:12:43 -0700"  >Changeset: 7c2c24fc&lt;br/&gt;
Author:    Prajwal Kumaraswamy &amp;lt;&lt;a href=&apos;mailto:pkumaraswamy@openjdk.org&apos;&gt;pkumaraswamy@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Sean Coffey &amp;lt;&lt;a href=&apos;mailto:coffeys@openjdk.org&apos;&gt;coffeys@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-05-13 16:10:45 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/7c2c24fc0511b36132952c96be46eea5904a53c5&quot;&gt;https://git.openjdk.org/jdk/commit/7c2c24fc0511b36132952c96be46eea5904a53c5&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14659262" author="roboduke" created="Thu, 21 Mar 2024 02:28:05 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18425&quot;&gt;https://git.openjdk.org/jdk/pull/18425&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-21 09:23:43 +0000</comment>
                            <comment id="14654135" author="pkumaraswamy" created="Sun, 3 Mar 2024 22:00:22 -0800"  >I observed that in NSS 3.52 the spec version has been updated to 2.40 and from here on the normative versions of CK_GCM_PARAMS (i.e. with IV bits) are being used.&lt;br/&gt;
The latest fix can use this spec version to determine which version of struct should be sent.</comment>
                            <comment id="14651556" author="pkumaraswamy" created="Thu, 22 Feb 2024 04:21:10 -0800"  >The changes to support normative version was made from 3.52 &lt;a href=&quot;https://nss-crypto.org/reference/security/nss/legacy/nss_releases/nss_3.52_release_notes/index.html#mozilla-projects-nss-nss-3-52-release-notes&quot;&gt;https://nss-crypto.org/reference/security/nss/legacy/nss_releases/nss_3.52_release_notes/index.html#mozilla-projects-nss-nss-3-52-release-notes&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1603628&quot;&gt;https://bugzilla.mozilla.org/show_bug.cgi?id=1603628&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14546388" author="coffeys" created="Mon, 19 Dec 2022 02:42:50 -0800"  >the history of this CK_GCM_PARAMS struct is a bit of a mess. &lt;br/&gt;
&lt;br/&gt;
NSS have tried to address it view this commit from 2020:&lt;br/&gt;
&lt;a href=&quot;https://github.com/nss-dev/nss/commit/ba931199b9&quot;&gt;https://github.com/nss-dev/nss/commit/ba931199b9&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Some history in lib/softoken/pkcs11c.c :&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/*&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  Due to a mismatch between the documentation and the header&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  file, two different definitions for CK_GCM_PARAMS exist.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  The header file is normative according to Oasis, but NSS used&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  the documentation. In PKCS #11 v3.0, this was reconciled in&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  favor of the header file definition. To maintain binary&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  compatibility, NSS now defines CK_GCM_PARAMS_V3 as the official&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  version v3 (V2.4 header file) and CK_NSS_GCM_PARAMS as the&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  legacy (V2.4 documentation, NSS version). CK_GCM_PARAMS&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  is defined as CK_GCM_PARAMS_V3 if NSS_PKCS11_2_0_COMPAT is not&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  defined and CK_NSS_GCM_PARAMS if it is. Internally&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  softoken continues to use the legacy version. The code below&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  automatically detects which parameter was passed in and&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  converts CK_GCM_PARAMS_V3 to the CK_NSS_GCM_PARAMS (legacy&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  version) on the fly. NSS proper will eventually start&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  using the CK_GCM_PARAMS_V3 version and fall back to the&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  CK_NSS_GCM_PARAMS if the CK_GCM_PARAMS_V3 version fails with&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  CKR_MECHANISM_PARAM_INVALID.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/</comment>
                            <comment id="14399816" author="coffeys" created="Tue, 9 Feb 2021 04:38:42 -0800"  >Investigate if we can detect the Solaris OS instead and always opt to try CK_GCM_PARAMS first.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5129839">JDK-8332590</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5130544">JDK-8333134</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5130882">JDK-8333425</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131183">JDK-8333683</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131211">JDK-8333708</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131560">JDK-8333999</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132846">JDK-8335153</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132869">JDK-8335175</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4997443">JDK-8229243</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4779828">JDK-8080462</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ri0b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="249"><![CDATA[javax.crypto:pkcs11]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17001"><![CDATA[Not verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>