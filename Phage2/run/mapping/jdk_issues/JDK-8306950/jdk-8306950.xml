<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 18:58:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8306950] [REDO] JDK-8305252 make_method_handle_intrinsic may call java code under a lock</title>
                <link>https://bugs.openjdk.org/browse/JDK-8306950</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>`SystemDictionary::find_method_handle_intrinsic` calls `Method::make_method_handle_intrinsic` under the `InvokeMethodTable_lock`  lock. The correctness is motivated with a comment:&lt;br/&gt;
```&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// This function could get an OOM but it is safe to call inside of a lock because&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// throwing OutOfMemoryError doesn&amp;#39;t call Java code.&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
However `Method::make_adapters` will throw a `VirtualMachineError` via &lt;br/&gt;
`THROW_MSG_NULL(vmSymbols::java_lang_VirtualMachineError(), &amp;quot;Out of space in CodeCache for adapters&amp;quot;);` which will call java code.&lt;br/&gt;
&lt;br/&gt;
Fastdebug linux x86_64 stack trace:&lt;br/&gt;
```&lt;br/&gt;
V  [libjvm.so+0x10a4ab0]  JavaCallWrapper::JavaCallWrapper(methodHandle const&amp;amp;, Handle, JavaValue*, JavaThread*)+0xa0  (javaCalls.cpp:60)&lt;br/&gt;
V  [libjvm.so+0x10a6764]  JavaCalls::call_helper(JavaValue*, methodHandle const&amp;amp;, JavaCallArguments*, JavaThread*)+0x1a4  (javaCalls.cpp:394)&lt;br/&gt;
V  [libjvm.so+0x10a8a07]  JavaCalls::call_special(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x317  (javaCalls.cpp:329)&lt;br/&gt;
V  [libjvm.so+0x10a92f9]  JavaCalls::construct_new_instance(InstanceKlass*, Symbol*, JavaCallArguments*, JavaThread*)+0xf9  (javaCalls.cpp:295)&lt;br/&gt;
V  [libjvm.so+0xd71dca]  Exceptions::new_exception(JavaThread*, Symbol*, Symbol*, JavaCallArguments*, Handle, Handle)+0x22a  (exceptions.cpp:285)&lt;br/&gt;
V  [libjvm.so+0xd72022]  Exceptions::new_exception(JavaThread*, Symbol*, Symbol*, JavaCallArguments*, Handle, Handle, Handle)+0x62  (exceptions.cpp:306)&lt;br/&gt;
V  [libjvm.so+0xd72df4]  Exceptions::new_exception(JavaThread*, Symbol*, char const*, Handle, Handle, Handle, Exceptions::ExceptionMsgToUtf8Mode)+0x604  (exceptions.cpp:389)&lt;br/&gt;
V  [libjvm.so+0xd76e68]  Exceptions::_throw_msg(JavaThread*, char const*, int, Symbol*, char const*, Handle, Handle)+0x198  (exceptions.cpp:193)&lt;br/&gt;
V  [libjvm.so+0xd7718e]  Exceptions::_throw_msg(JavaThread*, char const*, int, Symbol*, char const*)+0x1ee  (exceptions.cpp:232)&lt;br/&gt;
V  [libjvm.so+0x167cb19]  Method::make_adapters(methodHandle const&amp;amp;, JavaThread*)+0x129  (method.cpp:1258)&lt;br/&gt;
V  [libjvm.so+0x167cc3b]  Method::link_method(methodHandle const&amp;amp;, JavaThread*)+0x11b  (method.cpp:1234)&lt;br/&gt;
V  [libjvm.so+0x16839fd]  Method::make_method_handle_intrinsic(vmIntrinsicID, Symbol*, JavaThread*)+0x73d  (method.cpp:1484)&lt;br/&gt;
V  [libjvm.so+0x1a983ed]  SystemDictionary::find_method_handle_intrinsic(vmIntrinsicID, Symbol*, JavaThread*)+0x19d  (systemDictionary.cpp:1963)&lt;br/&gt;
```</description>
                <environment></environment>
        <key id="5099565">JDK-8306950</key>
            <summary>[REDO] JDK-8305252 make_method_handle_intrinsic may call java code under a lock</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coleenp">Coleen Phillimore</assignee>
                                    <reporter username="coleenp">Coleen Phillimore</reporter>
                        <labels>
                            <label>hashtable</label>
                    </labels>
                <created>Wed, 26 Apr 2023 12:07:39 -0700</created>
                <updated>Thu, 4 May 2023 03:29:04 -0700</updated>
                            <resolved>Fri, 28 Apr 2023 08:16:04 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                                                            <comments>
                            <comment id="14577660" author="dukebot" created="Fri, 28 Apr 2023 08:16:02 -0700"  >Changeset: cf799ba2&lt;br/&gt;
Author:    Coleen Phillimore &amp;lt;&lt;a href=&apos;mailto:coleenp@openjdk.org&apos;&gt;coleenp@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-28 15:14:30 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/cf799ba232dcacd1d91a7dab4dc4bf8de9ac258e&quot;&gt;https://git.openjdk.org/jdk/commit/cf799ba232dcacd1d91a7dab4dc4bf8de9ac258e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14577181" author="roboduke" created="Wed, 26 Apr 2023 16:30:52 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13681&quot;&gt;https://git.openjdk.org/jdk/pull/13681&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-26 23:24:15 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>Cloners</name>
                                            <outwardlinks description="clones">
                                        <issuelink>
            <issuekey id="5097483">JDK-8305252</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5099566">JDK-8306951</subtask>
                                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31aff:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17412"><![CDATA[b21]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>