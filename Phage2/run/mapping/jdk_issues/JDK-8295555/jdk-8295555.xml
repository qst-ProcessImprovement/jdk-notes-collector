<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:56:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8295555] Primitive wrapper caches could be `@Stable`</title>
                <link>https://bugs.openjdk.org/browse/JDK-8295555</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
The @jdk.internal.vm.annotation.Stable annotation indicates to the HotSpot vm that it can trust the contents of an array to be treated as constant. I think that primitive wrapper caches (such as Integer.IntegerCache.cache) could benefit from such optimization.&lt;br/&gt;
&lt;br/&gt;
Please correct me if I&amp;#39;m wrong, I&amp;#39;d love to know if there&amp;#39;s other, more powerful optimizations in place, or other reasons why this wouldn&amp;#39;t be a good idea or could cause issues.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5085222">JDK-8295555</key>
            <summary>Primitive wrapper caches could be `@Stable`</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pminborg">Per-Ake Minborg</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>dcsswa</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>reproducer-no</label>
                            <label>webbug</label>
                    </labels>
                <created>Wed, 12 Oct 2022 10:53:34 -0700</created>
                <updated>Wed, 1 Nov 2023 06:50:49 -0700</updated>
                            <resolved>Tue, 13 Jun 2023 01:41:09 -0700</resolved>
                                    <version>17</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14620489" author="roboduke" created="Tue, 24 Oct 2023 00:08:57 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to improve corner case performance around the primitives.</comment>
                            <comment id="14620249" author="roboduke" created="Mon, 23 Oct 2023 10:26:35 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/286&quot;&gt;https://git.openjdk.org/jdk21u/pull/286&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-23 17:18:31 +0000</comment>
                            <comment id="14588909" author="dukebot" created="Tue, 13 Jun 2023 01:41:08 -0700"  >Changeset: f7de726b&lt;br/&gt;
Author:    Per Minborg &amp;lt;&lt;a href=&apos;mailto:pminborg@openjdk.org&apos;&gt;pminborg@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-13 08:39:00 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f7de726bd37a2f1fa6f63b601cd2dab1805234e8&quot;&gt;https://git.openjdk.org/jdk/commit/f7de726bd37a2f1fa6f63b601cd2dab1805234e8&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14588519" author="roboduke" created="Mon, 12 Jun 2023 07:39:48 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14418&quot;&gt;https://git.openjdk.org/jdk/pull/14418&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-12 14:25:42 +0000</comment>
                            <comment id="14532436" author="vlivanov" created="Tue, 25 Oct 2022 15:28:28 -0700"  >&amp;gt; The JIT compilers seem to treat those fields as special already. See ciField::is_autobox_cache().&lt;br/&gt;
&lt;br/&gt;
The special treatment is limited to LoadNode::eliminate_autobox() which tries to optimize away valueOf()/xxxValue() nested calls. In general, it&amp;#39;s more powerful than just constant folding except the case when a boxed constant is requested (e.g., Integer.valueOf(5)). @Stable would allow to fold it into an Integer constant while LoadNode::eliminate_autobox()/ciField::is_autobox_cache() doesn&amp;#39;t do anything about it.</comment>
                            <comment id="14531131" author="dlong" created="Wed, 19 Oct 2022 17:48:03 -0700"  >The JIT compilers seem to treat those fields as special already.  See ciField::is_autobox_cache().</comment>
                            <comment id="14530823" author="dholmes" created="Tue, 18 Oct 2022 22:06:53 -0700"  >Moving to compiler team as the @stable annotation relates to JIT optimisations - &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8001107&quot; title=&quot;@Stable annotation for constant folding of lazily evaluated variables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8001107&quot;&gt;&lt;strike&gt;JDK-8001107&lt;/strike&gt;&lt;/a&gt;</comment>
                            <comment id="14530815" author="sswsharm" created="Tue, 18 Oct 2022 21:47:20 -0700"  >This is an enhancement request, &lt;br/&gt;
Moving it to dev team for analysis.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5113680">JDK-8319215</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4652312">JDK-8001107</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yviz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17317"><![CDATA[b02]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>