<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:56:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8322962] Upcall stub might go undetected when freezing frames</title>
                <link>https://bugs.openjdk.org/browse/JDK-8322962</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>There is a missing push_cont_fastpath()/pop_cont_fastpath() around the call to the Java method in the upcall stub.&lt;br/&gt;
Because of this, if from that upcall to Java a virtual thread tries to yield, and all the other methods in the stack are compiled, we will incorrectly take the freeze fast path and freeze everything in the stack including the native frames. By forcing the slow path instead we will identify the upcall stub and pin the vthread.&lt;br/&gt;
&lt;br/&gt;
The issue can be easily reproduced by running test test/jdk/java/lang/Thread/virtual/stress/GetStackTraceALotWhenPinned.java from the loom repo with -Xcomp flag.</description>
                <environment></environment>
        <key id="5118044">JDK-8322962</key>
            <summary>Upcall stub might go undetected when freezing frames</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pchilanomate">Patricio Chilano Mateo</assignee>
                                    <reporter username="pchilanomate">Patricio Chilano Mateo</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>loom</label>
                    </labels>
                <created>Wed, 3 Jan 2024 09:07:43 -0800</created>
                <updated>Wed, 28 Aug 2024 09:22:39 -0700</updated>
                            <resolved>Mon, 26 Feb 2024 15:31:09 -0800</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14668400" author="roboduke" created="Fri, 26 Apr 2024 08:14:47 -0700"  >[jdk22u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix Virtual Threads and FFM interactions. Applies cleanly. All tests pass. New regression test is sensitive to the bug. Risk is low-medium: affects the combination of new features that are standard in JDK 22. There is no bugtail since integration 2 months ago.</comment>
                            <comment id="14668399" author="roboduke" created="Fri, 26 Apr 2024 08:13:05 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix Virtual Threads and FFM interactions. Applies cleanly. All tests pass. Risk is on the lower side, as it affects the correctness of FFM which is a preview feature in JDK 21. (We are seeing its uses anyway.)</comment>
                            <comment id="14668097" author="roboduke" created="Thu, 25 Apr 2024 11:51:13 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/168&quot;&gt;https://git.openjdk.org/jdk22u/pull/168&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-25 18:40:47 +0000</comment>
                            <comment id="14668087" author="roboduke" created="Thu, 25 Apr 2024 11:28:44 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/532&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/532&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-25 18:18:07 +0000</comment>
                            <comment id="14652378" author="dukebot" created="Mon, 26 Feb 2024 15:31:08 -0800"  >Changeset: 93feda3d&lt;br/&gt;
Author:    Patricio Chilano Mateo &amp;lt;&lt;a href=&apos;mailto:pchilanomate@openjdk.org&apos;&gt;pchilanomate@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-02-26 23:29:18 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/93feda3d9a1807422c7f47703358aabd2e8639b8&quot;&gt;https://git.openjdk.org/jdk/commit/93feda3d9a1807422c7f47703358aabd2e8639b8&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14651595" author="roboduke" created="Thu, 22 Feb 2024 06:42:45 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17964&quot;&gt;https://git.openjdk.org/jdk/pull/17964&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-22 14:28:18 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5128248">JDK-8331329</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5128254">JDK-8331335</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137737">JDK-8339173</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34eur:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>