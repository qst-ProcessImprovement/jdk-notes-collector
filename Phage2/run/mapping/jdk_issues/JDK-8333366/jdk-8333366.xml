<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:09:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8333366] C2: CmpU3Nodes are not pushed back to worklist in PhaseCCP leading to non-fixpoint assertion failure</title>
                <link>https://bugs.openjdk.org/browse/JDK-8333366</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The attached test results in the following assertion failure because CmpU3Nodes are not pushed back to the worklist in PhaseCCP to re-calculate its type. The fix should be straight forward to not only add CmpUNodes but als CmpU3Nodes.&lt;br/&gt;
&lt;br/&gt;
To reproduce:&lt;br/&gt;
$ java -XX:CompileCommand=compileonly,Test::test* -Xbatch Test.java&lt;br/&gt;
&lt;br/&gt;
Output:&lt;br/&gt;
Missed Value optimization:&lt;br/&gt;
dist dump&lt;br/&gt;
---------------------------------------------&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;1   21  ConI  === 0  [[ 48 95 59 97 37 ]]  #int:-1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;1   88  AddI  === _ 72 26  [[ 97 89 95 72 ]]  !jvms: TestPushCmpU3Node::test @ bci:21 (line 44)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;0   95  CmpU3  === _ 88 21  [[ 105 ]]  !jvms: TestPushCmpU3Node::test @ bci:5 (line 44)&lt;br/&gt;
Current type:&lt;br/&gt;
int:-1&lt;br/&gt;
Optimized type:&lt;br/&gt;
int:-1..0&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/a4a7850a-7c35-410a-b879-d77fbb2f6087-S15071/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/cead7373-d355-4dbb-aa68-25913d26eff5/runs/96a451c9-93d1-4fde-8e4e-9c42dec3c065/workspace/open/src/hotspot/share/opto/phaseX.cpp:1834), pid=70403, tid=70417&lt;br/&gt;
#  assert(!failure) failed: PhaseCCP not at fixpoint: analysis result may be unsound.&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (23.0+25) (fastdebug build 23-ea+25-2096)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 23-ea+25-2096, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x152a19d]  PhaseCCP::analyze()+0x63d&lt;br/&gt;
..........&lt;br/&gt;
Command Line: -XX:CompileCommand=compileonly,Test::test* -Xbatch --add-modules=ALL-DEFAULT jdk.compiler/com.sun.tools.javac.launcher.SourceLauncher Test.java&lt;br/&gt;
..........&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:991  100    b  4       Test::test (30 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007ee1edd00000,0x00007ee1ede00000],  sp=0x00007ee1eddfb140,  free space=1004k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x152a19d]  PhaseCCP::analyze()+0x63d  (phaseX.cpp:1834)&lt;br/&gt;
V  [libjvm.so+0x9eb87d]  Compile::Optimize()+0x77d&lt;br/&gt;
V  [libjvm.so+0x9ef526]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x1af6&lt;br/&gt;
V  [libjvm.so+0x844805]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x1d5&lt;br/&gt;
V  [libjvm.so+0x9fb348]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x928&lt;br/&gt;
V  [libjvm.so+0x9fbfd8]  CompileBroker::compiler_thread_loop()+0x478&lt;br/&gt;
V  [libjvm.so+0xea43fc]  JavaThread::thread_main_inner()+0xcc&lt;br/&gt;
V  [libjvm.so+0x17bf496]  Thread::call_run()+0xb6&lt;br/&gt;
V  [libjvm.so+0x14a65a7]  thread_native_entry(Thread*)+0x127</description>
                <environment></environment>
        <key id="5130801">JDK-8333366</key>
            <summary>C2: CmpU3Nodes are not pushed back to worklist in PhaseCCP leading to non-fixpoint assertion failure</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chagedorn">Christian Hagedorn</assignee>
                                    <reporter username="chagedorn">Christian Hagedorn</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>c2-ccp</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oracle-triage-23</label>
                    </labels>
                <created>Fri, 31 May 2024 09:02:07 -0700</created>
                <updated>Thu, 3 Apr 2025 03:36:58 -0700</updated>
                            <resolved>Sun, 2 Jun 2024 23:42:49 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14681294" author="roboduke" created="Thu, 13 Jun 2024 00:58:12 -0700"  >[jdk21u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 21.0.25-oracle. Applies cleanly and tier 1-4 have passed.</comment>
                            <comment id="14680899" author="roboduke" created="Wed, 12 Jun 2024 05:34:54 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/705&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/705&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-12 12:29:19 +0000</comment>
                            <comment id="14678106" author="dukebot" created="Sun, 2 Jun 2024 23:42:48 -0700"  >Changeset: 7c83d7ab&lt;br/&gt;
Author:    Christian Hagedorn &amp;lt;&lt;a href=&apos;mailto:chagedorn@openjdk.org&apos;&gt;chagedorn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-06-03 06:41:33 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/7c83d7ab53f1f761a88a1d248b9a2f14980ef702&quot;&gt;https://git.openjdk.org/jdk/commit/7c83d7ab53f1f761a88a1d248b9a2f14980ef702&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14677896" author="roboduke" created="Fri, 31 May 2024 10:42:13 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19504&quot;&gt;https://git.openjdk.org/jdk/pull/19504&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-31 17:34:41 +0000</comment>
                            <comment id="14677874" author="chagedorn" created="Fri, 31 May 2024 09:18:23 -0700"  >ILW = Assertion failure during CCP due to not reaching a fixpoint, single test, possibly disable compilation of affected method or disable intrinsic for Integer.compareUnsigned = HLM = P3</comment>
                            <comment id="14677870" author="chagedorn" created="Fri, 31 May 2024 09:03:13 -0700"  >Found with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8332920&quot; title=&quot;C2: Partial Peeling is wrongly applied for CmpU with negative limit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8332920&quot;&gt;&lt;strike&gt;JDK-8332920&lt;/strike&gt;&lt;/a&gt;. I think it&amp;#39;s better to get this in first such that the regression tests work as expected with different flag setups.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5131641">JDK-8334075</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131785">JDK-8334208</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="5130302">JDK-8332920</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5071017">JDK-8283726</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="109546" name="Test.java" size="428" author="chagedorn" created="Fri, 31 May 2024 09:02:02 -0700"/>
                            <attachment id="109547" name="hs_err_pid70403.log" size="80943" author="chagedorn" created="Fri, 31 May 2024 09:01:59 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36k7v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>