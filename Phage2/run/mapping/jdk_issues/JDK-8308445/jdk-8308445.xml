<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:01:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8308445] Linker should check that capture state segment is big enough</title>
                <link>https://bugs.openjdk.org/browse/JDK-8308445</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>It seems that the linker does not verify the size of the provided captured call segment:&lt;br/&gt;
&lt;br/&gt;
jshell&amp;gt; MethodHandle strlen = linker.downcallHandle(linker.defaultLookup().find(&amp;quot;strlen&amp;quot;).get(), FunctionDescriptor.of(ValueLayout.JAVA_LONG, ValueLayout.ADDRESS), Linker.Option.captureCallState(&amp;quot;errno&amp;quot;));&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
jshell&amp;gt; var segment = arena.allocateUtf8String(&amp;quot;Hello!&amp;quot;);&lt;br/&gt;
segment ==&amp;gt; MemorySegment{ heapBase: Optional.empty address:139746963920864 limit: 7 }&lt;br/&gt;
strlen ==&amp;gt; MethodHandle(MemorySegment,MemorySegment)long&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
jshell&amp;gt; var cap = arena.allocate(1);&lt;br/&gt;
cap ==&amp;gt; MemorySegment{ heapBase: Optional.empty address:139746963913392 limit: 1 }&lt;br/&gt;
&lt;br/&gt;
jshell&amp;gt; strlen.invoke(cap, segment);&lt;br/&gt;
$19 ==&amp;gt; 6&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
I believe this works because the state is saved in the assembly stub, which ignores any limits of the provided memory segment. As such, we should verify compatibility of these limits before going in native code. More specifically, we should check that the provided segment is compatible with the capture state layout size and alignment.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5101349">JDK-8308445</key>
            <summary>Linker should check that capture state segment is big enough</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvernee">Jorn Vernee</assignee>
                                    <reporter username="mcimadamore">Maurizio Cimadamore</reporter>
                        <labels>
                            <label>foreign-memaccess+abi</label>
                    </labels>
                <created>Fri, 19 May 2023 08:50:35 -0700</created>
                <updated>Fri, 4 Aug 2023 12:49:33 -0700</updated>
                            <resolved>Wed, 7 Jun 2023 05:26:43 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14587611" author="dukebot" created="Wed, 7 Jun 2023 05:26:42 -0700"  >Changeset: c49129f5&lt;br/&gt;
Author:    Jorn Vernee &amp;lt;&lt;a href=&apos;mailto:jvernee@openjdk.org&apos;&gt;jvernee@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-07 12:25:28 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/c49129f54580b431881ffdb97b5478aff6097154&quot;&gt;https://git.openjdk.org/jdk/commit/c49129f54580b431881ffdb97b5478aff6097154&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14587403" author="roboduke" created="Tue, 6 Jun 2023 10:02:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14339&quot;&gt;https://git.openjdk.org/jdk/pull/14339&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-06 16:22:41 +0000</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31l9v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2492"><![CDATA[java.lang.foreign]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>