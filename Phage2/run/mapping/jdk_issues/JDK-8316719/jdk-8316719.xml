<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:25:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8316719] C2 compilation still fails with &quot;bad AD file&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8316719</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Even with the fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8314191&quot; title=&quot;C2 compilation fails with &amp;quot;bad AD file&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8314191&quot;&gt;&lt;strike&gt;JDK-8314191&lt;/strike&gt;&lt;/a&gt;, we still see the same failure:&lt;br/&gt;
&lt;br/&gt;
java -Xcomp -XX:CompileCommand=compileonly,Test::* -XX:-TieredCompilation -XX:-UseLoopPredicate Test.java&lt;br/&gt;
&lt;br/&gt;
o181  CountedLoopEnd  === o180 o202 o201  [[ o182 o183 27 ]] [gt] P=0,900000, C=-1,000000&lt;br/&gt;
&lt;br/&gt;
--N: o181  CountedLoopEnd  === o180 o202 o201  [[ o182 o183 27 ]] [gt] P=0,900000, C=-1,000000&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o202  Bool  === _ o201  [[ o181 ]] [gt]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;CMPOP  0  CMPOP&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;CMPOPU  0  CMPOPU&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;CMPOPUCF  0  CMPOPUCF&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o201  CmpU  === _ o10 o11  [[ o202 o181 ]] &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;RFLAGSREGU  100  compU_rReg&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o10  Parm  === o3  [[ o164 o46 o282 o201 o194 o85 o171 o173 ]] Parm0: int&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RREGI  0  RREGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RAX_REGI  0  RAX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RBX_REGI  0  RBX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RCX_REGI  0  RCX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDX_REGI  0  RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDI_REGI  0  RDI_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RAX_RDX_REGI  0  NO_RAX_RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RBP_R13_REGI  0  NO_RBP_R13_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;STACKSLOTI  100  storeSSI&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--N: o11  Parm  === o3  [[ o145 o121 o102 o201 o46 o356 11 ]] Parm1: int&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RREGI  0  RREGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RAX_REGI  0  RAX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RBX_REGI  0  RBX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RCX_REGI  0  RCX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDX_REGI  0  RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RDI_REGI  0  RDI_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RAX_RDX_REGI  0  NO_RAX_RDX_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NO_RBP_R13_REGI  0  NO_RBP_R13_REGI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;STACKSLOTI  100  storeSSI&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/cd627e65-f015-4fb1-a1d2-b6c9b8127f98-S182890/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/ee8091e4-76ff-4dc6-9579-9aa04624063d/runs/9396d582-a195-4809-ad29-8d156225a827/workspace/open/src/hotspot/share/opto/matcher.cpp:1724), pid=1214791, tid=1214805&lt;br/&gt;
#  assert(false) failed: bad AD file&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (22.0+17) (fastdebug build 22-ea+17-1281)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 22-ea+17-1281, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x135a378]  Matcher::Label_Root(Node const*, State*, Node*, Node*&amp;amp;)+0x508&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5110822">JDK-8316719</key>
            <summary>C2 compilation still fails with &quot;bad AD file&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="qamai">Quan Anh Mai</assignee>
                                    <reporter username="thartmann">Tobias Hartmann</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oracle-triage-17</label>
                            <label>oracle-triage-22</label>
                    </labels>
                <created>Fri, 22 Sep 2023 00:32:18 -0700</created>
                <updated>Tue, 9 Jan 2024 10:40:45 -0800</updated>
                            <resolved>Wed, 8 Nov 2023 02:47:59 -0800</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14626169" author="roboduke" created="Tue, 14 Nov 2023 06:42:21 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to amend previous C2 regression fix. Applies cleanly. Testing passes.</comment>
                            <comment id="14625135" author="roboduke" created="Thu, 9 Nov 2023 00:47:28 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/342&quot;&gt;https://git.openjdk.org/jdk21u/pull/342&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-09 08:41:30 +0000</comment>
                            <comment id="14624820" author="dukebot" created="Wed, 8 Nov 2023 02:47:57 -0800"  >Changeset: 1e687b45&lt;br/&gt;
Author:    Quan Anh Mai &amp;lt;&lt;a href=&apos;mailto:qamai@openjdk.org&apos;&gt;qamai@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-08 10:47:00 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/1e687b4529ae695d991623dc13796faecd6be7da&quot;&gt;https://git.openjdk.org/jdk/commit/1e687b4529ae695d991623dc13796faecd6be7da&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14623794" author="roboduke" created="Sun, 5 Nov 2023 10:30:08 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16509&quot;&gt;https://git.openjdk.org/jdk/pull/16509&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-05 18:25:53 +0000</comment>
                            <comment id="14622600" author="thartmann" created="Wed, 1 Nov 2023 03:18:11 -0700"  >[~qamai], any update on this?</comment>
                            <comment id="14613110" author="thartmann" created="Fri, 22 Sep 2023 01:32:53 -0700"  >Reproduces after &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8302814&quot; title=&quot;Delete unused CountLoopEnd instruct with CmpX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8302814&quot;&gt;&lt;strike&gt;JDK-8302814&lt;/strike&gt;&lt;/a&gt;.</comment>
                            <comment id="14613085" author="chagedorn" created="Fri, 22 Sep 2023 00:40:28 -0700"  >It seems that the added is_cloop_increment() in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8314191&quot; title=&quot;C2 compilation fails with &amp;quot;bad AD file&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8314191&quot;&gt;&lt;strike&gt;JDK-8314191&lt;/strike&gt;&lt;/a&gt; does not work when peeling a loop for which a CountedLoopEndNode will serve as a zero trip guard. For the peeled iteration, the CountedLoopNode will have top for the backedge (see graph.png). Therefore, incr() will return null here: &lt;a href=&quot;https://github.com/openjdk/jdk/blob/fe862639e7ce40f5adef0e482b1fb9c718e061a3/src/hotspot/share/opto/subnode.cpp#L138&quot;&gt;https://github.com/openjdk/jdk/blob/fe862639e7ce40f5adef0e482b1fb9c718e061a3/src/hotspot/share/opto/subnode.cpp#L138&lt;/a&gt; and we continue to replace the CmpI of the CountedLoopEndNode with CmpU and hit the assert.</comment>
                            <comment id="14613081" author="thartmann" created="Fri, 22 Sep 2023 00:34:03 -0700"  >[~qamai], could you please have a look? Thanks.</comment>
                            <comment id="14613080" author="thartmann" created="Fri, 22 Sep 2023 00:33:30 -0700"  >ILW = Same as &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8314191&quot; title=&quot;C2 compilation fails with &amp;quot;bad AD file&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8314191&quot;&gt;&lt;strike&gt;JDK-8314191&lt;/strike&gt;&lt;/a&gt; = P3</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5114881">JDK-8320235</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118526">JDK-8323393</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5107929">JDK-8314191</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5094546">JDK-8302814</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5118270">JDK-8323154</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="106506" name="Test.java" size="405" author="thartmann" created="Fri, 22 Sep 2023 00:33:06 -0700"/>
                            <attachment id="106507" name="graph.png" size="19289" author="chagedorn" created="Fri, 22 Sep 2023 00:40:25 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i337ln:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17436"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>