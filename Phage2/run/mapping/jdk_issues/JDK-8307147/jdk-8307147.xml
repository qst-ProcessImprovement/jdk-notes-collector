<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 19:04:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8307147] [x86] Dangling pointer warning for Assembler::_attributes</title>
                <link>https://bugs.openjdk.org/browse/JDK-8307147</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When compiling with gcc13.1 for release we get some -Wdangling-pointer warnings like this (earlier versions of gcc don&amp;#39;t warn):&lt;br/&gt;
&lt;br/&gt;
In member function &amp;#39;void Assembler::set_attributes(InstructionAttr*)&amp;#39;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inlined from &amp;#39;int Assembler::vex_prefix_and_encode(int, int, int, VexSimdPrefix, VexOpcode, InstructionAttr*)&amp;#39; at ../../src/hotspot/cpu/x86/assembler_x86.cpp:11491:17,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inlined from &amp;#39;void Assembler::vpclmulqdq(XMMRegister, XMMRegister, XMMRegister, int)&amp;#39; at ../../src/hotspot/cpu/x86/assembler_x86.cpp:10823:37:&lt;br/&gt;
../../src/hotspot/cpu/x86/assembler_x86.hpp:921:66: warning: storing the address of local variable &amp;#39;attributes&amp;#39; in &amp;#39;*this.Assembler::_attributes&amp;#39; [-Wdangling-pointer=]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;921 |   void set_attributes(InstructionAttr *attributes) { _attributes = attributes; }&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|                                                      ~~~~~~~~~~~~^~~~~~~~~~~~&lt;br/&gt;
../../src/hotspot/cpu/x86/assembler_x86.cpp: In member function &amp;#39;void Assembler::vpclmulqdq(XMMRegister, XMMRegister, XMMRegister, int)&amp;#39;:&lt;br/&gt;
../../src/hotspot/cpu/x86/assembler_x86.cpp:10822:19: note: &amp;#39;attributes&amp;#39; declared here&lt;br/&gt;
10822 |   InstructionAttr attributes(AVX_128bit, /* vex_w */ false, /* legacy_mode */ true, /* no_mask_reg */ true, /* uses_vl */ true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|                   ^~~~~~~~~~&lt;br/&gt;
../../src/hotspot/cpu/x86/assembler_x86.cpp:10820:87: note: &amp;#39;this&amp;#39; declared here&lt;br/&gt;
10820 | void Assembler::vpclmulqdq(XMMRegister dst, XMMRegister nds, XMMRegister src, int mask) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|                                                                                       ^&lt;br/&gt;
&lt;br/&gt;
Some places set the _attributes member of the assembler. The attributes object&amp;#39;s destructor checks for that situation and clears the assembler&amp;#39;s _attributes. So we aren&amp;#39;t leaving a dead object in the assembler to be accidentally used later, making this warning &amp;quot;harmless&amp;quot;. Since the lifetime of the attributes object doesn&amp;#39;t end until it&amp;#39;s storage has been released, e.g. after it&amp;#39;s destructor is invoked, the warning is a false positive.  However, the structure isn&amp;#39;t helping by somewhat obfuscating what&amp;#39;s being done.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5099787">JDK-8307147</key>
            <summary>[x86] Dangling pointer warning for Assembler::_attributes</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://bugs.openjdk.org/images/jbsImages/p5.png">P5</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kbarrett">Kim Barrett</assignee>
                                    <reporter username="kbarrett">Kim Barrett</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>cleanup</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>oracle-triage-21</label>
                    </labels>
                <created>Sat, 29 Apr 2023 18:37:09 -0700</created>
                <updated>Sun, 6 Aug 2023 18:17:55 -0700</updated>
                            <resolved>Wed, 3 May 2023 19:10:29 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14596185" author="JIRAUSER20112" created="Thu, 13 Jul 2023 15:56:32 -0700"  >Fix request 17u - allows building with GCC 13. Backport is nearly clean and only needs nullptr replaced with NULL. Passes jtreg tier1 and tier2</comment>
                            <comment id="14595380" author="roboduke" created="Wed, 12 Jul 2023 10:30:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1575&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1575&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-12 17:24:08 +0000</comment>
                            <comment id="14578920" author="dukebot" created="Wed, 3 May 2023 19:10:28 -0700"  >Changeset: 3599448a&lt;br/&gt;
Author:    Kim Barrett &amp;lt;&lt;a href=&apos;mailto:kbarrett@openjdk.org&apos;&gt;kbarrett@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-04 02:08:07 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/3599448ad833553dd502a4f941dad7295b557d55&quot;&gt;https://git.openjdk.org/jdk/commit/3599448ad833553dd502a4f941dad7295b557d55&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14578186" author="roboduke" created="Tue, 2 May 2023 00:59:11 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13751&quot;&gt;https://git.openjdk.org/jdk/pull/13751&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-02 07:54:00 +0000</comment>
                            <comment id="14578172" author="thartmann" created="Mon, 1 May 2023 23:41:01 -0700"  >ILW = Dangling pointer warning (harmless - false positive), with gcc13.1, no workaround = LLH = P5</comment>
                            <comment id="14577841" author="kbarrett" created="Mon, 1 May 2023 02:40:08 -0700"  >This looks somewhat similar to &lt;a href=&quot;https://gcc.gnu.org/bugzilla/show_bug.cgi?id=106411&quot;&gt;https://gcc.gnu.org/bugzilla/show_bug.cgi?id=106411&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Weirdly, the documentation for `-Wdangling-pointer` seems to have disappeared in gcc13 - it&amp;#39;s there in gcc12 (that seems to be the first version containing it, though there&amp;#39;s no mention of that option in the release notes for gcc12).&lt;br/&gt;
&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5105548">JDK-8312130</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5107409">JDK-8313749</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5099858">JDK-8307210</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5099845">JDK-8307196</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17004"><![CDATA[x86]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31bsr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17415"><![CDATA[b22]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>