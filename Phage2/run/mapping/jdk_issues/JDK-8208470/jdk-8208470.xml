<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:40:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8208470] Type annotations on inner type that is an array component</title>
                <link>https://bugs.openjdk.org/browse/JDK-8208470</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Take this example:&lt;br/&gt;
&lt;br/&gt;
import java.lang.annotation.ElementType;&lt;br/&gt;
import java.lang.annotation.Retention;&lt;br/&gt;
import java.lang.annotation.RetentionPolicy;&lt;br/&gt;
import java.lang.annotation.Target;&lt;br/&gt;
&lt;br/&gt;
@Retention(RetentionPolicy.RUNTIME)&lt;br/&gt;
@Target({ElementType.TYPE_USE, ElementType.TYPE_PARAMETER})&lt;br/&gt;
@interface TA {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;int value();&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
class ArrayOfInner {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;class Inner {}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;@TA(1) ArrayOfInner. @TA(2) Inner oi;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;@TA(3) ArrayOfInner. @TA(4) Inner [] oia;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;@TA(5) Inner i;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;@TA(6) Inner [] ia;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Compile with javac 8 and according to javap -v field ia has the annotation:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;ArrayOfInner$Inner[] ia;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;descriptor: [LArrayOfInner$Inner;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;flags: (0x0000)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RuntimeVisibleTypeAnnotations:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0: #10(#11=I#21): FIELD, location=[ARRAY, INNER_TYPE]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;TA(&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value=6&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;)&lt;br/&gt;
&lt;br/&gt;
Compile with javac 9, 10, or a recent 11 build and ia has the annotation:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;ArrayOfInner$Inner[] ia;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;descriptor: [LArrayOfInner$Inner;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;flags: (0x0000)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RuntimeVisibleTypeAnnotations:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0: #10(#11=I#21): FIELD, location=[ARRAY]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;TA(&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value=6&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;)&lt;br/&gt;
&lt;br/&gt;
Note the missing INNER_TYPE location.&lt;br/&gt;
The annotations for fields oi, oia, and i are generated consistently&lt;br/&gt;
for all versions and are just included to illustrate all the relevant&lt;br/&gt;
annotation positions.&lt;br/&gt;
&lt;br/&gt;
The Java 8 behavior was correct and should be re-established.&lt;br/&gt;
&lt;br/&gt;
Discussion: &lt;a href=&quot;http://mail.openjdk.java.net/pipermail/compiler-dev/2018-July/012199.html&quot;&gt;http://mail.openjdk.java.net/pipermail/compiler-dev/2018-July/012199.html&lt;/a&gt;</description>
                <environment></environment>
        <key id="4968602">JDK-8208470</key>
            <summary>Type annotations on inner type that is an array component</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vromero">Vicente Arturo Romero Zaldivar</assignee>
                                    <reporter username="wmdietl">Werner Dietl</reporter>
                        <labels>
                            <label>regression</label>
                            <label>type-annotations</label>
                    </labels>
                <created>Sun, 29 Jul 2018 16:21:52 -0700</created>
                <updated>Wed, 22 Feb 2023 23:12:02 -0800</updated>
                            <resolved>Wed, 15 Feb 2023 20:02:49 -0800</resolved>
                                    <version>9</version>
                    <version>10</version>
                    <version>11</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14560532" author="dukebot" created="Wed, 15 Feb 2023 20:02:48 -0800"  >Changeset: 1480d418&lt;br/&gt;
Author:    Vicente Romero &amp;lt;&lt;a href=&apos;mailto:vromero@openjdk.org&apos;&gt;vromero@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-02-16 04:01:12 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/1480d418e3b7d1f36ace24a043a273fca446eefa&quot;&gt;https://git.openjdk.org/jdk/commit/1480d418e3b7d1f36ace24a043a273fca446eefa&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14559281" author="roboduke" created="Sat, 11 Feb 2023 06:05:44 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12522&quot;&gt;https://git.openjdk.org/jdk/pull/12522&lt;/a&gt;&lt;br/&gt;
Date: 2023-02-11 14:02:13 +0000</comment>
                            <comment id="14232161" author="bsrbnd" created="Fri, 21 Dec 2018 04:51:31 -0800"  >Updated webrev: &lt;a href=&quot;http://cr.openjdk.java.net/~bsrbnd/jdk8208470/webrev.01/&quot;&gt;http://cr.openjdk.java.net/~bsrbnd/jdk8208470/webrev.01/&lt;/a&gt;&lt;br/&gt;
See: &lt;a href=&quot;http://mail.openjdk.java.net/pipermail/compiler-dev/2018-December/012740.html&quot;&gt;http://mail.openjdk.java.net/pipermail/compiler-dev/2018-December/012740.html&lt;/a&gt;</comment>
                            <comment id="14229199" author="sadayapalam" created="Mon, 10 Dec 2018 01:27:18 -0800"  >Thanks Bernard, I have for the time being moved this out of 12. I will try and review it and take it forward if possible for 12 otherwise for the subsequent release.</comment>
                            <comment id="14226977" author="bsrbnd" created="Fri, 30 Nov 2018 06:00:10 -0800"  >I can confirm that tier1 (hotspot+jdk+langtools) is still OK (on rev 436097b038a1) with the following fix previously submitted for review:&lt;br/&gt;
&lt;a href=&quot;http://cr.openjdk.java.net/~bsrbnd/jdk8208470/webrev.00/jdk.patch&quot;&gt;http://cr.openjdk.java.net/~bsrbnd/jdk8208470/webrev.00/jdk.patch&lt;/a&gt;</comment>
                            <comment id="14210974" author="bsrbnd" created="Tue, 18 Sep 2018 07:00:57 -0700"  >Review: &lt;a href=&quot;http://mail.openjdk.java.net/pipermail/compiler-dev/2018-September/012440.html&quot;&gt;http://mail.openjdk.java.net/pipermail/compiler-dev/2018-September/012440.html&lt;/a&gt;</comment>
                            <comment id="14205293" author="sadayapalam" created="Sun, 19 Aug 2018 22:50:20 -0700"  >Confirmed the assertions around javac behavior. Also checked with ECJ - the eclipse compiler emits the INNER_TYPE location.&lt;br/&gt;
&lt;br/&gt;
I will look into this behavior change.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4978349">JDK-8215366</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="14949">9</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f9cj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17311"><![CDATA[b11]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="212"><![CDATA[javac]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>