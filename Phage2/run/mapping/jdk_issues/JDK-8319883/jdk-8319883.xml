<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:09:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8319883] Zero: Use atomic built-ins for 64-bit accesses</title>
                <link>https://bugs.openjdk.org/browse/JDK-8319883</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>There is a bug in current Zero on 32-bit platforms around 64-bit accesses. Access to `volatile long` goes all the way down to `Atomic::PlatformLoad&amp;lt;8&amp;gt;` / `Atomic::PlatformStore&amp;lt;8&amp;gt;` -&amp;gt; `Atomic::atomic_copy64`, which is implemented only for few architectures, and falls back to non-atomic read-write sequence:&lt;br/&gt;
&amp;nbsp;&lt;a href=&quot;https://github.com/openjdk/jdk/blob/9cce9fe06780aa095b3aabdfa421f376ca7bfd08/src/hotspot/os_cpu/linux_zero/atomic_linux_zero.hpp#L174&quot;&gt;https://github.com/openjdk/jdk/blob/9cce9fe06780aa095b3aabdfa421f376ca7bfd08/src/hotspot/os_cpu/linux_zero/atomic_linux_zero.hpp#L174&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
This is easily reproducible with Linux Zero x86_32 and jcstress like:&lt;br/&gt;
&lt;br/&gt;
```&lt;br/&gt;
$ build/linux-x86-zero-release/images/jdk/bin/java -jar jcstress-tests-all-20230612.jar -t accessAtomic.fields.volatiles.LongTest -tb 1m&lt;br/&gt;
&lt;br/&gt;
...... [FAILED] o.o.j.t.accessAtomic.fields.volatiles.LongTest&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Results across all configurations:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RESULT      SAMPLES     FREQ      EXPECT  DESCRIPTION&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-1   39,131,094   15.14%  Acceptable  The value set by the actor thread. Observer sees the comp...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-4294967296           88   &amp;lt;0.01%   Forbidden  Other values are forbidden: atomicity violation.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0  219,340,811   84.86%  Acceptable  Default value for the field. Allowed to see this: data race.&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
Nominally, one would do the addition for x86_32 that uses FPU for atomic load/stores. But the same file already uses the atomic built-ins for other atomic needs, so we can just rewrite 64-bit atomic accesses using built-ins. This would give us compatibility across all platforms at once.&lt;br/&gt;
&lt;br/&gt;
It currently blocks testing for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8319777&quot; title=&quot;Zero: Support 8-byte cmpxchg&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8319777&quot;&gt;&lt;strike&gt;JDK-8319777&lt;/strike&gt;&lt;/a&gt;.</description>
                <environment></environment>
        <key id="5114498">JDK-8319883</key>
            <summary>Zero: Use atomic built-ins for 64-bit accesses</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shade">Aleksey Shipilev</assignee>
                                    <reporter username="shade">Aleksey Shipilev</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Fri, 10 Nov 2023 01:12:39 -0800</created>
                <updated>Mon, 8 Jan 2024 08:39:46 -0800</updated>
                            <resolved>Tue, 14 Nov 2023 04:53:58 -0800</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14637681" author="roboduke" created="Fri, 5 Jan 2024 02:29:39 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/127&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/127&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-04 11:08:23 +0000</comment>
                            <comment id="14637680" author="roboduke" created="Fri, 5 Jan 2024 02:26:31 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix 32-bit Zero concurrency bug. Applies cleanly. Tests pass.</comment>
                            <comment id="14626642" author="mikael" created="Wed, 15 Nov 2023 11:17:04 -0800"  >This change makes GCC 13.2.0 generate a/the stringop-overflow warning for linux-x64-zero (fastdebug) as well. Previously only spotted with linux-aarch64 (fastdebug), and for that specific combination the warning was disabled in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8319818&quot; title=&quot;Address GCC 13.2.0 warnings (stringop-overflow and dangling-pointer)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8319818&quot;&gt;&lt;strike&gt;JDK-8319818&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
Filed &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320212&quot; title=&quot;Disable GCC stringop-overflow warning for affected files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8320212&quot;&gt;&lt;strike&gt;JDK-8320212&lt;/strike&gt;&lt;/a&gt;.</comment>
                            <comment id="14626148" author="dukebot" created="Tue, 14 Nov 2023 04:53:56 -0800"  >Changeset: 25f9af99&lt;br/&gt;
Author:    Aleksey Shipilev &amp;lt;&lt;a href=&apos;mailto:shade@openjdk.org&apos;&gt;shade@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-14 12:52:49 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/25f9af99be1c906fc85b8192df8fa50cced3474f&quot;&gt;https://git.openjdk.org/jdk/commit/25f9af99be1c906fc85b8192df8fa50cced3474f&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14625523" author="roboduke" created="Fri, 10 Nov 2023 06:18:23 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16600&quot;&gt;https://git.openjdk.org/jdk/pull/16600&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-10 10:24:28 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5118310">JDK-8323193</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="5114385">JDK-8319777</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5114857">JDK-8320212</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33tur:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17436"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>