<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:47:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8311279] TestStressIGVNAndCCP.java failed with different IGVN traces for the same seed</title>
                <link>https://bugs.openjdk.org/browse/JDK-8311279</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Test message: &amp;quot;got different IGVN traces for the same seed&amp;quot; (for the seed value of &amp;quot;0&amp;quot;, AFAIU).&lt;br/&gt;
&lt;br/&gt;
Please find output diff (a pretty messy one) attached. &lt;br/&gt;
&lt;br/&gt;
The test arguments were:&lt;br/&gt;
&lt;br/&gt;
&amp;#39;-ea -esa -Dcom.oracle.usagetracker.config.file=&amp;lt;some_config_file&amp;gt;&amp;#39;&lt;br/&gt;
&lt;br/&gt;
Usage tracker config contents, just in case:&lt;br/&gt;
com.oracle.usagetracker.logToFile=&amp;lt;some_path&amp;gt;/usage-tracker.log</description>
                <environment></environment>
        <key id="5104598">JDK-8311279</key>
            <summary>TestStressIGVNAndCCP.java failed with different IGVN traces for the same seed</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://bugs.openjdk.org/images/jbsImages/p5.png">P5</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chagedorn">Christian Hagedorn</assignee>
                                    <reporter username="enikitin">Evgeny Nikitin</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>atr</label>
                            <label>c2</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>oracle-triage-22</label>
                            <label>testbug</label>
                    </labels>
                <created>Tue, 4 Jul 2023 02:32:33 -0700</created>
                <updated>Mon, 8 Jan 2024 01:11:55 -0800</updated>
                            <resolved>Wed, 5 Jul 2023 23:33:46 -0700</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14637035" author="roboduke" created="Wed, 3 Jan 2024 00:20:43 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/113&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/113&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-03 08:15:33 +0000</comment>
                            <comment id="14637032" author="goetz" created="Wed, 3 Jan 2024 00:12:34 -0800"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.3-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14594167" author="dukebot" created="Wed, 5 Jul 2023 23:33:45 -0700"  >Changeset: edb2be10&lt;br/&gt;
Author:    Christian Hagedorn &amp;lt;&lt;a href=&apos;mailto:chagedorn@openjdk.org&apos;&gt;chagedorn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-07-06 06:32:05 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/edb2be10fb897834ed78ab4493d3a4f73dc2e140&quot;&gt;https://git.openjdk.org/jdk/commit/edb2be10fb897834ed78ab4493d3a4f73dc2e140&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14593861" author="roboduke" created="Wed, 5 Jul 2023 02:18:16 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14771&quot;&gt;https://git.openjdk.org/jdk/pull/14771&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-05 09:10:48 +0000</comment>
                            <comment id="14593566" author="chagedorn" created="Tue, 4 Jul 2023 07:23:00 -0700"  >ILW = Single harmless test failure, rare, no workaround = LLH = P5</comment>
                            <comment id="14593563" author="chagedorn" created="Tue, 4 Jul 2023 07:21:56 -0700"  >Looking at the output, it seems that one run got compile id 1, while the other one got compile id 2. This makes a difference for the debug_idx which is printed for a dead node as &amp;quot;compile id * 10000000000 + node index&amp;quot;:&lt;br/&gt;
&lt;br/&gt;
compile id 1:&lt;br/&gt;
CompileCommand\: compileonly compiler/debug/TestStressIGVNAndCCP.sum bool compileonly \= true &amp;lt; &amp;lt; 80 Phi \=\=\= _ _ _ [[ ]] [10000000080] ...&lt;br/&gt;
&lt;br/&gt;
compile id 2:&lt;br/&gt;
CompileCommand\: compileonly compiler/debug/TestStressIGVNAndCCP.sum bool compileonly \= true &amp;lt; &amp;lt; 80 Phi \=\=\= _ _ _ [[ ]] [20000000080] ...&lt;br/&gt;
&lt;br/&gt;
I was not able to reproduce this but my suspicion is that in one VM, we&amp;#39;ve compiled a native method wrapper or a method handle intrinsic but not in the other one. This would explain the different compile id because we are always only compiling a single method with the given JVM flags. A native compilation can be triggered, for example, by passing -esa:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;60    1     n       java.lang.invoke.MethodHandle::invokeBasic()I (native)   &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;60    2     n       java.lang.invoke.MethodHandle::linkToSpecial(LL)I (native)   (static)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;69    3    b        compiler.debug.TestStressIGVNAndCCP::sum (27 bytes)&lt;br/&gt;
&lt;br/&gt;
To fix this, we could use the -XX:+CICountNative flag which uses a separate counter for native compilations:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;50    1     n       java.lang.invoke.MethodHandle::invokeBasic()I (native)   &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;51    2     n       java.lang.invoke.MethodHandle::linkToSpecial(LL)I (native)   (static)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;59    1    b        compiler.debug.TestStressIGVNAndCCP::sum (27 bytes)&lt;br/&gt;
&lt;br/&gt;
This is the same approach as done in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8269342&quot; title=&quot;CICrashAt=1 does not always catch first Java method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8269342&quot;&gt;&lt;strike&gt;JDK-8269342&lt;/strike&gt;&lt;/a&gt; to reliably crash with -XX:CICrashAt=1 in the first compilation.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5117723">JDK-8322666</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118261">JDK-8323145</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5028314">JDK-8252219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="104502" name="diff_message" size="34416" author="enikitin" created="Tue, 4 Jul 2023 02:32:01 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i325az:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>