<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 08:59:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8307990] jspawnhelper must close its writing side of a pipe before reading from it</title>
                <link>https://bugs.openjdk.org/browse/JDK-8307990</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Since JDK13, executing commands in a sub-process defaults to the so called `POSIX_SPAWN` launching mechanism (i.e. `-Djdk.lang.Process.launchMechanism=POSIX_SPAWN`) on Linux. This works by using `posix_spawn(3)` to firstly start a tiny helper program called `jspawnhelper` in a subprocess. In a second step, `jspawnhelper` reads the command data from the parent Java process over a Unix pipe and finally executes (i.e. `execvp(3)`) the requested command.&lt;br/&gt;
&lt;br/&gt;
In cases where the parent process terminates abnormally before `jspawnhelper` has read all the expected data from the pipe, `jspawnhelper` will block indefinitely on the reading end of the pipe. This is especially harmful if the parent process had open sockets, because in that case, the forked `jspawnhelper` process will inherit them and keep all the corresponding ports open effectively preventing other processes to bind to them. Notice that this is not an abstract scenario. We&amp;#39;ve observed this regularly in production with services which couldn&amp;#39;t be restarted after a crash after migrating to JDK 17.&lt;br/&gt;
&lt;br/&gt;
The fix of the issue is rather trivial. `jspawnhelper` has to close its writing end of the pipe which connects it with the parent Java process *before* starting to read from that pipe such that reads from the pipe can immediately return with EOF if the parent process terminates abnormally.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5100797">JDK-8307990</key>
            <summary>jspawnhelper must close its writing side of a pipe before reading from it</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simonis">Volker Simonis</assignee>
                                    <reporter username="simonis">Volker Simonis</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>redhat-interest</label>
                            <label>release-note=yes</label>
                    </labels>
                <created>Fri, 12 May 2023 03:24:49 -0700</created>
                <updated>Wed, 17 Sep 2025 00:14:38 -0700</updated>
                            <resolved>Thu, 1 Jun 2023 03:59:23 -0700</resolved>
                                    <version>17</version>
                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                                                            <comments>
                            <comment id="14631789" author="roboduke" created="Tue, 5 Dec 2023 10:50:40 -0800"  >[jdk17u-fix-request] Approval Request from Volker Simonis&lt;br/&gt;
This issue is a regression since JDK 13 which was only detected when more services started to move to JDK 17. It regularly happens in our production deployments. The original fix was integrated into JDK 21 in June which gave it enough testing and exposure.</comment>
                            <comment id="14631755" author="roboduke" created="Tue, 5 Dec 2023 09:54:05 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2013&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2013&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-05 17:45:42 +0000</comment>
                            <comment id="14586287" author="dukebot" created="Thu, 1 Jun 2023 03:59:22 -0700"  >Changeset: 39f6d807&lt;br/&gt;
Author:    Volker Simonis &amp;lt;&lt;a href=&apos;mailto:simonis@openjdk.org&apos;&gt;simonis@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-01 10:56:31 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/39f6d807dbbe0c9ecd72fe2f76bfbc3091b43c80&quot;&gt;https://git.openjdk.org/jdk/commit/39f6d807dbbe0c9ecd72fe2f76bfbc3091b43c80&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14582545" author="stuefe" created="Wed, 17 May 2023 23:54:07 -0700"  >[~rrigs]: Why &amp;quot;linux&amp;quot;? Does MacOS not use posix_spawn too?</comment>
                            <comment id="14581248" author="roboduke" created="Fri, 12 May 2023 08:34:15 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13956&quot;&gt;https://git.openjdk.org/jdk/pull/13956&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-12 15:24:19 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5116330">JDK-8321469</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5170678">JDK-8367533</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5170859">JDK-8367699</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5104985">JDK-8311645</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4975399">JDK-8213192</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5170688">JDK-8367543</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5103462">JDK-8310265</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5144993">JDK-8345256</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5101212">JDK-8308350</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5101156">JDK-8308297</subtask>
                                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31i17:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="190"><![CDATA[java.lang]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>