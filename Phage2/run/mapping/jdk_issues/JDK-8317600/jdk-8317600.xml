<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:42:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8317600] VtableStubs::stub_containing() table load not ordered wrt to stores</title>
                <link>https://bugs.openjdk.org/browse/JDK-8317600</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>VtableStubs::stub_containing() loops over the hash table buckets to see if the given address is a i/vtable stub.&lt;br/&gt;
&lt;br/&gt;
For every bucket, it loads the head and the next pointers with unordered loads; the store to the head pointer in enter() is also unordered wrt to the next pointer and that load, so stub_containing() could read garbage for the next field and return a wrong result.&lt;br/&gt;
&lt;br/&gt;
Found by code inspection for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8317527&quot; title=&quot;Make VtableStubs::entry_point() lock free&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8317527&quot;&gt;&lt;strike&gt;JDK-8317527&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
It&amp;#39;s very unlikely to do so (and there may be some proof like &amp;quot;between the store and the load there almost likely is some intervening synchronization&amp;quot;), and probably never happened so far.&lt;br/&gt;
&lt;br/&gt;
The simplest thing is to make this ordering explicit (and remove the &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;// Note: No locking needed since any change to the data structure&lt;br/&gt;
&amp;nbsp;&amp;nbsp;//       happens with an atomic store into it (we don&amp;#39;t care about&lt;br/&gt;
&amp;nbsp;&amp;nbsp;//       consistency with the _number_of_vtable_stubs counter).&lt;br/&gt;
&lt;br/&gt;
comment which is wrong about the &amp;quot;no synchronization&amp;quot; needed.)</description>
                <environment></environment>
        <key id="5111815">JDK-8317600</key>
            <summary>VtableStubs::stub_containing() table load not ordered wrt to stores</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tschatzl">Thomas Schatzl</assignee>
                                    <reporter username="tschatzl">Thomas Schatzl</reporter>
                        <labels>
                            <label>gc-pending-review</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oracle-triage-22</label>
                    </labels>
                <created>Thu, 5 Oct 2023 06:18:42 -0700</created>
                <updated>Fri, 19 Apr 2024 03:56:23 -0700</updated>
                            <resolved>Tue, 17 Oct 2023 12:03:03 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14662665" author="roboduke" created="Wed, 3 Apr 2024 12:40:22 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/446&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/446&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-03 19:35:34 +0000</comment>
                            <comment id="14662664" author="goetz" created="Wed, 3 Apr 2024 12:37:03 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.4-oracle.&lt;br/&gt;
Medium risk. As it adds ordering, it should improve. I think we should go along here.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Unfortunately no tests.  SAP nightly testing passed.</comment>
                            <comment id="14618983" author="dukebot" created="Tue, 17 Oct 2023 12:03:02 -0700"  >Changeset: c566dfcc&lt;br/&gt;
Author:    Thomas Schatzl &amp;lt;&lt;a href=&apos;mailto:tschatzl@openjdk.org&apos;&gt;tschatzl@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-10-17 19:01:03 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/c566dfccf8aa0d5cd53a6e4de61a1bca9f1367b5&quot;&gt;https://git.openjdk.org/jdk/commit/c566dfccf8aa0d5cd53a6e4de61a1bca9f1367b5&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14616409" author="thartmann" created="Fri, 6 Oct 2023 00:47:47 -0700"  >ILW = Missing memory fences (most likely not an issue in current code), never observed, no workaround = MLH = P4</comment>
                            <comment id="14616215" author="roboduke" created="Thu, 5 Oct 2023 07:58:16 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16056&quot;&gt;https://git.openjdk.org/jdk/pull/16056&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-05 14:20:41 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5125987">JDK-8329499</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5127372">JDK-8330659</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                                        </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5121005">JDK-8326092</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5111734">JDK-8317527</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33dpv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>