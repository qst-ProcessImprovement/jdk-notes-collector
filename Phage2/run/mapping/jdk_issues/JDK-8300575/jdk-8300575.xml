<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 15:51:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8300575] JVMTI support when using alternative virtual thread implementation</title>
                <link>https://bugs.openjdk.org/browse/JDK-8300575</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The JVMTI implementation needs to be updated to work with the alternative implementation of virtual threads. At this time, JVMTI is not supported when running with the alternative implementation and --enable-previews (see check in jni_GetEnv). The alternative implementation creates an OS thread for each virtual thread and can be selected by running with -XX:+UnlockExperimentalVMOptions -XX:-VMContinuations. Ports without VM continuations supports, e.g. Zero, use the alternative implementation by default.&lt;br/&gt;
&lt;br/&gt;
There are several functions that will need to be updated, e.g.&lt;br/&gt;
&lt;br/&gt;
- StopThread, RunAgentThread, GetCurrentThreadCpuTime, GetThreadCpuTime should return UNSUPPORTED_OPERATION for virtual threads.&lt;br/&gt;
&lt;br/&gt;
-  GetAllThreads and GetAllStackTraces are specified to return only platform threads and so will need to filter out the threads where the Thread object is a BaseVirtualThread.&lt;br/&gt;
&lt;br/&gt;
- SuspendAllVirtualThreads and ResumeAllVirtualThreads will need to suspend/resume threads where the Thread object is a BaseVirtualThread.&lt;br/&gt;
&lt;br/&gt;
The JVMTI spec only requires PopFrame, ForceEarlyReturnXXX, SetLocalXXX, GetLocalXXX to work for limited cases with virtual threads. It does not prohibit these functions supporting a wider range of cases so it might that no changes are required here.&lt;br/&gt;
&lt;br/&gt;
There may be more and searching the JVMTI spec for references to &amp;quot;virtual thread&amp;quot; may identify other functions/events with different behavior specified for virtual threads. Also, if `@requires vm.continuations` is removed from the existing JVMTI tests then they can be run in this mode to find issues.&lt;br/&gt;
&lt;br/&gt;
As part of this, or as follow-on, we may need test configuration to run some or all of the JVMTI tests with these options to ensure the code is regularly tested.</description>
                <environment></environment>
        <key id="5091855">JDK-8300575</key>
            <summary>JVMTI support when using alternative virtual thread implementation</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pchilanomate">Patricio Chilano Mateo</assignee>
                                    <reporter username="alanb">Alan Bateman</reporter>
                        <labels>
                            <label>loom</label>
                    </labels>
                <created>Wed, 18 Jan 2023 09:08:41 -0800</created>
                <updated>Wed, 5 Jul 2023 06:32:37 -0700</updated>
                            <resolved>Wed, 22 Feb 2023 07:44:48 -0800</resolved>
                                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14576131" author="roboduke" created="Mon, 24 Apr 2023 10:10:08 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20u/pull/60&quot;&gt;https://git.openjdk.org/jdk20u/pull/60&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-24 17:02:42 +0000</comment>
                            <comment id="14562064" author="dukebot" created="Wed, 22 Feb 2023 07:44:47 -0800"  >Changeset: 83bea26d&lt;br/&gt;
Author:    Patricio Chilano Mateo &amp;lt;&lt;a href=&apos;mailto:pchilanomate@openjdk.org&apos;&gt;pchilanomate@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-02-22 15:42:53 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/83bea26df453282d46afff333e006e8f9b7fb201&quot;&gt;https://git.openjdk.org/jdk/commit/83bea26df453282d46afff333e006e8f9b7fb201&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14559223" author="roboduke" created="Fri, 10 Feb 2023 11:38:14 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12512&quot;&gt;https://git.openjdk.org/jdk/pull/12512&lt;/a&gt;&lt;br/&gt;
Date: 2023-02-10 14:50:36 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5104839">JDK-8311510</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zzkr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17311"><![CDATA[b11]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="372"><![CDATA[jvmti]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>