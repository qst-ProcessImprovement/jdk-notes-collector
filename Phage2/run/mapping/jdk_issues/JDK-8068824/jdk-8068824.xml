<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:32:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8068824] Exception thrown in JTableHeader after clicking on popupmenu opened with right-click on header</title>
                <link>https://bugs.openjdk.org/browse/JDK-8068824</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>FULL PRODUCT VERSION :&lt;br/&gt;
java version &amp;quot;1.8.0_11&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_11-b12)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.11-b03, mixed mode)&lt;br/&gt;
&lt;br/&gt;
ADDITIONAL OS VERSION INFORMATION :&lt;br/&gt;
Microsoft Windows [Version 6.1.7601]&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
draggedColumn is not reset after right click on the header of the JTable for opening a popup menu. When we call the fireTableStructureChanged method in the table model afterwards, we get an ArrayIndexOutOfBoundsException.&lt;br/&gt;
&lt;br/&gt;
Full stack trace:&lt;br/&gt;
Exception in thread &amp;quot;AWT-EventQueue-0&amp;quot; java.lang.ArrayIndexOutOfBoundsException: -1&lt;br/&gt;
	at java.util.Vector.elementData(Vector.java:734)&lt;br/&gt;
	at java.util.Vector.elementAt(Vector.java:477)&lt;br/&gt;
	at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)&lt;br/&gt;
	at javax.swing.plaf.basic.BasicTableHeaderUI.getHeaderRenderer(BasicTableHeaderUI.java:693)&lt;br/&gt;
	at javax.swing.plaf.basic.BasicTableHeaderUI.paintCell(BasicTableHeaderUI.java:709)&lt;br/&gt;
	at javax.swing.plaf.basic.BasicTableHeaderUI.paint(BasicTableHeaderUI.java:685)&lt;br/&gt;
	at javax.swing.plaf.ComponentUI.update(ComponentUI.java:161)&lt;br/&gt;
	at javax.swing.JComponent.paintComponent(JComponent.java:777)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1053)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JViewport.paint(JViewport.java:744)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JLayeredPane.paint(JLayeredPane.java:586)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JComponent.paintToOffscreen(JComponent.java:5217)&lt;br/&gt;
	at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1532)&lt;br/&gt;
	at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1455)&lt;br/&gt;
	at javax.swing.RepaintManager.paint(RepaintManager.java:1252)&lt;br/&gt;
	at javax.swing.JComponent._paintImmediately(JComponent.java:5165)&lt;br/&gt;
	at javax.swing.JComponent.paintImmediately(JComponent.java:4976)&lt;br/&gt;
	at javax.swing.RepaintManager$3.run(RepaintManager.java:811)&lt;br/&gt;
	at javax.swing.RepaintManager$3.run(RepaintManager.java:794)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:75)&lt;br/&gt;
	at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:794)&lt;br/&gt;
	at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:769)&lt;br/&gt;
	at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:718)&lt;br/&gt;
	at javax.swing.RepaintManager.access$1100(RepaintManager.java:62)&lt;br/&gt;
	at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1680)&lt;br/&gt;
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)&lt;br/&gt;
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:744)&lt;br/&gt;
	at java.awt.EventQueue.access$400(EventQueue.java:97)&lt;br/&gt;
	at java.awt.EventQueue$3.run(EventQueue.java:697)&lt;br/&gt;
	at java.awt.EventQueue$3.run(EventQueue.java:691)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:75)&lt;br/&gt;
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:714)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)&lt;br/&gt;
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Run the example code. Do a mouse right click on the table header to open a pupup menu. Then, do a mouse left click on the menu entry. The exception appears.&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
The program runs without exception.&lt;br/&gt;
ACTUAL -&lt;br/&gt;
An ArrayIndexOutOfBoundsException is thrown.&lt;br/&gt;
&lt;br/&gt;
ERROR MESSAGES/STACK TRACES THAT OCCUR :&lt;br/&gt;
Exception in thread &amp;quot;AWT-EventQueue-0&amp;quot; java.lang.ArrayIndexOutOfBoundsException: -1&lt;br/&gt;
	at java.util.Vector.elementData(Vector.java:734)&lt;br/&gt;
	at java.util.Vector.elementAt(Vector.java:477)&lt;br/&gt;
	at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java:294)&lt;br/&gt;
	at javax.swing.plaf.basic.BasicTableHeaderUI.getHeaderRenderer(BasicTableHeaderUI.java:693)&lt;br/&gt;
	at javax.swing.plaf.basic.BasicTableHeaderUI.paintCell(BasicTableHeaderUI.java:709)&lt;br/&gt;
	at javax.swing.plaf.basic.BasicTableHeaderUI.paint(BasicTableHeaderUI.java:685)&lt;br/&gt;
	at javax.swing.plaf.ComponentUI.update(ComponentUI.java:161)&lt;br/&gt;
	at javax.swing.JComponent.paintComponent(JComponent.java:777)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1053)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JViewport.paint(JViewport.java:744)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JLayeredPane.paint(JLayeredPane.java:586)&lt;br/&gt;
	at javax.swing.JComponent.paintChildren(JComponent.java:886)&lt;br/&gt;
	at javax.swing.JComponent.paint(JComponent.java:1062)&lt;br/&gt;
	at javax.swing.JComponent.paintToOffscreen(JComponent.java:5217)&lt;br/&gt;
	at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1532)&lt;br/&gt;
	at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1455)&lt;br/&gt;
	at javax.swing.RepaintManager.paint(RepaintManager.java:1252)&lt;br/&gt;
	at javax.swing.JComponent._paintImmediately(JComponent.java:5165)&lt;br/&gt;
	at javax.swing.JComponent.paintImmediately(JComponent.java:4976)&lt;br/&gt;
	at javax.swing.RepaintManager$3.run(RepaintManager.java:811)&lt;br/&gt;
	at javax.swing.RepaintManager$3.run(RepaintManager.java:794)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:75)&lt;br/&gt;
	at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:794)&lt;br/&gt;
	at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:769)&lt;br/&gt;
	at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:718)&lt;br/&gt;
	at javax.swing.RepaintManager.access$1100(RepaintManager.java:62)&lt;br/&gt;
	at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1680)&lt;br/&gt;
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)&lt;br/&gt;
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:744)&lt;br/&gt;
	at java.awt.EventQueue.access$400(EventQueue.java:97)&lt;br/&gt;
	at java.awt.EventQueue$3.run(EventQueue.java:697)&lt;br/&gt;
	at java.awt.EventQueue$3.run(EventQueue.java:691)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:75)&lt;br/&gt;
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:714)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)&lt;br/&gt;
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)&lt;br/&gt;
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)&lt;br/&gt;
&lt;br/&gt;
REPRODUCIBILITY :&lt;br/&gt;
This bug can be reproduced always.&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
import java.awt.event.ActionEvent;&lt;br/&gt;
&lt;br/&gt;
import javax.swing.AbstractAction;&lt;br/&gt;
import javax.swing.JPopupMenu;&lt;br/&gt;
import javax.swing.JTable;&lt;br/&gt;
import javax.swing.table.AbstractTableModel;&lt;br/&gt;
&lt;br/&gt;
/**&lt;br/&gt;
&amp;nbsp;* Created by mhauser on 11/3/2014.&lt;br/&gt;
&amp;nbsp;*/&lt;br/&gt;
public class DragTestTable extends JTable {&lt;br/&gt;
&lt;br/&gt;
	public DragTestTable(DragTestTableModel model){&lt;br/&gt;
&lt;br/&gt;
		super(model);&lt;br/&gt;
&lt;br/&gt;
		JPopupMenu menu = new JPopupMenu();&lt;br/&gt;
		menu.add(new AbstractAction(&amp;quot;Bug Test&amp;quot;) {&lt;br/&gt;
			@Override&lt;br/&gt;
			public void actionPerformed(ActionEvent e) {&lt;br/&gt;
				((DragTestTableModel)getModel()).fireTableStructureChanged();&lt;br/&gt;
			}&lt;br/&gt;
		});&lt;br/&gt;
&lt;br/&gt;
		getTableHeader().setComponentPopupMenu(menu);&lt;br/&gt;
	}&lt;br/&gt;
&lt;br/&gt;
	public static class DragTestTableModel extends AbstractTableModel {&lt;br/&gt;
		private Object rowData[][];&lt;br/&gt;
		private Object columnNames[];&lt;br/&gt;
&lt;br/&gt;
		public DragTestTableModel(Object rowData[][], Object columnNames[]){&lt;br/&gt;
			super();&lt;br/&gt;
			this.rowData = rowData;&lt;br/&gt;
			this.columnNames = columnNames;&lt;br/&gt;
		}&lt;br/&gt;
&lt;br/&gt;
		public String getColumnName(int column) { return columnNames[column].toString(); }&lt;br/&gt;
		public int getRowCount() { return rowData.length; }&lt;br/&gt;
		public int getColumnCount() { return columnNames.length; }&lt;br/&gt;
		public Object getValueAt(int row, int col) { return rowData[row][col]; }&lt;br/&gt;
		public boolean isCellEditable(int row, int column) { return true; }&lt;br/&gt;
		public void setValueAt(Object value, int row, int col) {&lt;br/&gt;
			rowData[row][col] = value;&lt;br/&gt;
			fireTableCellUpdated(row, col);&lt;br/&gt;
		}&lt;br/&gt;
		public void fireTableStructureChanged(){&lt;br/&gt;
			super.fireTableStructureChanged();&lt;br/&gt;
		}&lt;br/&gt;
&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
import java.awt.BorderLayout;&lt;br/&gt;
&lt;br/&gt;
import javax.swing.JFrame;&lt;br/&gt;
import javax.swing.JScrollPane;&lt;br/&gt;
import javax.swing.JTable;&lt;br/&gt;
&lt;br/&gt;
/**&lt;br/&gt;
&amp;nbsp;* Created by mhauser on 11/3/2014.&lt;br/&gt;
&amp;nbsp;*/&lt;br/&gt;
public class JTableCreatingDemo {&lt;br/&gt;
&lt;br/&gt;
	public static void main(String args[]) {&lt;br/&gt;
		JFrame frame = new JFrame();&lt;br/&gt;
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);&lt;br/&gt;
&lt;br/&gt;
		Object rowData[][] = { { &amp;quot;Row1-Column1&amp;quot;, &amp;quot;Row1-Column2&amp;quot;, &amp;quot;Row1-Column3&amp;quot; },&lt;br/&gt;
			{ &amp;quot;Row2-Column1&amp;quot;, &amp;quot;Row2-Column2&amp;quot;, &amp;quot;Row2-Column3&amp;quot; } };&lt;br/&gt;
		Object columnNames[] = { &amp;quot;Test&amp;quot;, &amp;quot;Click me with right mouse click!&amp;quot;, &amp;quot;Test&amp;quot; };&lt;br/&gt;
&lt;br/&gt;
		DragTestTable.DragTestTableModel model = new DragTestTable.DragTestTableModel(rowData, columnNames);&lt;br/&gt;
&lt;br/&gt;
		JTable table = new DragTestTable(model);&lt;br/&gt;
&lt;br/&gt;
		JScrollPane scrollPane = new JScrollPane(table);&lt;br/&gt;
		frame.add(scrollPane, BorderLayout.CENTER);&lt;br/&gt;
		frame.setSize(600, 150);&lt;br/&gt;
		frame.setVisible(true);&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
Execute getTableHeader().setDraggedColumn(null) before ((DragTestTableModel)getModel()).fireTableStructureChanged() is executed.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="4753351">JDK-8068824</key>
            <summary>Exception thrown in JTableHeader after clicking on popupmenu opened with right-click on header</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="psadhukhan">Prasanta Sadhukhan</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>sn_141</label>
                            <label>webbug</label>
                    </labels>
                <created>Tue, 4 Nov 2014 00:35:37 -0800</created>
                <updated>Tue, 11 Apr 2023 15:03:09 -0700</updated>
                            <resolved>Tue, 4 Apr 2023 22:43:22 -0700</resolved>
                                    <version>8u11</version>
                                    <fixVersion>21</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14571885" author="dukebot" created="Tue, 4 Apr 2023 22:43:21 -0700"  >Changeset: b659c353&lt;br/&gt;
Author:    Prasanta Sadhukhan &amp;lt;&lt;a href=&apos;mailto:psadhukhan@openjdk.org&apos;&gt;psadhukhan@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-05 05:41:30 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b659c35395fd3ac284a8fccfc04a4adf97438fb5&quot;&gt;https://git.openjdk.org/jdk/commit/b659c35395fd3ac284a8fccfc04a4adf97438fb5&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14569318" author="roboduke" created="Fri, 24 Mar 2023 03:42:55 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13172&quot;&gt;https://git.openjdk.org/jdk/pull/13172&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-24 10:34:54 +0000</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17006"><![CDATA[windows_7]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09wrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>57797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17417"><![CDATA[b17]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="206"><![CDATA[javax.swing]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>