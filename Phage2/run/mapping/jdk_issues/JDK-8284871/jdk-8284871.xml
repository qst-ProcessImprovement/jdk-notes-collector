<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:54:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8284871] Use covariant overrides for the resolveConstantDesc(Lookup) method in sub&#8209;interfaces of java.lang.constant.ConstantDesc</title>
                <link>https://bugs.openjdk.org/browse/JDK-8284871</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
The&amp;#xA0;`java.lang.constant.ConstantDesc::resolveConstantDesc(&#8230;)` interface&amp;#xA0;method should&amp;#xA0;be&amp;#xA0;overridden by&amp;#xA0;the&amp;#xA0;`java.lang.constant.ClassDesc`, `java.lang.constant.MethodHandleDesc`, and&amp;#xA0;`java.lang.constant.MethodTypeDesc` to&amp;#xA0;return the&amp;#xA0;exact&amp;#xA0;type as&amp;#xA0;in&amp;#xA0;the&amp;#xA0;`java.lang.constant.ClassDescImpl`, `java.lang.constant.MethodTypeDescImpl`, `java.lang.constant.DirectMethodHandleDescImpl`, and&amp;#xA0;`java.lang.constant.AsTypeMethodHandleDesc`.&lt;br/&gt;
&lt;br/&gt;
This&amp;#xA0;would avoid&amp;#xA0;the&amp;#xA0;need to&amp;#xA0;write explicit&amp;#xA0;casts at&amp;#xA0;use&amp;#xA0;sites of&amp;#xA0;said&amp;#xA0;methods.&lt;br/&gt;
&lt;br/&gt;
Proposed&amp;#xA0;change:&lt;br/&gt;
```&lt;br/&gt;
diff --git a/src/java.base/share/classes/java/lang/constant/ClassDesc.java b/src/java.base/share/classes/java/lang/constant/ClassDesc.java&lt;br/&gt;
index 6742b622a40..5673f42ddf8 100644&lt;br/&gt;
--- a/src/java.base/share/classes/java/lang/constant/ClassDesc.java&lt;br/&gt;
+++ b/src/java.base/share/classes/java/lang/constant/ClassDesc.java&lt;br/&gt;
@@ -24,6 +24,7 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;package java.lang.constant;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+import java.lang.invoke.MethodHandles;&lt;br/&gt;
&amp;nbsp;import java.lang.invoke.TypeDescriptor;&lt;br/&gt;
&amp;nbsp;import java.util.stream.Stream;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
@@ -332,6 +333,9 @@ public sealed interface ClassDesc&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String descriptorString();&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+    @Override&lt;br/&gt;
+    Class&amp;lt;?&amp;gt; resolveConstantDesc(MethodHandles.Lookup lookup) throws ReflectiveOperationException;&lt;br/&gt;
+&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Compare the specified object with this descriptor for equality.  Returns&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* {@code true} if and only if the specified object is also a&lt;br/&gt;
diff --git a/src/java.base/share/classes/java/lang/constant/MethodHandleDesc.java b/src/java.base/share/classes/java/lang/constant/MethodHandleDesc.java&lt;br/&gt;
index 8c9ee15208e..d3b94094c3d 100644&lt;br/&gt;
--- a/src/java.base/share/classes/java/lang/constant/MethodHandleDesc.java&lt;br/&gt;
+++ b/src/java.base/share/classes/java/lang/constant/MethodHandleDesc.java&lt;br/&gt;
@@ -204,6 +204,9 @@ public sealed interface MethodHandleDesc&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MethodTypeDesc invocationType();&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+    @Override&lt;br/&gt;
+    MethodHandle resolveConstantDesc(MethodHandles.Lookup lookup) throws ReflectiveOperationException;&lt;br/&gt;
+&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Compares the specified object with this descriptor for equality.  Returns&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* {@code true} if and only if the specified object is also a&lt;br/&gt;
diff --git a/src/java.base/share/classes/java/lang/constant/MethodTypeDesc.java b/src/java.base/share/classes/java/lang/constant/MethodTypeDesc.java&lt;br/&gt;
index 4750231ce37..15758a99cee 100644&lt;br/&gt;
--- a/src/java.base/share/classes/java/lang/constant/MethodTypeDesc.java&lt;br/&gt;
+++ b/src/java.base/share/classes/java/lang/constant/MethodTypeDesc.java&lt;br/&gt;
@@ -24,6 +24,7 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;package java.lang.constant;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+import java.lang.invoke.MethodHandles;&lt;br/&gt;
&amp;nbsp;import java.lang.invoke.MethodType;&lt;br/&gt;
&amp;nbsp;import java.lang.invoke.TypeDescriptor;&lt;br/&gt;
&amp;nbsp;import java.util.List;&lt;br/&gt;
@@ -188,6 +189,9 @@ public sealed interface MethodTypeDesc&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;returnType().displayName());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+    @Override&lt;br/&gt;
+    MethodType resolveConstantDesc(MethodHandles.Lookup lookup) throws ReflectiveOperationException;&lt;br/&gt;
+&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Compares the specified object with this descriptor for equality.  Returns&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* {@code true} if and only if the specified object is also a&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5072481">JDK-8284871</key>
            <summary>Use covariant overrides for the resolveConstantDesc(Lookup) method in sub&#8209;interfaces of java.lang.constant.ConstantDesc</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="liach">Chen Liang</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>dcsaw</label>
                            <label>reproducer-other</label>
                            <label>webbug</label>
                    </labels>
                <created>Wed, 13 Apr 2022 06:59:40 -0700</created>
                <updated>Mon, 17 Apr 2023 10:41:54 -0700</updated>
                            <resolved>Tue, 11 Apr 2023 06:42:30 -0700</resolved>
                                    <version>19</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14573059" author="dukebot" created="Tue, 11 Apr 2023 06:42:29 -0700"  >Changeset: e5ce7d9e&lt;br/&gt;
Author:    Chen Liang &amp;lt;&lt;a href=&apos;mailto:liach@openjdk.org&apos;&gt;liach@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Mandy Chung &amp;lt;&lt;a href=&apos;mailto:mchung@openjdk.org&apos;&gt;mchung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-11 13:40:56 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/e5ce7d9e431e54504ddcf321711fe8996ce5ed05&quot;&gt;https://git.openjdk.org/jdk/commit/e5ce7d9e431e54504ddcf321711fe8996ce5ed05&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14566029" author="roboduke" created="Fri, 10 Mar 2023 21:05:25 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12986&quot;&gt;https://git.openjdk.org/jdk/pull/12986&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-11 04:59:07 +0000</comment>
                            <comment id="14488831" author="tongwan" created="Thu, 14 Apr 2022 01:30:31 -0700"  >Moved to JDK for further evaluations.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10400">
                    <name>CSR</name>
                                            <outwardlinks description="csr for">
                                        <issuelink>
            <issuekey id="5096013">JDK-8304012</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wps3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="190"><![CDATA[java.lang]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>