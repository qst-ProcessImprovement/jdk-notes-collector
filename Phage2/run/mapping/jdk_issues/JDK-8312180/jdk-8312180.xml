<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:40:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8312180] (bf) MappedMemoryUtils passes incorrect arguments to msync (aix)</title>
                <link>https://bugs.openjdk.org/browse/JDK-8312180</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>While debugging a failure in TestByteBuffer.java, I noticed that  msync is called on the wrong address and with a too-large length on AIX. These values come from calling force on a memory segment which passes them to the msync procedure on Unix platforms. Before passing the address and length to msync, they are modified wrt pagesize and some internal state.&lt;br/&gt;
&lt;br/&gt;
In my testing, the value returned by the Bits.pageSize() method (called internally in MappedMemoryUtils), is incorrect in the context of msync. I suspect this has to to with Dynamic Variable Page Sizes [1]. The VM is aware of the coarse-grained (eg. 64 KiB) page size, but mappings appear to operate on the fine-grained (eg. 4 KiB) page size returned by sysconf(_SC_PAGE_SIZE) and mentioned specifically in the AIX msync description [2].&lt;br/&gt;
&lt;br/&gt;
Sample values:&lt;br/&gt;
&lt;br/&gt;
- A call to force made with these values: address: 0xA00000007FB2000 index: 0 length: 0x20&lt;br/&gt;
- Results in a call to force0 made with these values: address: 0xA00000007FB0000 len: 0x2020&lt;br/&gt;
&lt;br/&gt;
- sysconf(_SC_PAGE_SIZE) returns: 0x1000&lt;br/&gt;
- Bits.pageSize() returns: 0x10000 (note the extra zero)&lt;br/&gt;
&lt;br/&gt;
As one might expect, when called with the wrong address and length, the msync procedure call often produces errors depending on which mapping appears at the large page boundary, and how much memory was mapped there.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;https://www.ibm.com/docs/en/aix/7.2?topic=support-dynamic-variable-page-size&quot;&gt;https://www.ibm.com/docs/en/aix/7.2?topic=support-dynamic-variable-page-size&lt;/a&gt;&lt;br/&gt;
[2] &lt;a href=&quot;https://www.ibm.com/docs/en/aix/7.2?topic=m-msync-subroutine&quot;&gt;https://www.ibm.com/docs/en/aix/7.2?topic=m-msync-subroutine&lt;/a&gt;</description>
                <environment></environment>
        <key id="5105619">JDK-8312180</key>
            <summary>(bf) MappedMemoryUtils passes incorrect arguments to msync (aix)</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tsteele">Tyler Steele</assignee>
                                    <reporter username="tsteele">Tyler Steele</reporter>
                        <labels>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Mon, 17 Jul 2023 09:37:00 -0700</created>
                <updated>Tue, 13 Feb 2024 07:36:27 -0800</updated>
                            <resolved>Fri, 18 Aug 2023 07:01:45 -0700</resolved>
                                                    <fixVersion>22</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14605793" author="JIRAUSER20004" created="Tue, 22 Aug 2023 07:17:07 -0700"  >jdk 21u fix request&lt;br/&gt;
&lt;br/&gt;
This relatively minor change to the way page sizes are reported on AIX is a prerequisite for a fix to TestByteBuffer. The change applied cleanly. The risk is low &amp;amp; testing looks good.</comment>
                            <comment id="14605328" author="roboduke" created="Mon, 21 Aug 2023 06:46:03 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/77&quot;&gt;https://git.openjdk.org/jdk21u/pull/77&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-21 13:40:36 +0000</comment>
                            <comment id="14604995" author="dukebot" created="Fri, 18 Aug 2023 07:01:44 -0700"  >Changeset: fdac6a6a&lt;br/&gt;
Author:    Tyler Steele &amp;lt;&lt;a href=&apos;mailto:tsteele@openjdk.org&apos;&gt;tsteele@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-08-18 13:58:58 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/fdac6a6ac871366614efe44aca58ab520766b5c8&quot;&gt;https://git.openjdk.org/jdk/commit/fdac6a6ac871366614efe44aca58ab520766b5c8&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14597674" author="roboduke" created="Thu, 20 Jul 2023 13:24:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14963&quot;&gt;https://git.openjdk.org/jdk/pull/14963&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-20 20:19:20 +0000</comment>
                            <comment id="14596736" author="roboduke" created="Mon, 17 Jul 2023 15:56:48 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14904&quot;&gt;https://git.openjdk.org/jdk/pull/14904&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-17 17:21:01 +0000</comment>
                            <comment id="14596725" author="JIRAUSER20004" created="Mon, 17 Jul 2023 15:02:07 -0700"  >Hi Alan, I see you changed the title. I don&amp;#39;t believe the address size is incorrect. The arguments to msync--address, and length--have the wrong values. If I missed something about the size of the address let me know. For now, I am removing the word size, but keeping the other edits to the title.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5108759">JDK-8314922</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="18900"><![CDATA[aix]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32blv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="228"><![CDATA[java.nio]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17001"><![CDATA[Not verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>