<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 17:34:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8303910] jdk/classfile/CorpusTest.java failed 1 of 6754 tests</title>
                <link>https://bugs.openjdk.org/browse/JDK-8303910</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK21 CI:&lt;br/&gt;
&lt;br/&gt;
jdk/classfile/CorpusTest.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
SUCCESSFUL CorpusTest::testNullAdaptations &amp;#39;[3377] /System/Volumes/Data/mesos/work_dir/slaves/782b3f2b-1fe4-42ad-a0aa-b7bf2f5b3ebf-S5205/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/3057cabf-c476-4906-b224-5cdac26c2d33/runs/12aa94a1-de3e-499e-b54f-1babb7033f91/testoutput/test-support/jtreg_open_test_jdk_tier1_part3/classes/3/jdk/classfile/CorpusTest.d/helpers/ClassRecord$ConstantPoolEntryRecord$CpMethodTypeRecord.class&amp;#39;&lt;br/&gt;
SUCCESSFUL CorpusTest::testNullAdaptations &amp;#39;[3376] /System/Volumes/Data/mesos/work_dir/slaves/782b3f2b-1fe4-42ad-a0aa-b7bf2f5b3ebf-S5205/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/3057cabf-c476-4906-b224-5cdac26c2d33/runs/12aa94a1-de3e-499e-b54f-1babb7033f91/testoutput/test-support/jtreg_open_test_jdk_tier1_part3/classes/3/jdk/classfile/CorpusTest.d/helpers/ClassRecord$LocalVariableRecord.class&amp;#39;&lt;br/&gt;
SUCCESSFUL CorpusTest::testNullAdaptations &amp;#39;[3364] /System/Volumes/Data/mesos/work_dir/slaves/782b3f2b-1fe4-42ad-a0aa-b7bf2f5b3ebf-S5205/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/3057cabf-c476-4906-b224-5cdac26c2d33/runs/12aa94a1-de3e-499e-b54f-1babb7033f91/testoutput/test-support/jtreg_open_test_jdk_tier1_part3/classes/3/jdk/classfile/CorpusTest.d/helpers/ClassRecord$AttributesRecord.class&amp;#39;&lt;br/&gt;
JavaTest Message: JUnit Platform Failure(s): 1&lt;br/&gt;
&lt;br/&gt;
[ JUnit Containers: found 5, started 5, succeeded 5, failed 0, aborted 0, skipped 0]&lt;br/&gt;
[ JUnit Tests: found 6754, started 6754, succeeded 6753, failed 1, aborted 0, skipped 0]&lt;br/&gt;
&lt;br/&gt;
java.lang.Exception: JUnit test failure&lt;br/&gt;
	at com.sun.javatest.regtest.agent.JUnitRunner.runWithJUnitPlatform(JUnitRunner.java:150)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.JUnitRunner.main(JUnitRunner.java:96)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.JUnitRunner.main(JUnitRunner.java:62)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.Exception: JUnit test failure&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: java.lang.Exception: JUnit test failure&lt;br/&gt;
----------rerun:(51/7707)*----------&lt;br/&gt;
&lt;br/&gt;
With 6754 tests executed and a couple of lines per test, the&lt;br/&gt;
test output was truncated due to size. It appears that the&lt;br/&gt;
failing test happened in the truncated zone.</description>
                <environment></environment>
        <key id="5095880">JDK-8303910</key>
            <summary>jdk/classfile/CorpusTest.java failed 1 of 6754 tests</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asotona">Adam Sotona</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>intermittent</label>
                            <label>tier1</label>
                    </labels>
                <created>Thu, 9 Mar 2023 08:27:15 -0800</created>
                <updated>Tue, 8 Aug 2023 12:00:45 -0700</updated>
                            <resolved>Tue, 14 Mar 2023 01:38:02 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14566841" author="dcubed" created="Tue, 14 Mar 2023 11:22:56 -0700"  >The fix for this test is integrated in jdk-21+14-1129.</comment>
                            <comment id="14566665" author="dukebot" created="Tue, 14 Mar 2023 01:38:00 -0700"  >Changeset: 43eca1dc&lt;br/&gt;
Author:    Adam Sotona &amp;lt;&lt;a href=&apos;mailto:asotona@openjdk.org&apos;&gt;asotona@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-03-14 08:36:05 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/43eca1dcb197e3615b6077a5d8aef28f32a7724c&quot;&gt;https://git.openjdk.org/jdk/commit/43eca1dcb197e3615b6077a5d8aef28f32a7724c&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14566663" author="asotona" created="Tue, 14 Mar 2023 01:33:44 -0700"  >The reason why the test failed on any platform and only with approx 1:100.000 chance is in thread-unsafe lazy initialisation of helper array with constants and combination of heavy parallel junit parametrised tests execution.&lt;br/&gt;
Above linked PR fixes that.&lt;br/&gt;
Thanks for not blacklisting the test, so I could find the root cause.  </comment>
                            <comment id="14566537" author="dcubed" created="Mon, 13 Mar 2023 14:03:49 -0700"  >So far this test has failed on: macosx-aarch64, windows-x64 and linux-x64-open.&lt;br/&gt;
And there are different numbers of tests executed in each of those runs. Don&amp;#39;t&lt;br/&gt;
know why...</comment>
                            <comment id="14566503" author="roboduke" created="Mon, 13 Mar 2023 12:15:49 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13004&quot;&gt;https://git.openjdk.org/jdk/pull/13004&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-13 18:54:11 +0000</comment>
                            <comment id="14566336" author="asotona" created="Mon, 13 Mar 2023 09:30:19 -0700"  >Catched the root cause:&lt;br/&gt;
```&lt;br/&gt;
java.lang.NullPointerException: Cannot invoke &amp;quot;jdk.internal.classfile.TypeKind.descriptor()&amp;quot; because the return value of &amp;quot;jdk.internal.classfile.instruction.NewPrimitiveArrayInstruction.typeKind()&amp;quot; is null&lt;br/&gt;
	at helpers.ClassRecord$CodeRecord.lambda$instructions$3(ClassRecord.java:525)&lt;br/&gt;
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)&lt;br/&gt;
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)&lt;br/&gt;
	at java.base/java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:1003)&lt;br/&gt;
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1924)&lt;br/&gt;
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)&lt;br/&gt;
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)&lt;br/&gt;
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)&lt;br/&gt;
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)&lt;br/&gt;
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)&lt;br/&gt;
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)&lt;br/&gt;
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)&lt;br/&gt;
	at helpers.ClassRecord$CodeRecord.instructions(ClassRecord.java:568)&lt;br/&gt;
	at helpers.ClassRecord$CodeRecord.ofCodeAttribute(ClassRecord.java:587)&lt;br/&gt;
	at helpers.ClassRecord$AttributesRecord.lambda$ofAttributes$51(ClassRecord.java:288)&lt;br/&gt;
	at helpers.ClassRecord$AttributeFinder.findAndMap(ClassRecord.java:194)&lt;br/&gt;
	at helpers.ClassRecord$AttributesRecord.ofAttributes(ClassRecord.java:288)&lt;br/&gt;
	at helpers.ClassRecord$MethodRecord.ofMethodModel(ClassRecord.java:174)&lt;br/&gt;
	at helpers.ClassRecord.lambda$ofClassModel$12(ClassRecord.java:128)&lt;br/&gt;
	at java.base/java.util.stream.Collectors.lambda$uniqKeysMapAccumulator$1(Collectors.java:180)&lt;br/&gt;
	at java.base/java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)&lt;br/&gt;
	at java.base/java.util.AbstractList$RandomAccessSpliterator.forEachRemaining(AbstractList.java:722)&lt;br/&gt;
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)&lt;br/&gt;
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)&lt;br/&gt;
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)&lt;br/&gt;
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)&lt;br/&gt;
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)&lt;br/&gt;
	at helpers.ClassRecord.ofClassModel(ClassRecord.java:128)&lt;br/&gt;
	at CorpusTest.testReadAndTransform(CorpusTest.java:200)&lt;br/&gt;
FAILED     CorpusTest::testReadAndTransform &amp;#39;[4] modules/java.base/java/io/BufferedReader.class&amp;#39;&lt;br/&gt;
```</comment>
                            <comment id="14566232" author="asotona" created="Mon, 13 Mar 2023 02:40:34 -0700"  >OK, I&amp;#39;ll try to find it and improve diagnostic output</comment>
                            <comment id="14566045" author="dcubed" created="Sat, 11 Mar 2023 07:53:43 -0800"  >This was not a failure due to timeout. A single test failed somewhere in the&lt;br/&gt;
middle of the 6754 tests. We don&amp;#39;t see which test failed because the output&lt;br/&gt;
in the .jtr file was clipped by JTREG.</comment>
                            <comment id="14566031" author="asotona" created="Fri, 10 Mar 2023 22:44:21 -0800"  >Yes, these tests belong to Classfile API.&lt;br/&gt;
It seems CorpusTest needs an extended timeout, as I haven&amp;#39;t seen any other possible reason of not-executing and finishing all the tests.</comment>
                            <comment id="14566000" author="smarks" created="Fri, 10 Mar 2023 14:43:40 -0800"  >[~asotona] Is this yours?</comment>
                            <comment id="14565580" author="dcubed" created="Thu, 9 Mar 2023 08:34:09 -0800"  >Here&amp;#39;s a quick analysis of the first words from the .jtr file:&lt;br/&gt;
&lt;br/&gt;
$ sed -e &amp;#39;s/ .*//&amp;#39; CorpusTest.jtr.subset | sort | uniq -c&lt;br/&gt;
1917 STARTED&lt;br/&gt;
1919 SUCCESSFUL&lt;br/&gt;
&lt;br/&gt;
so we only see results for 1919 test of 6754.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5096205">JDK-8304164</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30oer:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17407"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="190"><![CDATA[java.lang]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>