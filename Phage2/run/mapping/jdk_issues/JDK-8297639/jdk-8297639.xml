<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:28:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8297639] Remove preventive GCs in G1</title>
                <link>https://bugs.openjdk.org/browse/JDK-8297639</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>After obsoleting it in JDK20, remove the functionality for the next release (i.e. JDK 21). No good application for it has been found, and investing more time in fixing it seems too much work for too little gain.</description>
                <environment></environment>
        <key id="5088326">JDK-8297639</key>
            <summary>Remove preventive GCs in G1</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tschatzl">Thomas Schatzl</assignee>
                                    <reporter username="tschatzl">Thomas Schatzl</reporter>
                        <labels>
                            <label>gc-g1</label>
                            <label>gc-g1-preventive-gc</label>
                            <label>gc-pending-review</label>
                    </labels>
                <created>Fri, 25 Nov 2022 05:31:19 -0800</created>
                <updated>Mon, 13 Nov 2023 04:15:30 -0800</updated>
                            <resolved>Wed, 14 Dec 2022 09:56:38 -0800</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14625672" author="chegar" created="Mon, 13 Nov 2023 04:05:04 -0800"  >The disabling and subsequent removal of preventive GC has caused issues for Elasticsearch, when running with JDK 20 and 21. &lt;br/&gt;
&lt;br/&gt;
The particular scenario that encounters problems is one where hundreds of documents are retrieved from a search, each with a large(ish) 4MB size. These documents comprise a  ~400 MB pytorch model being transfered from a data node to an ML (Machine Learning) node. The pytorch model is chunked and stored in separate documents that are retrieved one at a time by the ML node. When repeatedly allocating these large arrays, we see memory pressure distinctly increase in JDK 20.0.1.&lt;br/&gt;
&lt;br/&gt;
For JDK 20.x we set -XX:+G1UsePreventiveGC. For JDK 21, since no such flag is available, we obviously do not set it, but the behaviour is slightly better ( GC exhibit&amp;#39;s slightly better behaviour, but not as good as JDK 20 with the aforementioned flag ).&lt;br/&gt;
&lt;br/&gt;
Elasticsearch endeavours to workaround this issue, by 1) reducing the size of the chunks to say 1MB, and 2) reusing the memory backed by the arrays for subsequent chunks.&lt;br/&gt;
&lt;br/&gt;
See &lt;a href=&quot;https://github.com/elastic/elasticsearch/issues/99592&quot;&gt;https://github.com/elastic/elasticsearch/issues/99592&lt;/a&gt; for further details. ( there are many other related issues with Elasticsearch, but this one is the most relevant and coherent ).</comment>
                            <comment id="14545461" author="dukebot" created="Wed, 14 Dec 2022 09:56:36 -0800"  >Changeset: 8ff2928a&lt;br/&gt;
Author:    Thomas Schatzl &amp;lt;&lt;a href=&apos;mailto:tschatzl@openjdk.org&apos;&gt;tschatzl@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2022-12-14 17:55:15 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8ff2928a04aeec8c09ff4a1ec4e83d4c9010950e&quot;&gt;https://git.openjdk.org/jdk/commit/8ff2928a04aeec8c09ff4a1ec4e83d4c9010950e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14545118" author="roboduke" created="Tue, 13 Dec 2022 08:37:49 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11654&quot;&gt;https://git.openjdk.org/jdk/pull/11654&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-13 16:29:59 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5096976">JDK-8304802</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5077088">JDK-8288484</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5057349">JDK-8272980</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5079701">JDK-8290738</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5083472">JDK-8293861</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ze3f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17317"><![CDATA[b02]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>