<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:33:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8298048] Combine CDS archive heap into a single block</title>
                <link>https://bugs.openjdk.org/browse/JDK-8298048</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>In JDK 20, the CDS archive can consists of up to 4 blocks of memory&lt;br/&gt;
&lt;br/&gt;
- one or two blocks of &amp;quot;open&amp;quot; type, and one or two blocks of &amp;quot;closed&amp;quot; type&lt;br/&gt;
&lt;br/&gt;
After &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8296344&quot; title=&quot;Remove dependency on G1 for writing the CDS archive heap &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8296344&quot;&gt;&lt;strike&gt;JDK-8296344&lt;/strike&gt;&lt;/a&gt;, we will always have a single block of &amp;quot;open&amp;quot; and a single block of &amp;quot;closed&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
Still, having the two separate blocks makes the runtime mapping code complicated. Also, G1 has special handling for the &amp;quot;archive regions&amp;quot; used for mapping these blocks. See&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://github.com/openjdk/jdk/blob/6065696e5df2cde8c313083217ead3417d04c365/src/hotspot/share/gc/g1/heapRegionType.hpp#L80-L91&quot;&gt;https://github.com/openjdk/jdk/blob/6065696e5df2cde8c313083217ead3417d04c365/src/hotspot/share/gc/g1/heapRegionType.hpp#L80-L91&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
It&amp;#39;s unclear that such special handling has any performance benefit. Objects in the CDS archive heap are expected to have a long lifecycle and are infrequently modified. It should be sufficient to place these objects into the old generation (for any generational collector, not just G1).&lt;br/&gt;
&lt;br/&gt;
********************************&lt;br/&gt;
Proposal:&lt;br/&gt;
&lt;br/&gt;
- Combine all objects in the CDS archive heap into a single, contiguous block.&lt;br/&gt;
&lt;br/&gt;
- Remove &amp;quot;archive region&amp;quot; handling from G1&lt;br/&gt;
&lt;br/&gt;
- At runtime, allocate one or several contiguous G1 regions for mapping the CDS archive heap. These regions are marked as in the old generation.&lt;br/&gt;
&lt;br/&gt;
*********************************&lt;br/&gt;
Similar mapping code will be implemented in other collectors in follow-up RFEs.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5088818">JDK-8298048</key>
            <summary>Combine CDS archive heap into a single block</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="iklam">Ioi Lam</assignee>
                                    <reporter username="iklam">Ioi Lam</reporter>
                        <labels>
                            <label>archive-heap</label>
                            <label>cds</label>
                    </labels>
                <created>Fri, 2 Dec 2022 09:23:50 -0800</created>
                <updated>Wed, 23 Apr 2025 06:28:49 -0700</updated>
                            <resolved>Fri, 21 Apr 2023 08:31:28 -0700</resolved>
                                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14575764" author="dukebot" created="Fri, 21 Apr 2023 08:31:26 -0700"  >Changeset: 723037a7&lt;br/&gt;
Author:    Ioi Lam &amp;lt;&lt;a href=&apos;mailto:iklam@openjdk.org&apos;&gt;iklam@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-21 15:29:45 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/723037a79d2a43b9a1a247d8f81a47907faadab1&quot;&gt;https://git.openjdk.org/jdk/commit/723037a79d2a43b9a1a247d8f81a47907faadab1&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14571825" author="roboduke" created="Tue, 4 Apr 2023 14:16:22 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13284&quot;&gt;https://git.openjdk.org/jdk/pull/13284&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-03 03:32:27 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="5086580">JDK-8296263</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="5092492">JDK-8301106</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="5130252">JDK-8332880</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5102138">JDK-8309135</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5089503">JDK-8298614</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5099245">JDK-8306733</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5141169">JDK-8341913</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5020020">JDK-8245859</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5086765">JDK-8296344</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zh4r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>