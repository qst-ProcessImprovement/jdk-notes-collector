<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:25:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8316741] BasicStroke.createStrokedShape miter-limits failing on small shapes</title>
                <link>https://bugs.openjdk.org/browse/JDK-8316741</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Linux / OpenJDK 64-Bit Server VM (build 21+35-2513, mixed mode, sharing)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
The below source code is expected to create a sharp point at the join of the two lines, and does in all versions of the JVM from about Java through Java 19&lt;br/&gt;
&lt;br/&gt;
In Java 21 the point is being rounded.&lt;br/&gt;
&lt;br/&gt;
It looks to be related to the fact that the shape is very small but drawn through an AffineTransform, and it looks to be related to createStrokedShape: if I simple draw the path, I get a sharp point.&lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 19&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Run the attached, look at the output file &amp;quot;out.png&amp;quot;&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
A sharp point&lt;br/&gt;
ACTUAL -&lt;br/&gt;
A round point&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
import java.io.*;&lt;br/&gt;
import java.awt.*;&lt;br/&gt;
import java.awt.image.*;&lt;br/&gt;
import java.awt.geom.*;&lt;br/&gt;
import javax.imageio.*;&lt;br/&gt;
&lt;br/&gt;
public class Test {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) throws Exception {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Gives incorrect results in Java 21, correct in Java 19 and earlier.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Graphics2D g = image.createGraphics();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.setPaint(Color.WHITE);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.fillRect(0, 0, 100, 100);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.setPaint(Color.BLACK);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.setTransform(new AffineTransform(100, 0, 0, 100, 0, 0));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BasicStroke stroke = new BasicStroke(0.1f, 0, 0, 10);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Path2D p = new Path2D.Float();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;p.moveTo(1, 0.2f);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;p.lineTo(0.4f, 0.4f);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;p.lineTo(1, 0.6f);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Shape outline = stroke.createStrokedShape(p);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.fill(outline);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;g.dispose();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ImageIO.write(image, &amp;quot;png&amp;quot;, new File(&amp;quot;out.png&amp;quot;));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5110780">JDK-8316741</key>
            <summary>BasicStroke.createStrokedShape miter-limits failing on small shapes</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lbourges">Laurent Bourg&#232;s</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>dcspn</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>marlin</label>
                            <label>regression</label>
                            <label>regression_8297230</label>
                            <label>reproducer-yes</label>
                            <label>webbug</label>
                    </labels>
                <created>Thu, 21 Sep 2023 09:25:48 -0700</created>
                <updated>Wed, 25 Oct 2023 23:53:32 -0700</updated>
                            <resolved>Sat, 21 Oct 2023 02:13:53 -0700</resolved>
                                    <version>20</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14619989" author="roboduke" created="Sat, 21 Oct 2023 04:57:51 -0700"  >[jdk21u-fix-request] Approval Request from Laurent Bourg&amp;#xE8;s&lt;br/&gt;
&amp;quot;fix regression introduced in jdk20, not present in jdk17&amp;quot;</comment>
                            <comment id="14619987" author="roboduke" created="Sat, 21 Oct 2023 02:38:43 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/279&quot;&gt;https://git.openjdk.org/jdk21u/pull/279&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-21 09:35:12 +0000</comment>
                            <comment id="14619984" author="dukebot" created="Sat, 21 Oct 2023 02:13:51 -0700"  >Changeset: a876beb6&lt;br/&gt;
Author:    Laurent Bourg&amp;#xE8;s &amp;lt;&lt;a href=&apos;mailto:lbourges@openjdk.org&apos;&gt;lbourges@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-10-21 09:12:08 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a876beb63d5d509b80366139ae4c6abe502efe1e&quot;&gt;https://git.openjdk.org/jdk/commit/a876beb63d5d509b80366139ae4c6abe502efe1e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14615124" author="roboduke" created="Sun, 1 Oct 2023 13:47:43 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16002&quot;&gt;https://git.openjdk.org/jdk/pull/16002&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-01 20:33:54 +0000</comment>
                            <comment id="14613239" author="lbourges" created="Fri, 22 Sep 2023 09:36:21 -0700"  >I will have a look to diagnose this regression</comment>
                            <comment id="14613235" author="azvegint" created="Fri, 22 Sep 2023 09:10:37 -0700"  >Regression of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8297230&quot; title=&quot;Update Marlin2D to 0.9.4.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8297230&quot;&gt;&lt;strike&gt;JDK-8297230&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
I see the old behavior after reverting it.</comment>
                            <comment id="14613167" author="pnarayanaswa" created="Fri, 22 Sep 2023 04:47:21 -0700"  >Checked with attached testcase in Windows and Ubuntu 20.04, Issue is reproducible, &amp;lt;attached screenshot for reference&amp;gt;&lt;br/&gt;
Test Result&lt;br/&gt;
==========&lt;br/&gt;
jdk8u381: Pass&lt;br/&gt;
jdk11.0.20: Pass&lt;br/&gt;
jdk17.0.8: Pass&lt;br/&gt;
jdk19.0.2: Pass&lt;br/&gt;
jdk20 b24: Pass&lt;br/&gt;
jdk20 b25: Fail &amp;lt;- Regression&lt;br/&gt;
jdk21 Fail&lt;br/&gt;
jdk22ea16: Fail</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5113108">JDK-8318739</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5087824">JDK-8297230</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="106511" name="20b24out.png" size="593" author="pnarayanaswa" created="Fri, 22 Sep 2023 04:47:05 -0700"/>
                            <attachment id="106512" name="20b25out.png" size="597" author="pnarayanaswa" created="Fri, 22 Sep 2023 04:47:05 -0700"/>
                            <attachment id="106513" name="Test.java" size="952" author="pnarayanaswa" created="Fri, 22 Sep 2023 04:47:05 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17695"><![CDATA[b25]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="22023">20</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i337cb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17412"><![CDATA[b21]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="197"><![CDATA[2d]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>