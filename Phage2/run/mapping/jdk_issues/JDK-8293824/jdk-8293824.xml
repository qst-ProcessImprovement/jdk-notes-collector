<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:09:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8293824] gc/whitebox/TestConcMarkCycleWB.java failed &quot;RuntimeException: assertTrue: expected true, was false&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8293824</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK20 CI:&lt;br/&gt;
&lt;br/&gt;
gc/whitebox/TestConcMarkCycleWB.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(7/669)----------&lt;br/&gt;
command: main -Xbootclasspath/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UseG1GC gc.whitebox.TestConcMarkCycleWB&lt;br/&gt;
reason: User specified action: run main/othervm -Xbootclasspath/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:+UseG1GC gc.whitebox.TestConcMarkCycleWB &lt;br/&gt;
started: Wed Sep 14 19:31:11 UTC 2022&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
Additional options from @modules: --add-modules java.base,java.compiler,java.management,jdk.internal.jvmstat --add-exports java.base/jdk.internal.misc=ALL-UNNAMED --add-exports jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED&lt;br/&gt;
finished: Wed Sep 14 19:32:50 UTC 2022&lt;br/&gt;
elapsed time (seconds): 99.148&lt;br/&gt;
----------configuration:(5/230)----------&lt;br/&gt;
Boot Layer&lt;br/&gt;
&amp;nbsp;&amp;nbsp;add modules: java.base java.compiler java.management jdk.internal.jvmstat &lt;br/&gt;
&amp;nbsp;&amp;nbsp;add exports: java.base/jdk.internal.misc              ALL-UNNAMED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;jdk.internal.jvmstat/sun.jvmstat.monitor ALL-UNNAMED&lt;br/&gt;
&lt;br/&gt;
----------System.out:(0/0)----------&lt;br/&gt;
----------System.err:(14/858)----------&lt;br/&gt;
java.lang.RuntimeException: assertTrue: expected true, was false&lt;br/&gt;
	at jdk.test.lib.Asserts.fail(Asserts.java:594)&lt;br/&gt;
	at jdk.test.lib.Asserts.assertTrue(Asserts.java:486)&lt;br/&gt;
	at jdk.test.lib.Asserts.assertTrue(Asserts.java:472)&lt;br/&gt;
	at gc.whitebox.TestConcMarkCycleWB.main(TestConcMarkCycleWB.java:49)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1589)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException: assertTrue: expected true, was false</description>
                <environment></environment>
        <key id="5083429">JDK-8293824</key>
            <summary>gc/whitebox/TestConcMarkCycleWB.java failed &quot;RuntimeException: assertTrue: expected true, was false&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kbarrett">Kim Barrett</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>Xcomp</label>
                            <label>tier7</label>
                    </labels>
                <created>Wed, 14 Sep 2022 13:16:39 -0700</created>
                <updated>Fri, 20 Jan 2023 19:38:49 -0800</updated>
                            <resolved>Tue, 3 Jan 2023 19:30:03 -0800</resolved>
                                    <version>20</version>
                                    <fixVersion>20</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14548549" author="dukebot" created="Tue, 3 Jan 2023 19:30:02 -0800"  >Changeset: b743519b&lt;br/&gt;
Author:    Kim Barrett &amp;lt;&lt;a href=&apos;mailto:kbarrett@openjdk.org&apos;&gt;kbarrett@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-04 03:28:31 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk20/commit/b743519ba911a254669fa8a96e6006c14e3f5ad1&quot;&gt;https://git.openjdk.org/jdk20/commit/b743519ba911a254669fa8a96e6006c14e3f5ad1&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14547329" author="roboduke" created="Wed, 21 Dec 2022 18:10:12 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20/pull/71&quot;&gt;https://git.openjdk.org/jdk20/pull/71&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-22 02:04:30 +0000</comment>
                            <comment id="14541609" author="roboduke" created="Wed, 30 Nov 2022 08:50:22 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11435&quot;&gt;https://git.openjdk.org/jdk/pull/11435&lt;/a&gt;&lt;br/&gt;
Date: 2022-11-30 16:40:19 +0000</comment>
                            <comment id="14535757" author="kbarrett" created="Tue, 8 Nov 2022 19:28:59 -0800"  >Easily reproduced by adding a call to wb.g1StartConcMarkCycle() at the beginning of the test. So a test bug, as it isn&amp;#39;t resiliant to the situation where a cycle is already in progress because of some ongoing background work. Adding noreg-self to take this out of the JDK 20 exit criteria.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m going to review uses of that function to figure out whether it really should return false when a cycle is already in progress, or should do something else like (wait and) start a new cycle.  Maybe it can also be reimplemented using the concurrent GC control API, eliminating a whitebox entry point.&lt;br/&gt;
</comment>
                            <comment id="14524184" author="tschatzl" created="Fri, 16 Sep 2022 01:37:04 -0700"  >Probably related to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8290025&quot; title=&quot;Remove the Sweeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8290025&quot;&gt;&lt;strike&gt;JDK-8290025&lt;/strike&gt;&lt;/a&gt;. GC took over the code cache sweeper, which means that particularly with -Xcomp there will be more possibly unexpected marking cycles.</comment>
                            <comment id="14524178" author="kbarrett" created="Fri, 16 Sep 2022 01:22:59 -0700"  >The failure indicates WhiteBox.g1StartConcMarkCycle returned false.  That function returns true unless there was already a concurrent mark cycle in progress.&lt;br/&gt;
&lt;br/&gt;
The failure is with -Xcomp, so there&amp;#39;s more background stuff happening than usual.  This is also soon after the removal of the sweeper (&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8290025&quot; title=&quot;Remove the Sweeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8290025&quot;&gt;&lt;strike&gt;JDK-8290025&lt;/strike&gt;&lt;/a&gt;).&lt;br/&gt;
&lt;br/&gt;
This could be a test bug, with the test needing to ensure it&amp;#39;s not already in a concurrent cycle.  (Though how does one do that without concern that the answer could change immediately after the asking, due to background activity.)&lt;br/&gt;
&lt;br/&gt;
Alternatively, perhaps something has recently changed leading to more aggressive (perhaps excessively so) running of concurrent cycles?&lt;br/&gt;
</comment>
                            <comment id="14523758" author="dcubed" created="Wed, 14 Sep 2022 13:19:03 -0700"  >Spotted in the jdk-20+15-1005-tier7 CI job set:&lt;br/&gt;
&lt;br/&gt;
gc/whitebox/TestConcMarkCycleWB.java&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://mach5.us.oracle.com/mdash/jobs/mach5-one-jdk-20+15-1005-tier7-20220914-1759-36486937/tasks/mach5-one-jdk-20+15-1005-tier7-20220914-1759-36486937-tier7-comp-open_test_hotspot_jtreg_hotspot_gc-windows-x64-debug-37/results?search=status%3Afailed%20AND%20-state%3Ainvalid&quot;&gt;https://mach5.us.oracle.com/mdash/jobs/mach5-one-jdk-20+15-1005-tier7-20220914-1759-36486937/tasks/mach5-one-jdk-20+15-1005-tier7-20220914-1759-36486937-tier7-comp-open_test_hotspot_jtreg_hotspot_gc-windows-x64-debug-37/results?search=status%3Afailed%20AND%20-state%3Ainvalid&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://mach5.us.oracle.com:10060/api/v1/results/mach5-one-jdk-20+15-1005-tier7-20220914-1759-36486937-tier7-comp-open_test_hotspot_jtreg_hotspot_gc-windows-x64-debug-37-1663184457-255/log&quot;&gt;https://mach5.us.oracle.com:10060/api/v1/results/mach5-one-jdk-20+15-1005-tier7-20220914-1759-36486937-tier7-comp-open_test_hotspot_jtreg_hotspot_gc-windows-x64-debug-37-1663184457-255/log&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
windows-x64-debug: win2019-x64-414726.s4.javaplatfo1iad.oraclevcn.com&lt;br/&gt;
&lt;br/&gt;
The test task&amp;#39;s JVM args are:&lt;br/&gt;
-Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:-TieredCompilation -XX:-DoEscapeAnalysis</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5090705">JDK-8299612</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5078872">JDK-8290025</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5090805">JDK-8299701</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17005"><![CDATA[windows]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ykgj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17358"><![CDATA[b30]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>