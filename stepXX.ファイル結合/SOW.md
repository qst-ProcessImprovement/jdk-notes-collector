# Statement of Work: jdk_issuesフォルダ統合モジュール作成

## 目的
- `jdk_issues/`配下に存在する複数ファイルを、境界が識別できるよう区切り線を挿入しつつ単一ファイルへ結合するPythonモジュールを提供する。
- ファイルサイズ抑制のため、タイトルと説明のみを抽出する要約出力モードを備え、カレントディレクトリに正準ファイル名で保存する。

## 背景・前提
- 既存リポジトリ内に`jdk_issues/`ディレクトリが存在し、多数のJDKチケット情報ファイルが格納されていることを確認済み。
- 新規モジュール作成であり、既存コードへの影響は発生しない見込み。

## スコープ
- 新規Pythonモジュール（例: `merge_jdk_issues.py`）の設計・実装。
- 指定ディレクトリ配下ファイルの走査および結合処理の提供。
- 区切り線（固定文字列）の挿入と末尾改行の調整。
- XMLからタイトル・説明を抽出しHTMLエンティティを正規化する要約出力モードの実装。
- XML以外のファイルを自動的に除外する正準ルールの実装。
- CLIインターフェースの整備（`--content-mode`で全文/要約切替、カレントディレクトリへの固定ファイル出力）。

## アウトオブスコープ
- 既存スクリプト (`extract_jdk.py`, `fetch_jdk_issues.py` など) の改修。
- テスト自動化スイートの構築。

## 成果物
- `merge_jdk_issues.py`: 結合処理本体と簡易CLIエントリポイント、全文/要約切替機能を備えたPythonモジュール。
- 検証ログ: モジュールを用いてカレントディレクトリに生成した`jdk_issues_combined.txt`および実行結果ログ。

## タスク分解 (AT)
1. 現状調査 (完了): `jdk_issues/`配下ファイル構造とXML項目の確認。
2. モジュール設計: 正準インターフェース(引数名/値)、区切り線仕様、要約モード仕様の決定。
3. 実装: ファイル列挙・ソート・結合処理（XML以外を除外）、区切り線、XML解析とHTML整形、CLI (`--content-mode` 等) の実装。
4. 検証: 実ファイルを対象に全文/要約双方のモードで結合処理を実行し、出力内容を確認。
5. ドキュメント/最終報告: 実装内容と利用手順、検証結果を報告。

## LSPによる影響範囲確認
- 新規ファイルの追加のみで既存シンボルの変更は無し。そのため、既存シンボルの参照関係に影響なし。

## リスク・懸念
- ファイルサイズが大きい場合のメモリ使用量: 読み込み時は逐次処理で対応予定。
- 区切り線の正準表現: 固定文字列を定義し、外部入力では変更不可とすることで要件を満たす。

## 承認依頼
- 上記内容で実装を進めて問題ないかご確認ください。
