<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:33:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8298059] Linked stack watermarks don&apos;t support nesting</title>
                <link>https://bugs.openjdk.org/browse/JDK-8298059</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following tests fail in the JDK20 CI:&lt;br/&gt;
&lt;br/&gt;
vmTestbase/nsk/jdi/ExceptionRequest/addInstanceFilter/instancefilter001/TestDescription.java&lt;br/&gt;
vmTestbase/nsk/jdi/ExceptionRequest/addInstanceFilter/instancefilter004/TestDescription.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the instancefilter001 log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(6/1066)----------&lt;br/&gt;
command: main nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001 -verbose -arch=linux-x64 -waittime=5 -debugee.vmkind=java -transport.address=dynamic -debugee.vmkeys=&amp;quot;-XX:MaxRAMPercentage=4.16667 -Dtest.boot.jdk=/opt/mach5/mesos/work_dir/jib-master/install/jdk/19/36/bundles/linux-x64/jdk-19_linux-x64_bin.tar.gz/jdk-19 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S17299/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/5bdab714-fb1e-4abf-adee-73e6b99ed892/runs/54b049eb-ac3a-4a0d-b682-d731820ab9ca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdi/tmp -XX:+UseZGC&amp;quot;&lt;br/&gt;
reason: User specified action: run main/othervm nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001 -verbose -arch=${os.family}-${os.simpleArch} -waittime=5 -debugee.vmkind=java -transport.address=dynamic -debugee.vmkeys=&amp;quot;${test.vm.opts} ${test.java.opts}&amp;quot; &lt;br/&gt;
started: Sat Dec 03 06:23:31 UTC 2022&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
finished: Sat Dec 03 06:23:48 UTC 2022&lt;br/&gt;
elapsed time (seconds): 16.379&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(161/12703)*----------&lt;br/&gt;
binder&amp;gt; VirtualMachineManager: version 20.0&lt;br/&gt;
binder&amp;gt; Finding connector: default&lt;br/&gt;
binder&amp;gt; LaunchingConnector:&lt;br/&gt;
binder&amp;gt;     name: com.sun.jdi.CommandLineLaunch&lt;br/&gt;
binder&amp;gt;     description: Launches target using Sun Java VM command line and attaches to it&lt;br/&gt;
binder&amp;gt;     transport: com.sun.tools.jdi.SunCommandLineLauncher$&lt;a href=&apos;mailto:2@11df7b34&apos;&gt;2@11df7b34&lt;/a&gt;&lt;br/&gt;
binder&amp;gt; Connector arguments:&lt;br/&gt;
binder&amp;gt;     main=nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001a \u0000-verbose\u0000 \u0000-arch=linux-x64\u0000 \u0000-waittime=5\u0000 \u0000-debugee.vmkind=java\u0000 \u0000-transport.address=dynamic\u0000 \u0000-debugee.vmkeys=&amp;quot;-XX:MaxRAMPercentage=4.16667 -Dtest.boot.jdk=/opt/mach5/mesos/work_dir/jib-master/install/jdk/19/36/bundles/linux-x64/jdk-19_linux-x64_bin.tar.gz/jdk-19 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S17299/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/5bdab714-fb1e-4abf-adee-73e6b99ed892/runs/54b049eb-ac3a-4a0d-b682-d731820ab9ca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdi/tmp -XX:+UseZGC&amp;quot;\u0000 \u0000-pipe.port=34371\u0000&lt;br/&gt;
binder&amp;gt;     includevirtualthreads=y&lt;br/&gt;
binder&amp;gt;     quote=\u0000&lt;br/&gt;
binder&amp;gt;     home=/opt/mach5/mesos/work_dir/jib-master/install/jdk-20+27-2055/linux-x64-debug.jdk/jdk-20/fastdebug&lt;br/&gt;
binder&amp;gt;     vmexec=java&lt;br/&gt;
binder&amp;gt;     suspend=true&lt;br/&gt;
binder&amp;gt;     options=-XX:MaxRAMPercentage=4.16667 -Dtest.boot.jdk=/opt/mach5/mesos/work_dir/jib-master/install/jdk/19/36/bundles/linux-x64/jdk-19_linux-x64_bin.tar.gz/jdk-19 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S17299/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/5bdab714-fb1e-4abf-adee-73e6b99ed892/runs/54b049eb-ac3a-4a0d-b682-d731820ab9ca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdi/tmp -XX:+UseZGC&lt;br/&gt;
binder&amp;gt; Launching debugee&lt;br/&gt;
binder&amp;gt; Waiting for VM initialized&lt;br/&gt;
Initial VMStartEvent received: VMStartEvent in thread main&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:1@620b4c99&apos;&gt;1@620b4c99&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:2@3c30ea1d&apos;&gt;2@3c30ea1d&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:3@625d200a&apos;&gt;3@625d200a&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:4@5d4cf655&apos;&gt;4@5d4cf655&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:5@5a9ea209&apos;&gt;5@5a9ea209&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; waitForRequestedEvent: enabling remove of listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:6@8543d1&apos;&gt;6@8543d1&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:6@8543d1&apos;&gt;6@8543d1&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; waitForRequestedEvent: vm.resume called&lt;br/&gt;
EventHandler&amp;gt; Received event set with policy = SUSPEND_EVENT_THREAD&lt;br/&gt;
EventHandler&amp;gt; Event: ClassPrepareEventImpl req class prepare request  (enabled)&lt;br/&gt;
EventHandler&amp;gt; waitForRequestedEvent: Received event(ClassPrepareEvent in thread main) for request(class prepare request  (enabled))&lt;br/&gt;
EventHandler&amp;gt; Removing listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:6@8543d1&apos;&gt;6@8543d1&lt;/a&gt;&lt;br/&gt;
debugger&amp;gt; Received ClassPrepareEvent for debuggee class: nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001a&lt;br/&gt;
binder&amp;gt; Breakpoint set:&lt;br/&gt;
	breakpoint request nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001a:75 (disabled)&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.TestDebuggerType1$&lt;a href=&apos;mailto:1@6ba6795a&apos;&gt;1@6ba6795a&lt;/a&gt;&lt;br/&gt;
debugger&amp;gt; TESTING BEGINS&lt;br/&gt;
debugger&amp;gt; RESUME DEBUGGEE VM&lt;br/&gt;
debugger&amp;gt; shouldRunAfterBreakpoint: entered&lt;br/&gt;
debugger&amp;gt; shouldRunAfterBreakpoint: waiting for breakpoint event during 1 sec.&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee: debuggee started!&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee: methodForCommunication();&lt;br/&gt;
EventHandler&amp;gt; Received event set with policy = SUSPEND_ALL&lt;br/&gt;
EventHandler&amp;gt; Event: BreakpointEventImpl req breakpoint request nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001a:75 (enabled)&lt;br/&gt;
debugger&amp;gt; Received communication breakpoint event.&lt;br/&gt;
debugger&amp;gt; shouldRunAfterBreakpoint: received breakpoint event.&lt;br/&gt;
debugger&amp;gt; shouldRunAfterBreakpoint: exited with true.&lt;br/&gt;
debugger&amp;gt; :::::: case: # 0&lt;br/&gt;
debugger&amp;gt; ......setting up ExceptionRequest:&lt;br/&gt;
debugger&amp;gt;        thread: instance of java.lang.Thread(name=&amp;#39;thread1&amp;#39;, id=291); class: class nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001aTestClass (loaded by instance of jdk.internal.loader.ClassLoaders$AppClassLoader(id=293)); property: ExceptionRequest1&lt;br/&gt;
debugger&amp;gt;       ExceptionRequest has been set up&lt;br/&gt;
debugger&amp;gt; ......setting up ExceptionRequest:&lt;br/&gt;
debugger&amp;gt;        thread: instance of java.lang.Thread(name=&amp;#39;thread2&amp;#39;, id=297); class: class nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001aTestClass (loaded by instance of jdk.internal.loader.ClassLoaders$AppClassLoader(id=293)); property: ExceptionRequest2&lt;br/&gt;
debugger&amp;gt;       ExceptionRequest has been set up&lt;br/&gt;
debugger&amp;gt; ......waiting for ExceptionEvent in expected thread&lt;br/&gt;
EventHandler&amp;gt; waitForRequestedEvent: enabling remove of listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:6@5884b135&apos;&gt;6@5884b135&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; Adding listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:6@5884b135&apos;&gt;6@5884b135&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; waitForRequestedEvent: vm.resume called&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee:   &amp;#39;run&amp;#39;: enter  :: threadName == thread1&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee:   &amp;#39;run&amp;#39;: enter  :: threadName == thread2&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee:  objTC[tNumber].method();  :: threadName == thread1  tNumber == 0&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee:  objTC[tNumber].method();  :: threadName == thread2  tNumber == 1&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee: instancefilter001aTestClass.method() : thread1&lt;br/&gt;
debugee.stderr&amp;gt; **&amp;gt; debuggee: instancefilter001aTestClass.method() : thread2&lt;br/&gt;
debugee.stdout&amp;gt; # To suppress the following error report, specify this argument&lt;br/&gt;
debugee.stdout&amp;gt; # after -XX: or in .hotspotrc:  SuppressErrorAt=/stackWatermark.cpp:254&lt;br/&gt;
debugee.stdout&amp;gt; #&lt;br/&gt;
debugee.stdout&amp;gt; # A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
debugee.stdout&amp;gt; #&lt;br/&gt;
debugee.stdout&amp;gt; #  Internal Error (/opt/mach5/mesos/work_dir/slaves/0c72054a-24ab-4dbb-944f-97f9341a1b96-S137526/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/41cd15c8-7bc9-4b55-84c5-41044574a751/runs/f2fad46b-6b5f-48a7-8b77-e63b6eb32fa8/workspace/open/src/hotspot/share/runtime/stackWatermark.cpp:254), pid=2186378, tid=2186633&lt;br/&gt;
debugee.stdout&amp;gt; #  assert(watermark == __null || _linked_watermark == __null) failed: nesting not supported&lt;br/&gt;
debugee.stdout&amp;gt; #&lt;br/&gt;
debugee.stdout&amp;gt; # JRE version: Java(TM) SE Runtime Environment (20.0+27) (fastdebug build 20-ea+27-2055)&lt;br/&gt;
debugee.stdout&amp;gt; # Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 20-ea+27-2055, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-amd64)&lt;br/&gt;
debugee.stdout&amp;gt; # Problematic frame:&lt;br/&gt;
debugee.stdout&amp;gt; # V  [libjvm.so+0x19155e0]  StackWatermark::link_watermark(StackWatermark*)+0x40&lt;br/&gt;
debugee.stdout&amp;gt; #&lt;br/&gt;
debugee.stdout&amp;gt; # Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/opt/core.sh %p&amp;quot; (or dumping to /opt/mach5/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S17299/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/5bdab714-fb1e-4abf-adee-73e6b99ed892/runs/54b049eb-ac3a-4a0d-b682-d731820ab9ca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdi/scratch/5/core.2186378)&lt;br/&gt;
debugee.stdout&amp;gt; #&lt;br/&gt;
debugee.stdout&amp;gt; # An error report file with more information is saved as:&lt;br/&gt;
debugee.stdout&amp;gt; # /opt/mach5/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S17299/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/5bdab714-fb1e-4abf-adee-73e6b99ed892/runs/54b049eb-ac3a-4a0d-b682-d731820ab9ca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdi/scratch/5/hs_err_pid2186378.log&lt;br/&gt;
debugee.stdout&amp;gt; #&lt;br/&gt;
debugee.stdout&amp;gt; # If you would like to submit a bug report, please visit:&lt;br/&gt;
debugee.stdout&amp;gt; #   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
debugee.stdout&amp;gt; #&lt;br/&gt;
EventHandler&amp;gt; Received event set with policy = SUSPEND_NONE&lt;br/&gt;
EventHandler&amp;gt; Event: VMDisconnectEventImpl req null&lt;br/&gt;
EventHandler&amp;gt; receieved VMDisconnect&lt;br/&gt;
EventHandler&amp;gt; Removing listener nsk.share.jdi.EventHandler$&lt;a href=&apos;mailto:4@5d4cf655&apos;&gt;4@5d4cf655&lt;/a&gt;&lt;br/&gt;
EventHandler&amp;gt; finished&lt;br/&gt;
# ERROR: debugger&amp;gt; Unexpected exception : waitForRequestedEvent: no requested events have been received.&lt;br/&gt;
The following stacktrace is for failure analysis.&lt;br/&gt;
nsk.share.TestFailure: debugger&amp;gt; Unexpected exception : waitForRequestedEvent: no requested events have been received.&lt;br/&gt;
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)&lt;br/&gt;
	at nsk.share.Log.complain(Log.java:403)&lt;br/&gt;
	at nsk.share.jdi.TestDebuggerType1.complain(TestDebuggerType1.java:78)&lt;br/&gt;
	at nsk.share.jdi.TestDebuggerType1.setFailedStatus(TestDebuggerType1.java:85)&lt;br/&gt;
	at nsk.share.jdi.TestDebuggerType1.runThis(TestDebuggerType1.java:147)&lt;br/&gt;
	at nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001.run(instancefilter001.java:78)&lt;br/&gt;
	at nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001.main(instancefilter001.java:73)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1599)&lt;br/&gt;
nsk.share.Failure: waitForRequestedEvent: no requested events have been received.&lt;br/&gt;
	at nsk.share.jdi.EventHandler.waitForRequestedEvent(EventHandler.java:431)&lt;br/&gt;
	at nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001.testRun(instancefilter001.java:145)&lt;br/&gt;
	at nsk.share.jdi.TestDebuggerType1.runThis(TestDebuggerType1.java:119)&lt;br/&gt;
	at nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001.run(instancefilter001.java:78)&lt;br/&gt;
	at nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001.main(instancefilter001.java:73)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1599)&lt;br/&gt;
debugger&amp;gt; Forcing debuggee to exit...&lt;br/&gt;
# ERROR: binder&amp;gt; Debugee VM has not exited correctly: trying to kill it&lt;br/&gt;
The following stacktrace is for failure analysis.&lt;br/&gt;
nsk.share.TestFailure: binder&amp;gt; Debugee VM has not exited correctly: trying to kill it&lt;br/&gt;
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)&lt;br/&gt;
	at nsk.share.Log.complain(Log.java:403)&lt;br/&gt;
	at nsk.share.jpda.DebugeeProcess.complain(DebugeeProcess.java:455)&lt;br/&gt;
	at nsk.share.jpda.DebugeeProcess.close(DebugeeProcess.java:435)&lt;br/&gt;
	at nsk.share.jpda.DebugeeProcess.finalize(DebugeeProcess.java:464)&lt;br/&gt;
	at nsk.share.FinalizableObject.finalizeAtExit(FinalizableObject.java:48)&lt;br/&gt;
	at nsk.share.Finalizer$FinalizerThread.run(Finalizer.java:122)&lt;br/&gt;
------------ Try to print debuggee threads before killing process ------------&lt;br/&gt;
The following stacktrace is for failure analysis.&lt;br/&gt;
nsk.share.TestFailure: &lt;br/&gt;
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)&lt;br/&gt;
	at nsk.share.Log.complain(Log.java:403)&lt;br/&gt;
	at nsk.share.jdi.Debugee.printThreadsInfo(Debugee.java:629)&lt;br/&gt;
	at nsk.share.jdi.Debugee.killDebugee(Debugee.java:640)&lt;br/&gt;
	at nsk.share.jdi.LocalLaunchedDebugee.killDebugee(Binder.java:1052)&lt;br/&gt;
	at nsk.share.jpda.DebugeeProcess.close(DebugeeProcess.java:436)&lt;br/&gt;
	at nsk.share.jpda.DebugeeProcess.finalize(DebugeeProcess.java:464)&lt;br/&gt;
	at nsk.share.FinalizableObject.finalizeAtExit(FinalizableObject.java:48)&lt;br/&gt;
	at nsk.share.Finalizer$FinalizerThread.run(Finalizer.java:122)&lt;br/&gt;
com.sun.jdi.VMDisconnectedException: connection is closed&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.TargetVM.send(TargetVM.java:293)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.VirtualMachineImpl.sendToTarget(VirtualMachineImpl.java:1172)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.PacketStream.send(PacketStream.java:79)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$VirtualMachine$AllThreads.enqueueCommand(JDWP.java:319)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$VirtualMachine$AllThreads.process(JDWP.java:310)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.VMState.allThreads(VMState.java:207)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.VirtualMachineImpl.allThreads(VirtualMachineImpl.java:458)&lt;br/&gt;
	at nsk.share.jdi.Debugee.printThreadsInfo(Debugee.java:598)&lt;br/&gt;
	at nsk.share.jdi.Debugee.killDebugee(Debugee.java:640)&lt;br/&gt;
	at nsk.share.jdi.LocalLaunchedDebugee.killDebugee(Binder.java:1052)&lt;br/&gt;
	at nsk.share.jpda.DebugeeProcess.close(DebugeeProcess.java:436)&lt;br/&gt;
	at nsk.share.jpda.DebugeeProcess.finalize(DebugeeProcess.java:464)&lt;br/&gt;
	at nsk.share.FinalizableObject.finalizeAtExit(FinalizableObject.java:48)&lt;br/&gt;
	at nsk.share.Finalizer$FinalizerThread.run(Finalizer.java:122)&lt;br/&gt;
binder&amp;gt; Killing debuggee by forcing target VM to exit&lt;br/&gt;
binder&amp;gt; Ignore VMDisconnectedException while forcing debuggee VM to exit:&lt;br/&gt;
	com.sun.jdi.VMDisconnectedException: connection is closed&lt;br/&gt;
Killing debugee VM process&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
#&amp;gt;  SUMMARY: Following errors occured&lt;br/&gt;
#&amp;gt;      during test execution:&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
# ERROR: debugger&amp;gt; Unexpected exception : waitForRequestedEvent: no requested events have been received.&lt;br/&gt;
# ERROR: binder&amp;gt; Debugee VM has not exited correctly: trying to kill it&lt;br/&gt;
----------System.err:(19/1333)----------&lt;br/&gt;
com.sun.jdi.VMDisconnectedException: connection is closed&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.TargetVM.send(TargetVM.java:293)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.VirtualMachineImpl.sendToTarget(VirtualMachineImpl.java:1172)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.PacketStream.send(PacketStream.java:79)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$VirtualMachine$Exit.enqueueCommand(JDWP.java:655)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.JDWP$VirtualMachine$Exit.process(JDWP.java:641)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.VirtualMachineImpl.exit(VirtualMachineImpl.java:644)&lt;br/&gt;
	at nsk.share.jdi.TestDebuggerType1.runThis(TestDebuggerType1.java:150)&lt;br/&gt;
	at nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001.run(instancefilter001.java:78)&lt;br/&gt;
	at nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001.main(instancefilter001.java:73)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1599)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: com.sun.jdi.VMDisconnectedException: connection is closed&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: com.sun.jdi.VMDisconnectedException: connection is closed&lt;br/&gt;
----------rerun:(35/8632)*----------&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
The failure mode for instancefilter004 appears to be very similar.</description>
                <environment></environment>
        <key id="5088845">JDK-8298059</key>
            <summary>Linked stack watermarks don&apos;t support nesting</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eosterlund">Erik &#214;sterlund</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>hgupdate-sync</label>
                            <label>problemlist</label>
                            <label>tier8</label>
                            <label>zgc</label>
                    </labels>
                <created>Sat, 3 Dec 2022 09:51:14 -0800</created>
                <updated>Tue, 31 Jan 2023 10:02:03 -0800</updated>
                            <resolved>Thu, 15 Dec 2022 01:27:36 -0800</resolved>
                                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                                                            <comments>
                            <comment id="14552549" author="dukebot" created="Wed, 18 Jan 2023 15:31:02 -0800"  >Changeset: ae0e0276&lt;br/&gt;
Author:    Erik &amp;#xD6;sterlund &amp;lt;&lt;a href=&apos;mailto:eosterlund@openjdk.org&apos;&gt;eosterlund@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-17 15:05:51 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ae0e02766ad01ec6a9a5d4f900c50bd413b09638&quot;&gt;https://git.openjdk.org/jdk/commit/ae0e02766ad01ec6a9a5d4f900c50bd413b09638&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14545657" author="roboduke" created="Thu, 15 Dec 2022 01:56:25 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20/pull/38&quot;&gt;https://git.openjdk.org/jdk20/pull/38&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-15 09:49:24 +0000</comment>
                            <comment id="14545650" author="dukebot" created="Thu, 15 Dec 2022 01:27:34 -0800"  >Changeset: b17c5242&lt;br/&gt;
Author:    Erik &amp;#xD6;sterlund &amp;lt;&lt;a href=&apos;mailto:eosterlund@openjdk.org&apos;&gt;eosterlund@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2022-12-15 09:26:13 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b17c52422c91ad1e7ff35844676f6269a1b87f79&quot;&gt;https://git.openjdk.org/jdk/commit/b17c52422c91ad1e7ff35844676f6269a1b87f79&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14543229" author="mwthomps" created="Tue, 6 Dec 2022 10:25:41 -0800"  >ILW=MMH=P3</comment>
                            <comment id="14543059" author="roboduke" created="Tue, 6 Dec 2022 01:15:54 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11530&quot;&gt;https://git.openjdk.org/jdk/pull/11530&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-06 09:08:10 +0000</comment>
                            <comment id="14542481" author="eosterlund" created="Sun, 4 Dec 2022 09:10:39 -0800"  >Ah, it&#8217;s nesting. I will have a look tomorrow.</comment>
                            <comment id="14542430" author="cjplummer" created="Sat, 3 Dec 2022 15:33:55 -0800"  >The following seems like the likely culprit, given the presence of JvmtiExport::post_exception_throw in the above stack trace:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294924&quot; title=&quot;JvmtiExport::post_exception_throw() doesn&amp;#39;t deal well with concurrent stack processing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8294924&quot;&gt;&lt;strike&gt;JDK-8294924&lt;/strike&gt;&lt;/a&gt; JvmtiExport::post_exception_throw() doesn&amp;#39;t deal well with concurrent stack processing&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;changeset: be4245e814cc29701cc425d8e66854e36eb3aef0&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;user: eosterlund&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;date: 2022-11-30T14:15:18.000+00:00&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Reviewed-by: pchilanomate, sspitsyn, dholmes&lt;br/&gt;
&lt;br/&gt;
Also for consideration since it touches ZGC:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8296875&quot; title=&quot;Generational ZGC: Refactor loom code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8296875&quot;&gt;&lt;strike&gt;JDK-8296875&lt;/strike&gt;&lt;/a&gt; Generational ZGC: Refactor loom code&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;changeset: be99e84c98786ff9c2c9ca1a979dc17ba810ae09&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;user: eosterlund&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;date: 2022-11-30T14:08:57.000+00:00&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Reviewed-by: stefank, rrich, pchilanomate</comment>
                            <comment id="14542429" author="cjplummer" created="Sat, 3 Dec 2022 15:28:40 -0800"  >There are 12 tests tasks in tier8 that ran the nsk jdi tests and failed. All were run with -XX:+UseZGC (some also with -Xcomp) and all failed both of these tests. There are about 24 nsk jdi test tasks that passed. The few I checked were using -XX:+UseParallelGC. So it seems this is related to ZGC. Probably the ZGC team should have the first look at this.</comment>
                            <comment id="14542428" author="cjplummer" created="Sat, 3 Dec 2022 15:28:03 -0800"  >We are seeing the following assert:&lt;br/&gt;
&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/0c72054a-24ab-4dbb-944f-97f9341a1b96-S137526/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/41cd15c8-7bc9-4b55-84c5-41044574a751/runs/f2fad46b-6b5f-48a7-8b77-e63b6eb32fa8/workspace/open/src/hotspot/share/runtime/stackWatermark.cpp:254), pid=3370025, tid=3370599&lt;br/&gt;
#  assert(watermark == __null || _linked_watermark == __null) failed: nesting not supported&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s the stacktrace:&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007f0e13bfb000,0x00007f0e13cfc000],  sp=0x00007f0e13cf51f0,  free space=1000k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x19155e0]  StackWatermark::link_watermark(StackWatermark*)+0x40  (stackWatermark.cpp:254)&lt;br/&gt;
V  [libjvm.so+0xd02640]  EscapeBarrier::deoptimize_objects(int, int)+0xc0  (escapeBarrier.cpp:80)&lt;br/&gt;
V  [libjvm.so+0x13911aa]  VM_GetOrSetLocal::doit_prologue()+0x1a  (jvmtiImpl.cpp:598)&lt;br/&gt;
V  [libjvm.so+0x1ba1c68]  VMThread::execute(VM_Operation*)+0x68  (vmThread.cpp:542)&lt;br/&gt;
V  [libjvm.so+0x134c848]  JvmtiEnv::GetLocalInstance(_jobject*, int, _jobject**)+0x2f8  (jvmtiEnv.cpp:2309)&lt;br/&gt;
V  [libjvm.so+0x12d9336]  jvmti_GetLocalInstance+0x116  (jvmtiEnter.cpp:2161)&lt;br/&gt;
C  [libjdwp.so+0x14c15]  eventFilterRestricted_passesFilter+0x555  (eventFilter.c:351)&lt;br/&gt;
C  [libjdwp.so+0x16909]  event_callback+0x149  (eventHandler.c:562)&lt;br/&gt;
C  [libjdwp.so+0x19b55]  cbException+0xf5  (eventHandler.c:827)&lt;br/&gt;
V  [libjvm.so+0x1389e68]  JvmtiExport::post_exception_throw(JavaThread*, Method*, unsigned char*, oop)+0xd58  (jvmtiExport.cpp:2043)&lt;br/&gt;
V  [libjvm.so+0x103345c]  InterpreterRuntime::exception_handler_for_exception(JavaThread*, oopDesc*)+0xa5c  (interpreterRuntime.cpp:557)&lt;br/&gt;
j  nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001aTestClass.nullMethod()V+9&lt;br/&gt;
j  nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001aTestClass.method()V+31&lt;br/&gt;
J 4334 c1 nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001a$instancefilter001aThread.run()V (113 bytes) @ 0x00007f10857c75ec [0x00007f10857c52a0+0x000000000000234c]&lt;br/&gt;
J 4330 c1 java.lang.Thread.run()V &lt;a href=&apos;mailto:java.base@20-ea&apos;&gt;java.base@20-ea&lt;/a&gt; (19 bytes) @ 0x00007f10857c46c4 [0x00007f10857c4560+0x0000000000000164]&lt;br/&gt;
v  ~StubRoutines::call_stub 0x00007f108c436d1a&lt;br/&gt;
V  [libjvm.so+0x1046e70]  JavaCalls::call_helper(JavaValue*, methodHandle const&amp;amp;, JavaCallArguments*, JavaThread*)+0x500  (javaCalls.cpp:417)&lt;br/&gt;
V  [libjvm.so+0x1047682]  JavaCalls::call_virtual(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x432  (javaCalls.cpp:331)&lt;br/&gt;
V  [libjvm.so+0x1047c71]  JavaCalls::call_virtual(JavaValue*, Handle, Klass*, Symbol*, Symbol*, JavaThread*)+0x71  (javaCalls.cpp:193)&lt;br/&gt;
V  [libjvm.so+0x11ca9db]  thread_entry(JavaThread*, JavaThread*)+0x12b  (jvm.cpp:2876)&lt;br/&gt;
V  [libjvm.so+0x107ca56]  JavaThread::thread_main_inner()+0x206  (javaThread.cpp:697)&lt;br/&gt;
V  [libjvm.so+0x1a81760]  Thread::call_run()+0x100  (thread.cpp:224)&lt;br/&gt;
V  [libjvm.so+0x17139e3]  thread_native_entry(Thread*)+0x103  (os_linux.cpp:739)&lt;br/&gt;
&lt;br/&gt;
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)&lt;br/&gt;
j  nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001aTestClass.nullMethod()V+9&lt;br/&gt;
j  nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001aTestClass.method()V+31&lt;br/&gt;
J 4334 c1 nsk.jdi.ExceptionRequest.addInstanceFilter.instancefilter001a$instancefilter001aThread.run()V (113 bytes) @ 0x00007f10857c75ec [0x00007f10857c52a0+0x000000000000234c]&lt;br/&gt;
J 4330 c1 java.lang.Thread.run()V &lt;a href=&apos;mailto:java.base@20-ea&apos;&gt;java.base@20-ea&lt;/a&gt; (19 bytes) @ 0x00007f10857c46c4 [0x00007f10857c4560+0x0000000000000164]&lt;br/&gt;
v  ~StubRoutines::call_stub 0x00007f108c436d1a</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5091536">JDK-8300270</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5091665">JDK-8300394</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                                        </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5088863">JDK-8298071</subtask>
                                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zhar:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17305"><![CDATA[b03]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="372"><![CDATA[jvmti]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>