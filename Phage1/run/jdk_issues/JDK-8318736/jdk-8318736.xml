<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:37:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8318736] com/sun/jdi/JdwpOnThrowTest.java failed with &quot;transport error 202: bind failed: Address already in use&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8318736</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK22 CI:&lt;br/&gt;
&lt;br/&gt;
com/sun/jdi/JdwpOnThrowTest.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(7/293)----------&lt;br/&gt;
command: main JdwpOnThrowTest&lt;br/&gt;
reason: User specified action: run main/othervm JdwpOnThrowTest &lt;br/&gt;
started: Tue Oct 24 05:56:12 UTC 2023&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
Additional options from @modules: --add-modules jdk.jdi&lt;br/&gt;
finished: Tue Oct 24 05:56:14 UTC 2023&lt;br/&gt;
elapsed time (seconds): 1.751&lt;br/&gt;
----------configuration:(3/35)----------&lt;br/&gt;
Boot Layer&lt;br/&gt;
&amp;nbsp;&amp;nbsp;add modules: jdk.jdi&lt;br/&gt;
&lt;br/&gt;
----------System.out:(3/3247)----------&lt;br/&gt;
Command line: [/opt/mach5/mesos/work_dir/jib-master/install/jdk-22+21-1634/linux-aarch64-debug.jdk/jdk-22/fastdebug/bin/java -cp /opt/mach5/mesos/work_dir/slaves/afbc6042-3a24-4198-9369-18c663a3f74c-S32582/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8aec1c42-fcf5-4055-97d4-dc189b05f6e0/runs/bec9c16c-68a9-4f6f-9dd2-125908f00b85/testoutput/test-support/jtreg_open_test_jdk_jdk_jdi/classes/2/com/sun/jdi/JdwpOnThrowTest.d:/opt/mach5/mesos/work_dir/jib-master/install/jdk-22+21-1634/src.full/open/test/jdk/com/sun/jdi:/opt/mach5/mesos/work_dir/slaves/afbc6042-3a24-4198-9369-18c663a3f74c-S32582/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8aec1c42-fcf5-4055-97d4-dc189b05f6e0/runs/bec9c16c-68a9-4f6f-9dd2-125908f00b85/testoutput/test-support/jtreg_open_test_jdk_jdk_jdi/classes/2/test/lib:/opt/mach5/mesos/work_dir/jib-master/install/jdk-22+21-1634/src.full/open/test/lib:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/7.3.1/1/bundles/jtreg-7.3.1+1.zip/jtreg/lib/jtreg.jar -Xmx768m -XX:MaxRAMPercentage=6.25 -Dtest.boot.jdk=/opt/mach5/mesos/work_dir/jib-master/install/jdk/21/35/bundles/linux-aarch64/jdk-21_linux-aarch64_bin.tar.gz/jdk-21 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/afbc6042-3a24-4198-9369-18c663a3f74c-S32582/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8aec1c42-fcf5-4055-97d4-dc189b05f6e0/runs/bec9c16c-68a9-4f6f-9dd2-125908f00b85/testoutput/test-support/jtreg_open_test_jdk_jdk_jdi/tmp -ea -esa -XX:+UseG1GC -agentlib:jdwp=transport=dt_socket,address=localhost:45685,server=y,suspend=y,onthrow=Ex,launch=exit ThrowCaughtException ]&lt;br/&gt;
[debuggee]:/opt/mach5/mesos/work_dir/jib-master/install/jdk-22+21-1634/linux-aarch64-debug.jdk/jdk-22/fastdebug/bin/java -cp /opt/mach5/mesos/work_dir/slaves/afbc6042-3a24-4198-9369-18c663a3f74c-S32582/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8aec1c42-fcf5-4055-97d4-dc189b05f6e0/runs/bec9c16c-68a9-4f6f-9dd2-125908f00b85/testoutput/test-support/jtreg_open_test_jdk_jdk_jdi/classes/2/com/sun/jdi/JdwpOnThrowTest.d:/opt/mach5/mesos/work_dir/jib-master/install/jdk-22+21-1634/src.full/open/test/jdk/com/sun/jdi:/opt/mach5/mesos/work_dir/slaves/afbc6042-3a24-4198-9369-18c663a3f74c-S32582/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8aec1c42-fcf5-4055-97d4-dc189b05f6e0/runs/bec9c16c-68a9-4f6f-9dd2-125908f00b85/testoutput/test-support/jtreg_open_test_jdk_jdk_jdi/classes/2/test/lib:/opt/mach5/mesos/work_dir/jib-master/install/jdk-22+21-1634/src.full/open/test/lib:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/7.3.1/1/bundles/jtreg-7.3.1+1.zip/jtreg/lib/jtreg.jar -Xmx768m -XX:MaxRAMPercentage=6.25 -Dtest.boot.jdk=/opt/mach5/mesos/work_dir/jib-master/install/jdk/21/35/bundles/linux-aarch64/jdk-21_linux-aarch64_bin.tar.gz/jdk-21 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/afbc6042-3a24-4198-9369-18c663a3f74c-S32582/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8aec1c42-fcf5-4055-97d4-dc189b05f6e0/runs/bec9c16c-68a9-4f6f-9dd2-125908f00b85/testoutput/test-support/jtreg_open_test_jdk_jdk_jdi/tmp -ea -esa -XX:+UseG1GC -agentlib:jdwp=transport=dt_socket,address=localhost:45685,server=y,suspend=y,onthrow=Ex,launch=exit ThrowCaughtException&lt;br/&gt;
[debuggee] Start&lt;br/&gt;
----------System.err:(26/1601)----------&lt;br/&gt;
[debuggee] ERROR: transport error 202: bind failed: Address already in use&lt;br/&gt;
[debuggee] ERROR: JDWP Transport dt_socket failed to initialize, TRANSPORT_INIT(510)&lt;br/&gt;
java.lang.RuntimeException: ERROR: failed to attach&lt;br/&gt;
	at JdwpOnThrowTest.main(JdwpOnThrowTest.java:85)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1570)&lt;br/&gt;
Caused by: java.net.ConnectException: Connection refused&lt;br/&gt;
	at java.base/sun.nio.ch.Net.connect0(Native Method)&lt;br/&gt;
	at java.base/sun.nio.ch.Net.connect(Net.java:589)&lt;br/&gt;
	at java.base/sun.nio.ch.Net.connect(Net.java:578)&lt;br/&gt;
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)&lt;br/&gt;
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)&lt;br/&gt;
	at java.base/java.net.Socket.connect(Socket.java:752)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.SocketTransportService.attach(SocketTransportService.java:263)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.GenericAttachingConnector.attach(GenericAttachingConnector.java:119)&lt;br/&gt;
	at jdk.jdi/com.sun.tools.jdi.SocketAttachingConnector.attach(SocketAttachingConnector.java:83)&lt;br/&gt;
	at JdwpOnThrowTest.attach(JdwpOnThrowTest.java:129)&lt;br/&gt;
	at JdwpOnThrowTest.main(JdwpOnThrowTest.java:65)&lt;br/&gt;
	... 4 more&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException: ERROR: failed to attach&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: java.lang.RuntimeException: ERROR: failed to attach&lt;br/&gt;
----------rerun:(40/6895)*----------</description>
                <environment></environment>
        <key id="5113106">JDK-8318736</key>
            <summary>com/sun/jdi/JdwpOnThrowTest.java failed with &quot;transport error 202: bind failed: Address already in use&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbechberger">Johannes Bechberger</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>intermittent</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>tier6</label>
                    </labels>
                <created>Tue, 24 Oct 2023 08:44:33 -0700</created>
                <updated>Mon, 19 Feb 2024 00:41:10 -0800</updated>
                            <resolved>Fri, 3 Nov 2023 05:35:38 -0700</resolved>
                                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14647387" author="roboduke" created="Wed, 7 Feb 2024 05:13:30 -0800"  >[jdk11u-fix-request] Approval Request from Johannes Bechberger&lt;br/&gt;
Fixes a bug in the JDWP tests.&lt;br/&gt;
Tested in the SapMachine nightly tests and on my local machine. Low risk.</comment>
                            <comment id="14639122" author="JIRAUSER20001" created="Wed, 10 Jan 2024 08:17:20 -0800"  >Fix request 11u-dev&lt;br/&gt;
&lt;br/&gt;
Fixes a bug small bug in test case. Tested on my local machine with the new test case that I submitted, has a low risk. </comment>
                            <comment id="14639121" author="roboduke" created="Wed, 10 Jan 2024 08:15:51 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2453&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2453&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-10 16:12:44 +0000</comment>
                            <comment id="14624377" author="JIRAUSER20001" created="Tue, 7 Nov 2023 03:40:22 -0800"  >I&amp;#39;ll backport the fix from jdk17 to jdk11, as the backport wasn&amp;#39;t clean.</comment>
                            <comment id="14624375" author="JIRAUSER20001" created="Tue, 7 Nov 2023 03:39:54 -0800"  >Fix request 17u-dev&lt;br/&gt;
&lt;br/&gt;
Fixes a bug small bug in test case. Tested on my local machine with the new test case that I submitted, has a low risk.</comment>
                            <comment id="14624373" author="JIRAUSER20001" created="Tue, 7 Nov 2023 03:39:42 -0800"  >Fix request 21u&lt;br/&gt;
&lt;br/&gt;
Fixes a bug small bug in test case. Tested on my local machine with the new test case that I submitted, has a low risk.</comment>
                            <comment id="14624365" author="roboduke" created="Tue, 7 Nov 2023 03:22:50 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1949&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1949&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-07 11:12:15 +0000</comment>
                            <comment id="14624337" author="roboduke" created="Tue, 7 Nov 2023 02:36:46 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/331&quot;&gt;https://git.openjdk.org/jdk21u/pull/331&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-07 10:30:36 +0000</comment>
                            <comment id="14623993" author="JIRAUSER20001" created="Mon, 6 Nov 2023 03:11:36 -0800"  >I&amp;#39;m still waiting for my PRs to be merged and will add backports as soon as possible.</comment>
                            <comment id="14623988" author="shade" created="Mon, 6 Nov 2023 02:59:51 -0800"  >Johannes, please make sure this fix is backported everywhere you backport the &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8317920&quot; title=&quot;JDWP-agent sends broken exception event with onthrow option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8317920&quot;&gt;&lt;strike&gt;JDK-8317920&lt;/strike&gt;&lt;/a&gt;.</comment>
                            <comment id="14623615" author="dukebot" created="Fri, 3 Nov 2023 05:35:37 -0700"  >Changeset: 1a21c1a7&lt;br/&gt;
Author:    Johannes Bechberger &amp;lt;&lt;a href=&apos;mailto:jbechberger@openjdk.org&apos;&gt;jbechberger@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-03 12:32:53 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/1a21c1a783d64ca0930c358c06a43975f96ffac6&quot;&gt;https://git.openjdk.org/jdk/commit/1a21c1a783d64ca0930c358c06a43975f96ffac6&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14620953" author="roboduke" created="Wed, 25 Oct 2023 04:33:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16358&quot;&gt;https://git.openjdk.org/jdk/pull/16358&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-25 11:27:18 +0000</comment>
                            <comment id="14620843" author="cjplummer" created="Tue, 24 Oct 2023 20:45:20 -0700"  >The issue is that the debugger side binds to a socket using ServerSocket(0), gets the port from the socket, closes the socket, and then passes the port to the debug agent to listen on. That leaves a window where some other process can grab the same port between the time the ServerSocket is closed and the debuggee starts to listen on the port, resulting in the &amp;quot;bind failed: Address already in use&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
The recommendation is to let the debuggee choose the port (by not specifying one). You can use launch=echo, which echo the port to stdout, and the debugger can read it in and attach to it. You can probably make the echo output look just like the normal &#8220;Listening for transport&#8230;&#8221; output so the support already in the Debuggee class can be used..&lt;br/&gt;
&lt;br/&gt;
Thanks to [~amenkov] for the analysis.</comment>
                            <comment id="14620750" author="cjplummer" created="Tue, 24 Oct 2023 10:47:51 -0700"  >This is a new test that came with the fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8317920&quot; title=&quot;JDWP-agent sends broken exception event with onthrow option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8317920&quot;&gt;&lt;strike&gt;JDK-8317920&lt;/strike&gt;&lt;/a&gt;.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5114502">JDK-8319886</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115866">JDK-8321118</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118504">JDK-8323372</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5121797">JDK-8326138</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5112166">JDK-8317920</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33lnn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="370"><![CDATA[debugger]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>