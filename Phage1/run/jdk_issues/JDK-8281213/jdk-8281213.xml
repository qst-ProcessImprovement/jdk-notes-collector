<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:51:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8281213] Unsafe uses of long and size_t in MemReporterBase::diff_in_current_scale</title>
                <link>https://bugs.openjdk.org/browse/JDK-8281213</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>MemReporterBase::diff_in_current_scale is defined as follows:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;inline long diff_in_current_scale(size_t s1, size_t s2) const {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;long amount = (long)(s1 - s2);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;long scale = (long)_scale;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amount = (amount &amp;gt; 0) ? (amount + scale / 2) : (amount - scale / 2);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return amount / scale;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
Long and size_t can have different sizes: 4 bytes and 8 bytes (LLP64). The result of &amp;#39;s1 - s2&amp;#39; might not fit into long. It might not fit into int64_t. For example: s1 is SIZE_MAX and s2 is SIZE_MAX-MAX_INT64-1.&lt;br/&gt;
&lt;br/&gt;
We should calculate diff as size_t and convert a result to long. Assertions must be added to check the diff fits into long.</description>
                <environment></environment>
        <key id="5067717">JDK-8281213</key>
            <summary>Unsafe uses of long and size_t in MemReporterBase::diff_in_current_scale</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azafari">Afshin Zafari</assignee>
                                    <reporter username="eastigeevich">Evgeny Astigeevich</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>nmt</label>
                            <label>starter</label>
                    </labels>
                <created>Thu, 3 Feb 2022 03:19:52 -0800</created>
                <updated>Fri, 13 Jun 2025 03:19:25 -0700</updated>
                            <resolved>Fri, 20 Jan 2023 02:19:22 -0800</resolved>
                                    <version>19</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14553009" author="dukebot" created="Fri, 20 Jan 2023 02:19:20 -0800"  >Changeset: 26410c18&lt;br/&gt;
Author:    Afshin Zafari &amp;lt;&lt;a href=&apos;mailto:afshin.zafari@oracle.com&apos;&gt;afshin.zafari@oracle.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Evgeny Astigeevich &amp;lt;&lt;a href=&apos;mailto:eastigeevich@openjdk.org&apos;&gt;eastigeevich@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-20 10:17:07 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/26410c180b88b4342217fdad63f1221786d8c37b&quot;&gt;https://git.openjdk.org/jdk/commit/26410c180b88b4342217fdad63f1221786d8c37b&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14542639" author="roboduke" created="Mon, 5 Dec 2022 06:05:44 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11514&quot;&gt;https://git.openjdk.org/jdk/pull/11514&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-05 13:54:57 +0000</comment>
                            <comment id="14475477" author="mseledtsov" created="Tue, 8 Feb 2022 11:12:45 -0800"  >ILW = MLM = P4</comment>
                            <comment id="14474555" author="coleenp" created="Fri, 4 Feb 2022 05:01:19 -0800"  >Removing the use of &amp;#39;long&amp;#39; from hotspot code is it&amp;#39;s own task, so I think this is fine as a separate RFE.</comment>
                            <comment id="14474328" author="dcubed" created="Thu, 3 Feb 2022 07:34:52 -0800"  >Should this become a sub-task of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8135181&quot; title=&quot;Re-enable &amp;#39;-Wconversion&amp;#39; for GCC 4.3 and later&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8135181&quot;&gt;JDK-8135181&lt;/a&gt;?</comment>
                            <comment id="14474284" author="hseigel" created="Thu, 3 Feb 2022 05:53:30 -0800"  >This looks like a duplicate of &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8135181&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8135181&lt;/a&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5092340">JDK-8300981</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4842627">JDK-8135181</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5104247">JDK-8310974</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vwvv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17335"><![CDATA[b07]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>