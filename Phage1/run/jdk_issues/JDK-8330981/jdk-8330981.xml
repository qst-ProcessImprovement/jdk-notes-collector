<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:57:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8330981] ZGC: Should not dedup strings in the finalizer graph</title>
                <link>https://bugs.openjdk.org/browse/JDK-8330981</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When marking through the object graph, encountered strings get requests for deduplication, which publishes an oop in OopStorage using a phantom store. When performing stores, it is implicitly assumed that surely the thing you are attaching to the object graph, is already considered strongly reachable, right?!&lt;br/&gt;
Unfortunately, when marking through the finalizer graph, it is not strongly reachable. Yet we invoke the same string deduplication code. The result is that that pointer colours look better than they necessarily are. When the reference processor processes the referents of the OopStorage, they can incorrectly not get cleared, due to the colour looking as if it should be strongly reachable. This will eventually end up in a crash as the object referred to isn&amp;#39;t live.</description>
                <environment></environment>
        <key id="5127737">JDK-8330981</key>
            <summary>ZGC: Should not dedup strings in the finalizer graph</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eosterlund">Erik &#214;sterlund</assignee>
                                    <reporter username="eosterlund">Erik &#214;sterlund</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>genzgc</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>zgc</label>
                    </labels>
                <created>Tue, 23 Apr 2024 06:20:48 -0700</created>
                <updated>Fri, 1 Nov 2024 07:28:49 -0700</updated>
                            <resolved>Fri, 31 May 2024 05:52:59 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14698004" author="roboduke" created="Tue, 13 Aug 2024 11:29:12 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix a corner case ZGC bug. Applies cleanly. Tests pass (see PR). Was in mainline for 10 weeks without problems.</comment>
                            <comment id="14697915" author="roboduke" created="Tue, 13 Aug 2024 06:29:34 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/917&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/917&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-13 13:17:58 +0000</comment>
                            <comment id="14679815" author="shade" created="Fri, 7 Jun 2024 07:30:41 -0700"  >OK, great. We will backport this fix to 21u after some soak in mainline then.</comment>
                            <comment id="14679794" author="eosterlund" created="Fri, 7 Jun 2024 05:42:13 -0700"  >I think that&#8217;s right. Can&#8217;t see how it would break Shenandoah in the same way. It might because it&#8217;s weird. But I can&#8217;t think of how.</comment>
                            <comment id="14678790" author="shade" created="Tue, 4 Jun 2024 09:06:29 -0700"  >Looks to me this affects at least JDK 21 ZGC.&lt;br/&gt;
&lt;br/&gt;
I also wondered if this affects other GCs. Looks like it does not, since this bit does not apply: &amp;quot;When the reference processor processes the referents of the OopStorage, they can incorrectly not get cleared, due to the colour looking as if it should be strongly reachable.&amp;quot; I.e. other collectors actually flush dead phantomly-reachable strings after marking is complete, and this whole thing is a ZGC quirk, correct?</comment>
                            <comment id="14677800" author="dukebot" created="Fri, 31 May 2024 05:52:58 -0700"  >Changeset: 2f2dc228&lt;br/&gt;
Author:    Erik &amp;#xD6;sterlund &amp;lt;&lt;a href=&apos;mailto:eosterlund@openjdk.org&apos;&gt;eosterlund@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-05-31 12:50:41 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/2f2dc2289bce47d8071a86215218f345cce71dba&quot;&gt;https://git.openjdk.org/jdk/commit/2f2dc2289bce47d8071a86215218f345cce71dba&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14677041" author="roboduke" created="Wed, 29 May 2024 00:22:27 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19444&quot;&gt;https://git.openjdk.org/jdk/pull/19444&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-29 07:18:24 +0000</comment>
                            <comment id="14667702" author="tschatzl" created="Wed, 24 Apr 2024 06:33:49 -0700"  >Please update affects version as needed. Probably more than latest mainline is affected.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5137307">JDK-8338830</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5142923">JDK-8343438</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i361wb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>