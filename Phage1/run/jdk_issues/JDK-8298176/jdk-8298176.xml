<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:36:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8298176] remove OpaqueZeroTripGuardPostLoop once main-loop disappears</title>
                <link>https://bugs.openjdk.org/browse/JDK-8298176</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK20 CI:&lt;br/&gt;
&lt;br/&gt;
applications/javafuzzer/MediumTest.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
Summary of the JavaFuzzer run:&lt;br/&gt;
------------------------------&lt;br/&gt;
Host:     ol8-aarch64-590460&lt;br/&gt;
Tests:    8 x 50&lt;br/&gt;
Args:     -conf config.yml&lt;br/&gt;
&lt;br/&gt;
Started  at: Tue Dec  6 04:36:43 UTC 2022&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
r1- 50: 42 passed, 0 crashes, 0 fails, 0 hangs, 0 incorrect tests, 8 Reference Java failures&lt;br/&gt;
r2- 50: 36 passed, 0 crashes, 0 fails, 0 hangs, 0 incorrect tests, 14 Reference Java failures&lt;br/&gt;
r4- 50: 33 passed, 0 crashes, 0 fails, 0 hangs, 0 incorrect tests, 17 Reference Java failures&lt;br/&gt;
r8- 50: 31 passed, 2 crashes, 0 fails, 0 hangs, 0 incorrect tests, 18 Reference Java failures&lt;br/&gt;
r3- 50: 31 passed, 0 crashes, 0 fails, 0 hangs, 0 incorrect tests, 19 Reference Java failures&lt;br/&gt;
r5- 50: 30 passed, 0 crashes, 0 fails, 0 hangs, 0 incorrect tests, 20 Reference Java failures&lt;br/&gt;
r7- 50: 31 passed, 0 crashes, 0 fails, 0 hangs, 0 incorrect tests, 19 Reference Java failures&lt;br/&gt;
r6- 50: 30 passed, 0 crashes, 0 fails, 0 hangs, 0 incorrect tests, 20 Reference Java failures&lt;br/&gt;
&lt;br/&gt;
Finished at: Tue Dec  6 05:48:49 UTC 2022&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/0c72054a-24ab-4dbb-944f-97f9341a1b96-S151540/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/39ad2c2e-f413-4e8e-b682-799b5d3d5239/runs/86b033bb-f00d-44c5-9f7f-ca18450e04df/workspace/open/src/hotspot/share/opto/multnode.cpp:77), pid=2551483, tid=2551499&lt;br/&gt;
#  assert((Opcode() != Op_If &amp;amp;&amp;amp; Opcode() != Op_RangeCheck) || outcnt() == 2) failed: bad if #1&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (20.0+27) (fastdebug build 20-ea+27-2114)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 20-ea+27-2114, compiled mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x14443ec]  MultiNode::proj_out(unsigned int) const+0x9c&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/opt/core.sh %p&amp;quot; (or dumping to /tmp/fuzzer.tmp.RxSrez9WZc/core.2551483)&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/0c72054a-24ab-4dbb-944f-97f9341a1b96-S151540/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/39ad2c2e-f413-4e8e-b682-799b5d3d5239/runs/86b033bb-f00d-44c5-9f7f-ca18450e04df/workspace/open/src/hotspot/share/opto/multnode.cpp:77), pid=2551923, tid=2551937&lt;br/&gt;
#  assert((Opcode() != Op_If &amp;amp;&amp;amp; Opcode() != Op_RangeCheck) || outcnt() == 2) failed: bad if #1&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (20.0+27) (fastdebug build 20-ea+27-2114)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 20-ea+27-2114, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x14443ec]  MultiNode::proj_out(unsigned int) const+0x9c&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/opt/core.sh %p&amp;quot; (or dumping to /tmp/fuzzer.tmp.RxSrez9WZc/core.2551923)&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
&lt;br/&gt;
[2022-12-06T05:48:49.293374139Z] Waiting for completion for process 2503650&lt;br/&gt;
[2022-12-06T05:48:49.293578780Z] Waiting for completion finished for process 2503650&lt;br/&gt;
----------System.err:(13/728)----------&lt;br/&gt;
java.lang.RuntimeException: assertEquals: expected 1 to equal 2&lt;br/&gt;
	at jdk.test.lib.Asserts.fail(Asserts.java:594)&lt;br/&gt;
	at jdk.test.lib.Asserts.assertEquals(Asserts.java:205)&lt;br/&gt;
	at jdk.test.lib.Asserts.assertEquals(Asserts.java:189)&lt;br/&gt;
	at applications.javafuzzer.JavaFuzzerRunner.main(JavaFuzzerRunner.java:245)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1599)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
result: Failed. Execution failed: `main&amp;#39; threw exception: java.lang.RuntimeException: assertEquals: expected 1 to equal 2&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s the crashing thread&amp;#39;s stack:&lt;br/&gt;
&lt;br/&gt;
---------------  T H R E A D  ---------------&lt;br/&gt;
&lt;br/&gt;
Current thread (0x0000fffd10355010):  JavaThread &amp;quot;C2 CompilerThread0&amp;quot; daemon [_thread_in_native, id=2551499, stack(0x0000fffce91e0000,0x0000fffce93e0000)]&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:    195   12    b  4       Test::vMeth (369 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x0000fffce91e0000,0x0000fffce93e0000],  sp=0x0000fffce93d9a90,  free space=2022k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x14443ec]  MultiNode::proj_out(unsigned int) const+0x9c  (multnode.cpp:77)&lt;br/&gt;
V  [libjvm.so+0x128e3bc]  PhaseIdealLoop::get_skeleton_predicates(Node*, Unique_Node_List&amp;amp;, bool)+0x1c8  (loopPredicate.cpp:381)&lt;br/&gt;
V  [libjvm.so+0x12c822c]  PhaseIdealLoop::collect_potentially_useful_predicates(IdealLoopTree*, Unique_Node_List&amp;amp;)+0x19c  (loopnode.cpp:4056)&lt;br/&gt;
V  [libjvm.so+0x12c8658]  PhaseIdealLoop::eliminate_useless_predicates()+0x3c8  (loopnode.cpp:4077)&lt;br/&gt;
V  [libjvm.so+0x12de720]  PhaseIdealLoop::build_and_optimize()+0x8bc  (loopnode.cpp:4427)&lt;br/&gt;
V  [libjvm.so+0x9a8100]  PhaseIdealLoop::optimize(PhaseIterGVN&amp;amp;, LoopOptsMode)+0x1e0  (loopnode.hpp:1082)&lt;br/&gt;
V  [libjvm.so+0x9a3ca8]  Compile::Optimize()+0xde8  (compile.cpp:2146)&lt;br/&gt;
V  [libjvm.so+0x9a657c]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x11cc  (compile.cpp:830)&lt;br/&gt;
V  [libjvm.so+0x7c5858]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x1b4  (c2compiler.cpp:113)&lt;br/&gt;
V  [libjvm.so+0x9b2dc4]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xa10  (compileBroker.cpp:2237)&lt;br/&gt;
V  [libjvm.so+0x9b3828]  CompileBroker::compiler_thread_loop()+0x5b8  (compileBroker.cpp:1916)&lt;br/&gt;
V  [libjvm.so+0xed3a20]  JavaThread::thread_main_inner()+0x21c  (javaThread.cpp:696)&lt;br/&gt;
V  [libjvm.so+0x17d48e8]  Thread::call_run()+0xf8  (thread.cpp:224)&lt;br/&gt;
V  [libjvm.so+0x14ed344]  thread_native_entry(Thread*)+0x100  (os_linux.cpp:739)&lt;br/&gt;
C  [libpthread.so.0+0x7908]  start_thread+0x188</description>
                <environment></environment>
        <key id="5088992">JDK-8298176</key>
            <summary>remove OpaqueZeroTripGuardPostLoop once main-loop disappears</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roland">Roland Westrelin</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>c2</label>
                            <label>javafuzzer</label>
                            <label>oracle-triage-11</label>
                            <label>oracle-triage-17</label>
                            <label>oracle-triage-20</label>
                            <label>problemlist</label>
                            <label>regression</label>
                            <label>tier6</label>
                            <label>tier8</label>
                    </labels>
                <created>Tue, 6 Dec 2022 06:47:02 -0800</created>
                <updated>Fri, 22 Sep 2023 03:25:03 -0700</updated>
                            <resolved>Thu, 22 Dec 2022 00:58:08 -0800</resolved>
                                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>20</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14547364" author="dukebot" created="Thu, 22 Dec 2022 00:57:57 -0800"  >Changeset: a0a09d56&lt;br/&gt;
Author:    Roland Westrelin &amp;lt;&lt;a href=&apos;mailto:roland@openjdk.org&apos;&gt;roland@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2022-12-22 08:56:00 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk20/commit/a0a09d56ba4fc6133b423ad29d86fc99dd6dc19b&quot;&gt;https://git.openjdk.org/jdk20/commit/a0a09d56ba4fc6133b423ad29d86fc99dd6dc19b&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14546932" author="roboduke" created="Tue, 20 Dec 2022 10:54:19 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20/pull/65&quot;&gt;https://git.openjdk.org/jdk20/pull/65&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-20 18:47:26 +0000</comment>
                            <comment id="14546406" author="JIRAUSER19821" created="Mon, 19 Dec 2022 05:11:05 -0800"  >Thanks [~roland] for taking this on!</comment>
                            <comment id="14545002" author="roboduke" created="Tue, 13 Dec 2022 00:02:38 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20/pull/22&quot;&gt;https://git.openjdk.org/jdk20/pull/22&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-13 07:08:59 +0000</comment>
                            <comment id="14544239" author="dcubed" created="Fri, 9 Dec 2022 07:51:20 -0800"  >Here&amp;#39;s the crashing thread&amp;#39;s stack from the jdk-21+1-2-tier6 sighting:&lt;br/&gt;
&lt;br/&gt;
applications/javafuzzer/MediumTest.java&lt;br/&gt;
&lt;br/&gt;
---------------  T H R E A D  ---------------&lt;br/&gt;
&lt;br/&gt;
Current thread (0x00007fb9ec343aa0):  JavaThread &amp;quot;C2 CompilerThread0&amp;quot; daemon [_thread_in_native, id=3617415, stack(0x00007fb9d0374000,0x00007fb9d0475000)]&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:    765   88    b  4       Test::vMeth (495 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007fb9d0374000,0x00007fb9d0475000],  sp=0x00007fb9d046efd0,  free space=1003k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x1653bf4]  MultiNode::proj_out(unsigned int) const+0x74  (multnode.cpp:77)&lt;br/&gt;
V  [libjvm.so+0x1457161]  PhaseIdealLoop::get_skeleton_predicates(Node*, Unique_Node_List&amp;amp;, bool)+0x1b1  (loopPredicate.cpp:395)&lt;br/&gt;
V  [libjvm.so+0x149312c]  PhaseIdealLoop::collect_potentially_useful_predicates(IdealLoopTree*, Unique_Node_List&amp;amp;)+0x1ac  (loopnode.cpp:4066)&lt;br/&gt;
V  [libjvm.so+0x14935ab]  PhaseIdealLoop::eliminate_useless_predicates()+0x3eb  (loopnode.cpp:4087)&lt;br/&gt;
V  [libjvm.so+0x14ab02f]  PhaseIdealLoop::build_and_optimize()+0x97f  (loopnode.cpp:4432)&lt;br/&gt;
V  [libjvm.so+0xaeeee1]  PhaseIdealLoop::optimize(PhaseIterGVN&amp;amp;, LoopOptsMode)+0x261  (loopnode.hpp:1082)&lt;br/&gt;
V  [libjvm.so+0xae8faf]  Compile::Optimize()+0xe2f  (compile.cpp:2146)&lt;br/&gt;
V  [libjvm.so+0xaed10e]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x18ce  (compile.cpp:830)&lt;br/&gt;
V  [libjvm.so+0x8fec67]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x4e7  (c2compiler.cpp:113)&lt;br/&gt;
V  [libjvm.so+0xafa22c]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xa7c  (compileBroker.cpp:2237)&lt;br/&gt;
V  [libjvm.so+0xafafe8]  CompileBroker::compiler_thread_loop()+0x5d8  (compileBroker.cpp:1916)&lt;br/&gt;
V  [libjvm.so+0x1067896]  JavaThread::thread_main_inner()+0x206  (javaThread.cpp:709)&lt;br/&gt;
V  [libjvm.so+0x1a6a770]  Thread::call_run()+0x100  (thread.cpp:224)&lt;br/&gt;
V  [libjvm.so+0x16fef13]  thread_native_entry(Thread*)+0x103  (os_linux.cpp:739)</comment>
                            <comment id="14543173" author="chagedorn" created="Tue, 6 Dec 2022 07:37:23 -0800"  >Attached reduced test case Reduced.java:&lt;br/&gt;
&lt;br/&gt;
$ java -Xcomp -XX:CompileOnly=Reduced Reduced.java</comment>
                            <comment id="14543164" author="chagedorn" created="Tue, 6 Dec 2022 07:27:38 -0800"  >ILW = C2 assertion due to broken graph which was not cleaned up properly (If node with 1 projection only), single Java Fuzzer test case, disable compilation of affected method = HLM = P3</comment>
                            <comment id="14543163" author="chagedorn" created="Tue, 6 Dec 2022 07:23:09 -0800"  >Starts to fail after the removal of Opaque2 nodes (&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8294540&quot; title=&quot;Remove Opaque2Node: it is broken and triggers assert&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8294540&quot;&gt;&lt;strike&gt;JDK-8294540&lt;/strike&gt;&lt;/a&gt;). We most likely just revealed an existing problem because we are not preventing optimizations anymore with Opaque2 nodes.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5090368">JDK-8299317</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5084364">JDK-8294540</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5088481">JDK-8297752</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5097412">JDK-8305189</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5110410">JDK-8316361</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="101915" name="FuzzerUtils.java" size="13240" author="chagedorn" created="Tue, 6 Dec 2022 07:20:00 -0800"/>
                            <attachment id="101918" name="Reduced.java" size="426" author="chagedorn" created="Tue, 6 Dec 2022 07:37:00 -0800"/>
                            <attachment id="101916" name="Test.java" size="6568" author="chagedorn" created="Tue, 6 Dec 2022 07:20:16 -0800"/>
                            <attachment id="101917" name="hs_err_pid2551483.log" size="121657" author="chagedorn" created="Tue, 6 Dec 2022 07:21:46 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zi7f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17358"><![CDATA[b30]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>