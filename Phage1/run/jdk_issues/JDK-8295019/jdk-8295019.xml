<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:14:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8295019] Cannot call a method with a parameter of a local class declared in a lambda</title>
                <link>https://bugs.openjdk.org/browse/JDK-8295019</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
OpenJDK 17.0.4.1+1, 19+36, 20-ea+17&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
The compiler complains about an invocation of a method that has a parameter whose type is a local class C declared in a lambda by passing it an instance of C returned by a method because &amp;quot;C cannot be converted to C&amp;quot;. The lambda also has to be passed to a method: if it is assigned to a variable, the code compiles.&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
javac -Xdiags:verbose Bug.java&lt;br/&gt;
Code is below.&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
No error.&lt;br/&gt;
ACTUAL -&lt;br/&gt;
Bug.java:11: error: method takeC in class C cannot be applied to given types;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;C.takeC(C.giveC());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;^&lt;br/&gt;
&amp;nbsp;&amp;nbsp;required: C&lt;br/&gt;
&amp;nbsp;&amp;nbsp;found:    C&lt;br/&gt;
&amp;nbsp;&amp;nbsp;reason: argument mismatch; C cannot be converted to C&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
class Bug {&lt;br/&gt;
	static void run(Runnable r) {}&lt;br/&gt;
&lt;br/&gt;
	static void main() {&lt;br/&gt;
		run(() -&amp;gt; {&lt;br/&gt;
			class C {&lt;br/&gt;
				static void takeC(C c) {}&lt;br/&gt;
				static C giveC() {return new C();}&lt;br/&gt;
			}&lt;br/&gt;
&lt;br/&gt;
			C.takeC(C.giveC());&lt;br/&gt;
		});&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
I was able to work around this bug by declaring the local class outside the lambda.&lt;br/&gt;
class Workaround1 {&lt;br/&gt;
	static void run(Runnable r) {}&lt;br/&gt;
&lt;br/&gt;
	static void main() {&lt;br/&gt;
		class C {&lt;br/&gt;
			static void takeC(C c) {}&lt;br/&gt;
			static C giveC() {return new C();}&lt;br/&gt;
		}&lt;br/&gt;
&lt;br/&gt;
		run(() -&amp;gt; {&lt;br/&gt;
			C.takeC(C.giveC());&lt;br/&gt;
		});&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Additionally, storing the argument in a variable and passing the variable&amp;#39;s value to the method allows the code to compile.&lt;br/&gt;
class Workaround2 {&lt;br/&gt;
	static void run(Runnable r) {}&lt;br/&gt;
&lt;br/&gt;
	static void main() {&lt;br/&gt;
		run(() -&amp;gt; {&lt;br/&gt;
			class C {&lt;br/&gt;
				static void takeC(C c) {}&lt;br/&gt;
				static C giveC() {return new C();}&lt;br/&gt;
			}&lt;br/&gt;
&lt;br/&gt;
			var c = C.giveC();&lt;br/&gt;
			C.takeC(c);&lt;br/&gt;
		});&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5084714">JDK-8295019</key>
            <summary>Cannot call a method with a parameter of a local class declared in a lambda</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vromero">Vicente Arturo Romero Zaldivar</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>dcsad</label>
                            <label>reproducer-yes</label>
                            <label>webbug</label>
                    </labels>
                <created>Tue, 4 Oct 2022 15:39:40 -0700</created>
                <updated>Mon, 13 Feb 2023 11:08:43 -0800</updated>
                            <resolved>Tue, 7 Feb 2023 08:25:41 -0800</resolved>
                                    <version>17</version>
                    <version>19</version>
                    <version>20</version>
                                    <fixVersion>21</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14557998" author="dukebot" created="Tue, 7 Feb 2023 08:25:40 -0800"  >Changeset: a73d012c&lt;br/&gt;
Author:    Vicente Romero &amp;lt;&lt;a href=&apos;mailto:vromero@openjdk.org&apos;&gt;vromero@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-02-07 16:23:52 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a73d012c727ecbd5fcf97a624fc969ba6305db5f&quot;&gt;https://git.openjdk.org/jdk/commit/a73d012c727ecbd5fcf97a624fc969ba6305db5f&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14555915" author="roboduke" created="Mon, 30 Jan 2023 21:37:43 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12303&quot;&gt;https://git.openjdk.org/jdk/pull/12303&lt;/a&gt;&lt;br/&gt;
Date: 2023-01-31 05:32:28 +0000</comment>
                            <comment id="14528575" author="adev" created="Sun, 9 Oct 2022 04:48:24 -0700"  >The issue is reproducible with the error:&lt;br/&gt;
PS C:\test&amp;gt; javac -Xdiags:verbose Bug.java&lt;br/&gt;
Bug.java:10: error: method takeC in class C cannot be applied to given types;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;C.takeC(C.giveC());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;^&lt;br/&gt;
&amp;nbsp;&amp;nbsp;required: C&lt;br/&gt;
&amp;nbsp;&amp;nbsp;found:    C&lt;br/&gt;
&amp;nbsp;&amp;nbsp;reason: argument mismatch; C cannot be converted to C&lt;br/&gt;
1 error</comment>
                    </comments>
                    <attachments>
                            <attachment id="100997" name="Bug.java" size="205" author="adev" created="Sun, 9 Oct 2022 04:47:42 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yse3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17336"><![CDATA[b09]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="212"><![CDATA[javac]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>