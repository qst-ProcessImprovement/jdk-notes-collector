<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:36:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8318071] IgnoreUnrecognizedVMOptions flag still causes failure in ArchiveHeapTestClass</title>
                <link>https://bugs.openjdk.org/browse/JDK-8318071</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>I ran the test with extra flags:&lt;br/&gt;
-XX:+AlignVector -XX:+IgnoreUnrecognizedVMOptions -XX:+VerifyAlignVector&lt;br/&gt;
&lt;br/&gt;
Basically, I wanted to run over all tiers with an additional flag that may only be present on certain platforms.&lt;br/&gt;
VerifyAlignVector is one that does not exist anywhere yet. But IgnoreUnrecognizedVMOptions should also make that be ignored.&lt;br/&gt;
&lt;br/&gt;
The test seems to then override with&lt;br/&gt;
-XX:-IgnoreUnrecognizedVMOptions&lt;br/&gt;
&lt;br/&gt;
And produce this in the logs:&lt;br/&gt;
...&lt;br/&gt;
[STDERR]&lt;br/&gt;
Unrecognized VM option &amp;#39;VerifyAlignVector&amp;#39;&lt;br/&gt;
Did you mean &amp;#39;(+/-)AlignVector&amp;#39;?&lt;br/&gt;
Error: Could not create the Java Virtual Machine.&lt;br/&gt;
Error: A fatal exception has occurred. Program will exit.&lt;br/&gt;
&lt;br/&gt;
[2023-10-12T16:12:18.366329418Z] Waiting for completion for process 2575300&lt;br/&gt;
[2023-10-12T16:12:18.366420018Z] Waiting for completion finished for process 2575300&lt;br/&gt;
[2023-10-12T16:12:18.366515027Z] Waiting for completion for process 2575300&lt;br/&gt;
[2023-10-12T16:12:18.366589647Z] Waiting for completion finished for process 2575300&lt;br/&gt;
----------System.err:(22/1142)----------&lt;br/&gt;
&amp;nbsp;stdout: [];&lt;br/&gt;
&amp;nbsp;stderr: [Unrecognized VM option &amp;#39;VerifyAlignVector&amp;#39;&lt;br/&gt;
Did you mean &amp;#39;(+/-)AlignVector&amp;#39;?&lt;br/&gt;
Error: Could not create the Java Virtual Machine.&lt;br/&gt;
Error: A fatal exception has occurred. Program will exit.&lt;br/&gt;
]&lt;br/&gt;
&amp;nbsp;exitValue = 1&lt;br/&gt;
&lt;br/&gt;
java.lang.RuntimeException: &amp;#39;VM option &amp;#39;ArchiveHeapTestClass&amp;#39; is develop and is available only in debug version of VM.&amp;#39; missing from stdout/stderr&lt;br/&gt;
	at jdk.test.lib.process.OutputAnalyzer.shouldContain(OutputAnalyzer.java:221)&lt;br/&gt;
	at ArchiveHeapTestClass.mustContain(ArchiveHeapTestClass.java:92)&lt;br/&gt;
	at ArchiveHeapTestClass.mustFail(ArchiveHeapTestClass.java:97)&lt;br/&gt;
	at ArchiveHeapTestClass.testProductBuild(ArchiveHeapTestClass.java:177)&lt;br/&gt;
	at ArchiveHeapTestClass.main(ArchiveHeapTestClass.java:67)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:333)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1570)</description>
                <environment></environment>
        <key id="5112338">JDK-8318071</key>
            <summary>IgnoreUnrecognizedVMOptions flag still causes failure in ArchiveHeapTestClass</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsunderbabu">Ramkumar Sunderbabu</assignee>
                                    <reporter username="epeter">Emanuel Peter</reporter>
                        <labels>
                            <label>cmd</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Fri, 13 Oct 2023 00:46:13 -0700</created>
                <updated>Mon, 17 Jun 2024 03:20:52 -0700</updated>
                            <resolved>Mon, 23 Oct 2023 08:12:11 -0700</resolved>
                                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14681911" author="JIRAUSER20917" created="Sun, 16 Jun 2024 18:46:42 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.5-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test pass.  SAP nightly testing passed.&lt;br/&gt;
</comment>
                            <comment id="14681283" author="roboduke" created="Thu, 13 Jun 2024 00:42:20 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/714&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/714&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-13 07:37:33 +0000</comment>
                            <comment id="14620200" author="dukebot" created="Mon, 23 Oct 2023 08:12:10 -0700"  >Changeset: d888b267&lt;br/&gt;
Author:    Ramkumar Sunderbabu &amp;lt;&lt;a href=&apos;mailto:rsunderbabu@openjdk.org&apos;&gt;rsunderbabu@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Aleksey Shipilev &amp;lt;&lt;a href=&apos;mailto:shade@openjdk.org&apos;&gt;shade@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-10-23 15:10:22 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/d888b26783cbe9b2bf0a23ae728176f2eda6b90b&quot;&gt;https://git.openjdk.org/jdk/commit/d888b26783cbe9b2bf0a23ae728176f2eda6b90b&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14619729" author="roboduke" created="Fri, 20 Oct 2023 00:30:27 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16282&quot;&gt;https://git.openjdk.org/jdk/pull/16282&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-20 07:24:34 +0000</comment>
                            <comment id="14619685" author="iklam" created="Thu, 19 Oct 2023 18:53:47 -0700"  >OK, we can remove the test from product mode.</comment>
                            <comment id="14619352" author="dholmes" created="Wed, 18 Oct 2023 17:01:21 -0700"  >Sorry but this seems somewhat meaningless. We don&amp;#39;t write runtime tests to check that the source code has not been changed that way. If you want to verify the flag is still develop-only then a gtest seems the only way to do that. But I think this is a pointless test.</comment>
                            <comment id="14619239" author="iklam" created="Wed, 18 Oct 2023 08:34:02 -0700"  >ArchiveHeapTestClass can be used to archive the static fields of arbitrary classes. This is a feature that we cannot support today. We don&amp;#39;t want someone to enable such a feature by changing cds_globals.hpp and make ArchiveHeapTestClass a product or diagnostic flag.&lt;br/&gt;
&lt;br/&gt;
So adding vm.flagless should be enough.</comment>
                            <comment id="14619070" author="dholmes" created="Tue, 17 Oct 2023 18:32:15 -0700"  >&amp;gt; &amp;quot;This test case makes sure that we don&amp;#39;t enable this flag by mistake in the product build.&amp;quot;&lt;br/&gt;
&lt;br/&gt;
I contend that this test is not doing that, and can&amp;#39;t do that. The flag is a develop flag so it cannot be changed from its default value at runtime in a product build. If we were to run as flagless then the test obviously serves no purpose as we could be running with the flag enabled in other test runs and we would never notice!&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14618906" author="rsunderbabu" created="Tue, 17 Oct 2023 08:46:56 -0700"  >Using &amp;quot;-XX:+IgnoreUnrecognizedVMOptions&amp;quot; will fail testProductBuild(), hence &amp;quot;-XX:-IgnoreUnrecognizedVMOptions&amp;quot; was added as a defensive argument in testProductBuild().&lt;br/&gt;
A simpler solution will be to mark this &amp;quot;flagless&amp;quot;.&lt;br/&gt;
If not, a new property &amp;quot;vm.hasIgnoreUnrecognized&amp;quot; can be introduced and the test can be skipped if the property is true.</comment>
                            <comment id="14618623" author="dholmes" created="Mon, 16 Oct 2023 20:38:05 -0700"  >Yeah this is a test issue. The test uses the framework that seems to include externally set flags when launching VMs, but the product test is incompatible with getting -XX:+IgnoreUnrecognizedVMOptions. But that is probably the only flag that causes a problem so I don&amp;#39;t think we want it to be marked &amp;quot;flagless&amp;quot;.</comment>
                            <comment id="14618292" author="JIRAUSER19821" created="Mon, 16 Oct 2023 00:49:50 -0700"  >[~dholmes][~dcubed] In that case this is a test bug, right?&lt;br/&gt;
The test does not expect to have any non-existing flags set from the outside with -XX:+IgnoreUnrecognizedVMOptions.&lt;br/&gt;
Maybe the test needs to be flagless?</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5131689">JDK-8334119</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5131993">JDK-8334376</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5093715">JDK-8302117</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33gxn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17412"><![CDATA[b21]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>