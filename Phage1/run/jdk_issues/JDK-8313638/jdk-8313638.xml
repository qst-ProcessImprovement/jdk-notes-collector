<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:50:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8313638] Add test for dump of resolved references </title>
                <link>https://bugs.openjdk.org/browse/JDK-8313638</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The change in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8306582&quot; title=&quot;Remove MetaspaceShared::exit_after_static_dump()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8306582&quot;&gt;&lt;strike&gt;JDK-8306582&lt;/strike&gt;&lt;/a&gt; revealed that the state of the resolved references array is not checked in the CDS archive. &lt;br/&gt;
&lt;br/&gt;
If we want to add a test case, I would suggest adding a WhiteBox method like:&lt;br/&gt;
&lt;br/&gt;
public native Object[] getResolvedReferences(Class&amp;lt;?&amp;gt; c);&lt;br/&gt;
&lt;br/&gt;
This would return the resolved_references array for this class.&lt;br/&gt;
&lt;br/&gt;
The test class would look like this:&lt;br/&gt;
&lt;br/&gt;
class TestApp {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;static String foo = &amp;quot;fooString&amp;quot;;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;static String bar = &amp;quot;barString&amp;quot;;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public void main(String args[]) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Object[] resolvedReferences = wb.getResolvedReferences(TestApp.class);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... resolvedReferences must be non null for classes in the static archive&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... the test needs to have @requires vm.cds.write.archived.java.heap&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bool foundFoo = false;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bool foundBar = false;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (Object o : resolvedReferences) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;foundFoo |= (o == foo);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;foundBar |= (o == bar);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... foo and bar must have been found&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... CDS resolves all of the string literals used by the TestApp and stores&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... them inside the resolvedReferences array.&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
The new test can live under test/hotspot/jtreg/runtime/cds/appcds/sharedStrings&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5107259">JDK-8313638</key>
            <summary>Add test for dump of resolved references </summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="matsaave">Matias Saavedra Silva</assignee>
                                    <reporter username="matsaave">Matias Saavedra Silva</reporter>
                        <labels>
                            <label>cds</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Wed, 2 Aug 2023 10:28:36 -0700</created>
                <updated>Sat, 5 Oct 2024 11:07:59 -0700</updated>
                            <resolved>Thu, 14 Sep 2023 07:32:21 -0700</resolved>
                                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14709372" author="roboduke" created="Tue, 1 Oct 2024 01:31:19 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2924&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2924&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-01 08:25:20 +0000</comment>
                            <comment id="14709368" author="goetz" created="Tue, 1 Oct 2024 01:26:26 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this to imporve testing of 17u. It will also simplify future test backports.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Not clean, resolved whitebox coding.&lt;br/&gt;
Test passes. Tests using the old whitebox coding pass, too. SAP nightly testing passed.</comment>
                            <comment id="14635045" author="roboduke" created="Mon, 18 Dec 2023 06:02:19 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/59&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/59&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-18 13:51:41 +0000</comment>
                            <comment id="14635039" author="goetz" created="Mon, 18 Dec 2023 05:51:13 -0800"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this to imporve testing of 21u. It will also simplify future test backports.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14611217" author="dukebot" created="Thu, 14 Sep 2023 07:32:20 -0700"  >Changeset: 83dca629&lt;br/&gt;
Author:    Matias Saavedra Silva &amp;lt;&lt;a href=&apos;mailto:matsaave@openjdk.org&apos;&gt;matsaave@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-09-14 14:30:14 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/83dca6296e3fc7b9912ef7b82e443ce1415a7bcc&quot;&gt;https://git.openjdk.org/jdk/commit/83dca6296e3fc7b9912ef7b82e443ce1415a7bcc&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14610443" author="roboduke" created="Tue, 12 Sep 2023 09:43:53 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15686&quot;&gt;https://git.openjdk.org/jdk/pull/15686&lt;/a&gt;&lt;br/&gt;
Date: 2023-09-12 16:37:04 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5117661">JDK-8322611</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5140726">JDK-8341582</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32lm3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17312"><![CDATA[b16]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>