<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 17:59:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8304871] Use default visibility for static library builds</title>
                <link>https://bugs.openjdk.org/browse/JDK-8304871</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8239563&quot; title=&quot;Reduce public exports in dynamic libraries built from JDK static libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8239563&quot;&gt;&lt;strike&gt;JDK-8239563&lt;/strike&gt;&lt;/a&gt; introduced a change to the JDK which allows one to override the visibility of JNI exported symbols. However, with a recent GraalVM change[1], this default no longer works for some configurations. We propose to also use the same visibility of regular shared libraries from OpenJDK in the static libs build. Visibility can then further be reduced by using linker version scripts.&lt;br/&gt;
&lt;br/&gt;
This change only affects the static library build.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;https://github.com/oracle/graal/issues/4921&quot;&gt;https://github.com/oracle/graal/issues/4921&lt;/a&gt;</description>
                <environment></environment>
        <key id="5097059">JDK-8304871</key>
            <summary>Use default visibility for static library builds</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sgehwolf">Severin Gehwolf</assignee>
                                    <reporter username="sgehwolf">Severin Gehwolf</reporter>
                        <labels>
                            <label>graal</label>
                            <label>jdk17u-critical-request</label>
                            <label>jdk17u-critical-yes</label>
                            <label>jdk20u-fix-SQE-ok-next</label>
                            <label>jdk20u-fix-request</label>
                            <label>jdk20u-fix-yes</label>
                            <label>jni</label>
                    </labels>
                <created>Fri, 24 Mar 2023 03:54:50 -0700</created>
                <updated>Thu, 27 Apr 2023 06:58:16 -0700</updated>
                            <resolved>Thu, 30 Mar 2023 01:03:09 -0700</resolved>
                                    <version>17.0.6</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14571216" author="sgehwolf" created="Mon, 3 Apr 2023 05:16:49 -0700"  >Thanks, Goetz!</comment>
                            <comment id="14571214" author="goetz" created="Mon, 3 Apr 2023 04:52:32 -0700"  >17u critical approval&lt;br/&gt;
&lt;br/&gt;
I ran it through all our nightly test of 17u.&lt;br/&gt;
Looks good.</comment>
                            <comment id="14570670" author="sgehwolf" created="Thu, 30 Mar 2023 05:20:47 -0700"  >Critical fix request (OpenJDK 17u):&lt;br/&gt;
&lt;br/&gt;
Please approve getting this backported to JDK 17.0.7 (April). It&amp;#39;s a build fix that only touches the static library build of OpenJDK. The regular OpenJDK build stays untouched. It fixes an issue for native image apps using AWT and using plain OpenJDK (over labsjdk). It would help the upcoming Mandrel release based on JDK 17 (Also coming in April). Risk should be very low since it touches only the &amp;#39;make static-libs&amp;#39; and friends build path not generally used (outside graal). JDK 21 patch applies clean.</comment>
                            <comment id="14570665" author="roboduke" created="Thu, 30 Mar 2023 05:10:22 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u/pull/367&quot;&gt;https://git.openjdk.org/jdk17u/pull/367&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-30 12:06:05 +0000</comment>
                            <comment id="14570643" author="roboduke" created="Thu, 30 Mar 2023 03:19:46 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20u/pull/45&quot;&gt;https://git.openjdk.org/jdk20u/pull/45&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-30 10:12:18 +0000</comment>
                            <comment id="14570642" author="sgehwolf" created="Thu, 30 Mar 2023 03:15:08 -0700"  >Fix Request (20u):&lt;br/&gt;
&lt;br/&gt;
Please approve backporting this to JDK 20u. It fixes an issue for some programs using AWT for GraalVM based builds (who use OpenJDK 20 as base). Patch only affects the static library build and should therefore be very little risk. Tested with manual reproducer. Clean backport from JDK 21.</comment>
                            <comment id="14570618" author="sgehwolf" created="Thu, 30 Mar 2023 01:28:13 -0700"  >Yes, being explicit about it seems a bit clearer and is less dependent on what the shared libraries do.</comment>
                            <comment id="14570614" author="dukebot" created="Thu, 30 Mar 2023 01:03:08 -0700"  >Changeset: f0dba218&lt;br/&gt;
Author:    Severin Gehwolf &amp;lt;&lt;a href=&apos;mailto:sgehwolf@openjdk.org&apos;&gt;sgehwolf@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-03-30 08:01:36 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f0dba218ac00c0c577400b4d864ba79a9938aef7&quot;&gt;https://git.openjdk.org/jdk/commit/f0dba218ac00c0c577400b4d864ba79a9938aef7&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14570540" author="dholmes" created="Wed, 29 Mar 2023 15:47:38 -0700"  >[~apejovic] Thanks for confirming you are okay with this change.&lt;br/&gt;
&lt;br/&gt;
I have a mild preference for explicit defaults but I will leave it to [~sgehwolf] to choose.</comment>
                            <comment id="14570462" author="apejovic" created="Wed, 29 Mar 2023 08:59:01 -0700"  >[~sgehwolf] Thanks, I missed that.&lt;br/&gt;
&lt;br/&gt;
[~dholmes] I think it might be better to remove the override completely since it is no longer needed as the existing definition in jni_md.h works just fine.</comment>
                            <comment id="14570428" author="sgehwolf" created="Wed, 29 Mar 2023 07:02:42 -0700"  >[~dholmes] Do you think we can land this change? Any more concerns?</comment>
                            <comment id="14570425" author="sgehwolf" created="Wed, 29 Mar 2023 06:58:35 -0700"  >[~apejovic] That was just a suggestion from [~dholmes] to be more explicit. See: &lt;a href=&quot;https://github.com/openjdk/jdk/pull/13177#discussion_r1148797430&quot;&gt;https://github.com/openjdk/jdk/pull/13177#discussion_r1148797430&lt;/a&gt; I have no preference either way.</comment>
                            <comment id="14570406" author="apejovic" created="Wed, 29 Mar 2023 06:07:52 -0700"  >[~dholmes] Yes, we were aware of the impact. We no longer rely on symbol hiding to prevent symbols from being exported, but on the linker version script.&lt;br/&gt;
&lt;br/&gt;
[~sgehwolf] Maybe I&amp;#39;m missing something, but unless there&amp;#39;s something wrong with the JNIEXPORT definition in jni_md.h, why not just remove the redefinition as done in the labsjdk?</comment>
                            <comment id="14570258" author="dnsimon" created="Wed, 29 Mar 2023 00:16:33 -0700"  >[~cwimmer] and [~apejovic] can one of you please comment on this. I&amp;#39;m not so familiar with the intricacies of symbol visibility and Native Image. </comment>
                            <comment id="14570178" author="dholmes" created="Tue, 28 Mar 2023 17:30:46 -0700"  >I&amp;#39;d like confirmation that whomever made that change was aware of the impact. [~dnsimon] can you comment please?</comment>
                            <comment id="14569960" author="sgehwolf" created="Tue, 28 Mar 2023 01:15:24 -0700"  >[~dholmes] As far as I understand it, yes. This brings OpenJDK in line with Oracle Labs JDK. I.e. less divergence which seems a good thing. See:&lt;br/&gt;
&lt;br/&gt;
Labs JDK 17: &lt;a href=&quot;https://github.com/graalvm/labs-openjdk-17/commit/f5100f05d2ffd26d250b85dc732802eaa0ef8e85&quot;&gt;https://github.com/graalvm/labs-openjdk-17/commit/f5100f05d2ffd26d250b85dc732802eaa0ef8e85&lt;/a&gt;&lt;br/&gt;
Labs JDK 20: &lt;a href=&quot;https://github.com/graalvm/labs-openjdk-20/commit/be6b24f64620be29af55146d71b2f2a661950c3a&quot;&gt;https://github.com/graalvm/labs-openjdk-20/commit/be6b24f64620be29af55146d71b2f2a661950c3a&lt;/a&gt;</comment>
                            <comment id="14569864" author="dholmes" created="Mon, 27 Mar 2023 21:39:47 -0700"  >&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8239563&quot; title=&quot;Reduce public exports in dynamic libraries built from JDK static libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8239563&quot;&gt;&lt;strike&gt;JDK-8239563&lt;/strike&gt;&lt;/a&gt; was also done to support Graal, and this change is now undoing that. Do the Graal folk who want this understand it will restore the problem that &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8239563&quot; title=&quot;Reduce public exports in dynamic libraries built from JDK static libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8239563&quot;&gt;&lt;strike&gt;JDK-8239563&lt;/strike&gt;&lt;/a&gt; fixed?</comment>
                            <comment id="14569382" author="roboduke" created="Fri, 24 Mar 2023 08:41:44 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13177&quot;&gt;https://git.openjdk.org/jdk/pull/13177&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-24 15:31:32 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5097745">JDK-8305449</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5097842">JDK-8305537</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5098130">JDK-8305775</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5099643">JDK-8307019</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5011387">JDK-8239563</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30vor:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17417"><![CDATA[b17]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="199"><![CDATA[build]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>