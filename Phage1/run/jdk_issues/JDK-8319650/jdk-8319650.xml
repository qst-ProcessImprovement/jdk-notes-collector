<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:47:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8319650] Improve heap dump performance with class metadata caching</title>
                <link>https://bugs.openjdk.org/browse/JDK-8319650</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Heap dumping performance is something our users frequently complain about. Modern JDKs already implement parallel heap dumps from diagnostic commands, which is nice. But there are single-threaded improvements that we can easily do.&lt;br/&gt;
&lt;br/&gt;
If you profile current heap dumping code, then you would see that walking the class data looking for fields takes the overwhelming majority of execution time. It got much worse in JDK 21 with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8292818&quot; title=&quot;replace 96-bit representation for field metadata with variable-sized streams&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8292818&quot;&gt;&lt;strike&gt;JDK-8292818&lt;/strike&gt;&lt;/a&gt;, where looking for field data involves re-parsing the class metadata stream all the time. See `jdk21-heapdump-png` for sample profile for sample reproducer (`HeapDump.java`) on JDK 21.&lt;br/&gt;
&lt;br/&gt;
Since heap dumping code runs sporadically, we can cache some class metadata that heap dumping code needs on hot paths.</description>
                <environment></environment>
        <key id="5114239">JDK-8319650</key>
            <summary>Improve heap dump performance with class metadata caching</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shade">Aleksey Shipilev</assignee>
                                    <reporter username="shade">Aleksey Shipilev</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Tue, 7 Nov 2023 09:49:40 -0800</created>
                <updated>Tue, 4 Feb 2025 01:19:57 -0800</updated>
                            <resolved>Mon, 13 Nov 2023 03:53:27 -0800</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14655532" author="shade" created="Thu, 7 Mar 2024 07:43:41 -0800"  >Removed jdk21u-fix-yes to get attention of current JDK 21u maintainers, whose approval is needed now.</comment>
                            <comment id="14633893" author="roboduke" created="Wed, 13 Dec 2023 02:55:09 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/8&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/8&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-13 10:46:42 +0000</comment>
                            <comment id="14628805" author="roboduke" created="Fri, 24 Nov 2023 01:33:51 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Unclean backport to improve heap dump performance. Tests pass. Original 21u RFR acked by Paul Hohensee. In mainline since Nov 2023 without a bug tail. The risk is in regressing the frequently used diagnostic subsystem, but that should be considered against the major improvement in performance.</comment>
                            <comment id="14628506" author="roboduke" created="Wed, 22 Nov 2023 10:21:11 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/388&quot;&gt;https://git.openjdk.org/jdk21u/pull/388&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-21 12:28:53 +0000</comment>
                            <comment id="14625668" author="dukebot" created="Mon, 13 Nov 2023 03:53:25 -0800"  >Changeset: 03db8281&lt;br/&gt;
Author:    Aleksey Shipilev &amp;lt;&lt;a href=&apos;mailto:shade@openjdk.org&apos;&gt;shade@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-13 11:51:38 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/03db82818b905f21cb5ad1d56a687e238b4a6e33&quot;&gt;https://git.openjdk.org/jdk/commit/03db82818b905f21cb5ad1d56a687e238b4a6e33&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14624523" author="roboduke" created="Tue, 7 Nov 2023 11:34:36 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16545&quot;&gt;https://git.openjdk.org/jdk/pull/16545&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-07 18:37:59 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5126456">JDK-8329900</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5149880">JDK-8349346</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5082129">JDK-8292818</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="107150" name="HeapDump.java" size="702" author="shade" created="Tue, 7 Nov 2023 10:47:59 -0800"/>
                            <attachment id="107148" name="jdk21-heapdump.png" size="428386" author="shade" created="Tue, 7 Nov 2023 09:56:25 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33s97:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17436"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="369"><![CDATA[svc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>