<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:18:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8322957] Generational ZGC: Relocation selection must join the STS</title>
                <link>https://bugs.openjdk.org/browse/JDK-8322957</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>All failures seen so far happened with Generational ZGC.&lt;br/&gt;
&lt;br/&gt;
Sample out:&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (&amp;lt;workspace&amp;gt;/open/src/hotspot/share/gc/z/zAddress.inline.hpp:491), pid=21129, tid=21136&lt;br/&gt;
#  assert(!is_null(ptr)) failed: not supported&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (22.0+27) (fastdebug build 22-ea+27-2262)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 22-ea+27-2262, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-aarch64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x17e5b30]  ZPointer::is_old_load_good(zpointer)+0x60&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/opt/core.sh %p&amp;quot; (or dumping to &amp;lt;scratch&amp;gt;/1/core.21129)&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# &amp;lt;scratch&amp;gt;/jtreg_open_test_jdk_jdk_jfr/scratch/1/hs_err_pid21129.log&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
#</description>
                <environment></environment>
        <key id="5118034">JDK-8322957</key>
            <summary>Generational ZGC: Relocation selection must join the STS</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefank">Stefan Karlsson</assignee>
                                    <reporter username="enikitin">Evgeny Nikitin</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>atr</label>
                            <label>genzgc</label>
                            <label>hgupdate-sync</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Wed, 3 Jan 2024 07:01:35 -0800</created>
                <updated>Wed, 11 Dec 2024 03:48:17 -0800</updated>
                            <resolved>Fri, 12 Jan 2024 01:34:27 -0800</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14642199" author="roboduke" created="Mon, 22 Jan 2024 00:16:43 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix Generational ZGC. Applies cleanly. Tests pass. 21u PR is acked by ZGC devs.</comment>
                            <comment id="14641248" author="roboduke" created="Wed, 17 Jan 2024 10:07:13 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/189&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/189&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-17 15:45:23 +0000</comment>
                            <comment id="14640115" author="roboduke" created="Mon, 15 Jan 2024 02:03:26 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22/pull/74&quot;&gt;https://git.openjdk.org/jdk22/pull/74&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-15 09:57:54 +0000</comment>
                            <comment id="14639755" author="dukebot" created="Fri, 12 Jan 2024 01:34:26 -0800"  >Changeset: ba23025c&lt;br/&gt;
Author:    Stefan Karlsson &amp;lt;&lt;a href=&apos;mailto:stefank@openjdk.org&apos;&gt;stefank@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-01-12 09:32:50 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ba23025cd8a9c1af37afea6444ce5ea2ff41e5af&quot;&gt;https://git.openjdk.org/jdk/commit/ba23025cd8a9c1af37afea6444ce5ea2ff41e5af&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14639415" author="roboduke" created="Thu, 11 Jan 2024 00:57:01 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17368&quot;&gt;https://git.openjdk.org/jdk/pull/17368&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-11 08:49:38 +0000</comment>
                            <comment id="14638108" author="stefank" created="Mon, 8 Jan 2024 05:17:37 -0800"  >&amp;gt; There are other parts where ZGC look at the mark words concurrently with the Leak Profiler changing the mark word bits. &lt;br/&gt;
&lt;br/&gt;
This statement was incorrect. The marking code has the correct STS, but the extra verification we added didn&amp;#39;t expect WorkerThreads to join the STS.&lt;br/&gt;
&lt;br/&gt;
Running Generational ZGC through tier1-7 with the relocation selection fix + fixed extra verification. </comment>
                            <comment id="14637453" author="stefank" created="Thu, 4 Jan 2024 07:39:16 -0800"  >The above is just one of the issues with the interaction between ZGC and the JFR Leak Profiler. There are other parts where ZGC look at the mark words concurrently with the Leak Profiler changing the mark word bits.</comment>
                            <comment id="14637396" author="stefank" created="Thu, 4 Jan 2024 03:25:58 -0800"  >Me and [~aboldtch] debugged this. The bug is that ZGC&amp;#39;s relocation selection runs one task without blocking out the JFR Leak Profiler&amp;#39;s VMThread operation.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5118282">JDK-8323166</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119677">JDK-8324393</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5120836">JDK-8325336</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145943">JDK-8345985</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5134284">JDK-8336408</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34esj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>