<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 14:23:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8296955] Kitchensink.java failed with &quot;double free or corruption (!prev): &lt;addr&gt;&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8296955</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK20 CI:&lt;br/&gt;
&lt;br/&gt;
applications/kitchensink/Kitchensink.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
[stress.process.err] Iteration start: Monitor at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: MemAccess at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: MBean at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Inflater at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: SpecJbb2005 at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Reference at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: LockDeflation at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Jcmd at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Jni at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Jvmti at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Jstat at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: SpecJvm2008Batch at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: ThreadDumper at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Jfr at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Perfmon at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: NMT at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Exception at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration start: Allocator at Sat Nov 12 04:13:14 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration done: MBean at Sat Nov 12 04:13:16 UTC 2022&lt;br/&gt;
[stress.process.err] Iteration done: ThreadDumper at Sat Nov 12 04:13:16 UTC 2022&lt;br/&gt;
[stress.process.err] *** Error in `/opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/bin/java&amp;#39;: double free or corruption (!prev): 0x00007fcaf0009a70 ***&lt;br/&gt;
[stress.process.err] ======= Backtrace: =========&lt;br/&gt;
[stress.process.err] /lib64/libc.so.6(+0x81329)[0x7fcb74161329]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0xfea973)[0x7fcb72dc4973]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0x16097ae)[0x7fcb733e37ae]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0x1687ca3)[0x7fcb73461ca3]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0x174af8b)[0x7fcb73524f8b]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0xe5f027)[0x7fcb72c39027]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0x1bd6c90)[0x7fcb739b0c90]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0x1a7e070)[0x7fcb73858070]&lt;br/&gt;
[stress.process.err] /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so(+0x1714e43)[0x7fcb734eee43]&lt;br/&gt;
[stress.process.err] /lib64/libpthread.so.0(+0x7ea5)[0x7fcb746b9ea5]&lt;br/&gt;
[stress.process.err] /lib64/libc.so.6(clone+0x6d)[0x7fcb741deb2d]&lt;br/&gt;
[stress.process.err] ======= Memory map: ========&lt;br/&gt;
[stress.process.err] 519800000-785800000 rw-p 00000000 00:00 0 &lt;br/&gt;
[stress.process.err] 785800000-7ff000000 ---p 00000000 00:00 0 &lt;br/&gt;
[stress.process.err] 7ff000000-7ff700000 rw-p 00000000 00:00 0 &lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&lt;br/&gt;
[stress.process.err] 7ffe872a8000-7ffe872ab000 r--p 00000000 00:00 0                          [vvar]&lt;br/&gt;
[stress.process.err] 7ffe872ab000-7ffe872ad000 r-xp 00000000 00:00 0                          [vdso]&lt;br/&gt;
[stress.process.err] ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]&lt;br/&gt;
Stress process is started and all modules initialized.&lt;br/&gt;
Dumping stress process VM options.&lt;br/&gt;
&amp;nbsp;stdout: [23488:&lt;br/&gt;
];&lt;br/&gt;
&amp;nbsp;stderr: [java.io.IOException: Connection reset by peer&lt;br/&gt;
	at jdk.attach/sun.tools.attach.VirtualMachineImpl.read(Native Method)&lt;br/&gt;
	at jdk.attach/sun.tools.attach.VirtualMachineImpl$SocketInputStream.read(VirtualMachineImpl.java:265)&lt;br/&gt;
	at jdk.attach/sun.tools.attach.HotSpotVirtualMachine.readInt(HotSpotVirtualMachine.java:332)&lt;br/&gt;
	at jdk.attach/sun.tools.attach.VirtualMachineImpl.execute(VirtualMachineImpl.java:197)&lt;br/&gt;
	at jdk.attach/sun.tools.attach.HotSpotVirtualMachine.executeCommand(HotSpotVirtualMachine.java:313)&lt;br/&gt;
	at jdk.attach/sun.tools.attach.HotSpotVirtualMachine.executeJCmd(HotSpotVirtualMachine.java:295)&lt;br/&gt;
	at jdk.jcmd/sun.tools.jcmd.JCmd.executeCommandForPid(JCmd.java:124)&lt;br/&gt;
	at jdk.jcmd/sun.tools.jcmd.JCmd.main(JCmd.java:97)&lt;br/&gt;
]&lt;br/&gt;
&amp;nbsp;exitValue = 1&lt;br/&gt;
&lt;br/&gt;
Got an exception, so I&amp;#39;ll kill the stress process process&lt;br/&gt;
[Sat Nov 12 04:14:20 UTC 2022] Unexpected errors during GlueModule initialization: Expected to get exit value of [0], exit value is: [1]&lt;br/&gt;
java.lang.RuntimeException: Expected to get exit value of [0], exit value is: [1]&lt;br/&gt;
	at jdk.test.lib.process.OutputAnalyzer.shouldHaveExitValue(OutputAnalyzer.java:490)&lt;br/&gt;
	at applications.kitchensink.process.glue.Main.dumpOptions(Main.java:442)&lt;br/&gt;
	at applications.kitchensink.process.glue.Main.execute(Main.java:333)&lt;br/&gt;
	at applications.kitchensink.process.glue.Main.main(Main.java:217)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1591)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException: Expected to get exit value of [0], exit value is: [1]</description>
                <environment></environment>
        <key id="5087506">JDK-8296955</key>
            <summary>Kitchensink.java failed with &quot;double free or corruption (!prev): &lt;addr&gt;&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coleenp">Coleen Phillimore</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>gc-g1</label>
                            <label>intermittent</label>
                            <label>noreg-hard</label>
                            <label>tier5</label>
                    </labels>
                <created>Mon, 14 Nov 2022 11:15:11 -0800</created>
                <updated>Fri, 20 Jan 2023 15:04:18 -0800</updated>
                            <resolved>Mon, 12 Dec 2022 16:51:13 -0800</resolved>
                                    <version>20</version>
                                    <fixVersion>20</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14544946" author="dukebot" created="Mon, 12 Dec 2022 16:51:11 -0800"  >Changeset: d4531903&lt;br/&gt;
Author:    Coleen Phillimore &amp;lt;&lt;a href=&apos;mailto:coleenp@openjdk.org&apos;&gt;coleenp@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2022-12-13 00:49:16 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk20/commit/d4531903007dbe8dcdd163e423d23e8cefba61c8&quot;&gt;https://git.openjdk.org/jdk20/commit/d4531903007dbe8dcdd163e423d23e8cefba61c8&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14544178" author="roboduke" created="Fri, 9 Dec 2022 04:36:44 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk20/pull/10&quot;&gt;https://git.openjdk.org/jdk20/pull/10&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-09 12:27:42 +0000</comment>
                            <comment id="14543909" author="roboduke" created="Thu, 8 Dec 2022 06:33:01 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11594&quot;&gt;https://git.openjdk.org/jdk/pull/11594&lt;/a&gt;&lt;br/&gt;
Date: 2022-12-08 14:22:15 +0000</comment>
                            <comment id="14543584" author="coleenp" created="Wed, 7 Dec 2022 09:05:19 -0800"  >Yes, this looks like an accurate diagnosis.  In the core file, there are several threads doing CodeCacheUnloadingTask.</comment>
                            <comment id="14543253" author="kbarrett" created="Tue, 6 Dec 2022 11:50:44 -0800"  >InstanceKlass::get_jmethod_id has a couple of places where it thinks it is single-threaded because it is either during bootstrapping or in a safepoint.  But as the stack from the core dump in the comment from 2022-11-14 shows, it is being called from G1ParallelCleaningTask.  So that single-threaded assumption looks to be wrong.&lt;br/&gt;
&lt;br/&gt;
One of the places this can go wrong is in the call to get_jmethod_id_fetch_or_update, which has an out parameter for an array of jmethodID&amp;#39;s that is to be deallocated.  I think what is happening is that two worker threads get that same array and both try to deallocate it.&lt;br/&gt;
&lt;br/&gt;
Likely culprit is &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8290025&quot; title=&quot;Remove the Sweeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8290025&quot;&gt;&lt;strike&gt;JDK-8290025&lt;/strike&gt;&lt;/a&gt;: Remove the Sweeper.  Everything else in the relevant neighborhood looks to have been last changed 3+ years ago.&lt;br/&gt;
</comment>
                            <comment id="14537178" author="lmesnik" created="Mon, 14 Nov 2022 12:46:55 -0800"  >I see the following stack in the core dump:&lt;br/&gt;
&lt;br/&gt;
Thread 1 (Thread 0x7fcb7052f700 (LWP 23492)):&lt;br/&gt;
#0  0x00007fcb74116387 in raise () from /lib64/libc.so.6&lt;br/&gt;
#1  0x00007fcb74117a78 in abort () from /lib64/libc.so.6&lt;br/&gt;
#2  0x00007fcb74158f67 in __libc_message () from /lib64/libc.so.6&lt;br/&gt;
#3  0x00007fcb74161329 in _int_free () from /lib64/libc.so.6&lt;br/&gt;
#4  0x00007fcb72dc4973 in InstanceKlass::get_jmethod_id(methodHandle const&amp;amp;) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#5  0x00007fcb733e37ae in Method::jmethod_id() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#6  0x00007fcb73461ca3 in nmethod::unlink() [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#7  0x00007fcb73524f8b in CodeCacheUnloadingTask::work(unsigned int) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#8  0x00007fcb72c39027 in G1ParallelCleaningTask::work(unsigned int) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#9  0x00007fcb739b0c90 in WorkerThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#10 0x00007fcb73858070 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#11 0x00007fcb734eee43 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-20+24-1714/linux-x64-debug.jdk/jdk-20/fastdebug/lib/server/libjvm.so&lt;br/&gt;
#12 0x00007fcb746b9ea5 in start_thread () from /lib64/libpthread.so.0&lt;br/&gt;
#13 0x00007fcb741deb2d in clone () from /lib64/libc.so.6&lt;br/&gt;
----------------------------------------&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14536979" author="dcubed" created="Mon, 14 Nov 2022 11:18:07 -0800"  >There&amp;#39;s another BigApps bug that has a &amp;quot;double free or corruption (!prev):&amp;quot; failure mode:&lt;br/&gt;
&lt;br/&gt;
JDK-8290012 RenaissanceStressTest.java and RenaissanceStressTest24H.java misc failures</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5089561">JDK-8298665</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5085360">JDK-8295357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                                        </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z91f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17423"><![CDATA[b28]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>