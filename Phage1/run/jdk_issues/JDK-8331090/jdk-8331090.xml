<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 22:41:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8331090] Run Ideal_minmax before de-canonicalizing CMoves</title>
                <link>https://bugs.openjdk.org/browse/JDK-8331090</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>IfNode tests are canonicalized in &lt;a href=&quot;https://github.com/openjdk/jdk/blob/21480a7ae8dce67cf3a844d8caafb0b96c37ac0e/src/hotspot/share/opto/ifnode.cpp#L1836&quot;&gt;https://github.com/openjdk/jdk/blob/21480a7ae8dce67cf3a844d8caafb0b96c37ac0e/src/hotspot/share/opto/ifnode.cpp#L1836&lt;/a&gt; so that its input are either ne, lt, or le. We should do the same for CMov nodes. The CMov to Min/Max conversion expects canonical comparions &lt;a href=&quot;https://github.com/openjdk/jdk/blob/21480a7ae8dce67cf3a844d8caafb0b96c37ac0e/src/hotspot/share/opto/movenode.cpp#L224&quot;&gt;https://github.com/openjdk/jdk/blob/21480a7ae8dce67cf3a844d8caafb0b96c37ac0e/src/hotspot/share/opto/movenode.cpp#L224&lt;/a&gt;.</description>
                <environment></environment>
        <key id="5127864">JDK-8331090</key>
            <summary>Run Ideal_minmax before de-canonicalizing CMoves</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="5" iconUrl="https://bugs.openjdk.org/images/jbsImages/p5.png">P5</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkarthikeyan">Jasmine Karthikeyan</assignee>
                                    <reporter username="jcao">Joshua Cao</reporter>
                        <labels>
                            <label>c2</label>
                            <label>jdk21u-todo</label>
                            <label>performance</label>
                            <label>starter</label>
                    </labels>
                <created>Wed, 24 Apr 2024 21:39:48 -0700</created>
                <updated>Thu, 27 Feb 2025 01:19:29 -0800</updated>
                            <resolved>Wed, 31 Jul 2024 08:21:47 -0700</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>23</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14694188" author="dukebot" created="Wed, 31 Jul 2024 08:21:41 -0700"  >Changeset: f2ba2ebb&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Jasmine Karthikeyan &amp;lt;&lt;a href=&apos;mailto:jkarthikeyan@openjdk.org&apos;&gt;jkarthikeyan@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-07-31 15:16:21 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f2ba2ebbcaba2784b24e7fe94c235ca652f7c9a2&quot;&gt;https://git.openjdk.org/jdk/commit/f2ba2ebbcaba2784b24e7fe94c235ca652f7c9a2&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14685165" author="roboduke" created="Wed, 26 Jun 2024 11:37:59 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19914&quot;&gt;https://git.openjdk.org/jdk/pull/19914&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-26 18:34:04 +0000</comment>
                            <comment id="14685101" author="JIRAUSER20725" created="Wed, 26 Jun 2024 07:26:59 -0700"  >I spent a bit of time looking into this, and I think it&amp;#39;s not easy to canonicalize casts like we do for IfNodes because there are a handful of Ideal transforms that de-canonicalize CMoves based on their branches ([1] and [2]). These invariants are also held in other places, such as in the AD files [3]. However, I think a solution to the behavior described in the PR would be to run Ideal_minmax before we attempt de-canonicalize the CMove, so that it can process the node first. I&amp;#39;ll reword the title of the issue to match the approach.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;https://github.com/openjdk/jdk/blob/efb905e57ab7a5299952419fa9961316541056c2/src/hotspot/share/opto/movenode.cpp#L95-L97&quot;&gt;https://github.com/openjdk/jdk/blob/efb905e57ab7a5299952419fa9961316541056c2/src/hotspot/share/opto/movenode.cpp#L95-L97&lt;/a&gt;&lt;br/&gt;
[2] &lt;a href=&quot;https://github.com/openjdk/jdk/blob/efb905e57ab7a5299952419fa9961316541056c2/src/hotspot/share/opto/movenode.cpp#L274-L278&quot;&gt;https://github.com/openjdk/jdk/blob/efb905e57ab7a5299952419fa9961316541056c2/src/hotspot/share/opto/movenode.cpp#L274-L278&lt;/a&gt;&lt;br/&gt;
[3] &lt;a href=&quot;https://github.com/openjdk/jdk/blob/efb905e57ab7a5299952419fa9961316541056c2/src/hotspot/cpu/x86/x86_64.ad#L6127-L6130&quot;&gt;https://github.com/openjdk/jdk/blob/efb905e57ab7a5299952419fa9961316541056c2/src/hotspot/cpu/x86/x86_64.ad#L6127-L6130&lt;/a&gt;</comment>
                            <comment id="14667861" author="thartmann" created="Thu, 25 Apr 2024 00:11:18 -0700"  >Came up in &lt;a href=&quot;https://github.com/openjdk/jdk/pull/18824&quot;&gt;https://github.com/openjdk/jdk/pull/18824&lt;/a&gt;.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5149002">JDK-8348546</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362nn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17336"><![CDATA[b09]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>