<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:53:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8321075] RISC-V: UseSystemMemoryBarrier lacking proper OS support</title>
                <link>https://bugs.openjdk.org/browse/JDK-8321075</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Linux risc-v port is lacking correct barriers in the kernel for the membarrier() syscall to actually have the correct semantic in user-space.&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://lore.kernel.org/lkml/041c83e6-1ca5-4953-bcec-03571135165d@efficios.com/&quot;&gt;https://lore.kernel.org/lkml/041c83e6-1ca5-4953-bcec-03571135165d@efficios.com/&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
UseSystemMemoryBarrier should not be allowed to turned on when running on Linux/RV.&lt;br/&gt;
&lt;br/&gt;
There is no way telling from the syscall if this is on non-working kernel or a post 6.6 (cross-fingers it get fixed to 6.7) with a working syscall.&lt;br/&gt;
The linux membarrier wrapper should probably be informed on the current kernel version to determine if it&amp;#39;s usable or not.</description>
                <environment></environment>
        <key id="5115819">JDK-8321075</key>
            <summary>RISC-V: UseSystemMemoryBarrier lacking proper OS support</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rehn">Robbin Ehn</assignee>
                                    <reporter username="rehn">Robbin Ehn</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>oraclejdk-na</label>
                    </labels>
                <created>Wed, 29 Nov 2023 23:01:12 -0800</created>
                <updated>Fri, 12 Apr 2024 05:44:15 -0700</updated>
                            <resolved>Wed, 21 Feb 2024 00:59:28 -0800</resolved>
                                    <version>20</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14664914" author="rehn" created="Fri, 12 Apr 2024 05:44:15 -0700"  >I though I already did:&lt;br/&gt;
&lt;a href=&quot;https://github.com/openjdk/jdk/pull/18697#pullrequestreview-1989137430&quot;&gt;https://github.com/openjdk/jdk/pull/18697#pullrequestreview-1989137430&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Or was there some were else we need to backport to?</comment>
                            <comment id="14664903" author="shade" created="Fri, 12 Apr 2024 04:42:57 -0700"  >Robbin, please track if &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8329961&quot; title=&quot;Buffer overflow in os::Linux::kernel_version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8329961&quot;&gt;&lt;strike&gt;JDK-8329961&lt;/strike&gt;&lt;/a&gt; needs to be pulled to update releases as well?</comment>
                            <comment id="14654287" author="roboduke" created="Mon, 4 Mar 2024 05:42:52 -0800"  >[jdk22u-fix-request] Approval Request from Robbin Ehn&lt;br/&gt;
JDK 22 is affected by this bug. Applies cleanly locally compiled and tested.</comment>
                            <comment id="14654194" author="roboduke" created="Mon, 4 Mar 2024 00:37:32 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/83&quot;&gt;https://git.openjdk.org/jdk22u/pull/83&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-04 08:32:20 +0000</comment>
                            <comment id="14652599" author="roboduke" created="Tue, 27 Feb 2024 01:07:56 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/294&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/294&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-27 09:04:02 +0000</comment>
                            <comment id="14652598" author="luhenry" created="Tue, 27 Feb 2024 01:06:52 -0800"  >[jdk21u-fix-request] Approval Request from Ludovic Henry&lt;br/&gt;
Doesn&amp;#39;t apply cleanly due to &lt;a href=&quot;https://github.com/openjdk/jdk/commit/9ded86821b01d6d790850e9b49eedfc597c0c9a2&quot;&gt;https://github.com/openjdk/jdk/commit/9ded86821b01d6d790850e9b49eedfc597c0c9a2&lt;/a&gt; bue conflict is minimal (int vs long). The change is purely a fix on RISC-V hidden behind a `#if defined(RISCV)` and has been verified to work well on openjdk/jdk on riscv64.</comment>
                            <comment id="14652008" author="rehn" created="Sun, 25 Feb 2024 09:46:38 -0800"  >Sorry I forgot to link the initial feature issue.&lt;br/&gt;
So this is only in 20+, hence yes to 21.</comment>
                            <comment id="14651980" author="luhenry" created="Sat, 24 Feb 2024 09:02:27 -0800"  >Should it be backported to 21, 17 and 11?</comment>
                            <comment id="14651204" author="dukebot" created="Wed, 21 Feb 2024 00:59:27 -0800"  >Changeset: 68eb5a1d&lt;br/&gt;
Author:    Robbin Ehn &amp;lt;&lt;a href=&apos;mailto:rehn@openjdk.org&apos;&gt;rehn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-02-21 08:58:19 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/68eb5a1df5afdc011aa467f1c723a8792532dd3f&quot;&gt;https://git.openjdk.org/jdk/commit/68eb5a1df5afdc011aa467f1c723a8792532dd3f&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14649964" author="roboduke" created="Fri, 16 Feb 2024 05:15:54 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17889&quot;&gt;https://git.openjdk.org/jdk/pull/17889&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-16 13:01:20 +0000</comment>
                            <comment id="14630254" author="rehn" created="Thu, 30 Nov 2023 02:40:30 -0800"  >As we are not sure of what kernel version it will be fixed in, a very simple fix may be something like:&lt;br/&gt;
#ifdef RISCV&lt;br/&gt;
&amp;nbsp;&amp;nbsp;log_info(os)(&amp;quot;Linux/RISC-V don&amp;#39;t support membarrier()&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;return false;&lt;br/&gt;
#endif&lt;br/&gt;
&lt;br/&gt;
LinuxSystemMemoryBarrier::initialize()</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5123482">JDK-8327528</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5123803">JDK-8327820</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5081856">JDK-8292591</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5126521">JDK-8329961</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="20300"><![CDATA[riscv]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3420j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17311"><![CDATA[b11]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>