<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 15:25:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8299699] Test runtime/cds/appcds/WrongClasspath.java fails after JDK-8299329</title>
                <link>https://bugs.openjdk.org/browse/JDK-8299699</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Test is failing in our tier 4 CI runs:&lt;br/&gt;
&lt;br/&gt;
----------System.err:(15/1124)----------&lt;br/&gt;
java.lang.RuntimeException: FIXME: jar file not at a supported location (&amp;#39;/System/Volumes/Data/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S52813/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/5093aef5-0a20-455a-a9d3-7190e241f431/runs/746710c6-7807-4656-b6d0-cfe1ca20f5f2/testoutput/test-support/jtreg_open_test_hotspot_jtreg_hotspot_appcds_dynamic/scratch/5/&amp;#39;): hello.jar&lt;br/&gt;
	at TestCommon.patchJarForDynamicDump(TestCommon.java:364)&lt;br/&gt;
	at TestCommon.createArchive(TestCommon.java:224)&lt;br/&gt;
	at TestCommon.createArchive(TestCommon.java:176)&lt;br/&gt;
	at TestCommon.dump(TestCommon.java:133)&lt;br/&gt;
	at TestCommon.testDump(TestCommon.java:533)&lt;br/&gt;
	at WrongClasspath.main(WrongClasspath.java:57)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5090802">JDK-8299699</key>
            <summary>Test runtime/cds/appcds/WrongClasspath.java fails after JDK-8299329</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asmehra">Ashutosh Mehra</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>tier4</label>
                    </labels>
                <created>Thu, 5 Jan 2023 13:36:28 -0800</created>
                <updated>Fri, 11 Apr 2025 06:08:58 -0700</updated>
                            <resolved>Fri, 6 Jan 2023 11:58:22 -0800</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14549332" author="dukebot" created="Fri, 6 Jan 2023 11:58:21 -0800"  >Changeset: d6d6eb4c&lt;br/&gt;
Author:    Ashutosh Mehra &amp;lt;&lt;a href=&apos;mailto:asmehra@redhat.com&apos;&gt;asmehra@redhat.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Calvin Cheung &amp;lt;&lt;a href=&apos;mailto:ccheung@openjdk.org&apos;&gt;ccheung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-01-06 19:56:12 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/d6d6eb4cba3d2d85035b46d18e8817b5b2a354a2&quot;&gt;https://git.openjdk.org/jdk/commit/d6d6eb4cba3d2d85035b46d18e8817b5b2a354a2&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14549259" author="roboduke" created="Fri, 6 Jan 2023 06:33:35 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/11882&quot;&gt;https://git.openjdk.org/jdk/pull/11882&lt;/a&gt;&lt;br/&gt;
Date: 2023-01-06 14:25:05 +0000</comment>
                            <comment id="14549137" author="iklam" created="Thu, 5 Jan 2023 17:39:21 -0800"  >[~asmehra] I think your suggested fix is better. We should allow the JAR files in the current dire rectory (i.e., the jtreg &amp;quot;scratch&amp;quot; directory&amp;quot;) to be patched.&lt;br/&gt;
&lt;br/&gt;
Instead of checking for isAbsolute(), I would restrict that to only the current directory.&lt;br/&gt;
&lt;br/&gt;
The reason for the &amp;quot;if (!firstJar.startsWith(expected)&amp;quot; check was to prevent the test from inadvertently modifying an important system file, or one of the JAR files in jtreg. So something like ../../some/place.jar would potentially be unsafe to modify.</comment>
                            <comment id="14549111" author="JIRAUSER20510" created="Thu, 5 Jan 2023 14:34:46 -0800"  >Failure happens because TestCommon#patchJarForDynamicDump(String cp) expects the jar files passed in &amp;quot;cp&amp;quot; parameter are with absolute path. The new test case added for JDK 8299329 passed jar files using path relative to work dir.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (!firstJar.startsWith(expected)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw new RuntimeException(&amp;quot;FIXME: jar file not at a supported location (&amp;#39;&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ expected + &amp;quot;&amp;#39;): &amp;quot; + firstJar);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
Another workaround could be to change the above condition to:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (Paths.get(firstJar).isAbsolute() &amp;amp;&amp;amp; !firstJar.startsWith(expected)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw new RuntimeException(&amp;quot;FIXME: jar file not at a supported location (&amp;#39;&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ expected + &amp;quot;&amp;#39;): &amp;quot; + firstJar);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
@Ioi Lam, does that make sense?</comment>
                            <comment id="14549106" author="iklam" created="Thu, 5 Jan 2023 14:26:14 -0800"  >The failure happens when running with&lt;br/&gt;
&lt;br/&gt;
make test TEST=test/hotspot/jtreg:hotspot_appcds_dynamic TEST_OPTS_JAVA_OPTIONS=-Dtest.dynamic.cds.archive=true&lt;br/&gt;
&lt;br/&gt;
Suggested fix is to put the new test case in WrongClasspath.java around:&lt;br/&gt;
&lt;br/&gt;
if (System.getProperty(&amp;quot;test.dynamic.cds.archive&amp;quot;) == null) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;// JAR files in the current directory are not compatible with test.dynamic.cds.archive&lt;br/&gt;
&amp;nbsp;&amp;nbsp;// mode.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                                                <inwardlinks description="caused by">
                                        <issuelink>
            <issuekey id="5090379">JDK-8299329</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="22711">21</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zt2r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17315"><![CDATA[b05]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>