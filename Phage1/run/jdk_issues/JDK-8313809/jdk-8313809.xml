<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:49:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8313809] String template fails with java.lang.StringIndexOutOfBoundsException if last fragment is UTF16</title>
                <link>https://bugs.openjdk.org/browse/JDK-8313809</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following code compiles successfully but fails at runtime with a StringIndexOutOfBoundsException:&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
import java.math.*;&lt;br/&gt;
import static java.util.FormatProcessor.*;&lt;br/&gt;
&lt;br/&gt;
public class Foo {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(final String[] args) throws Exception {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;final BigDecimal sum = new BigDecimal(&amp;quot;12.34&amp;quot;);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;final String stringFomat = String.format(&amp;quot;Using String.format() - The sum is: %s &#8364;&amp;quot;, sum); // this works&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(stringFomat);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;final String message = FMT.&amp;quot;The sum is: %f\{sum} &#8364;&amp;quot;; // this fails&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(message);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
javac --enable-preview --source 21 Foo.java&lt;br/&gt;
java --enable-preview Foo&lt;br/&gt;
&lt;br/&gt;
Using String.format() - The sum is: 12.34 &#8364;&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.StringIndexOutOfBoundsException: Range [21, 21 + 4) out of bounds for length 11&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromIndexSize(Preconditions.java:118)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.checkFromIndexSize(Preconditions.java:397)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.String.checkBoundsOffCount(String.java:4849)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.StringUTF16.checkBoundsOffCount(StringUTF16.java:1625)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.StringUTF16.inflate(StringUTF16.java:1459)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.StringLatin1.inflate(StringLatin1.java:771)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.String.getBytes(String.java:4724)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.StringConcatHelper.newArrayWithSuffix(StringConcatHelper.java:491)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at Foo.main(Foo.java:11)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5107481">JDK-8313809</key>
            <summary>String template fails with java.lang.StringIndexOutOfBoundsException if last fragment is UTF16</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlaskey">Jim Laskey</assignee>
                                    <reporter username="jpai">Jaikiran Pai</reporter>
                        <labels>
                            <label>hgupdate-sync</label>
                            <label>jdk21-fix-request</label>
                            <label>jdk21-fix-yes</label>
                    </labels>
                <created>Sat, 5 Aug 2023 08:07:32 -0700</created>
                <updated>Mon, 15 Jan 2024 11:02:35 -0800</updated>
                            <resolved>Tue, 8 Aug 2023 12:36:17 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14602992" author="roboduke" created="Wed, 9 Aug 2023 07:48:44 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21/pull/170&quot;&gt;https://git.openjdk.org/jdk21/pull/170&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-09 14:41:51 +0000</comment>
                            <comment id="14602728" author="dukebot" created="Tue, 8 Aug 2023 12:36:16 -0700"  >Changeset: 68644411&lt;br/&gt;
Author:    Jim Laskey &amp;lt;&lt;a href=&apos;mailto:jlaskey@openjdk.org&apos;&gt;jlaskey@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-08-08 19:33:44 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/6864441163f946d0bec7380a2a120e31b812a6dc&quot;&gt;https://git.openjdk.org/jdk/commit/6864441163f946d0bec7380a2a120e31b812a6dc&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14602707" author="jlaskey" created="Tue, 8 Aug 2023 11:38:59 -0700"  >jdk21-fix-request: This issue potentially affects any StringTemplate that mixes Latin1 and UTF16. &lt;br/&gt;
&lt;br/&gt;
Low-risk - part of a preview feature.</comment>
                            <comment id="14602705" author="roboduke" created="Tue, 8 Aug 2023 11:37:43 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15195&quot;&gt;https://git.openjdk.org/jdk/pull/15195&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-08 18:31:04 +0000</comment>
                            <comment id="14602674" author="jlaskey" created="Tue, 8 Aug 2023 09:53:48 -0700"  >Coder of the last fragment not factored in.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5107748">JDK-8314052</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5108209">JDK-8314431</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="105021" name="Foo.java" size="450" author="jpai" created="Sat, 5 Aug 2023 08:06:35 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32mzf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17338"><![CDATA[b10]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="213"><![CDATA[java.lang.invoke]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>