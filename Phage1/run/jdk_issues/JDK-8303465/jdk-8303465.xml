<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 08:52:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8303465] KeyStore of type KeychainStore, provider Apple does not show all trusted certificates</title>
                <link>https://bugs.openjdk.org/browse/JDK-8303465</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>JDK-8278449 (&lt;a href=&quot;https://github.com/openjdk/jdk/commit/9ce2d75d0b5a98fe0d223a2f070b7b0f0fa89322&quot;&gt;https://github.com/openjdk/jdk/commit/9ce2d75d0b5a98fe0d223a2f070b7b0f0fa89322&lt;/a&gt;) changed the behavior of the MacOS Keystore implementation (KeychainStore, provider &amp;quot;Apple&amp;quot;) to only show certificates with proper trust. This was also documented in the release notes, e.g. here: &lt;a href=&quot;https://www.oracle.com/java/technologies/javase/17-0-3-relnotes.html#JDK-8278449&quot;&gt;https://www.oracle.com/java/technologies/javase/17-0-3-relnotes.html#JDK-8278449&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
However, the implementation seems flawed as not all possible trusted certificates are loaded. With the current code (&lt;a href=&quot;https://github.com/openjdk/jdk/blob/2adb3b409e8cc87685a4379be3f7beeb53706e2e/src/java.base/macosx/native/libosxsecurity/KeystoreImpl.m#L440),&quot;&gt;https://github.com/openjdk/jdk/blob/2adb3b409e8cc87685a4379be3f7beeb53706e2e/src/java.base/macosx/native/libosxsecurity/KeystoreImpl.m#L440),&lt;/a&gt; certificates are only loaded if a trust record in the &amp;quot;user domain&amp;quot; exists. This however is not sufficient, as there might as well be records in the domains &amp;quot;admin&amp;quot; or &amp;quot;system&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
Further details can be taken out of the MacOS API documentation:&lt;br/&gt;
&lt;a href=&quot;https://developer.apple.com/documentation/security/1400261-sectrustsettingscopytrustsetting&quot;&gt;https://developer.apple.com/documentation/security/1400261-sectrustsettingscopytrustsetting&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://developer.apple.com/documentation/security/sectrustsettingsdomain&quot;&gt;https://developer.apple.com/documentation/security/sectrustsettingsdomain&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The following example program can be used to display the Keystore contents from the MacOS key chain:&lt;br/&gt;
&lt;br/&gt;
--------------&lt;br/&gt;
import java.security.KeyStore;&lt;br/&gt;
&lt;br/&gt;
public class MacKeyChainStoreTrustDemo {&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@SuppressWarnings(&amp;quot;nls&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) throws Exception {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;KeyStore keyStore = KeyStore.getInstance(&amp;quot;KeychainStore&amp;quot;, &amp;quot;Apple&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;keyStore.load(null, null);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;keyStore.aliases().asIterator().forEachRemaining(System.out::println);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;size:&amp;quot; + keyStore.size());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
--------------&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5095319">JDK-8303465</key>
            <summary>KeyStore of type KeychainStore, provider Apple does not show all trusted certificates</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clanger">Christoph Langer</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>jdk11u-critical-request</label>
                            <label>jdk11u-critical-yes</label>
                            <label>jdk17u-critical-request</label>
                            <label>jdk17u-critical-yes</label>
                            <label>release-note=yes</label>
                    </labels>
                <created>Wed, 1 Mar 2023 07:16:51 -0800</created>
                <updated>Sun, 5 Jan 2025 23:31:26 -0800</updated>
                            <resolved>Mon, 5 Jun 2023 01:40:06 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>security-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                                                            <comments>
                            <comment id="14588488" author="clanger" created="Mon, 12 Jun 2023 05:07:15 -0700"  >Fix request (11u,17u):&lt;br/&gt;
A bit late but I&amp;#39;d like to see this going into the July/2023 updates still. The upstream fix took a bit longer. It fixes a regression that was introduced in 17.0.3 and 11.0.16. After the above mentioned vulnerability fix, the keystore implementation on mac does not show all appropriate certificates from the keychain any more. It fixes a customer issue and they claim they need the fix in OpenJDK (e.g. Eclipse Temurin) and a downstream SapMachine fix would not suffice. So requesting 11u/17u critical to include it in rampdown.&lt;br/&gt;
There is a certain, but minor risk. Tested in GHA and SAP nightlies.</comment>
                            <comment id="14587566" author="roboduke" created="Wed, 7 Jun 2023 01:14:46 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u/pull/73&quot;&gt;https://git.openjdk.org/jdk11u/pull/73&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-07 08:08:36 +0000</comment>
                            <comment id="14587562" author="roboduke" created="Wed, 7 Jun 2023 00:59:49 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u/pull/371&quot;&gt;https://git.openjdk.org/jdk17u/pull/371&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-07 07:50:43 +0000</comment>
                            <comment id="14586972" author="dukebot" created="Mon, 5 Jun 2023 01:40:05 -0700"  >Changeset: ac41c030&lt;br/&gt;
Author:    Christoph Langer &amp;lt;&lt;a href=&apos;mailto:clanger@openjdk.org&apos;&gt;clanger@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-05 08:36:47 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ac41c030030c3d31815474c793ac9c420c47e22c&quot;&gt;https://git.openjdk.org/jdk/commit/ac41c030030c3d31815474c793ac9c420c47e22c&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14581055" author="roboduke" created="Thu, 11 May 2023 14:44:45 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13945&quot;&gt;https://git.openjdk.org/jdk/pull/13945&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-11 21:38:35 +0000</comment>
                            <comment id="14564102" author="roboduke" created="Thu, 2 Mar 2023 05:41:44 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12829&quot;&gt;https://git.openjdk.org/jdk/pull/12829&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-02 13:33:53 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5103059">JDK-8309936</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5103123">JDK-8309985</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5103134">JDK-8309994</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5103187">JDK-8310039</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5103738">JDK-8310509</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10400">
                    <name>CSR</name>
                                            <outwardlinks description="csr for">
                                        <issuelink>
            <issuekey id="5101612">JDK-8308690</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                                        </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5147139">JDK-8347041</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5101650">JDK-8308725</subtask>
                                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30kyb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="195"><![CDATA[java.security]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>