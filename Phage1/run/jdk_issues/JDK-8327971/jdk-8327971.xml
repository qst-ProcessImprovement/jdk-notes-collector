<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 12:10:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8327971] Multiple ASAN errors reported for metaspace</title>
                <link>https://bugs.openjdk.org/browse/JDK-8327971</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>We have multiple issues that cause the ASAN build in fastdebug to not work, or to fail gtests.&lt;br/&gt;
&lt;br/&gt;
1) When adding ASAN support for metaspace, we decided to track poisoning not at the OS border (map) but at the border between metaspace and outer JVM code. More precisely, at the border of ChunkManager chunk allocation/deallocation. Chunks handed out by the chunk manager are unpoisoned and poisoned when handed back.&lt;br/&gt;
&lt;br/&gt;
This causes some problems since within metaspace, we access memory that is committed but not yet handed to the user (for zapping or for verification in debug builds). So, from the ASANs&amp;#39; view, those accesses are invalid, whereas for Metaspace, those accesses are perfectly valid.&lt;br/&gt;
&lt;br/&gt;
In these cases, we need to unpoison the memory or exclude the code section, if possible, for ASAN builds. This affects both JVM code and gtests.&lt;br/&gt;
&lt;br/&gt;
2) NMT gtests sometimes do dangerous things deliberately (accessing invalid memory to track error recognition), and these tests should be disabled with ASAN </description>
                <environment></environment>
        <key id="5123961">JDK-8327971</key>
            <summary>Multiple ASAN errors reported for metaspace</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stuefe">Thomas Stuefe</assignee>
                                    <reporter username="stuefe">Thomas Stuefe</reporter>
                        <labels>
                            <label>asan</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>metaspace</label>
                            <label>redhat-interest</label>
                    </labels>
                <created>Tue, 12 Mar 2024 04:37:51 -0700</created>
                <updated>Tue, 23 Apr 2024 04:02:54 -0700</updated>
                            <resolved>Wed, 27 Mar 2024 01:37:40 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14665711" author="JIRAUSER20703" created="Tue, 16 Apr 2024 11:20:43 -0700"  >Fix request [21u]&lt;br/&gt;
I backport this to fix the fastdebug build and ensuing gtest failures with ASAN. &lt;br/&gt;
Moderate risk as it affects JVM code. However, note that patch primarily excludes code sections if ASAN is enabled. &lt;br/&gt;
&lt;br/&gt;
Testing:&lt;br/&gt;
I verified the fastdebug build failed with &#8211;enable-asan prior to backport and resolved after backport. Additionally, verified NMT gtests passed after backport. &lt;br/&gt;
</comment>
                            <comment id="14665673" author="roboduke" created="Tue, 16 Apr 2024 08:27:50 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/504&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/504&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-15 20:44:17 +0000</comment>
                            <comment id="14660739" author="dukebot" created="Wed, 27 Mar 2024 01:37:39 -0700"  >Changeset: 9e566d76&lt;br/&gt;
Author:    Thomas Stuefe &amp;lt;&lt;a href=&apos;mailto:stuefe@openjdk.org&apos;&gt;stuefe@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-03-27 08:36:40 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/9e566d76d1d8acca27d8f69fffcbeb0b49b060ba&quot;&gt;https://git.openjdk.org/jdk/commit/9e566d76d1d8acca27d8f69fffcbeb0b49b060ba&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14656824" author="roboduke" created="Tue, 12 Mar 2024 07:04:26 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18230&quot;&gt;https://git.openjdk.org/jdk/pull/18230&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-12 11:45:47 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5127712">JDK-8330958</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35eoj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17312"><![CDATA[b16]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>