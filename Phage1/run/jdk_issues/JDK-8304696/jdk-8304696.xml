<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 17:53:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8304696] Duplicate class names in dynamicArchive tests can lead to test failure</title>
                <link>https://bugs.openjdk.org/browse/JDK-8304696</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>I was running all the runtime/cds/appcds/dynamicArchive tests and had an unexpected and strange failure in  LambdaProxyDuringShutdown.java:&lt;br/&gt;
&lt;br/&gt;
java.lang.RuntimeException: &amp;#39;class.load.*Outer[$]Inner[$][$]Lambda.*0x.*source:.Outer&amp;#39; missing from stdout/stderr&lt;br/&gt;
&lt;br/&gt;
When I examined the log there was no sign that the installed shutdown hook had executed, causing the Outer and Inner classes to be loaded. After much experimentation and head scratching I did observe some unexpected output:&lt;br/&gt;
&lt;br/&gt;
shut down hook invoked...&lt;br/&gt;
&lt;br/&gt;
Searching the sources this comes from:&lt;br/&gt;
&lt;br/&gt;
class MyShutdown extends Thread{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public void run(){&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;shut down hook invoked...&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
in class LinkClassApp - which is a different test! The problem is that  LambdaProxyDuringShutdownApp also has this:&lt;br/&gt;
&lt;br/&gt;
class MyShutdown extends Thread {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public void run() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Outer.Inner inner = new Outer.Inner();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
and it became evident that when running the tests locally, under the right/wrong conditions the  LambdaProxy test was using the LinkClass test&amp;#39;s MyShutdown class. Sure enough this class gets compiled into:&lt;br/&gt;
&lt;br/&gt;
JTwork/classes/test/hotspot/jtreg/runtime/cds/appcds/dynamicArchive/test-classes&lt;br/&gt;
&lt;br/&gt;
which is shared by both tests.&lt;br/&gt;
&lt;br/&gt;
Simple fix is to rename one of the classes so there is no duplication.</description>
                <environment></environment>
        <key id="5096855">JDK-8304696</key>
            <summary>Duplicate class names in dynamicArchive tests can lead to test failure</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ccheung">Calvin Cheung</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>cds</label>
                            <label>dynamic-cds</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Tue, 21 Mar 2023 21:47:33 -0700</created>
                <updated>Tue, 2 Jan 2024 23:52:45 -0800</updated>
                            <resolved>Fri, 21 Apr 2023 15:13:02 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14636589" author="roboduke" created="Fri, 29 Dec 2023 08:00:10 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2087&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2087&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-29 15:56:05 +0000</comment>
                            <comment id="14636588" author="goetz" created="Fri, 29 Dec 2023 07:30:32 -0800"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.11-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14575833" author="dukebot" created="Fri, 21 Apr 2023 15:13:00 -0700"  >Changeset: b2240bf8&lt;br/&gt;
Author:    Calvin Cheung &amp;lt;&lt;a href=&apos;mailto:ccheung@openjdk.org&apos;&gt;ccheung@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-21 22:11:40 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b2240bf870cd57983fda0bc3b0e205acfdd1fd2a&quot;&gt;https://git.openjdk.org/jdk/commit/b2240bf870cd57983fda0bc3b0e205acfdd1fd2a&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14575150" author="roboduke" created="Wed, 19 Apr 2023 10:14:54 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13542&quot;&gt;https://git.openjdk.org/jdk/pull/13542&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-19 17:07:14 +0000</comment>
                            <comment id="14574365" author="ccheung" created="Mon, 17 Apr 2023 16:12:21 -0700"  >Since the class gets compiled into JTwork/classes/test/hotspot/jtreg/runtime/cds/appcds/dynamicArchive/test-classes, it indicates that the tests were not run in parallel (i.e. with the -conc:&amp;lt;n&amp;gt; option). If the tests were run in parallel, the classes are usually created in a sub-directory for each test like the following:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;415 Apr 17 22:26 ./JTwork/classes/0/test/hotspot/jtreg/runtime/cds/appcds/dynamicArchive/test-classes/MyShutdown.class&lt;br/&gt;
&amp;nbsp;341 Apr 17 22:26 ./JTwork/classes/1/test/hotspot/jtreg/runtime/cds/appcds/dynamicArchive/test-classes/MyShutdown.class&lt;br/&gt;
&lt;br/&gt;
The problem could be reproduced by running the LinkClassTest.java and LambdaProxyDuringShutdown.java serially in that order.&lt;br/&gt;
Then, without deleting anything under the JTwork/classes dir, run the two tests serially again in the same order.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5117722">JDK-8322665</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117863">JDK-8322796</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30uff:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>