<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:12:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8320890] [AIX] Find a better way to mimic dl handle equality</title>
                <link>https://bugs.openjdk.org/browse/JDK-8320890</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;br/&gt;
On AIX, repeated calls to dlopen referring to the same shared library may result in different, unique dl handles to be returned from libc. In that it differs from typical libc implementations that cache dl handles.&lt;br/&gt;
&lt;br/&gt;
This causes problems in the JVM with code that assumes equality of handles. One such problem is in the JVMTI agent handler. That problem was fixed with a local fix to said handler (&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8315706&quot; title=&quot;com/sun/tools/attach/warnings/DynamicLoadWarningTest.java real fix for failure on AIX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8315706&quot;&gt;&lt;strike&gt;JDK-8315706&lt;/strike&gt;&lt;/a&gt;). However, this fix causes follow-up problems since it assumes that the file name passed to `os::dll_load()` is the file that has been opened. It prevents efficient, os_aix.cpp-local workarounds for other AIX issues like the *.so/*.a duality. See &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320005&quot; title=&quot;Allow loading of shared objects with .a extension on AIX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8320005&quot;&gt;&lt;strike&gt;JDK-8320005&lt;/strike&gt;&lt;/a&gt;. As such, it is a hack that causes other, more uglier hacks to follow (see discussion of &lt;a href=&quot;https://github.com/openjdk/jdk/pull/16604)&quot;&gt;https://github.com/openjdk/jdk/pull/16604)&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
We propose a different, cleaner way of handling this:&lt;br/&gt;
&lt;br/&gt;
- Handle this entirely inside the AIX versions of os::dll_load and os::dll_unload.&lt;br/&gt;
- Cache dl handles; repeated opening of a library should return the cached handle.&lt;br/&gt;
- Increase handle-local ref counter on open, Decrease it on close&lt;br/&gt;
- Make sure calls to os::dll_load are matched to os::dll_unload (See &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320830&quot; title=&quot;[AIX] Dont mix os::dll_load() with direct dlclose() calls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8320830&quot;&gt;&lt;strike&gt;JDK-8320830&lt;/strike&gt;&lt;/a&gt;).&lt;br/&gt;
&lt;br/&gt;
This way we mimic dl handle equality as it is implemented on other platforms, and this works for all callers of os::dll_load.</description>
                <environment></environment>
        <key id="5115617">JDK-8320890</key>
            <summary>[AIX] Find a better way to mimic dl handle equality</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkern">Joachim Kern</assignee>
                                    <reporter username="stuefe">Thomas Stuefe</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>oraclejdk-na</label>
                    </labels>
                <created>Tue, 28 Nov 2023 04:45:18 -0800</created>
                <updated>Mon, 8 Apr 2024 06:20:04 -0700</updated>
                            <resolved>Thu, 11 Jan 2024 05:14:03 -0800</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14650190" author="roboduke" created="Fri, 16 Feb 2024 23:50:35 -0800"  >[jdk21u-fix-request] Approval Request from JoKern65&lt;br/&gt;
I backport this to fix the bug on AIX. Not clean but trivial backport. Test runs on various platforms succeeded. Minor risk as the shared code changes are basically a refactoring, so the risk is limited to AIX.</comment>
                            <comment id="14647994" author="roboduke" created="Fri, 9 Feb 2024 08:46:35 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/252&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/252&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-09 16:42:01 +0000</comment>
                            <comment id="14647026" author="roboduke" created="Tue, 6 Feb 2024 06:04:57 -0800"  >[jdk22u-fix-request] Approval Request from JoKern65&lt;br/&gt;
I backport this to fix the bug on AIX. Clean backport. Test runs on various platforms succeeded. Minor risk as the shared code changes are basically a refactoring, so the risk is limited to AIX.</comment>
                            <comment id="14646598" author="roboduke" created="Mon, 5 Feb 2024 02:37:29 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/40&quot;&gt;https://git.openjdk.org/jdk22u/pull/40&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-05 10:33:24 +0000</comment>
                            <comment id="14639462" author="dukebot" created="Thu, 11 Jan 2024 05:14:02 -0800"  >Changeset: b8ae4a8c&lt;br/&gt;
Author:    Joachim Kern &amp;lt;&lt;a href=&apos;mailto:jkern@openjdk.org&apos;&gt;jkern@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Martin Doerr &amp;lt;&lt;a href=&apos;mailto:mdoerr@openjdk.org&apos;&gt;mdoerr@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-01-11 13:12:32 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b8ae4a8c0985d1763ac48ba78943d8b992d7be77&quot;&gt;https://git.openjdk.org/jdk/commit/b8ae4a8c0985d1763ac48ba78943d8b992d7be77&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14630568" author="roboduke" created="Fri, 1 Dec 2023 03:39:34 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16920&quot;&gt;https://git.openjdk.org/jdk/pull/16920&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-01 11:33:46 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5121089">JDK-8325547</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5121819">JDK-8326156</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5126406">JDK-8329850</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5109659">JDK-8315706</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5114633">JDK-8320005</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115560">JDK-8320830</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="18900"><![CDATA[aix]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i340rn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>