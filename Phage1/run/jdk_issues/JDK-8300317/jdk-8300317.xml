<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 15:48:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8300317] vmTestbase/nsk/stress/strace/strace* tests fail with &quot;ERROR: wrong lengths of stack traces&quot;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8300317</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK21 CI:&lt;br/&gt;
&lt;br/&gt;
vmTestbase/nsk/stress/strace/strace015.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(6/273)----------&lt;br/&gt;
command: main nsk.stress.strace.strace015&lt;br/&gt;
reason: User specified action: run main/othervm/native nsk.stress.strace.strace015 &lt;br/&gt;
started: Tue Jan 17 04:23:37 UTC 2023&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
finished: Tue Jan 17 04:23:38 UTC 2023&lt;br/&gt;
elapsed time (seconds): 1.14&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(235/8218)----------&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
#&amp;gt;  WARNING: switching log to verbose mode,&lt;br/&gt;
#&amp;gt;      because error is complained&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
starting threads...&lt;br/&gt;
strace015Thread4&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread0&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread1&amp;gt;waiting on a monitor&lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&lt;br/&gt;
strace015Thread60&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread46&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread47&amp;gt;waiting on a monitor&lt;br/&gt;
waiting for the defined recursion depth ...&lt;br/&gt;
strace015Thread96&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread68&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread92&amp;gt;waiting on a monitor&lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&lt;br/&gt;
strace015Thread82&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread89&amp;gt;waiting on a monitor&lt;br/&gt;
strace015Thread95&amp;gt;waiting on a monitor&lt;br/&gt;
making all threads snapshots...&lt;br/&gt;
making snapshots of each thread...&lt;br/&gt;
notifying&lt;br/&gt;
&lt;br/&gt;
checking lengths of stack traces...&lt;br/&gt;
strace015Thread4&amp;gt;notified&lt;br/&gt;
strace015Thread89&amp;gt;notified&lt;br/&gt;
strace015Thread82&amp;gt;notified&lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&lt;br/&gt;
strace015Thread5&amp;gt;notified&lt;br/&gt;
strace015Thread1&amp;gt;notified&lt;br/&gt;
strace015Thread0&amp;gt;notified&lt;br/&gt;
# ERROR: wrong lengths of stack traces:&lt;br/&gt;
# ERROR: 	strace015Thread0: 203	strace015Thread89: 200&lt;br/&gt;
The following stacktrace is for failure analysis.&lt;br/&gt;
nsk.share.TestFailure: wrong lengths of stack traces:  strace015Thread0: 203 strace015Thread89: 200&lt;br/&gt;
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)&lt;br/&gt;
	at nsk.share.Log.complain(Log.java:403)&lt;br/&gt;
	at nsk.stress.strace.strace015.complain(strace015.java:251)&lt;br/&gt;
	at nsk.stress.strace.strace015.makeSnapshot(strace015.java:180)&lt;br/&gt;
	at nsk.stress.strace.strace015.run(strace015.java:109)&lt;br/&gt;
	at nsk.stress.strace.strace015.main(strace015.java:95)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
# ERROR: ***&amp;gt;&amp;gt;&amp;gt;Test failed&amp;lt;&amp;lt;&amp;lt;***&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
#&amp;gt;  SUMMARY: Following errors occured&lt;br/&gt;
#&amp;gt;      during test execution:&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
# ERROR: wrong lengths of stack traces:&lt;br/&gt;
# ERROR: 	strace015Thread0: 203	strace015Thread89: 200&lt;br/&gt;
# ERROR: ***&amp;gt;&amp;gt;&amp;gt;Test failed&amp;lt;&amp;lt;&amp;lt;***&lt;br/&gt;
----------System.err:(0/0)----------&lt;br/&gt;
----------rerun:(39/6715)*----------&lt;br/&gt;
&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
&lt;br/&gt;
result: Failed. Execution failed: Execution failed&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5091584">JDK-8300317</key>
            <summary>vmTestbase/nsk/stress/strace/strace* tests fail with &quot;ERROR: wrong lengths of stack traces&quot;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lmesnik">Leonid Mesnik</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>loom</label>
                            <label>noreg-self</label>
                            <label>tier8</label>
                    </labels>
                <created>Tue, 17 Jan 2023 12:15:05 -0800</created>
                <updated>Mon, 20 Mar 2023 18:08:25 -0700</updated>
                            <resolved>Wed, 15 Mar 2023 10:18:38 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14567184" author="dukebot" created="Wed, 15 Mar 2023 10:18:37 -0700"  >Changeset: 7ad48ea3&lt;br/&gt;
Author:    Leonid Mesnik &amp;lt;&lt;a href=&apos;mailto:lmesnik@openjdk.org&apos;&gt;lmesnik@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-03-15 17:15:51 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/7ad48ea3ad3e90de64fbc73bf6d555a567b994f4&quot;&gt;https://git.openjdk.org/jdk/commit/7ad48ea3ad3e90de64fbc73bf6d555a567b994f4&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14566620" author="roboduke" created="Mon, 13 Mar 2023 20:40:16 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13008&quot;&gt;https://git.openjdk.org/jdk/pull/13008&lt;/a&gt;&lt;br/&gt;
Date: 2023-03-14 00:45:03 +0000</comment>
                            <comment id="14562552" author="dcubed" created="Thu, 23 Feb 2023 14:12:34 -0800"  >Here&amp;#39;s a log file snippet for the jdk-21+11-835-tier8 sighting:&lt;br/&gt;
&lt;br/&gt;
vmTestbase/nsk/monitoring/stress/thread/strace004/TestDescription.java&lt;br/&gt;
&lt;br/&gt;
#section:main&lt;br/&gt;
----------messages:(6/390)----------&lt;br/&gt;
command: main nsk.monitoring.stress.thread.strace001 -invocationType=native -threadCount=50 -depth=200&lt;br/&gt;
reason: User specified action: run main/othervm/native nsk.monitoring.stress.thread.strace001 -invocationType=native -threadCount=50 -depth=200 &lt;br/&gt;
started: Thu Feb 23 19:53:02 GMT 2023&lt;br/&gt;
Mode: othervm [/othervm specified]&lt;br/&gt;
finished: Thu Feb 23 19:53:08 GMT 2023&lt;br/&gt;
elapsed time (seconds): 6.123&lt;br/&gt;
----------configuration:(0/0)----------&lt;br/&gt;
----------System.out:(467/22807)----------&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
#&amp;gt;  WARNING: switching log to verbose mode,&lt;br/&gt;
#&amp;gt;      because error is complained&lt;br/&gt;
#&amp;gt;  &lt;br/&gt;
ThreadMonitor&amp;gt; Test mode:	DIRECTLY access to MBean&lt;br/&gt;
ThreadController&amp;gt; number of created threads:	50&lt;br/&gt;
ThreadController&amp;gt; depth for all threads:	200&lt;br/&gt;
ThreadController&amp;gt; invocation type:	native&lt;br/&gt;
&lt;br/&gt;
Iteration: 0&lt;br/&gt;
All threads started: 50&lt;br/&gt;
# ERROR: Length of the stack trace is 206, but expected to be not greater than 205&lt;br/&gt;
The following stacktrace is for failure analysis.&lt;br/&gt;
nsk.share.TestFailure: Length of the stack trace is 206, but expected to be not greater than 205&lt;br/&gt;
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)&lt;br/&gt;
	at nsk.share.Log.complain(Log.java:403)&lt;br/&gt;
	at nsk.monitoring.stress.thread.strace001.checkTrace(strace001.java:212)&lt;br/&gt;
	at nsk.monitoring.stress.thread.strace001.run(strace001.java:106)&lt;br/&gt;
	at nsk.monitoring.stress.thread.strace001.main(strace001.java:51)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
# ERROR: Unexpected 0 element of the stack trace:&lt;br/&gt;
# ERROR: 	jdk.internal.event.Event.&amp;lt;init&amp;gt;&lt;br/&gt;
The following stacktrace is for failure analysis.&lt;br/&gt;
nsk.share.TestFailure: Unexpected 0 element of the stack trace:  jdk.internal.event.Event.&amp;lt;init&amp;gt;&lt;br/&gt;
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)&lt;br/&gt;
	at nsk.share.Log.complain(Log.java:403)&lt;br/&gt;
	at nsk.monitoring.stress.thread.strace001.checkElement(strace001.java:252)&lt;br/&gt;
	at nsk.monitoring.stress.thread.strace001.checkTrace(strace001.java:228)&lt;br/&gt;
	at nsk.monitoring.stress.thread.strace001.run(strace001.java:106)&lt;br/&gt;
	at nsk.monitoring.stress.thread.strace001.main(strace001.java:51)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
# ERROR: Unexpected 1 element of the stack trace:&lt;br/&gt;
# ERROR: 	jdk.internal.event.ThreadSleepEvent.&amp;lt;init&amp;gt;</comment>
                            <comment id="14554135" author="mseledtsov" created="Tue, 24 Jan 2023 11:39:54 -0800"  >ILW = MML = P4</comment>
                            <comment id="14552034" author="dholmes" created="Tue, 17 Jan 2023 17:00:53 -0800"  >Any test involving the stack for Object.wait() needs the slack &amp;#39;k&amp;#39; adjusted from 2 to 3.</comment>
                            <comment id="14551884" author="cjplummer" created="Tue, 17 Jan 2023 12:32:56 -0800"  >It should be noted that the loom update added java.lang.Object.wait0 as an additional frame on the stack. This was accounted for with the loom changes to this test by adding wait0 to the list, but I wonder if that is also why the check for (count - k &amp;gt; 2) needed to be updated to fix strace013. This is what strace015 currently has (the fix in strace013 updated &amp;quot;2&amp;quot; to &amp;quot;3&amp;quot;).&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (count - k &amp;gt; 2) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;complain(&amp;quot;wrong lengths of stack traces:\n\t&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ threads[0].getName() + &amp;quot;: &amp;quot; + count&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ &amp;quot;\t&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ threads[i].getName() + &amp;quot;: &amp;quot; + k);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return false;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}</comment>
                            <comment id="14551882" author="cjplummer" created="Tue, 17 Jan 2023 12:22:06 -0800"  >This seems to be the same issue as &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8295099&quot; title=&quot;vmTestbase/nsk/stress/strace/strace013.java failed with &amp;quot;TestFailure: wrong lengths of stack traces:  strace013Thread0: NNN strace013Thread83: MMM&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8295099&quot;&gt;&lt;strike&gt;JDK-8295099&lt;/strike&gt;&lt;/a&gt;, but for a different strace test. &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8295099&quot; title=&quot;vmTestbase/nsk/stress/strace/strace013.java failed with &amp;quot;TestFailure: wrong lengths of stack traces:  strace013Thread0: NNN strace013Thread83: MMM&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8295099&quot;&gt;&lt;strike&gt;JDK-8295099&lt;/strike&gt;&lt;/a&gt; was for strace013 and has been fixed. During the review it was pointed out that al the strace tests have the same issue and another CR should be filed to clean them up, but this was never done.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5085052">JDK-8295099</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17005"><![CDATA[windows]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zxwj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17407"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>