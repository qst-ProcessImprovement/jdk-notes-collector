<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:44:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8312976] MatchResult produces StringIndexOutOfBoundsException for groups outside match</title>
                <link>https://bugs.openjdk.org/browse/JDK-8312976</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
JDK 21ea31&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
With the fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8132995&quot; title=&quot;Matcher$ImmutableMatchResult should be optimized to reduce space usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8132995&quot;&gt;&lt;strike&gt;JDK-8132995&lt;/strike&gt;&lt;/a&gt; MatchResult only stores the substring covering the match but does not account for capturing groups outside the match, i.e. within look-behind or look-ahead groups.&lt;br/&gt;
&lt;br/&gt;
The correct behavior would be not only consider the start and end of the match but the minimum start and the maximum end of all capturing groups.&lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 20.0.2&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Compile and run the attached program&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
It should print&lt;br/&gt;
&lt;br/&gt;
match from 3 to 6: ABC&lt;br/&gt;
prefix: 123&lt;br/&gt;
suffix: 456&lt;br/&gt;
match from 3 to 6: ABC&lt;br/&gt;
prefix: 123&lt;br/&gt;
suffix: 456&lt;br/&gt;
&lt;br/&gt;
ACTUAL -&lt;br/&gt;
match from 3 to 6: ABC&lt;br/&gt;
prefix: 123&lt;br/&gt;
suffix: 456&lt;br/&gt;
match from 3 to 6: ABC&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.StringIndexOutOfBoundsException: Range [-3, 0) out of bounds for length 3&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromToIndex(Preconditions.java:112)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.checkFromToIndex(Preconditions.java:349)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.String.checkBoundsBeginEnd(String.java:4861)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.String.substring(String.java:2830)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.util.regex.Matcher$ImmutableMatchResult.group(Matcher.java:348)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at CapturingGroups.printResult(CapturingGroups.java:27)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at CapturingGroups.main(CapturingGroups.java:21)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
import java.nio.CharBuffer;&lt;br/&gt;
import java.util.Arrays;&lt;br/&gt;
import java.util.regex.MatchResult;&lt;br/&gt;
import java.util.regex.Matcher;&lt;br/&gt;
import java.util.regex.Pattern;&lt;br/&gt;
&lt;br/&gt;
public class CapturingGroups {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;char[] data = &amp;quot;123ABC456&amp;quot;.toCharArray();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Matcher m = Pattern.compile(&amp;quot;(?&amp;lt;=(\\d{3})).*(?=(\\d{3}))&amp;quot;).matcher(CharBuffer.wrap(data));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!m.find()) throw new AssertionError();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;printResult(m);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MatchResult mr = m.toMatchResult();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Arrays.fill(data, &amp;#39;*&amp;#39;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;printResult(mr);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;private static void printResult(MatchResult mr) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;match from &amp;quot; + mr.start() + &amp;quot; to &amp;quot; + mr.end() + &amp;quot;: &amp;quot; + mr.group());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;prefix: &amp;quot; + mr.group(1));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;suffix: &amp;quot; + mr.group(2));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5106473">JDK-8312976</key>
            <summary>MatchResult produces StringIndexOutOfBoundsException for groups outside match</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgiulietti">Raffaello Giulietti</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>jdk21-defer-request</label>
                            <label>jdk21-defer-yes</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>regression</label>
                            <label>webbug</label>
                    </labels>
                <created>Tue, 25 Jul 2023 06:56:40 -0700</created>
                <updated>Mon, 15 Jan 2024 11:09:45 -0800</updated>
                            <resolved>Fri, 4 Aug 2023 00:13:54 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14604695" author="roboduke" created="Thu, 17 Aug 2023 06:15:46 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/70&quot;&gt;https://git.openjdk.org/jdk21u/pull/70&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-17 13:09:33 +0000</comment>
                            <comment id="14603606" author="alanb" created="Mon, 14 Aug 2023 01:12:21 -0700"  >I&amp;#39;ve added the jdk21-defer-request and jdk21-defer-yes labels to this issue to make it clear that it has been deferred to jdk21u. While the issue is a regression, we don&amp;#39;t expect there is a lot of code accessing the bounds outside of the matched string. A release note has been created for JDK 21 to document the &amp;quot;known issue&amp;quot;.</comment>
                            <comment id="14601867" author="roboduke" created="Fri, 4 Aug 2023 02:03:09 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21/pull/164&quot;&gt;https://git.openjdk.org/jdk21/pull/164&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-04 08:58:46 +0000</comment>
                            <comment id="14601865" author="JIRAUSER19600" created="Fri, 4 Aug 2023 01:48:47 -0700"  >Fix Request&lt;br/&gt;
&lt;br/&gt;
This bug is a regression due to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8132995&quot; title=&quot;Matcher$ImmutableMatchResult should be optimized to reduce space usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8132995&quot;&gt;&lt;strike&gt;JDK-8132995&lt;/strike&gt;&lt;/a&gt;, introduced in 21. The fix should therefore be backported to 21 as well.&lt;br/&gt;
The fix passes all tier1,2,3 testsuites, and specific tests covering the bug have been added.</comment>
                            <comment id="14601843" author="dukebot" created="Fri, 4 Aug 2023 00:13:53 -0700"  >Changeset: 61c58fdd&lt;br/&gt;
Author:    Raffaello Giulietti &amp;lt;&lt;a href=&apos;mailto:rgiulietti@openjdk.org&apos;&gt;rgiulietti@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-08-04 07:11:18 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/61c58fdd00727da2841a052477e4f4ecfa7094d6&quot;&gt;https://git.openjdk.org/jdk/commit/61c58fdd00727da2841a052477e4f4ecfa7094d6&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14599593" author="roboduke" created="Thu, 27 Jul 2023 04:32:34 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15053&quot;&gt;https://git.openjdk.org/jdk/pull/15053&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-27 11:25:57 +0000</comment>
                            <comment id="14599091" author="rriggs" created="Tue, 25 Jul 2023 15:15:39 -0700"  >Please take a look as this followup issue.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5108333">JDK-8314538</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5107753">JDK-8314055</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4838689">JDK-8132995</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="22711">21</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32gvn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17338"><![CDATA[b10]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="333"><![CDATA[java.util.regex]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>