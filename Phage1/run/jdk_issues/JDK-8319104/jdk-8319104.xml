<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:38:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8319104] GtestWrapper crashes with SIGILL in AsyncLogTest::test_asynclog_raw on AIX opt</title>
                <link>https://bugs.openjdk.org/browse/JDK-8319104</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Note: not limited to AIX, but tends to happen there because of the order of C++ initialization.&lt;br/&gt;
&lt;br/&gt;
Currently gtest/GTestWrapper.java crashes on AIX in the opt build.&lt;br/&gt;
&lt;br/&gt;
#  SIGILL (0x4) at pc=0x0000000000000000, pid=15598006, tid=258&lt;br/&gt;
#&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment (22.0) (build 22-internal-adhoc.openjdk.jdk-dev)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM (22-internal-adhoc.openjdk.jdk-dev, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, aix-ppc64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x42c9c]  LogTagSet::vwrite(LogLevel::type, char const*, char*)+0x104&lt;br/&gt;
&lt;br/&gt;
Native frame:&lt;br/&gt;
iar:  0x0000000000000000 (unknown module)::(unknown function)+?&lt;br/&gt;
lr:   0x090000000aa4ace0 libjvm.so::LogTagSet::vwrite(LogLevel::type, char const*, char*)+0x148  (C++ uses_alloca saves_lr stores_bc gpr_saved:12 fixedparms:4 parmsonstk:1)&lt;br/&gt;
sp:   0x00000001102aea80 (base - 0xE08) &lt;br/&gt;
rtoc: 0x0000000000000000 (invalid)&lt;br/&gt;
|---stackaddr----|   |----lrsave------|:   &amp;lt;function name&amp;gt;&lt;br/&gt;
0x00000001102aedb0 - 0x090000000b60f268 libjvm.so::LogImpl&amp;lt;(LogTag::type)73, (LogTag::type)0, (LogTag::type)0, (LogTag::type)0, (LogTag::type)0, (LogTag::type)0&amp;gt;::warning(char const*, ...)+0x54  (C++ uses_alloca saves_lr stores_bc gpr_saved:2 fixedparms:2 parmsonstk:1)&lt;br/&gt;
0x00000001102aee40 - 0x090000000b60ed58 libjvm.so::AsyncLogTest::test_asynclog_raw()+0x6c  (C++ uses_alloca saves_lr stores_bc gpr_saved:6 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102aef20 - 0x090000000b60df84 libjvm.so::AsyncLogTest_asynclog_vm_Test::TestBody()+0x128  (C++ uses_alloca saves_lr stores_bc gpr_saved:9 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102af0a0 - 0x090000000b5a6c90 libjvm.so::testing::Test::Run()+0x390  (C++ uses_alloca saves_lr stores_bc gpr_saved:15 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102af190 - 0x090000000b5a6638 libjvm.so::testing::TestInfo::Run()+0x418  (C++ uses_alloca saves_lr stores_bc gpr_saved:17 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102af2a0 - 0x090000000b5a4958 libjvm.so::testing::TestSuite::Run()+0x564  (C++ uses_alloca saves_cr saves_lr stores_bc gpr_saved:16 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102af3a0 - 0x090000000b59fb20 libjvm.so::testing::internal::UnitTestImpl::RunAllTests()+0xe78  (C++ uses_alloca saves_cr saves_lr stores_bc gpr_saved:18 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102af560 - 0x090000000b59ea40 libjvm.so::testing::UnitTest::Run()+0x9c  (C++ uses_alloca saves_lr stores_bc gpr_saved:4 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102af610 - 0x090000000b5a7e7c libjvm.so::runUnitTestsInner(int, char**)+0x56c  (C++ uses_alloca saves_cr saves_lr stores_bc gpr_saved:13 fixedparms:2 parmsonstk:1)&lt;br/&gt;
0x00000001102af720 - 0x090000000b5a78cc libjvm.so::thread_wrapper+0x24  (C++ uses_alloca saves_lr stores_bc gpr_saved:1 fixedparms:1 parmsonstk:1)&lt;br/&gt;
0x00000001102af7a0 - 0x090000000056204c libpthreads.a::_pthread_body+0xec  (C saves_lr stores_bc gpr_saved:1 fixedparms:1 )&lt;br/&gt;
0x00000001102af820 - 0x0000000000000000 &lt;br/&gt;
*** end of backchain ***&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5113529">JDK-8319104</key>
            <summary>GtestWrapper crashes with SIGILL in AsyncLogTest::test_asynclog_raw on AIX opt</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkern">Joachim Kern</assignee>
                                    <reporter username="tobermeier">Thomas Obermeier</reporter>
                        <labels>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>logging</label>
                            <label>noreg-self</label>
                            <label>problemlist</label>
                    </labels>
                <created>Mon, 30 Oct 2023 04:09:35 -0700</created>
                <updated>Tue, 9 Jan 2024 10:38:00 -0800</updated>
                            <resolved>Thu, 9 Nov 2023 00:58:44 -0800</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14625496" author="goetz" created="Fri, 10 Nov 2023 04:19:38 -0800"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this to fix the issue on AIX.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Simple adaption needed.</comment>
                            <comment id="14625492" author="roboduke" created="Fri, 10 Nov 2023 04:06:32 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/350&quot;&gt;https://git.openjdk.org/jdk21u/pull/350&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-10 12:00:59 +0000</comment>
                            <comment id="14625137" author="dukebot" created="Thu, 9 Nov 2023 00:58:39 -0800"  >Changeset: 0b58bdec&lt;br/&gt;
Author:    Joachim Kern &amp;lt;&lt;a href=&apos;mailto:jkern@openjdk.org&apos;&gt;jkern@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Matthias Baesken &amp;lt;&lt;a href=&apos;mailto:mbaesken@openjdk.org&apos;&gt;mbaesken@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-09 08:56:00 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/0b58bdec716ca1c4c38088bd26d918890b8d85bb&quot;&gt;https://git.openjdk.org/jdk/commit/0b58bdec716ca1c4c38088bd26d918890b8d85bb&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14623412" author="roboduke" created="Thu, 2 Nov 2023 08:58:59 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16479&quot;&gt;https://git.openjdk.org/jdk/pull/16479&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-02 15:51:13 +0000</comment>
                            <comment id="14623403" author="JIRAUSER20807" created="Thu, 2 Nov 2023 08:38:54 -0700"  >The reason for the SIGILL is the following:&lt;br/&gt;
The AsyncLogTest.asynclog_vm iterates over the previously registered entries of LogOutputList. There he gets a Nullpointer, which he tries to use for a function call (nullpointer)-&amp;gt;write(...); This results in an SIGILL.&lt;br/&gt;
The first reason for this is, that the LogTagSet tests (which seem to be called beforehand only on AIX) creates such an entry with&lt;br/&gt;
ts.set_output_level(LogConfiguration::StdoutLog, LogLevel::Info);&lt;br/&gt;
The first flaw is that this entry is not removed again at the end of the test. So the VM is modified and would behave differently depending on the sequence of the test execution.&lt;br/&gt;
The second flaw is that the registered LogConfiguration::StdoutLog in the call above is still a nullpointer due to the fact that on AIX no VM was created before the LogTagSet tests and only a creation of a VM initializes the logConfiguration. So again the whole Gtestwrapper testsuite depends on the executable sequence of the tests. If no other test creates a vm beforehand the LogTagSet tests will fail. Again this has to be fixed by let the LogTagSet tests themself creating a VM.&lt;br/&gt;
&lt;br/&gt;
Solution to fix all errors:&lt;br/&gt;
1. Make the 1. LogTagSet test a TEST_VM test.&lt;br/&gt;
2. Clean up the LogTagSet.is_level and LogTagSet.level_for tests with a final&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ts.set_output_level(LogConfiguration::StdoutLog, LogLevel::Off);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;which will remove the entry from the LogOutputList again.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5114789">JDK-8320153</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118520">JDK-8323387</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5114300">JDK-8319704</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33o9n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17436"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>