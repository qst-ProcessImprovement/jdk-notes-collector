<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 08:43:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8280982] [Wayland] [XWayland] java.awt.Robot taking screenshots</title>
                <link>https://bugs.openjdk.org/browse/JDK-8280982</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Modern Linux systems often come with [Wayland](&lt;a href=&quot;https://wayland.freedesktop.org/&quot;&gt;https://wayland.freedesktop.org/&lt;/a&gt;) by default.&lt;br/&gt;
This comes with some difficulties, and one of them is the inability to get screenshots from the system.&lt;br/&gt;
This is because we now use the [X Window System API](&lt;a href=&quot;https://en.wikipedia.org/wiki/X_Window_System&quot;&gt;https://en.wikipedia.org/wiki/X_Window_System&lt;/a&gt;) to capture screenshots and it cannot access data outside the [XWayland server](&lt;a href=&quot;https://wayland.freedesktop.org/xserver.html&quot;&gt;https://wayland.freedesktop.org/xserver.html&lt;/a&gt;) &lt;br/&gt;
&lt;br/&gt;
But this functionality is a very important part of automated testing.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
At the moment there are two obvious solutions to this problem, and both use [xdg-desktop-portal](&lt;a href=&quot;https://github.com/flatpak/xdg-desktop-portal):&quot;&gt;https://github.com/flatpak/xdg-desktop-portal):&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
1. [org.freedesktop.portal.Screenshot DBUS API](&lt;a href=&quot;https://flatpak.github.io/xdg-desktop-portal/#gdbus-org.freedesktop.portal.Screenshot&quot;&gt;https://flatpak.github.io/xdg-desktop-portal/#gdbus-org.freedesktop.portal.Screenshot&lt;/a&gt;)&lt;br/&gt;
It has several drawbacks though:&lt;br/&gt;
+ It saves a screenshot to disk, which must be read and deleted(may add some delays depending on the type of a disk drive).&lt;br/&gt;
+ There is no way to disable the visual &amp;quot;screen flash&amp;quot; after screenshot&lt;br/&gt;
+ It asks a user confirmation to save a screenshot. This confirmation can be saved on Gnome 43+. &lt;br/&gt;
Since we would like Ubuntu 22.04 LTS which comes with Gnome 42 this option is not acceptable for us because it would require user confirmation for each screenshot.&lt;br/&gt;
But we still can consider this option as a fallback.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
2. [org.freedesktop.portal.ScreenCast](&lt;a href=&quot;https://flatpak.github.io/xdg-desktop-portal/#gdbus-org.freedesktop.portal.ScreenCast&quot;&gt;https://flatpak.github.io/xdg-desktop-portal/#gdbus-org.freedesktop.portal.ScreenCast&lt;/a&gt;)&lt;br/&gt;
It typically used by applications that need to capture the contents of the user&amp;#39;s screen or a specific window for the purpose of sharing, recording, or streaming.&lt;br/&gt;
This might be a bit of overkill, but it avoids several of the problems mentioned in the Screenshot API.&lt;br/&gt;
&lt;br/&gt;
+ implementation is more complicated comparing to Screenshot API&lt;br/&gt;
+ no intermediate file, screenshot data can be obtained from memory&lt;br/&gt;
+ Permission to make screenshots can be stored with [`restore_token`](&lt;a href=&quot;https://flatpak.github.io/xdg-desktop-portal/#gdbus-method-org-freedesktop-portal-ScreenCast.SelectSources&quot;&gt;https://flatpak.github.io/xdg-desktop-portal/#gdbus-method-org-freedesktop-portal-ScreenCast.SelectSources&lt;/a&gt;)</description>
                <environment></environment>
        <key id="5067455">JDK-8280982</key>
            <summary>[Wayland] [XWayland] java.awt.Robot taking screenshots</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="azvegint">Alexander Zvegintsev</assignee>
                                    <reporter username="azvegint">Alexander Zvegintsev</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>problemlist</label>
                            <label>sn_134</label>
                            <label>sn_135</label>
                            <label>sn_136</label>
                            <label>sn_137</label>
                            <label>sn_138</label>
                            <label>sn_139</label>
                            <label>sn_140</label>
                            <label>sn_141</label>
                            <label>sn_143</label>
                            <label>sn_144</label>
                            <label>sn_145</label>
                            <label>wayland</label>
                            <label>wayland_x11_change_spec</label>
                            <label>wayland_x11_compatibility</label>
                    </labels>
                <created>Mon, 31 Jan 2022 13:50:30 -0800</created>
                <updated>Tue, 11 Feb 2025 18:53:12 -0800</updated>
                            <resolved>Wed, 7 Jun 2023 06:08:59 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14688497" author="mbaesken" created="Wed, 10 Jul 2024 00:41:43 -0700"  >jdk17u-dev backport request&lt;br/&gt;
I would like to have the patch in jdk17u-dev as well, for parity with OracleJDK. The backport is clean and medium risk.</comment>
                            <comment id="14688240" author="roboduke" created="Tue, 9 Jul 2024 03:52:54 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2700&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2700&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-09 10:49:06 +0000</comment>
                            <comment id="14588106" author="mbaesken" created="Fri, 9 Jun 2023 01:08:20 -0700"  >Looks like this breaks the AIX build.  I created  &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8309703&quot; title=&quot;AIX build fails after JDK-8280982&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8309703&quot;&gt;&lt;strike&gt;JDK-8309703&lt;/strike&gt;&lt;/a&gt;  .</comment>
                            <comment id="14587627" author="dukebot" created="Wed, 7 Jun 2023 06:08:58 -0700"  >Changeset: 9d7bf532&lt;br/&gt;
Author:    Alexander Zvegintsev &amp;lt;&lt;a href=&apos;mailto:azvegint@openjdk.org&apos;&gt;azvegint@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-07 13:08:11 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/9d7bf5329e5a0393553bca2e3a51ad1125b41b96&quot;&gt;https://git.openjdk.org/jdk/commit/9d7bf5329e5a0393553bca2e3a51ad1125b41b96&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14579110" author="roboduke" created="Thu, 4 May 2023 08:36:04 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13804&quot;&gt;https://git.openjdk.org/jdk/pull/13804&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-04 14:20:30 +0000</comment>
                            <comment id="14579108" author="roboduke" created="Thu, 4 May 2023 08:31:09 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13803&quot;&gt;https://git.openjdk.org/jdk/pull/13803&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-04 14:18:44 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5133223">JDK-8335484</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5133969">JDK-8336126</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5136135">JDK-8337829</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5139209">JDK-8340234</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                                        </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="5086841">JDK-8296415</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5092351">JDK-8300994</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10400">
                    <name>CSR</name>
                                            <outwardlinks description="csr for">
                                        <issuelink>
            <issuekey id="5100124">JDK-8307456</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="4948225">JDK-8194136</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4948267">JDK-8194941</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5051969">JDK-8269245</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5102691">JDK-8309621</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5106082">JDK-8312591</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5102790">JDK-8309703</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5100529">JDK-8307779</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122474">JDK-8326712</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5149066">JDK-8348600</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="97795" name="ScreenshotConfirmationDialog.png" size="25317" author="azvegint" created="Mon, 31 Jan 2022 13:53:34 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vv9n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="196"><![CDATA[java.awt]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>