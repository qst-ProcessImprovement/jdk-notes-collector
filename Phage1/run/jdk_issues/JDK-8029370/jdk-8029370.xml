<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:30:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8029370] (fc) FileChannel javadoc not clear for cases where position == size</title>
                <link>https://bugs.openjdk.org/browse/JDK-8029370</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>FULL PRODUCT VERSION :&lt;br/&gt;
java version &amp;quot;1.7.0_40&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_40-b43)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 24.0-b56, mixed mode)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
ADDITIONAL OS VERSION INFORMATION :&lt;br/&gt;
Linux ida 3.10.11-100.fc18.x86_64 #1 SMP Mon Sep 9 13:06:31 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
EXTRA RELEVANT SYSTEM CONFIGURATION :&lt;br/&gt;
This is a general, OS -type and -version independent issue.&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
I&amp;#39;ve already described the problem here in detail with no satisfactory answers so far:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://stackoverflow.com/questions/20309154/is-this-an-off-by-one-bug-in-java-7&quot;&gt;http://stackoverflow.com/questions/20309154/is-this-an-off-by-one-bug-in-java-7&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
REGRESSION.  Last worked in version 7u45&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Just **closely** read the documentation for  FileChannel and the relevant code. Neither fully makes sense based on the standard notions of &amp;#39;position&amp;#39; and &amp;#39;size&amp;#39;.&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
I&amp;#39;m expecting that it should not be possible to read from a FileChannel at position == size(). The last position that can be read in a FileChannel should be size()-1 and not size().&lt;br/&gt;
ACTUAL -&lt;br/&gt;
Careless use of &amp;#39;greater than&amp;#39; when &amp;#39;greater than or equal to&amp;#39; should have been used in both the documentation and the code.&lt;br/&gt;
&lt;br/&gt;
REPRODUCIBILITY :&lt;br/&gt;
This bug can be reproduced always.&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
See the jdk/src/share/classes/sun/nio/ch/FileChannelImpl.java file of Open JDK.&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
I do not know of any workaround. I need to ASAP what the semantics are so that I can build my own custom file system using the FileSystemProvider SPI. It would be immensely helpful if you could clarify/fix this issue ASAP.</description>
                <environment></environment>
        <key id="4704827">JDK-8029370</key>
            <summary>(fc) FileChannel javadoc not clear for cases where position == size</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bpb">Brian Burkhalter</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>noreg-doc</label>
                            <label>webbug</label>
                    </labels>
                <created>Sat, 30 Nov 2013 22:32:45 -0800</created>
                <updated>Mon, 6 Mar 2023 11:41:50 -0800</updated>
                            <resolved>Mon, 27 Feb 2023 09:13:05 -0800</resolved>
                                    <version>7u40</version>
                                    <fixVersion>21</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14563095" author="dukebot" created="Mon, 27 Feb 2023 09:13:04 -0800"  >Changeset: 42330d28&lt;br/&gt;
Author:    Brian Burkhalter &amp;lt;&lt;a href=&apos;mailto:bpb@openjdk.org&apos;&gt;bpb@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-02-27 17:11:29 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/42330d28da28da034da1927302990f458e76cad1&quot;&gt;https://git.openjdk.org/jdk/commit/42330d28da28da034da1927302990f458e76cad1&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14562539" author="roboduke" created="Thu, 23 Feb 2023 13:33:04 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12735&quot;&gt;https://git.openjdk.org/jdk/pull/12735&lt;/a&gt;&lt;br/&gt;
Date: 2023-02-23 21:24:40 +0000</comment>
                            <comment id="14562536" author="bpb" created="Thu, 23 Feb 2023 13:20:11 -0800"  >The documentation of the methods transferTo and positional read should in fact state &amp;quot;if the given position is greater than or equal to the file&amp;#39;s current size&amp;quot; instead of just &amp;quot;greater than.&amp;quot; The same error is also present for positional write, but the position(long) method is correct as documented. I think the reporter misunderstood that the position is the location of the next byte to be read from or to be written to.</comment>
                            <comment id="14249958" author="igerasim" created="Thu, 7 Mar 2019 16:27:30 -0800"  >Looks like &amp;quot;Not an issue&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
1)&lt;br/&gt;
FileChannel.position(pos) allows pos == size(), so that it&amp;#39;s possible to write straight after the last current byte.&lt;br/&gt;
If position were set to size()-1, then writing would overwrite the last byte.&lt;br/&gt;
&lt;br/&gt;
2)&lt;br/&gt;
Documentation for transferTo() is correct for the same reason as above.&lt;br/&gt;
&lt;br/&gt;
3)&lt;br/&gt;
Documentation for transferFrom() is consistent with the implementation.  It is also consistent with  behavior/documentation of transferTo().</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10400">
                    <name>CSR</name>
                                            <outwardlinks description="csr for">
                                        <issuelink>
            <issuekey id="5094931">JDK-8303141</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5095081">JDK-8303260</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>103486</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="228"><![CDATA[java.nio]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>