<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 16:56:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8302777] CDS should not relocate heap if mapping fails</title>
                <link>https://bugs.openjdk.org/browse/JDK-8302777</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK21 CI:&lt;br/&gt;
&lt;br/&gt;
runtime/cds/appcds/SharedArchiveConsistency.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a log file snippet from the linux-x64-debug sighting:&lt;br/&gt;
&lt;br/&gt;
[0.091s][info][cds] CDS heap data relocation delta = 0 bytes&lt;br/&gt;
[0.091s][info][cds] Trying to map heap data: region[3] at 0x00000000fff00000, size =   532664 bytes&lt;br/&gt;
[0.093s][info][cds] Trying to map heap data: region[5] at 0x00000000ffe00000, size =   495368 bytes&lt;br/&gt;
[0.094s][info][cds] Checksum verification failed.&lt;br/&gt;
[0.094s][info][cds] UseSharedSpaces: mapped heap regions are corrupt&lt;br/&gt;
[0.094s][info][cds] optimized module handling: enabled&lt;br/&gt;
[0.094s][info][cds] full module graph: disabled&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  SIGSEGV (0xb) at pc=0x00007fd53006d6fb, pid=442834, tid=442838&lt;br/&gt;
#&lt;br/&gt;
# JRE version:  (21.0+11) (fastdebug build )&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 21-ea+11-LTS-812, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x66e6fb]  ArchiveHeapLoader::patch_native_pointers() [clone .part.0]+0x1bb&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: Core dumps may be processed with &amp;quot;/opt/core.sh %p&amp;quot; (or dumping to /opt/mach5/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S119895/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/ca30f168-4228-4faa-bf40-e6ef16ffa29a/runs/13c13fa6-3c87-4d55-b51b-00816b28aeb5/testoutput/test-support/jtreg_open_test_hotspot_jtreg_hotspot_cds_relocation/scratch/1/core.442834)&lt;br/&gt;
#&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# /opt/mach5/mesos/work_dir/slaves/91e16c40-06d4-468a-9fc3-7198a5bb7d5a-S119895/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/ca30f168-4228-4faa-bf40-e6ef16ffa29a/runs/13c13fa6-3c87-4d55-b51b-00816b28aeb5/testoutput/test-support/jtreg_open_test_hotspot_jtreg_hotspot_cds_relocation/scratch/1/hs_err_pid442834.log&lt;br/&gt;
#&lt;br/&gt;
#&lt;br/&gt;
];&lt;br/&gt;
&amp;nbsp;stderr: []&lt;br/&gt;
&amp;nbsp;exitValue = 134&lt;br/&gt;
&lt;br/&gt;
java.lang.RuntimeException: &amp;#39;A fatal error has been detected by the Java Runtime Environment&amp;#39; found in stdout&lt;br/&gt;
	at jdk.test.lib.process.OutputAnalyzer.shouldNotContain(OutputAnalyzer.java:267)&lt;br/&gt;
	at SharedArchiveConsistency.testAndCheck(SharedArchiveConsistency.java:88)&lt;br/&gt;
	at SharedArchiveConsistency.main(SharedArchiveConsistency.java:222)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:125)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1623)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.RuntimeException: &amp;#39;A fatal error has been detected by the Java Runtime Environment&amp;#39; found in stdout&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: java.lang.RuntimeException: &amp;#39;A fatal error has been detected by the Java Runtime Environment&amp;#39; found in stdout&lt;br/&gt;
----------rerun:(40/7483)*----------&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s the crashing thread&amp;#39;s stack:&lt;br/&gt;
&lt;br/&gt;
---------------  T H R E A D  ---------------&lt;br/&gt;
&lt;br/&gt;
Current thread (0x00007fd52803e390):  JavaThread &amp;quot;Unknown thread&amp;quot; [_thread_in_vm, id=442838, stack(0x00007fd53283d000,0x00007fd53293e000)]&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007fd53283d000,0x00007fd53293e000],  sp=0x00007fd53293ca70,  free space=1022k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x66e6fb]  ArchiveHeapLoader::patch_native_pointers() [clone .part.0]+0x1bb  (archiveHeapLoader.cpp:526)&lt;br/&gt;
V  [libjvm.so+0x16129c0]  MetaspaceShared::initialize_shared_spaces()+0x80  (metaspaceShared.cpp:1434)&lt;br/&gt;
V  [libjvm.so+0x1aed321]  universe_init()+0x1f1  (universe.cpp:819)&lt;br/&gt;
V  [libjvm.so+0xffa5c7]  init_globals()+0x37  (init.cpp:123)&lt;br/&gt;
V  [libjvm.so+0x1ab5fdf]  Threads::create_vm(JavaVMInitArgs*, bool*)+0x37f  (threads.cpp:568)&lt;br/&gt;
V  [libjvm.so+0x11abb68]  JNI_CreateJavaVM+0x98  (jni.cpp:3588)&lt;br/&gt;
C  [libjli.so+0x3b0f]  JavaMain+0x8f  (java.c:1459)&lt;br/&gt;
C  [libjli.so+0x7a29]  ThreadJavaMain+0x9  (java_md.c:650)&lt;br/&gt;
&lt;br/&gt;
siginfo: si_signo: 11 (SIGSEGV), si_code: 2 (SEGV_ACCERR), si_addr: 0x00000000ffe00018</description>
                <environment></environment>
        <key id="5094503">JDK-8302777</key>
            <summary>CDS should not relocate heap if mapping fails</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="iklam">Ioi Lam</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>cds</label>
                            <label>regression</label>
                            <label>tier4</label>
                    </labels>
                <created>Fri, 17 Feb 2023 07:06:24 -0800</created>
                <updated>Thu, 29 Jun 2023 13:45:06 -0700</updated>
                            <resolved>Fri, 17 Feb 2023 11:36:21 -0800</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14561149" author="dcubed" created="Fri, 17 Feb 2023 13:38:03 -0800"  >This bug fix is integrated in jdk-21+11-824.</comment>
                            <comment id="14561128" author="dukebot" created="Fri, 17 Feb 2023 11:36:19 -0800"  >Changeset: a263f283&lt;br/&gt;
Author:    Ioi Lam &amp;lt;&lt;a href=&apos;mailto:iklam@openjdk.org&apos;&gt;iklam@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-02-17 19:34:26 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a263f28368951e2352ee983d318d83c92ddf8e4d&quot;&gt;https://git.openjdk.org/jdk/commit/a263f28368951e2352ee983d318d83c92ddf8e4d&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14561097" author="roboduke" created="Fri, 17 Feb 2023 09:22:48 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/12622&quot;&gt;https://git.openjdk.org/jdk/pull/12622&lt;/a&gt;&lt;br/&gt;
Date: 2023-02-17 17:15:04 +0000</comment>
                            <comment id="14561064" author="dcubed" created="Fri, 17 Feb 2023 07:16:42 -0800"  >[~iklam] - I think this might be the new bug that you were worried about.</comment>
                            <comment id="14561062" author="dcubed" created="Fri, 17 Feb 2023 07:15:32 -0800"  >Bumping from P4 -&amp;gt; P2 since this looks like a regression.</comment>
                            <comment id="14561061" author="dcubed" created="Fri, 17 Feb 2023 07:14:48 -0800"  >The only changeset in jdk-21+11-812-tier4 is:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8296158&quot; title=&quot;Refactor the verification of CDS region checksum &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8296158&quot;&gt;&lt;strike&gt;JDK-8296158&lt;/strike&gt;&lt;/a&gt; Refactor the verification of CDS region checksum&lt;br/&gt;
&lt;br/&gt;
so it looks like &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8296158&quot; title=&quot;Refactor the verification of CDS region checksum &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8296158&quot;&gt;&lt;strike&gt;JDK-8296158&lt;/strike&gt;&lt;/a&gt; is the root cause.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5086449">JDK-8296158</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5094519">JDK-8302790</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30fwz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17311"><![CDATA[b11]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>