<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 10:41:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8320597] RSA signature verification fails on signed data that does not encode params correctly</title>
                <link>https://bugs.openjdk.org/browse/JDK-8320597</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Updating Summary and Description to better reflect the cause:&lt;br/&gt;
&lt;br/&gt;
The fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8302017&quot; title=&quot;Allocate BadPaddingException only if it will be thrown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8302017&quot;&gt;&lt;strike&gt;JDK-8302017&lt;/strike&gt;&lt;/a&gt; changed the way RSA signatures are verified, such that previously signed data that (incorrectly, according to RFC 8017) omitted the AlgorithmID params field instead of encoding it as an ASN.1 NULL can no longer be verified. &lt;br/&gt;
&lt;br/&gt;
Original Summary and Description:&lt;br/&gt;
&lt;br/&gt;
JDK 21.0.1 fails to validate signed XML (JDK &amp;lt; 21 and JDK 21+35 worked):&lt;br/&gt;
&lt;br/&gt;
CI for Apache POI discovered a regression between JDK 21 and 21.0.1 when signing/validating XML documents.&lt;br/&gt;
&lt;br/&gt;
See the reproducer project at &lt;a href=&quot;https://github.com/centic9/poi-reproduce-signature&quot;&gt;https://github.com/centic9/poi-reproduce-signature&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
It basically performs javax.xml.crypto.dsig.XMLSignature.validate(), which returns &amp;quot;true&amp;quot; for most JDK versions, but started to report &amp;quot;false&amp;quot; for JDK 21.0.1&lt;br/&gt;
&lt;br/&gt;
When executing the reproducer for various JDKs, we get the following results:&lt;br/&gt;
Successfully validated document with 1.8.0_382&lt;br/&gt;
Successfully validated document with 11.0.20&lt;br/&gt;
Successfully validated document with 17.0.3&lt;br/&gt;
Successfully validated document with 17.0.9&lt;br/&gt;
Successfully validated document with 21&lt;br/&gt;
&lt;br/&gt;
However when runing with the recent JDK 21 patchlevel, I get the following:&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.IllegalStateException: Not valid for 21.0.1&lt;br/&gt;
Validate returned: false&lt;br/&gt;
HasNext: true, validate: false&lt;br/&gt;
&amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; at org.dstadler.poi.reproduce.Reproduce.main(Reproduce.java:105)&lt;br/&gt;
&lt;br/&gt;
So it seems there was a change in JDK 21.0.1 which introduced this, but none of the changes listed in &lt;a href=&quot;https://www.oracle.com/java/technologies/javase/21all-relnotes.html&quot;&gt;https://www.oracle.com/java/technologies/javase/21all-relnotes.html&lt;/a&gt; for 21.0.1 seems to be the culprit.&lt;br/&gt;
&lt;br/&gt;
JDK used for compilation seems to not matter, changing the JDK used for execution seems to be enough to trigger the issue.&lt;br/&gt;
&lt;br/&gt;
It is possible to try to reduce the test more and take out Apache POI dependency, but would be some more work, so please let me know if you would like to get a more refined test-case.</description>
                <environment></environment>
        <key id="5115280">JDK-8320597</key>
            <summary>RSA signature verification fails on signed data that does not encode params correctly</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="weijun">Weijun Wang</assignee>
                                    <reporter username="dstadler">Dominik Stadler</reporter>
                        <labels>
                            <label>11bpr-critical-approved</label>
                            <label>17bpr-critical-approved</label>
                            <label>8bpr-critical-approved</label>
                            <label>CPU24_01-critical-SQE-OK</label>
                            <label>CPU24_01-critical-approved</label>
                            <label>amazon-interest</label>
                            <label>apache-poi-found</label>
                            <label>hgupdate-sync</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-SQE-ok</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk8u-fix-request</label>
                            <label>jdk8u-fix-yes</label>
                            <label>regression</label>
                    </labels>
                <created>Wed, 22 Nov 2023 05:15:45 -0800</created>
                <updated>Tue, 24 Jun 2025 17:26:25 -0700</updated>
                            <resolved>Thu, 7 Dec 2023 15:28:46 -0800</resolved>
                                    <version>21.0.1</version>
                    <version>22</version>
                                    <fixVersion>23</fixVersion>
                                    <component>security-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="14634511" author="abakhtin" created="Thu, 14 Dec 2023 20:28:58 -0800"  >Fix request [11u, 8u]&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;d like to backport it to 11u and 8u as a fix for regression in 8302017.&lt;br/&gt;
Risk is low &lt;br/&gt;
Jtreg tests passed</comment>
                            <comment id="14634510" author="mbalao" created="Thu, 14 Dec 2023 20:16:41 -0800"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
17u is affected by this bug after the integration of 8302017. A PR has been reviewed (&lt;a href=&quot;https://github.com/openjdk/jdk17u-dev/pull/2052&quot;&gt;https://github.com/openjdk/jdk17u-dev/pull/2052&lt;/a&gt;). Risk is low.</comment>
                            <comment id="14634170" author="roboduke" created="Wed, 13 Dec 2023 19:25:01 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk8u-dev/pull/404&quot;&gt;https://git.openjdk.org/jdk8u-dev/pull/404&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-14 03:19:25 +0000</comment>
                            <comment id="14634162" author="roboduke" created="Wed, 13 Dec 2023 17:28:21 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2384&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2384&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-14 01:22:16 +0000</comment>
                            <comment id="14634147" author="roboduke" created="Wed, 13 Dec 2023 16:02:29 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2052&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2052&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-13 23:55:14 +0000</comment>
                            <comment id="14634104" author="roboduke" created="Wed, 13 Dec 2023 13:12:33 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u/pull/426&quot;&gt;https://git.openjdk.org/jdk21u/pull/426&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-13 21:06:35 +0000</comment>
                            <comment id="14634103" author="weijun" created="Wed, 13 Dec 2023 13:03:55 -0800"  >Asking for backport to jdk21u. This is a regression introduced in 21.0.1 and should be fixed in a later jdk21u. The code change added a fallback to accept an alternative form of signature. Low risk. A new test is added. The patch can be applied cleanly.&lt;br/&gt;
&lt;br/&gt;
A pull request has been created at &lt;a href=&quot;https://github.com/openjdk/jdk21u/pull/426&quot;&gt;https://github.com/openjdk/jdk21u/pull/426&lt;/a&gt;.</comment>
                            <comment id="14632500" author="roboduke" created="Thu, 7 Dec 2023 15:35:10 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22/pull/1&quot;&gt;https://git.openjdk.org/jdk22/pull/1&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-07 23:29:17 +0000</comment>
                            <comment id="14632497" author="dukebot" created="Thu, 7 Dec 2023 15:28:45 -0800"  >Changeset: 11e4a925&lt;br/&gt;
Author:    Weijun Wang &amp;lt;&lt;a href=&apos;mailto:weijun@openjdk.org&apos;&gt;weijun@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-12-07 23:25:56 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/11e4a925bec3c1f79e03045d48def53188b655e6&quot;&gt;https://git.openjdk.org/jdk/commit/11e4a925bec3c1f79e03045d48def53188b655e6&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14632187" author="roboduke" created="Wed, 6 Dec 2023 11:36:20 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17002&quot;&gt;https://git.openjdk.org/jdk/pull/17002&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-06 19:27:22 +0000</comment>
                            <comment id="14630596" author="mullan" created="Fri, 1 Dec 2023 05:21:14 -0800"  >Downgrading to P3. So far we only know of this one case. This XML Signature was created approximately 9 years ago by software that encoded the params incorrectly.</comment>
                            <comment id="14629872" author="dstadler" created="Wed, 29 Nov 2023 03:06:16 -0800"  >Unfortunately I only have the git-history of the file in Apache POI: &lt;a href=&quot;https://github.com/apache/poi/commits/trunk/test-data/xmldsign/office2007prettyPrintedRels.docx&quot;&gt;https://github.com/apache/poi/commits/trunk/test-data/xmldsign/office2007prettyPrintedRels.docx&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
I now tested with all docx- and xlsx-files of Apache POI at &lt;a href=&quot;https://github.com/apache/poi/tree/trunk/test-data/xmldsign&quot;&gt;https://github.com/apache/poi/tree/trunk/test-data/xmldsign&lt;/a&gt; and only this one seems to show this behavior!</comment>
                            <comment id="14629649" author="mullan" created="Tue, 28 Nov 2023 12:30:10 -0800"  >[~dstadler] Do you know what software or tool was used to sign the document?</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5116441">JDK-8321568</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117148">JDK-8322210</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117179">JDK-8322238</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117192">JDK-8322249</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117364">JDK-8322325</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117388">JDK-8322348</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117389">JDK-8322349</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117391">JDK-8322351</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117913">JDK-8322843</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117923">JDK-8322850</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119043">JDK-8323842</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119051">JDK-8323850</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119073">JDK-8323871</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119210">JDK-8324002</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5162572">JDK-8360422</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5162607">JDK-8360457</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117012">JDK-8322086</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117410">JDK-8322371</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117411">JDK-8322372</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117413">JDK-8322374</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117454">JDK-8322414</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                                        </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5093596">JDK-8302017</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33yoj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17317"><![CDATA[b02]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="195"><![CDATA[java.security]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>