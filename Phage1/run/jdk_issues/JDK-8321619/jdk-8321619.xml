<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:15:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8321619] Generational ZGC: ZColorStoreGoodOopClosure is only valid for young objects</title>
                <link>https://bugs.openjdk.org/browse/JDK-8321619</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The recently added test java/lang/String/CompactString/NegativeSize test failed with:&lt;br/&gt;
&lt;br/&gt;
failed: ZColorStoreGoodOopClosure is only valid for young objects&lt;br/&gt;
&lt;br/&gt;
The test creates several maximum size byte arrays.&lt;br/&gt;
&lt;br/&gt;
#  assert(ZHeap::heap()-&amp;gt;is_young(to_zaddress(dst))) failed: ZColorStoreGoodOopClosure is only valid for young objects&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (22.0+27) (fastdebug build 22-ea+27-2244)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 22-ea+27-2244, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-amd64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x1013233]  AccessInternal::PostRuntimeDispatch&amp;lt;ZBarrierSet::AccessBarrier&amp;lt;270400ul, ZBarrierSet&amp;gt;, (AccessInternal::BarrierType)9, 270400ul&amp;gt;::access_barrier(oop, oop, unsigned long)+0x2a3</description>
                <environment></environment>
        <key id="5116508">JDK-8321619</key>
            <summary>Generational ZGC: ZColorStoreGoodOopClosure is only valid for young objects</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://bugs.openjdk.org/images/jbsImages/p1.png">P1</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eosterlund">Erik &#214;sterlund</assignee>
                                    <reporter username="rriggs">Roger Riggs</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>genzgc</label>
                            <label>hgupdate-sync</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>tier8</label>
                    </labels>
                <created>Fri, 8 Dec 2023 14:13:35 -0800</created>
                <updated>Thu, 22 Feb 2024 22:06:52 -0800</updated>
                            <resolved>Tue, 19 Dec 2023 05:51:18 -0800</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14638092" author="roboduke" created="Mon, 8 Jan 2024 04:57:23 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Clean backport to fix Generational ZGC. Applies cleanly. Light testing passes.</comment>
                            <comment id="14638028" author="roboduke" created="Mon, 8 Jan 2024 01:39:17 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/138&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/138&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-08 09:32:06 +0000</comment>
                            <comment id="14635509" author="roboduke" created="Tue, 19 Dec 2023 06:12:52 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22/pull/20&quot;&gt;https://git.openjdk.org/jdk22/pull/20&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-19 14:07:48 +0000</comment>
                            <comment id="14635473" author="dukebot" created="Tue, 19 Dec 2023 05:51:13 -0800"  >Changeset: be49dabd&lt;br/&gt;
Author:    Erik &amp;#xD6;sterlund &amp;lt;&lt;a href=&apos;mailto:eosterlund@openjdk.org&apos;&gt;eosterlund@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-12-19 13:49:01 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/be49dabd0d7e1cd270399849e5353bf33361c4c5&quot;&gt;https://git.openjdk.org/jdk/commit/be49dabd0d7e1cd270399849e5353bf33361c4c5&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14635300" author="eosterlund" created="Tue, 19 Dec 2023 00:14:34 -0800"  >Thanks for noticing that [~gli] - I fixed it.</comment>
                            <comment id="14635259" author="JIRAUSER19202" created="Mon, 18 Dec 2023 18:39:44 -0800"  >The mainline is at 23 now. It is good to change the `fix version` to 23 and then backport to 22 after integrating. If we keep the `fix version` as 22, the bot will create a backport issue unexpectedly when integrating.</comment>
                            <comment id="14635018" author="roboduke" created="Mon, 18 Dec 2023 04:57:19 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17141&quot;&gt;https://git.openjdk.org/jdk/pull/17141&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-18 12:51:34 +0000</comment>
                            <comment id="14633682" author="eosterlund" created="Tue, 12 Dec 2023 07:50:06 -0800"  >The assert is a false positive. It tries to detect if we needed stronger barriers than we used, which is a concern for large object arrays that can get promoted to the old generation before they are fully initialized due to incremental safepoint polling in the initialization code. However, this test clearly allocates a large string where the array doesn&amp;#39;t contain any oops, so there is no problem here.&lt;br/&gt;
&lt;br/&gt;
Moreover, the code now always uses a store barrier, not just colouring.&lt;br/&gt;
&lt;br/&gt;
Having said that, I believe there is a real bug here anyway. If the source array was to be a large object array and we are cloning from the interpreter or C1 (C2 intrinsifies this pattern to an optimized allocation followed by arraycopy), and after the allocation but before the copy, a concurrent thread writes a bunch of values across the source array, the copied payload in the destination will not recognize the need for store barriers to log remembered set entries, which could potentially yield a crash some time further down the line. This would require a lot of stars to align, but seems in theory rather possible.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5117579">JDK-8322533</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117605">JDK-8322560</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118460">JDK-8323329</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122251">JDK-8326546</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5119458">JDK-8324223</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5120497">JDK-8325074</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i345tf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17305"><![CDATA[b03]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>