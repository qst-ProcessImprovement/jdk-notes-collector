<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 18:40:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8306331] assert((cnt &gt; 0.0f) &amp;&amp; (prob &gt; 0.0f)) failed: Bad frequency assignment in if</title>
                <link>https://bugs.openjdk.org/browse/JDK-8306331</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Stress test fails on macos-aarch64 with following assertion:&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error (/System/Volumes/Data/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S51573/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/159b6237-164a-4e8d-a87f-f88590cdae30/runs/904b9cec-69cc-4bc7-a2ab-7d271c913c2d/workspace/open/src/hotspot/share/opto/parse2.cpp:1263), pid=53696, tid=31235&lt;br/&gt;
#  assert((cnt &amp;gt; 0.0f) &amp;amp;&amp;amp; (prob &amp;gt; 0.0f)) failed: Bad frequency assignment in if&lt;br/&gt;
#&lt;br/&gt;
# JRE version: Java(TM) SE Runtime Environment (21.0) (fastdebug build 21-internal-LTS-2023-04-14-2311181.mikael.vidstedt.jdk)&lt;br/&gt;
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 21-internal-LTS-2023-04-14-2311181.mikael.vidstedt.jdk, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, bsd-aarch64)&lt;br/&gt;
# Core dump will be written. Default location: core.53696&lt;br/&gt;
#&lt;br/&gt;
# JFR recording file will be written. Location: /System/Volumes/Data/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S51570/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8fa68a2f-160a-484c-b2b3-b77677871c79/runs/0c72859c-a20c-4951-abed-001d8b9ce7af/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink8H_java/scratch/0/hs_err_pid53696.jfr&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
#&lt;br/&gt;
&lt;br/&gt;
---------------  S U M M A R Y ------------&lt;br/&gt;
&lt;br/&gt;
Command Line: -Xbootclasspath/a:/System/Volumes/Data/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S51570/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8fa68a2f-160a-484c-b2b3-b77677871c79/runs/0c72859c-a20c-4951-abed-001d8b9ce7af/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink8H_java/scratch/0/wb.jar -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -Djava.security.manager=allow -XX:MaxRAMPercentage=6.25 -Dtest.boot.jdk=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk/19/36/bundles/macos-aarch64/jdk-19_macos-aarch64_bin.tar.gz/jdk-19.jdk/Contents/Home -Djava.io.tmpdir=/System/Volumes/Data/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S51570/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8fa68a2f-160a-484c-b2b3-b77677871c79/runs/0c72859c-a20c-4951-abed-001d8b9ce7af/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink8H_java/tmp -XX:MaxRAMPercentage=50 -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -XX:+CrashOnOutOfMemoryError -Djava.net.preferIPv6Addresses=false -XX:+DisplayVMOutputToStderr -Xlog:gc*,gc+heap=debug:gc.log:uptime,timemillis,level,tags -XX:+DisableExplicitGC -XX:+StartAttachListener --enable-preview --add-exports=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-exports=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED --add-exports=java.xml/com.sun.org.apache.xerces.internal.parsers=ALL-UNNAMED --add-exports=java.xml/com.sun.org.apache.xerces.internal.util=ALL-UNNAMED -Djava.io.tmpdir=/System/Volumes/Data/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S51570/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8fa68a2f-160a-484c-b2b3-b77677871c79/runs/0c72859c-a20c-4951-abed-001d8b9ce7af/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink8H_java/scratch/0/java.io.tmpdir -Duser.home=/System/Volumes/Data/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S51570/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8fa68a2f-160a-484c-b2b3-b77677871c79/runs/0c72859c-a20c-4951-abed-001d8b9ce7af/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink8H_java/scratch/0/user.home -agentpath:/System/Volumes/Data/mesos/work_dir/jib-master/install/2023-04-14-2311181.mikael.vidstedt.jdk/macosx-aarch64-debug.test/hotspot/jtreg/native/libJvmtiStressModule.dylib -XX:NativeMemoryTracking=detail -Djdk.test.lib.random.seed=3881510280439331251 applications.kitchensink.process.stress.Main /System/Volumes/Data/mesos/work_dir/slaves/741e9afd-8c02-45c3-b2e2-9db1450d0832-S51570/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/8fa68a2f-160a-484c-b2b3-b77677871c79/runs/0c72859c-a20c-4951-abed-001d8b9ce7af/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink8H_java/scratch/0/kitchensink.final.properties&lt;br/&gt;
&lt;br/&gt;
Host: &amp;quot;Mac14,3&amp;quot; arm64, 8 cores, 16G, Darwin 22.3.0, macOS 13.2.1 (22D68)&lt;br/&gt;
Time: Tue Apr 18 05:54:54 2023 GMT elapsed time: 27686.480167 seconds (0d 7h 41m 26s)&lt;br/&gt;
&lt;br/&gt;
---------------  T H R E A D  ---------------&lt;br/&gt;
&lt;br/&gt;
Current thread (0x000000013d00de10):  JavaThread &amp;quot;C2 CompilerThread0&amp;quot; daemon [_thread_in_native, id=31235, stack(0x0000000170cc4000,0x0000000170ec7000)]&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Current CompileTask:&lt;br/&gt;
C2:27686480 5257314 %     4       spec.benchmarks.xml.transform.BaseOutputStream::write @ 3 (36 bytes)&lt;br/&gt;
&lt;br/&gt;
Stack: [0x0000000170cc4000,0x0000000170ec7000],  sp=0x0000000170ec4680,  free space=2049k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.dylib+0x102d678]  VMError::report_and_die(int, char const*, char const*, char*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x564  (parse2.cpp:1263)&lt;br/&gt;
V  [libjvm.dylib+0x102de94]  VMError::report_and_die(Thread*, char const*, int, unsigned long, VMErrorType, char const*, char*)+0x0&lt;br/&gt;
V  [libjvm.dylib+0x523198]  print_error_for_unit_test(char const*, char const*, char*)+0x0&lt;br/&gt;
V  [libjvm.dylib+0xd90170]  Parse::branch_prediction(float&amp;amp;, BoolTest::mask, int, Node*)+0x0&lt;br/&gt;
V  [libjvm.dylib+0xd90198]  Parse::branch_prediction(float&amp;amp;, BoolTest::mask, int, Node*)+0x28&lt;br/&gt;
V  [libjvm.dylib+0xd90ef4]  Parse::do_if(BoolTest::mask, Node*)+0x7c&lt;br/&gt;
V  [libjvm.dylib+0xd9437c]  Parse::do_one_bytecode()+0x1c50&lt;br/&gt;
V  [libjvm.dylib+0xd848e0]  Parse::do_one_block()+0x428&lt;br/&gt;
V  [libjvm.dylib+0xd82a34]  Parse::do_all_blocks()+0x474&lt;br/&gt;
V  [libjvm.dylib+0xd7f450]  Parse::Parse(JVMState*, ciMethod*, float)+0x9d4&lt;br/&gt;
V  [libjvm.dylib+0x379aa4]  ParseGenerator::generate(JVMState*)+0x120&lt;br/&gt;
V  [libjvm.dylib+0x493d3c]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0xd3c&lt;br/&gt;
V  [libjvm.dylib+0x3781d8]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x188&lt;br/&gt;
V  [libjvm.dylib+0x4b097c]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x6e4&lt;br/&gt;
V  [libjvm.dylib+0x4aff40]  CompileBroker::compiler_thread_loop()+0x2bc&lt;br/&gt;
V  [libjvm.dylib+0x846384]  JavaThread::thread_main_inner()+0x18c&lt;br/&gt;
V  [libjvm.dylib+0xf8124c]  Thread::call_run()+0xf4&lt;br/&gt;
V  [libjvm.dylib+0xd51e24]  thread_native_entry(Thread*)+0x120&lt;br/&gt;
C  [libsystem_pthread.dylib+0x706c]  _pthread_start+0x94&lt;br/&gt;
&lt;br/&gt;
---------------  P R O C E S S  ---------------&lt;br/&gt;
&lt;br/&gt;
uid  : 502 euid : 502 gid  : 10668 egid : 10668&lt;br/&gt;
&lt;br/&gt;
umask: 0022 (----w--w-)&lt;br/&gt;
&lt;br/&gt;
Threads class SMR info:&lt;br/&gt;
_java_thread_list=0x00006000278b4950, length=54, elements={&lt;br/&gt;
0x000000014e808210, 0x000000014e889610, 0x000000014e88ce10, 0x000000014e88da10,&lt;br/&gt;
0x000000013d009810, 0x000000013d00a410, 0x000000013d00d210, 0x000000013d00de10,&lt;br/&gt;
0x000000014d00e010, 0x000000014e887610, 0x000000014e887e10, 0x000000014d0d7810,&lt;br/&gt;
0x000000014d0cb010, 0x000000014d0d6210, 0x000000014d181210, 0x000000014d181a10,&lt;br/&gt;
0x000000013d0aa610, 0x000000013d0a9610, 0x000000013d0aae10, 0x000000014d81e210,&lt;br/&gt;
0x000000014d8cd010, 0x000000013d0a9e10, 0x000000013d0ab610, 0x000000014d183a10,&lt;br/&gt;
0x000000014d184210, 0x000000014d184a10, 0x000000013d0ac210, 0x000000013d0aca10,&lt;br/&gt;
0x000000013d0ad610, 0x000000013d0ae210, 0x000000014d187410, 0x0000000126809a10,&lt;br/&gt;
0x000000012d823810, 0x000000013d00c810, 0x000000014d941e10, 0x0000000126841610,&lt;br/&gt;
0x000000012d032010, 0x000000014d340210, 0x000000014d715c10, 0x000000012d55ca10,&lt;br/&gt;
0x0000000139871210, 0x0000000139998010, 0x000000013f61aa10, 0x0000000138407a10,&lt;br/&gt;
0x0000000126d8ac10, 0x000000012db62a10, 0x0000000138511e10, 0x000000013f32ba10,&lt;br/&gt;
0x000000012684c610, 0x00000001397dd610, 0x000000012db74410, 0x00000001268ec010,&lt;br/&gt;
0x000000013f614a10, 0x000000012dad2610&lt;br/&gt;
}&lt;br/&gt;
_java_thread_list_alloc_cnt=239723, _java_thread_list_free_cnt=239721, _java_thread_list_max=75, _nested_thread_list_max=1&lt;br/&gt;
_tlh_cnt=78635749, _tlh_times=2552406, avg_tlh_time=0.03, _tlh_time_max=7687&lt;br/&gt;
_deleted_thread_cnt=119834, _deleted_thread_times=45997, avg_deleted_thread_time=0.38, _deleted_thread_time_max=1759&lt;br/&gt;
_delete_lock_wait_cnt=0, _delete_lock_wait_max=8&lt;br/&gt;
_to_delete_list_cnt=0, _to_delete_list_max=3&lt;br/&gt;
&lt;br/&gt;
Java Threads: ( =&amp;gt; current thread )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e808210 JavaThread &amp;quot;main&amp;quot; [_thread_blocked, id=5379, stack(0x000000016f19c000,0x000000016f39f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e889610 JavaThread &amp;quot;Reference Handler&amp;quot; daemon [_thread_blocked, id=21763, stack(0x000000017007c000,0x000000017027f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e88ce10 JavaThread &amp;quot;Finalizer&amp;quot; daemon [_thread_blocked, id=22019, stack(0x0000000170288000,0x000000017048b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e88da10 JavaThread &amp;quot;Signal Dispatcher&amp;quot; daemon [_thread_blocked, id=22531, stack(0x0000000170494000,0x0000000170697000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d009810 JavaThread &amp;quot;Attach Listener&amp;quot; daemon [_thread_blocked, id=32003, stack(0x00000001706a0000,0x00000001708a3000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d00a410 JavaThread &amp;quot;Service Thread&amp;quot; daemon [_thread_blocked, id=23043, stack(0x00000001708ac000,0x0000000170aaf000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d00d210 JavaThread &amp;quot;Monitor Deflation Thread&amp;quot; daemon [_thread_blocked, id=31491, stack(0x0000000170ab8000,0x0000000170cbb000)]&lt;br/&gt;
=&amp;gt;0x000000013d00de10 JavaThread &amp;quot;C2 CompilerThread0&amp;quot; daemon [_thread_in_native, id=31235, stack(0x0000000170cc4000,0x0000000170ec7000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d00e010 JavaThread &amp;quot;C1 CompilerThread0&amp;quot; daemon [_thread_blocked, id=23555, stack(0x0000000170ed0000,0x00000001710d3000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e887610 JavaThread &amp;quot;Common-Cleaner&amp;quot; daemon [_thread_blocked, id=30467, stack(0x00000001710dc000,0x00000001712df000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e887e10 JavaThread &amp;quot;Notification Thread&amp;quot; daemon [_thread_blocked, id=30211, stack(0x00000001712e8000,0x00000001714eb000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d0d7810 JavaThread &amp;quot;ModuleShudownListenerThread&amp;quot; daemon [_thread_in_native, id=28675, stack(0x000000017190c000,0x0000000171b0f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d0cb010 JavaThread &amp;quot;AllocatorStressModule&amp;quot; [_thread_in_Java, id=24323, stack(0x0000000171b18000,0x0000000171d1b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d0d6210 JavaThread &amp;quot;ExceptionStressModule&amp;quot; [_thread_in_vm, id=28163, stack(0x0000000171d24000,0x0000000171f27000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d181210 JavaThread &amp;quot;JcmdStressModule&amp;quot; [_thread_blocked, id=27907, stack(0x0000000171f30000,0x0000000172133000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d181a10 JavaThread &amp;quot;JfrStressModule&amp;quot; [_thread_blocked, id=24835, stack(0x000000017213c000,0x000000017233f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0aa610 JavaThread &amp;quot;JniStressModule&amp;quot; [_thread_in_native, id=25347, stack(0x0000000172348000,0x000000017254b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0a9610 JavaThread &amp;quot;JstatStressModule&amp;quot; [_thread_blocked, id=27395, stack(0x0000000172554000,0x0000000172757000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0aae10 JavaThread &amp;quot;JvmtiStressModule&amp;quot; [_thread_blocked, id=25859, stack(0x0000000172760000,0x0000000172963000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d81e210 JavaThread &amp;quot;InflaterStressModule&amp;quot; [_thread_in_native, id=26115, stack(0x000000017296c000,0x0000000172b6f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d8cd010 JavaThread &amp;quot;LockDeflationStressModule&amp;quot; [_thread_blocked, id=26371, stack(0x0000000172b78000,0x0000000172d7b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0a9e10 JavaThread &amp;quot;MBeanStressModule&amp;quot; [_thread_blocked, id=43267, stack(0x0000000172d84000,0x0000000172f87000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0ab610 JavaThread &amp;quot;MemAccessStressModule&amp;quot; [_thread_in_native, id=33027, stack(0x0000000172f90000,0x0000000173193000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d183a10 JavaThread &amp;quot;MonitorStressModule&amp;quot; [_thread_blocked, id=42755, stack(0x000000017319c000,0x000000017339f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d184210 JavaThread &amp;quot;NMTStressModule&amp;quot; [_thread_blocked, id=33795, stack(0x00000001733a8000,0x00000001735ab000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d184a10 JavaThread &amp;quot;PerfmonStressModule&amp;quot; [_thread_blocked, id=42243, stack(0x00000001735b4000,0x00000001737b7000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0ac210 JavaThread &amp;quot;ReferenceStressModule&amp;quot; [_thread_blocked, id=34307, stack(0x00000001737c0000,0x00000001739c3000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0aca10 JavaThread &amp;quot;SpecJbb2005StressModule&amp;quot; [_thread_blocked, id=34563, stack(0x00000001739cc000,0x0000000173bcf000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0ad610 JavaThread &amp;quot;SpecJvm2008BatchStressModule&amp;quot; [_thread_blocked, id=35075, stack(0x0000000173bd8000,0x0000000173ddb000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d0ae210 JavaThread &amp;quot;ThreadDumperStressModule&amp;quot; [_thread_blocked, id=41731, stack(0x0000000173de4000,0x0000000173fe7000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d187410 JavaThread &amp;quot;Jvmti-AgentSampler&amp;quot; daemon [_thread_in_native, id=41475, stack(0x0000000173ff0000,0x00000001741f3000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x0000000126809a10 JavaThread &amp;quot;pool-1-thread-1&amp;quot; [_thread_blocked, id=39171, stack(0x000000017525c000,0x000000017545f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000012d823810 JavaThread &amp;quot;pool-1-thread-2&amp;quot; [_thread_blocked, id=38915, stack(0x0000000175468000,0x000000017566b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d00c810 JavaThread &amp;quot;pool-1-thread-3&amp;quot; [_thread_blocked, id=38403, stack(0x0000000175674000,0x0000000175877000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d941e10 JavaThread &amp;quot;pool-1-thread-4&amp;quot; [_thread_blocked, id=65283, stack(0x0000000175880000,0x0000000175a83000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x0000000126841610 JavaThread &amp;quot;JFR Recorder Thread&amp;quot; daemon [_thread_in_native, id=63491, stack(0x00000001762bc000,0x00000001764bf000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000012d032010 JavaThread &amp;quot;VirtualThread-unparker&amp;quot; daemon [_thread_blocked, id=61699, stack(0x0000000177734000,0x0000000177937000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d340210 JavaThread &amp;quot;JFR Periodic Tasks&amp;quot; daemon [_thread_blocked, id=61187, stack(0x0000000177940000,0x0000000177b43000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014d715c10 JavaThread &amp;quot;Java2D Disposer&amp;quot; daemon [_thread_blocked, id=59411, stack(0x0000000171700000,0x0000000171903000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000012d55ca10 JavaThread &amp;quot;JFR Event Stream 19&amp;quot; [_thread_blocked, id=50287, stack(0x0000000291688000,0x000000029188b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x0000000139871210 JavaThread &amp;quot;Thread-67551&amp;quot; [_thread_blocked, id=45627, stack(0x0000000175c98000,0x0000000175e9b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x0000000139998010 JavaThread &amp;quot;Thread-67552&amp;quot; [_thread_blocked, id=58679, stack(0x0000000175ea4000,0x00000001760a7000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013f61aa10 JavaThread &amp;quot;Program Runner for xml.transform&amp;quot; [_thread_blocked, id=45391, stack(0x00000001741fc000,0x00000001743ff000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x0000000138407a10 JavaThread &amp;quot;BenchmarkThread xml.transform 1&amp;quot; [_thread_in_vm, id=48931, stack(0x0000000176cf8000,0x0000000176efb000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x0000000126d8ac10 JavaThread &amp;quot;BenchmarkThread xml.transform 2&amp;quot; [_thread_in_Java, id=63239, stack(0x0000000176f04000,0x0000000177107000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000012db62a10 JavaThread &amp;quot;pool-184-thread-1&amp;quot; [_thread_blocked, id=56771, stack(0x00000001768e0000,0x0000000176ae3000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x0000000138511e10 JavaThread &amp;quot;ForkJoinPool-1-worker-729&amp;quot; daemon [_thread_blocked, id=62991, stack(0x0000000176aec000,0x0000000176cef000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013f32ba10 JavaThread &amp;quot;ForkJoinPool-1-worker-730&amp;quot; daemon [_thread_in_Java, id=28951, stack(0x0000000177110000,0x0000000177313000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000012684c610 JavaThread &amp;quot;ForkJoinPool-1-worker-731&amp;quot; daemon [_thread_in_vm, id=49339, stack(0x000000017731c000,0x000000017751f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x00000001397dd610 JavaThread &amp;quot;ForkJoinPool-1-worker-732&amp;quot; daemon [_thread_blocked, id=53203, stack(0x0000000177528000,0x000000017772b000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000012db74410 JavaThread &amp;quot;ForkJoinPool-1-worker-733&amp;quot; daemon [_thread_blocked, id=46499, stack(0x0000000177b4c000,0x0000000177d4f000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x00000001268ec010 JavaThread &amp;quot;ForkJoinPool-1-worker-734&amp;quot; daemon [_thread_in_Java, id=62127, stack(0x0000000290004000,0x0000000290207000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013f614a10 JavaThread &amp;quot;ForkJoinPool-1-worker-735&amp;quot; daemon [_thread_in_vm, id=57095, stack(0x0000000290210000,0x0000000290413000)]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000012dad2610 JavaThread &amp;quot;ForkJoinPool-1-worker-736&amp;quot; daemon [_thread_in_vm, id=46975, stack(0x000000029041c000,0x000000029061f000)]&lt;br/&gt;
&lt;br/&gt;
Other Threads:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e10f510 VMThread &amp;quot;VM Thread&amp;quot; [stack: 0x000000016fde4000,0x000000016ffe7000] [id=19715]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e115190 WatcherThread &amp;quot;VM Periodic Task Thread&amp;quot; [stack: 0x00000001714f4000,0x00000001716f7000] [id=29699]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e106e10 WorkerThread &amp;quot;GC Thread#0&amp;quot; [stack: 0x000000016f3a8000,0x000000016f5ab000] [id=12803]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e00e8b0 WorkerThread &amp;quot;GC Thread#1&amp;quot; [stack: 0x0000000174408000,0x000000017460b000] [id=36099]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e00edb0 WorkerThread &amp;quot;GC Thread#2&amp;quot; [stack: 0x0000000174614000,0x0000000174817000] [id=36355]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e123f50 WorkerThread &amp;quot;GC Thread#3&amp;quot; [stack: 0x0000000174820000,0x0000000174a23000] [id=36611]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e124560 WorkerThread &amp;quot;GC Thread#4&amp;quot; [stack: 0x0000000174a2c000,0x0000000174c2f000] [id=40195]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e124b70 WorkerThread &amp;quot;GC Thread#5&amp;quot; [stack: 0x0000000174c38000,0x0000000174e3b000] [id=39683]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e125180 WorkerThread &amp;quot;GC Thread#6&amp;quot; [stack: 0x0000000174e44000,0x0000000175047000] [id=37379]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e125790 WorkerThread &amp;quot;GC Thread#7&amp;quot; [stack: 0x0000000175050000,0x0000000175253000] [id=39427]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e107670 ConcurrentGCThread &amp;quot;G1 Main Marker&amp;quot; [stack: 0x000000016f5b4000,0x000000016f7b7000] [id=13315]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e107c90 WorkerThread &amp;quot;G1 Conc#0&amp;quot; [stack: 0x000000016f7c0000,0x000000016f9c3000] [id=13827]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e1284d0 WorkerThread &amp;quot;G1 Conc#1&amp;quot; [stack: 0x0000000175a8c000,0x0000000175c8f000] [id=64771]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e109d20 ConcurrentGCThread &amp;quot;G1 Refine#0&amp;quot; [stack: 0x000000016f9cc000,0x000000016fbcf000] [id=16387]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013ce27b00 ConcurrentGCThread &amp;quot;G1 Refine#1&amp;quot; [stack: 0x00000001760b0000,0x00000001762b3000] [id=49687]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013d882b30 ConcurrentGCThread &amp;quot;G1 Refine#2&amp;quot; [stack: 0x00000001764c8000,0x00000001766cb000] [id=41007]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013ce60110 ConcurrentGCThread &amp;quot;G1 Refine#3&amp;quot; [stack: 0x0000000290e58000,0x000000029105b000] [id=52563]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013cffda10 ConcurrentGCThread &amp;quot;G1 Refine#4&amp;quot; [stack: 0x0000000291064000,0x0000000291267000] [id=63803]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000013ce6e270 ConcurrentGCThread &amp;quot;G1 Refine#5&amp;quot; [stack: 0x00000001766d4000,0x00000001768d7000] [id=44099]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;0x000000014e10a3b0 ConcurrentGCThread &amp;quot;G1 Service&amp;quot; [stack: 0x000000016fbd8000,0x000000016fddb000] [id=16643]&lt;br/&gt;
&lt;br/&gt;
Threads with active compile tasks:&lt;br/&gt;
C2 CompilerThread0  27686484 5257314 %     4       spec.benchmarks.xml.transform.BaseOutputStream::write @ 3 (36 bytes)&lt;br/&gt;
&lt;br/&gt;
VM state: not at safepoint (normal execution)&lt;br/&gt;
&lt;br/&gt;
VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])&lt;br/&gt;
[0x0000000103bae528] JvmtiThreadState_lock - owner thread: 0x0000000000000000&lt;br/&gt;
&lt;br/&gt;
Heap address: 0x0000000600000000, size: 8192 MB, Compressed Oops mode: Zero based, Oop shift amount: 3&lt;br/&gt;
&lt;br/&gt;
CDS archive(s) mapped at: [0x0000000800000000-0x0000000800d08000-0x0000000800d08000), size 13664256, SharedBaseAddress: 0x0000000800000000, ArchiveRelocationMode: 0.&lt;br/&gt;
Compressed class space mapped at: 0x0000000801000000-0x000000081b000000, reserved size: 436207616&lt;br/&gt;
Narrow klass base: 0x0000000800000000, Narrow klass shift: 0, Narrow klass range: 0x100000000&lt;br/&gt;
&lt;br/&gt;
GC Precious Log:&lt;br/&gt;
&amp;nbsp;CardTable entry size: 512&lt;br/&gt;
&amp;nbsp;Card Set container configuration: InlinePtr #cards 4 size 8 Array Of Cards #cards 32 size 80 Howl #buckets 8 coarsen threshold 7372 Howl Bitmap #cards 1024 size 144 coarsen threshold 921 Card regions per heap region 1 cards per card region 8192&lt;br/&gt;
&amp;nbsp;CPUs: 8 total, 8 available&lt;br/&gt;
&amp;nbsp;Memory: 16384M&lt;br/&gt;
&amp;nbsp;Large Page Support: Disabled&lt;br/&gt;
&amp;nbsp;NUMA Support: Disabled&lt;br/&gt;
&amp;nbsp;Compressed Oops: Enabled (Zero based)&lt;br/&gt;
&amp;nbsp;Heap Region Size: 4M&lt;br/&gt;
&amp;nbsp;Heap Min Capacity: 8M&lt;br/&gt;
&amp;nbsp;Heap Initial Capacity: 256M&lt;br/&gt;
&amp;nbsp;Heap Max Capacity: 8G&lt;br/&gt;
&amp;nbsp;Pre-touch: Disabled&lt;br/&gt;
&amp;nbsp;Parallel Workers: 8&lt;br/&gt;
&amp;nbsp;Concurrent Workers: 2&lt;br/&gt;
&amp;nbsp;Concurrent Refinement Workers: 8&lt;br/&gt;
&amp;nbsp;Periodic GC: Disabled&lt;br/&gt;
&lt;br/&gt;
Heap:&lt;br/&gt;
&amp;nbsp;garbage-first heap   total 7512064K, used 3246060K [0x0000000600000000, 0x0000000800000000)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;region size 4096K, 68 young (278528K), 12 survivors (49152K)&lt;br/&gt;
&amp;nbsp;Metaspace       used 42614K, committed 49664K, reserved 491520K&lt;br/&gt;
&amp;nbsp;&amp;nbsp;class space    used 3955K, committed 6400K, reserved 425984K</description>
                <environment></environment>
        <key id="5098777">JDK-8306331</key>
            <summary>assert((cnt &gt; 0.0f) &amp;&amp; (prob &gt; 0.0f)) failed: Bad frequency assignment in if</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dlong">Dean Long</assignee>
                                    <reporter username="lmesnik">Leonid Mesnik</reporter>
                        <labels>
                            <label>c2</label>
                            <label>c2-parse</label>
                            <label>oracle-triage-21</label>
                    </labels>
                <created>Tue, 18 Apr 2023 13:43:04 -0700</created>
                <updated>Thu, 4 May 2023 03:29:09 -0700</updated>
                            <resolved>Fri, 28 Apr 2023 08:51:01 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14577672" author="dukebot" created="Fri, 28 Apr 2023 08:50:58 -0700"  >Changeset: a177152f&lt;br/&gt;
Author:    Dean Long &amp;lt;&lt;a href=&apos;mailto:dlong@openjdk.org&apos;&gt;dlong@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-04-28 15:48:39 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a177152f224cdaa3ef24a90baa57f1b42c0cc220&quot;&gt;https://git.openjdk.org/jdk/commit/a177152f224cdaa3ef24a90baa57f1b42c0cc220&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14575225" author="roboduke" created="Wed, 19 Apr 2023 19:51:52 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13551&quot;&gt;https://git.openjdk.org/jdk/pull/13551&lt;/a&gt;&lt;br/&gt;
Date: 2023-04-20 02:44:00 +0000</comment>
                            <comment id="14575202" author="dlong" created="Wed, 19 Apr 2023 15:40:38 -0700"  >Besides the signed overflow problem, this code could handle saturated values better.  The BranchData and JumpData counters are stored as uint and saturate at 0xffffffff, while scale_count() counters and return value use int and saturate at 0x7fffffff.  We should be able to make a meaningful comparison between &amp;quot;taken&amp;quot; and &amp;quot;not_taken&amp;quot; paths with raw counter values up to 0xfffffffe, but the current code loses information converting to int.  Also, the current code limits the sum of taken + not_taken to &amp;lt;= 0x7fffffff even if neither value is saturated.  Finally, it seems like we should be able to compare 0 on one path to &amp;quot;saturated&amp;quot; on the other path, but again the current code doesn&amp;#39;t allow that because a raw 0xffffffff saturated value becomes negative and is rejected.</comment>
                            <comment id="14575192" author="kbarrett" created="Wed, 19 Apr 2023 14:18:22 -0700"  >I think we should not build with `-fwrapv` even for some limited scope.  That option (or equivalent) might not even be available for some compilers.&lt;br/&gt;
&lt;br/&gt;
Conversion to unsigned to perform the overflow checking is one option.&lt;br/&gt;
&lt;br/&gt;
One of the values involved (2147483647) is INT_MAX, which looks like a &amp;quot;saturated&amp;quot; value. So another option might be to change the saturation limit to something like INT_MAX/2.  Then the sum of two values that don&amp;#39;t exceed the saturation limit won&amp;#39;t exceed INT_MAX and so invoke UB. That also might make saturation clipping a little simpler.&lt;br/&gt;
</comment>
                            <comment id="14574942" author="dlong" created="Tue, 18 Apr 2023 20:05:13 -0700"  >Building with -fwrapv is a work-around.  The problem can be detected by -fsanitize=signed-integer-overflow or -fsanitize=undefined, but only if an actual overflow happens.  UBSan doesn&amp;#39;t detect potential overflow.&lt;br/&gt;
</comment>
                            <comment id="14574931" author="dlong" created="Tue, 18 Apr 2023 17:35:23 -0700"  >From the core file:&lt;br/&gt;
(int) not_taken = 2147483647&lt;br/&gt;
(int) taken = 1296570&lt;br/&gt;
&lt;br/&gt;
So according to this code:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;float sum = taken + not_taken;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;cnt = sum / FreqCountInvocations;&lt;br/&gt;
&lt;br/&gt;
&amp;quot;taken + not_taken&amp;quot; will caused a signed overflow, resulting in a negative &amp;quot;cnt&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
There is a bail-out earlier:&lt;br/&gt;
&lt;br/&gt;
1234    if (taken &amp;lt; 0 || not_taken &amp;lt; 0 || taken + not_taken &amp;lt; 40) {&lt;br/&gt;
&lt;br/&gt;
but since &amp;quot;taken + not_taken&amp;quot; is UB, the new toolchain has some freedom in what in generates:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0x103447e2c &amp;lt;+600&amp;gt;: add    w8, w22, w21&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0x103447e30 &amp;lt;+604&amp;gt;: cmp    w8, #0x27&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0x103447e34 &amp;lt;+608&amp;gt;: b.hi   0x103447e68&lt;br/&gt;
&lt;br/&gt;
(notice that &amp;quot;b.hi&amp;quot; is unsigned).&lt;br/&gt;
</comment>
                            <comment id="14574875" author="dlong" created="Tue, 18 Apr 2023 15:43:12 -0700"  >ILW = assert in debug build; new toolchain + stress test + macos arm64; no workaround = MLH = P4</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                                        </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5003107">JDK-8233144</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4297315">JDK-6988308</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5099776">JDK-8307138</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5098946">JDK-8306481</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="103482" name="hs_err_pid53696.log" size="348884" author="lmesnik" created="Tue, 18 Apr 2023 13:56:47 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i315zv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17412"><![CDATA[b21]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>