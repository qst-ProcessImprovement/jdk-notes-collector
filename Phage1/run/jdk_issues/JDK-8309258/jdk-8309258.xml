<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:09:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8309258] RISC-V: Add riscv_hwprobe syscall</title>
                <link>https://bugs.openjdk.org/browse/JDK-8309258</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>RISC-V has many extensions and it&amp;#39;s not feasible to set them correctly on the command line for users.&lt;br/&gt;
There is no instruction to get the cpu, such as cpuid on x86.&lt;br/&gt;
&lt;br/&gt;
Instead a syscall is being added:&lt;br/&gt;
&lt;a href=&quot;https://docs.kernel.org/riscv/hwprobe.html&quot;&gt;https://docs.kernel.org/riscv/hwprobe.html&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
By adding this syscall and making use of it when available we can enable the correct extensions for the user.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5102278">JDK-8309258</key>
            <summary>RISC-V: Add riscv_hwprobe syscall</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rehn">Robbin Ehn</assignee>
                                    <reporter username="rehn">Robbin Ehn</reporter>
                        <labels>
                            <label>hgupdate-sync</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21-enhancement-request</label>
                            <label>jdk21-enhancement-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oraclejdk-na</label>
                    </labels>
                <created>Thu, 1 Jun 2023 00:14:59 -0700</created>
                <updated>Tue, 9 Apr 2024 22:35:18 -0700</updated>
                            <resolved>Tue, 20 Jun 2023 08:15:37 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14664229" author="roboduke" created="Tue, 9 Apr 2024 22:35:18 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/riscv-port-jdk11u/pull/20&quot;&gt;https://git.openjdk.org/riscv-port-jdk11u/pull/20&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-10 05:19:34 +0000</comment>
                            <comment id="14623390" author="roboduke" created="Thu, 2 Nov 2023 07:04:12 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1942&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1942&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-02 13:55:06 +0000</comment>
                            <comment id="14623387" author="rehn" created="Thu, 2 Nov 2023 06:59:44 -0700"  >Fix Request (17u)&lt;br/&gt;
&lt;br/&gt;
This enhancement is important to proper detect the cpu type and capabilities when running on risc-v system.&lt;br/&gt;
Without it a user must manually enable correct features for their cpu.&lt;br/&gt;
A bit of merge to get it applied.</comment>
                            <comment id="14592196" author="roboduke" created="Tue, 27 Jun 2023 00:02:47 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21/pull/67&quot;&gt;https://git.openjdk.org/jdk21/pull/67&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-27 06:55:44 +0000</comment>
                            <comment id="14592007" author="mr" created="Mon, 26 Jun 2023 07:58:55 -0700"  >Late enhancement approved.</comment>
                            <comment id="14591282" author="rehn" created="Thu, 22 Jun 2023 01:41:58 -0700"  >Late Enhancement Request (21)&lt;br/&gt;
&lt;br/&gt;
This enhancement is important to proper detect the cpu type and capabilities when running on risc-v system.&lt;br/&gt;
Without it a user must manually enable correct features for their cpu.&lt;br/&gt;
Applies clean.&lt;br/&gt;
&lt;br/&gt;
Low risk.</comment>
                            <comment id="14590632" author="rehn" created="Tue, 20 Jun 2023 08:31:24 -0700"  >Fix Request (21u)&lt;br/&gt;
&lt;br/&gt;
This enhancement is important to proper detect the cpu type and capabilities when running on risc-v system.&lt;br/&gt;
Without it a user must manually enable correct features for their cpu.&lt;br/&gt;
Applies clean.</comment>
                            <comment id="14590630" author="dukebot" created="Tue, 20 Jun 2023 08:15:36 -0700"  >Changeset: 31b6fd77&lt;br/&gt;
Author:    Robbin Ehn &amp;lt;&lt;a href=&apos;mailto:rehn@openjdk.org&apos;&gt;rehn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-20 15:12:46 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/31b6fd775f1c4f2841d9a52ad5f275ad446ee661&quot;&gt;https://git.openjdk.org/jdk/commit/31b6fd775f1c4f2841d9a52ad5f275ad446ee661&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14588926" author="roboduke" created="Tue, 13 Jun 2023 03:09:45 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14445&quot;&gt;https://git.openjdk.org/jdk/pull/14445&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-13 09:58:24 +0000</comment>
                            <comment id="14586340" author="rehn" created="Thu, 1 Jun 2023 07:19:23 -0700"  >Hey, ok!&lt;br/&gt;
&lt;br/&gt;
FYI (v3):&lt;br/&gt;
&lt;a href=&quot;https://lists.nongnu.org/archive/html/qemu-devel/2023-06/msg01792.html&quot;&gt;https://lists.nongnu.org/archive/html/qemu-devel/2023-06/msg01792.html&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Note that syscall today is missing most things, but we can configure after vendorid (your JEDEC number) and if needed marchid/mimpid.&lt;br/&gt;
&lt;br/&gt;
So I will add vendorid specfic paths were we can enable/disable regardless of what hwprobe/elf/cpuinfo, etc.. says.</comment>
                            <comment id="14586332" author="JIRAUSER19808" created="Thu, 1 Jun 2023 07:10:14 -0700"  >Hi, we have discussed before when the riscv_hwprobe syscall was still in progress, as ~[luhenry] mentioned [1].&lt;br/&gt;
Here is already a draft pull request that detects supported RISC-V ISA extension through `cpuinfo` [2],  but it looks not as reliable as expected. &lt;br/&gt;
I am happy to see that such a syscall is ready to be used, but I don&amp;#39;t have the resource to rework my draft PR for now. It&amp;#39;s appreciated if any code from my draft PR could be reused.  &lt;br/&gt;
&lt;br/&gt;
1. &lt;a href=&quot;https://github.com/openjdk/jdk/pull/12343#issuecomment-1420371216&quot;&gt;https://github.com/openjdk/jdk/pull/12343#issuecomment-1420371216&lt;/a&gt;&lt;br/&gt;
2. &lt;a href=&quot;https://github.com/openjdk/jdk/pull/12343&quot;&gt;https://github.com/openjdk/jdk/pull/12343&lt;/a&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5104223">JDK-8310953</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5104675">JDK-8311348</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5114506">JDK-8319890</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5071550">JDK-8284196</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5109080">JDK-8315206</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119554">JDK-8324280</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5110992">JDK-8316859</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="20300"><![CDATA[riscv]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31r0b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17305"><![CDATA[b03]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>