<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:05:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8318971] Better Error Handling for Jar Tool When Processing Non-existent Files</title>
                <link>https://bugs.openjdk.org/browse/JDK-8318971</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When the jar tool is launched either to create (-c) or to update (-u) a jar file, it gets passed a list of files to include/update the jar file with. One way to pass those options is literally as part of the command. The other way is to include those file paths in a separate file and pass those files to the jar tool as the @that-other-file. The issue here affects both those variants.&lt;br/&gt;
&lt;br/&gt;
The internal implementation of the jar tool in sun/tools/jar/Main.java, uses a flag called ok to keep track of whether there was any error during the jar tool action processing. This ok flag is marked by various methods that get invoked during the jar processing.&lt;br/&gt;
&lt;br/&gt;
When -c or -u options are passed to the jar tool, the sun/tools/jar/Main.java calls an internal method expand(). This method is responsible for finalizing the files that need to be included in the jar that gets created or updated. This expand method is also responsible for marking that ok flag if there are any errors (like any file that was specified to be included/updated in the jar, is missing). Once the expand() method returns, the internal implementation detail of the jar tool will go ahead and create a temporary file. Content will be written out to this temporary file The more entries to create in the final jar being created/updated, the more time and disk space this temporary file will consume. Finally, when writing out to the temporary file is done, the ok flag is checked to see if it was flagged as failed. If ok says no errors were noticed, then the temporary file that was created will be moved as the final jar that had to be created/updated. If ok said that there were failures, then the temporary file is deleted and the final jar won&amp;#39;t get created (rightly so) nor will the final jar get updated, in case of -u option (rightly so).&lt;br/&gt;
&lt;br/&gt;
The issue here is that if the expand() method noticed that there was an error with the provided file paths, then it marks the ok flag to indicate that, but the current implementation of the jar tool just doesn&amp;#39;t check the flag and goes on to do the expensive work of creating a temporary file and that temporary file will then finally get discarded at the end. This entire process of creating the temporary file can be avoided by checking the ok flag after the expand() method returns. This will improve the whole process of creating a jar file when some of the files are missing.</description>
                <environment></environment>
        <key id="5113380">JDK-8318971</key>
            <summary>Better Error Handling for Jar Tool When Processing Non-existent Files</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wxiao">Weibing Xiao</assignee>
                                    <reporter username="shadowbug">Shadow Bug</reporter>
                        <labels>
                            <label>Internal</label>
                            <label>bugdb_35838341</label>
                            <label>hgupdate-sync</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Fri, 27 Oct 2023 04:18:17 -0700</created>
                <updated>Mon, 22 Apr 2024 01:45:20 -0700</updated>
                            <resolved>Mon, 8 Jan 2024 12:07:56 -0800</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>23</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                                                            <comments>
                            <comment id="14643441" author="roboduke" created="Wed, 24 Jan 2024 05:11:56 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2484&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2484&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-24 13:05:07 +0000</comment>
                            <comment id="14643438" author="goetz" created="Wed, 24 Jan 2024 05:02:30 -0800"  >Fix request [11u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 11.0.23-oracle.&lt;br/&gt;
Low risk. Simple change, limited to jartool.&lt;br/&gt;
Clean backport. Adapted &amp;quot;&amp;quot;&amp;quot; strings, marked clean.&lt;br/&gt;
Test passes. SAP nighlty testing passed. </comment>
                            <comment id="14641059" author="goetz" created="Wed, 17 Jan 2024 00:39:26 -0800"  >You are right. Fixed.</comment>
                            <comment id="14640232" author="sgehwolf" created="Mon, 15 Jan 2024 10:13:30 -0800"  >&amp;gt; No risk, only a test change.&lt;br/&gt;
&lt;br/&gt;
This doesn&amp;#39;t seem quite accurate. There are product code changes performing some error checking. This is fine, though.</comment>
                            <comment id="14639821" author="roboduke" created="Fri, 12 Jan 2024 05:34:36 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2122&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2122&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-12 13:28:57 +0000</comment>
                            <comment id="14639820" author="roboduke" created="Fri, 12 Jan 2024 05:28:58 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/163&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/163&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-12 13:24:02 +0000</comment>
                            <comment id="14639814" author="goetz" created="Fri, 12 Jan 2024 05:14:19 -0800"  >Fix request [17u,21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.11-oracle,21.0.3-oracle.&lt;br/&gt;
Low risk. Simple change, limited to jartool.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes.  SAP nightly testing passed.</comment>
                            <comment id="14639152" author="roboduke" created="Wed, 10 Jan 2024 09:47:38 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22/pull/56&quot;&gt;https://git.openjdk.org/jdk22/pull/56&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-10 17:42:21 +0000</comment>
                            <comment id="14639134" author="roboduke" created="Wed, 10 Jan 2024 09:06:54 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22/pull/55&quot;&gt;https://git.openjdk.org/jdk22/pull/55&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-10 17:02:03 +0000</comment>
                            <comment id="14638401" author="dukebot" created="Mon, 8 Jan 2024 20:06:58 -0800"  >Changeset: 8ae309eb&lt;br/&gt;
Author:    Weibing Xiao &amp;lt;&lt;a href=&apos;mailto:weibing.xiao@oracle.com&apos;&gt;weibing.xiao@oracle.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Jaikiran Pai &amp;lt;&lt;a href=&apos;mailto:jpai@openjdk.org&apos;&gt;jpai@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-01-09 04:04:12 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8ae309ebacd6947bbad2ef168ca13702e1cba099&quot;&gt;https://git.openjdk.org/jdk/commit/8ae309ebacd6947bbad2ef168ca13702e1cba099&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14634045" author="roboduke" created="Wed, 13 Dec 2023 10:24:05 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17088&quot;&gt;https://git.openjdk.org/jdk/pull/17088&lt;/a&gt;&lt;br/&gt;
Date: 2023-12-13 18:16:56 +0000</comment>
                            <comment id="14628110" author="roboduke" created="Tue, 21 Nov 2023 05:17:43 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16423&quot;&gt;https://git.openjdk.org/jdk/pull/16423&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-30 16:16:52 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5118455">JDK-8323325</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118457">JDK-8323327</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118458">JDK-8323328</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118750">JDK-8323592</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5118971">JDK-8323777</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119278">JDK-8324062</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5119636">JDK-8324352</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5120179">JDK-8324818</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4885994">JDK-8158295</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                                              <subtask id="5118444">JDK-8323314</subtask>
                                                              <subtask id="5127849">JDK-8331077</subtask>
                                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33ncj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17315"><![CDATA[b05]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="260"><![CDATA[jar]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>