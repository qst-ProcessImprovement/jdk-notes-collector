<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 19:20:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8307810] Consistently use LockingMode instead of UseHeavyMonitors</title>
                <link>https://bugs.openjdk.org/browse/JDK-8307810</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8291555&quot; title=&quot;Implement alternative fast-locking scheme&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8291555&quot;&gt;&lt;strike&gt;JDK-8291555&lt;/strike&gt;&lt;/a&gt; phased out UseHeavyMonitors in favor of LockingMode=0. We forgot to apply these changes to PPC and S390. Since UseHeavyMonitors implies LockingMode, but not vice versa, we now have a mismatch if JVM is started with LockingMode=0 but without UseHeavyMonitors. That leads to crashes.</description>
                <environment></environment>
        <key id="5100579">JDK-8307810</key>
            <summary>Consistently use LockingMode instead of UseHeavyMonitors</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stuefe">Thomas Stuefe</assignee>
                                    <reporter username="stuefe">Thomas Stuefe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 May 2023 03:57:20 -0700</created>
                <updated>Wed, 17 May 2023 16:51:11 -0700</updated>
                            <resolved>Wed, 10 May 2023 21:49:54 -0700</resolved>
                                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14580731" author="dukebot" created="Wed, 10 May 2023 21:49:49 -0700"  >Changeset: 984fbbbc&lt;br/&gt;
Author:    Thomas Stuefe &amp;lt;&lt;a href=&apos;mailto:stuefe@openjdk.org&apos;&gt;stuefe@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-05-11 04:47:14 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/984fbbbcabca475c3c3af7c10a843759744c1472&quot;&gt;https://git.openjdk.org/jdk/commit/984fbbbcabca475c3c3af7c10a843759744c1472&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14580602" author="mbaesken" created="Wed, 10 May 2023 09:57:12 -0700"  >The issue (crash) was triggered by the test&lt;br/&gt;
&lt;br/&gt;
runtime/CommandLine/OptionsValidation/TestOptionsWithRanges.java#id3&lt;br/&gt;
&lt;br/&gt;
(fastdebug binaries, linux ppc64le).&lt;br/&gt;
&lt;br/&gt;
#  Internal Error (/linuxppc64le/jdk-dev/src/hotspot/share/runtime/synchronizer.cpp:1518), pid=2138728, tid=2138731&lt;br/&gt;
#  assert(mark.is_neutral()) failed: invariant: header=0x00007fff8217dc08&lt;br/&gt;
#&lt;br/&gt;
# JRE version:  (21.0) (fastdebug build )&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM (fastdebug 21-internal-adhoc.openjdk.jdk-dev, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-ppc64le)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x1a794f8]  ObjectSynchronizer::inflate(Thread*, oop, ObjectSynchronizer::InflateCause) [clone .constprop.0]+0x1048&lt;br/&gt;
#&lt;br/&gt;
&lt;br/&gt;
---------------  T H R E A D  ---------------&lt;br/&gt;
&lt;br/&gt;
Current thread (0x00007fff7c0371a0):  JavaThread &amp;quot;main&amp;quot;             [_thread_in_vm, id=2138731, stack(0x00007fff81f80000,0x00007fff82180000) (2048K)]&lt;br/&gt;
&lt;br/&gt;
Stack: [0x00007fff81f80000,0x00007fff82180000],  sp=0x00007fff8217d790,  free space=2037k&lt;br/&gt;
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)&lt;br/&gt;
V  [libjvm.so+0x1a794f8]  ObjectSynchronizer::inflate(Thread*, oop, ObjectSynchronizer::InflateCause) [clone .constprop.0]+0x1048  (synchronizer.cpp:1518)&lt;br/&gt;
V  [libjvm.so+0x1a7a1a8]  ObjectSynchronizer::notifyall(Handle, JavaThread*)+0x158  (synchronizer.cpp:772)&lt;br/&gt;
V  [libjvm.so+0x113a4b0]  JVM_MonitorNotifyAll+0xe0  (jvm.cpp:639)&lt;br/&gt;
j  java.lang.Object.notifyAll()V+0 &lt;a href=&apos;mailto:java.base@21-internal&apos;&gt;java.base@21-internal&lt;/a&gt;&lt;br/&gt;
j  jdk.internal.misc.VM.initLevel(I)V+52 &lt;a href=&apos;mailto:java.base@21-internal&apos;&gt;java.base@21-internal&lt;/a&gt;&lt;br/&gt;
j  java.lang.System.initPhase1()V+185 &lt;a href=&apos;mailto:java.base@21-internal&apos;&gt;java.base@21-internal&lt;/a&gt;&lt;br/&gt;
v  ~StubRoutines::call_stub 0x00007fff6b1b084c&lt;br/&gt;
V  [libjvm.so+0xf67520]  JavaCalls::call_helper(JavaValue*, methodHandle const&amp;amp;, JavaCallArguments*, JavaThread*)+0x520  (javaCalls.cpp:415)&lt;br/&gt;
V  [libjvm.so+0x1606c0c]  os::os_exception_wrapper(void (*)(JavaValue*, methodHandle const&amp;amp;, JavaCallArguments*, JavaThread*), JavaValue*, methodHandle const&amp;amp;, JavaCallArguments*, JavaThread*)+0x3c  (os_linux.cpp:4859)&lt;br/&gt;
V  [libjvm.so+0xf69400]  JavaCalls::call_static(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x1a0  (javaCalls.cpp:329)&lt;br/&gt;
V  [libjvm.so+0xf695b4]  JavaCalls::call_static(JavaValue*, Klass*, Symbol*, Symbol*, JavaThread*)+0x64  (javaCalls.cpp:262)&lt;br/&gt;
V  [libjvm.so+0x1b0daf4]  Threads::initialize_java_lang_classes(JavaThread*, JavaThread*)+0x6f4  (threads.cpp:288)&lt;br/&gt;
V  [libjvm.so+0x1b120f0]  Threads::create_vm(JavaVMInitArgs*, bool*)+0x580  (threads.cpp:621)&lt;br/&gt;
V  [libjvm.so+0x10c36ac]  JNI_CreateJavaVM+0xcc  (jni.cpp:3571)&lt;br/&gt;
C  [libjli.so+0x5944]  JavaMain+0xd4  (java.c:1459)&lt;br/&gt;
C  [libjli.so+0xb498]  ThreadJavaMain+0x18  (java_md.c:650)&lt;br/&gt;
C  [libpthread-2.28.so+0x96a8]  start_thread+0xf8&lt;br/&gt;
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)&lt;br/&gt;
j  java.lang.Object.notifyAll()V+0 &lt;a href=&apos;mailto:java.base@21-internal&apos;&gt;java.base@21-internal&lt;/a&gt;&lt;br/&gt;
j  jdk.internal.misc.VM.initLevel(I)V+52 &lt;a href=&apos;mailto:java.base@21-internal&apos;&gt;java.base@21-internal&lt;/a&gt;&lt;br/&gt;
j  java.lang.System.initPhase1()V+185 &lt;a href=&apos;mailto:java.base@21-internal&apos;&gt;java.base@21-internal&lt;/a&gt;&lt;br/&gt;
v  ~StubRoutines::call_stub 0x00007fff6b1b084c</comment>
                            <comment id="14580494" author="roboduke" created="Wed, 10 May 2023 04:26:37 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/13900&quot;&gt;https://git.openjdk.org/jdk/pull/13900&lt;/a&gt;&lt;br/&gt;
Date: 2023-05-10 11:20:16 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5080595">JDK-8291555</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31gor:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>