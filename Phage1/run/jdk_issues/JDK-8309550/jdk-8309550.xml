<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 09:17:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8309550] jdk.jfr.internal.Utils::formatDataAmount method should gracefully handle amounts equal to Long.MIN_VALUE</title>
                <link>https://bugs.openjdk.org/browse/JDK-8309550</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The method formatDataAmount(String formatter, long amount) in jdk.jfr.internal.Utils throws a StringIndexOutOfBoundsException when amount is equal to Long.MIN_VALUE.&lt;br/&gt;
&lt;br/&gt;
A comment in the method itself warns that Long.MIN_VALUE isn&amp;#39;t properly handled since its absolute value is negative, but no explicit attempt to reject such value is ever made (e.g. throw IllegalArgumentException): instead this will cause the rest of the code to fail with the exception above.&lt;br/&gt;
&lt;br/&gt;
It is important that Long.MIN_VALUE amounts be handled correctly by this method because it is used by jdk.jfr.internal.tool.PrettyWriter which in turn in called by RecordedEvent.toString and the &amp;quot;jfr print&amp;quot; command, which therefore fail with the above exception when encountering recordings that contain events with a field typed as BYTES and a value of Long.MIN_VALUE.&lt;br/&gt;
&lt;br/&gt;
This is not a theoretical risk either, as for example every instance of jdk.YoungGenerationConfiguration captured when using ShenandoahGC (and I suspect any other non-generational GC) appear to have a maxSize field with a value of Long.MIN_VALUE.</description>
                <environment></environment>
        <key id="5102608">JDK-8309550</key>
            <summary>jdk.jfr.internal.Utils::formatDataAmount method should gracefully handle amounts equal to Long.MIN_VALUE</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fthevenet">Frederic Thevenet</assignee>
                                    <reporter username="fthevenet">Frederic Thevenet</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                    </labels>
                <created>Tue, 6 Jun 2023 08:16:16 -0700</created>
                <updated>Mon, 19 Jun 2023 06:17:12 -0700</updated>
                            <resolved>Wed, 7 Jun 2023 06:01:08 -0700</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>21</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14589345" author="fthevenet" created="Wed, 14 Jun 2023 09:44:23 -0700"  >Fix Request (17u)&lt;br/&gt;
&lt;br/&gt;
Backporting this patch prevents an unexpected StringIndexOutOfBoundsException being thrown while printing JFR events having one or more fields typed as BYTES with a value of Long.MIN_VALUE). Such events are generally presents in recordings of Shenandoah and ZGC.&lt;br/&gt;
&lt;br/&gt;
The risk is low, as change is trivial and with a narrow scope.&lt;br/&gt;
The original change also touches src/jdk.jfr/share/classes/jdk/jfr/internal/util/ValueFormatter.java but this file was introduced with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8306703&quot; title=&quot;JFR: Summary views&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8306703&quot;&gt;&lt;strike&gt;JDK-8306703&lt;/strike&gt;&lt;/a&gt; which is JDK 21+ only, so changes to it shouldn&amp;#39;t get backported.&lt;br/&gt;
&lt;br/&gt;
Backport requires follow up issue &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8309959&quot; title=&quot;JFR: Display N/A for missing data amount&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8309959&quot;&gt;&lt;strike&gt;JDK-8309959&lt;/strike&gt;&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Ran tiers1 and jdk_jfr tests.</comment>
                            <comment id="14588903" author="roboduke" created="Tue, 13 Jun 2023 01:17:16 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/1942&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/1942&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-13 08:09:57 +0000</comment>
                            <comment id="14588902" author="roboduke" created="Tue, 13 Jun 2023 01:15:08 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/1423&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/1423&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-13 08:06:51 +0000</comment>
                            <comment id="14587625" author="dukebot" created="Wed, 7 Jun 2023 06:01:07 -0700"  >Changeset: a1ab377d&lt;br/&gt;
Author:    Frederic Thevenet &amp;lt;&lt;a href=&apos;mailto:fthevenet@openjdk.org&apos;&gt;fthevenet@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Thomas Stuefe &amp;lt;&lt;a href=&apos;mailto:stuefe@openjdk.org&apos;&gt;stuefe@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-06-07 12:58:57 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a1ab377d995dce4d636b908e96bd168dc3a9f3e5&quot;&gt;https://git.openjdk.org/jdk/commit/a1ab377d995dce4d636b908e96bd168dc3a9f3e5&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14587446" author="roboduke" created="Tue, 6 Jun 2023 12:15:13 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14341&quot;&gt;https://git.openjdk.org/jdk/pull/14341&lt;/a&gt;&lt;br/&gt;
Date: 2023-06-06 19:08:11 +0000</comment>
                            <comment id="14587435" author="fthevenet" created="Tue, 6 Jun 2023 11:34:51 -0700"  >The attached file shenGC_recording.jfr can be used as a reproducer.&lt;br/&gt;
It was captured from a minimal &amp;quot;hello worlrd&amp;quot; sample with argument &amp;quot;-XX:+UseShenandoahGC&amp;quot;&lt;br/&gt;
The command &amp;quot;jfr print shenGC_recording.fr&amp;quot; using  21-ea+25-2212 results in: &lt;br/&gt;
&lt;br/&gt;
$ jfr print shenGC_recording.jfr&lt;br/&gt;
jfr print: unexpected internal error, Index -1 out of bounds for length 6&lt;br/&gt;
java.lang.StringIndexOutOfBoundsException: Index -1 out of bounds for length 6&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.String.checkIndex(String.java:4828)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.StringLatin1.charAt(StringLatin1.java:46)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.String.charAt(String.java:1555)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.Utils.formatDataAmount(Utils.java:127)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.Utils.formatBytes(Utils.java:155)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.PrettyWriter.printFormatted(PrettyWriter.java:595)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.PrettyWriter.printValue(PrettyWriter.java:357)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.PrettyWriter.printFieldValue(PrettyWriter.java:276)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.PrettyWriter.print(PrettyWriter.java:214)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.PrettyWriter.print(PrettyWriter.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.EventPrintWriter.print(EventPrintWriter.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.Print.execute(Print.java:165)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.jfr/jdk.jfr.internal.tool.Main.main(Main.java:92)</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5103523">JDK-8310312</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5103083">JDK-8309959</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="104199" name="shenGC_recording.jfr" size="106943" author="fthevenet" created="Tue, 6 Jun 2023 11:28:09 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31t1n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="374"><![CDATA[jfr]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>