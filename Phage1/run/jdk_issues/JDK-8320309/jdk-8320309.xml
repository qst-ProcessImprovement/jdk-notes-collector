<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 11:10:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8320309] AIX: pthreads created by foreign test library don&apos;t work as expected</title>
                <link>https://bugs.openjdk.org/browse/JDK-8320309</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>On AIX, the following tests are running into guarantee(result == JNI_OK) failed: Could not attach thread for upcall. JNI error code: -1&lt;br/&gt;
java/foreign/TestUpcallAsync.java&lt;br/&gt;
java/foreign/stackwalk/TestAsyncStackWalk.java#default_gc&lt;br/&gt;
&lt;br/&gt;
The following tests crash because libLinkerInvokerModule.so::procedure jumps to address 0 (or libLinkerInvokerUnnamed.so):&lt;br/&gt;
java/foreign/loaderLookup/TestLoaderLookupJNI.java&lt;br/&gt;
java/foreign/enablenativeaccess/TestEnableNativeAccessJarManifest.java&lt;br/&gt;
java/foreign/enablenativeaccess/TestEnableNativeAccess.java&lt;br/&gt;
&lt;br/&gt;
All of these tests use test/lib/native/testlib_threads.h which creates a pthread in run_in_new_thread_and_join.</description>
                <environment></environment>
        <key id="5114966">JDK-8320309</key>
            <summary>AIX: pthreads created by foreign test library don&apos;t work as expected</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="varadam">Varada M</assignee>
                                    <reporter username="mdoerr">Martin Doerr</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Fri, 17 Nov 2023 03:19:53 -0800</created>
                <updated>Thu, 27 Mar 2025 09:55:13 -0700</updated>
                            <resolved>Wed, 22 Nov 2023 05:44:33 -0800</resolved>
                                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14639723" author="clanger" created="Thu, 11 Jan 2024 23:37:00 -0800"  >Fix request (21u):&lt;br/&gt;
An AIX related fix for the testlibrary that we should have in JDK21, too. Risk is low, affects only AIX. Testing: GHA and SAP nightlies.</comment>
                            <comment id="14639720" author="roboduke" created="Thu, 11 Jan 2024 23:08:38 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/159&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/159&lt;/a&gt;&lt;br/&gt;
Date: 2024-01-12 07:02:43 +0000</comment>
                            <comment id="14628442" author="dukebot" created="Wed, 22 Nov 2023 05:44:32 -0800"  >Changeset: 8b47a149&lt;br/&gt;
Author:    Varada M &amp;lt;&lt;a href=&apos;mailto:varadam@openjdk.org&apos;&gt;varadam@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Matthias Baesken &amp;lt;&lt;a href=&apos;mailto:mbaesken@openjdk.org&apos;&gt;mbaesken@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-22 13:43:33 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8b47a14958913c70291d46afdde4e527f9bdc91a&quot;&gt;https://git.openjdk.org/jdk/commit/8b47a14958913c70291d46afdde4e527f9bdc91a&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14628365" author="roboduke" created="Wed, 22 Nov 2023 01:53:08 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16757&quot;&gt;https://git.openjdk.org/jdk/pull/16757&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-21 10:09:04 +0000</comment>
                            <comment id="14628227" author="mdoerr" created="Tue, 21 Nov 2023 11:51:47 -0800"  >&lt;a href=&quot;https://github.com/openjdk/jdk/pull/16579&quot;&gt;https://github.com/openjdk/jdk/pull/16579&lt;/a&gt; is also needed to get them passing. I&amp;#39;ve tested the 3 PRs together.</comment>
                            <comment id="14628064" author="JIRAUSER20722" created="Tue, 21 Nov 2023 02:12:50 -0800"  >[~mdoerr], After adding the pthread attributes and the changes from &lt;a href=&quot;https://github.com/openjdk/jdk/pull/16414,&quot;&gt;https://github.com/openjdk/jdk/pull/16414,&lt;/a&gt; only 3 tests are passing on AIX. These two tests still fails :&lt;br/&gt;
java/foreign/TestUpcallAsync.java&lt;br/&gt;
java/foreign/stackwalk/TestAsyncStackWalk.java&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;br/&gt;
#  SIGSEGV (0xb) at pc=0x0800000002252ac8, pid=38470134, tid=4884&lt;br/&gt;
#&lt;br/&gt;
# JRE version: OpenJDK Runtime Environment (22.0) (fastdebug build 22-internal-adhoc.hotspot.jdk-varada)&lt;br/&gt;
# Java VM: OpenJDK 64-Bit Server VM (fastdebug 22-internal-adhoc.hotspot.jdk-varada, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, aix-ppc64)&lt;br/&gt;
# Problematic frame:&lt;br/&gt;
# V  [libjvm.so+0x2252ac8]  __srterm__0@AF78_2+0x8&lt;br/&gt;
#&lt;br/&gt;
# Core dump will be written. Default location: /home/hotspot/openjdk/jdk-varada/build/aix-ppc64-server-fastdebug/test-support/jtreg_test_jdk_java_foreign_stackwalk_TestAsyncStackWalk_java/scratch/0/core or core.38470134&lt;br/&gt;
#&lt;br/&gt;
Unsupported internal testing APIs have been used.&lt;br/&gt;
&lt;br/&gt;
# An error report file with more information is saved as:&lt;br/&gt;
# /home/hotspot/openjdk/jdk-varada/build/aix-ppc64-server-fastdebug/test-support/jtreg_test_jdk_java_foreign_stackwalk_TestAsyncStackWalk_java/scratch/0/hs_err_pid38470134.log&lt;br/&gt;
#&lt;br/&gt;
# If you would like to submit a bug report, please visit:&lt;br/&gt;
#   &lt;a href=&quot;https://bugreport.java.com/bugreport/crash.jsp&quot;&gt;https://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;br/&gt;
# The crash happened outside the Java Virtual Machine in native code.&lt;br/&gt;
# See problematic frame for where to report the bug.&lt;br/&gt;
#&lt;br/&gt;
</comment>
                            <comment id="14627603" author="mdoerr" created="Mon, 20 Nov 2023 06:15:09 -0800"  >[~varadam]: Can you take a look, please? You had fixed other pthread issues. This one may be broken due to missing attributes, too.&lt;br/&gt;
Note: &lt;a href=&quot;https://github.com/openjdk/jdk/pull/16414&quot;&gt;https://github.com/openjdk/jdk/pull/16414&lt;/a&gt; is needed to run some of the tests.</comment>
                            <comment id="14627554" author="JIRAUSER20213" created="Mon, 20 Nov 2023 02:24:23 -0800"  >Assigning this to [~mdoerr] as a maintainer of AIX.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5118925">JDK-8323736</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5125035">JDK-8328861</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="18900"><![CDATA[aix]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33wqr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2492"><![CDATA[java.lang.foreign]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>