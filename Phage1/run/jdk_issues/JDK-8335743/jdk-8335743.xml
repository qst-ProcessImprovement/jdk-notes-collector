<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Tue Sep 30 13:15:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8335743] jhsdb jstack cannot print some information on the waiting thread</title>
                <link>https://bugs.openjdk.org/browse/JDK-8335743</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When producing the thread dumps with  jhsdb command in jdk21 or later, the lock information for waiting threads is missing.&lt;br/&gt;
&lt;br/&gt;
How to reproduce:&lt;br/&gt;
1. Start a Java process that has a thread which will be WAITING status due to calling Object.wait().&lt;br/&gt;
&lt;br/&gt;
```&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Object lock = new Object();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Thread t = new Thread(() -&amp;gt; {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;synchronized (lock) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;lock.wait();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} catch (InterruptedException ie) {}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}, &amp;quot;WaitThread&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;t.start();&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
2. Use jhsdb to attach to the process and print stack and locks information.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; jhsdb jstack --pid &amp;lt;PID&amp;gt;&lt;br/&gt;
&lt;br/&gt;
3. There is a difference in the lock information by jdk21 or later and by jdk17. In jdk21 and later, the line &amp;quot;waiting on ...&amp;quot; indicating the lock information of the waiting thread is not printed.&lt;br/&gt;
&lt;br/&gt;
- in jdk24&lt;br/&gt;
&lt;br/&gt;
&amp;quot;WaitThread&amp;quot; #19 prio=5 tid=0x0000029087102ae0 nid=691792 in Object.wait() [0x000000e228aff000]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;JavaThread state: _thread_blocked&lt;br/&gt;
&amp;nbsp;- java.lang.Object.wait0(long) @bci=0 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;- java.lang.Object.wait(long) @bci=11, line=374 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;- java.lang.Object.wait() @bci=2, line=348 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;- WaitTest.lambda$main$0(java.lang.Object) @bci=5, line=37 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- locked &amp;lt;0x0000000087ff8c38&amp;gt; (a java.lang.Object)&lt;br/&gt;
&amp;nbsp;- WaitTest$$Lambda+0x0000029043000a10.run() @bci=4 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;- java.lang.Thread.runWith(java.lang.Object, java.lang.Runnable) @bci=5, line=1588 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;- java.lang.Thread.run() @bci=19, line=1575 (Interpreted frame)&lt;br/&gt;
&lt;br/&gt;
- in jdk17&lt;br/&gt;
&lt;br/&gt;
&amp;quot;WaitThread&amp;quot; #13 prio=5 tid=0x00000183b1369ea0 nid=0xabec8 in Object.wait() [0x0000007943aff000]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;JavaThread state: _thread_blocked&lt;br/&gt;
&amp;nbsp;- java.lang.Object.wait(long) @bci=0 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- waiting on &amp;lt;0x0000000087ff0388&amp;gt; (a java.lang.Object)&lt;br/&gt;
&amp;nbsp;- java.lang.Object.wait() @bci=2, line=338 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;- WaitTest.lambda$main$0(java.lang.Object) @bci=5, line=37 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- locked &amp;lt;0x0000000087ff0388&amp;gt; (a java.lang.Object)&lt;br/&gt;
&amp;nbsp;- WaitTest$$Lambda$1+0x00000183b3000a00.run() @bci=4 (Interpreted frame)&lt;br/&gt;
&amp;nbsp;- java.lang.Thread.run() @bci=11, line=840 (Interpreted frame)&lt;br/&gt;
&lt;br/&gt;
This problem also occurs when you start the interactive command-line debugger with &amp;quot;jhsdb clhsdb&amp;quot; and print a thread dump with the &amp;quot;jstack&amp;quot; or &amp;quot;where&amp;quot; command. On the other hand, when using &amp;quot;jstack&amp;quot; or &amp;quot;jcmd Thread.print&amp;quot;, the lock information will be printed correctly.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5133521">JDK-8335743</key>
            <summary>jhsdb jstack cannot print some information on the waiting thread</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tkiriyama">Takuya Kiriyama</assignee>
                                    <reporter username="tkiriyama">Takuya Kiriyama</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-fix-SQE-ok-next</label>
                            <label>jdk23u-fix-request</label>
                            <label>jdk23u-fix-yes</label>
                    </labels>
                <created>Thu, 4 Jul 2024 22:54:08 -0700</created>
                <updated>Fri, 23 Aug 2024 08:38:23 -0700</updated>
                            <resolved>Wed, 10 Jul 2024 19:45:42 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14699922" author="roboduke" created="Wed, 21 Aug 2024 17:33:20 -0700"  >[jdk21u-fix-request] Approval Request from KIRIYAMA Takuya&lt;br/&gt;
This is a &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8335743&quot; title=&quot;jhsdb jstack cannot print some information on the waiting thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8335743&quot;&gt;&lt;strike&gt;JDK-8335743&lt;/strike&gt;&lt;/a&gt; backport that fixes a regression in jhsdb jstack. It is clean and validated by the tests included in the change. I also want to backport &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8336284&quot; title=&quot;Test TestClhsdbJstackLock.java/TestJhsdbJstackLock.java fails with -Xcomp after JDK-8335743&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8336284&quot;&gt;&lt;strike&gt;JDK-8336284&lt;/strike&gt;&lt;/a&gt;, which resolves the issue included in this change. (&lt;a href=&quot;https://github.com/openjdk/jdk21u-dev/pull/854&quot;&gt;https://github.com/openjdk/jdk21u-dev/pull/854&lt;/a&gt;)</comment>
                            <comment id="14696809" author="roboduke" created="Wed, 7 Aug 2024 18:04:20 -0700"  >[jdk23u-fix-request] Approval Request from KIRIYAMA Takuya&lt;br/&gt;
This is a &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8335743&quot; title=&quot;jhsdb jstack cannot print some information on the waiting thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8335743&quot;&gt;&lt;strike&gt;JDK-8335743&lt;/strike&gt;&lt;/a&gt; backport that fixes a regression in jhsdb jstack. It is clean and validated by the tests included in the change. I also want to backport &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8336284&quot; title=&quot;Test TestClhsdbJstackLock.java/TestJhsdbJstackLock.java fails with -Xcomp after JDK-8335743&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8336284&quot;&gt;&lt;strike&gt;JDK-8336284&lt;/strike&gt;&lt;/a&gt;, which resolves the issue included in this change. (&lt;a href=&quot;https://github.com/openjdk/jdk23u/pull/60&quot;&gt;https://github.com/openjdk/jdk23u/pull/60&lt;/a&gt;)</comment>
                            <comment id="14696578" author="roboduke" created="Wed, 7 Aug 2024 02:47:25 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/59&quot;&gt;https://git.openjdk.org/jdk23u/pull/59&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-07 09:41:11 +0000</comment>
                            <comment id="14691212" author="roboduke" created="Fri, 19 Jul 2024 02:08:07 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/853&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/853&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-19 09:02:41 +0000</comment>
                            <comment id="14688850" author="dukebot" created="Wed, 10 Jul 2024 19:45:41 -0700"  >Changeset: d6c6847e&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    KIRIYAMA Takuya &amp;lt;&lt;a href=&apos;mailto:kiriyama.takuya@fujitsu.com&apos;&gt;kiriyama.takuya@fujitsu.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: David Holmes &amp;lt;&lt;a href=&apos;mailto:dholmes@openjdk.org&apos;&gt;dholmes@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-07-11 02:44:12 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/d6c6847e32673d36a1958cefd1851ec9f3b1e2ad&quot;&gt;https://git.openjdk.org/jdk/commit/d6c6847e32673d36a1958cefd1851ec9f3b1e2ad&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14687361" author="roboduke" created="Fri, 5 Jul 2024 02:27:15 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20049&quot;&gt;https://git.openjdk.org/jdk/pull/20049&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-05 09:23:21 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5137119">JDK-8338683</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5137407">JDK-8338913</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5134139">JDK-8336284</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5134182">JDK-8336322</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="22711">21</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37103:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2072"><![CDATA[svc-agent]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>